{"ID":"20230724231650-j4cnpwx","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230724231650-j4cnpwx","title":"crypto-hmac","updated":"20230724231650"},"Children":[{"ID":"20230724231651-d164dhg","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724231651-d164dhg","updated":"20230724231651"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"crypto-hmac"}]},{"ID":"20230724231652-s2ifdvv","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231652-s2ifdvv","updated":"20230724231652"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"import \"crypto/hmac\"\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231653-eod2cj9","Type":"NodeParagraph","Properties":{"id":"20230724231653-eod2cj9","updated":"20230724231653"},"Children":[{"Type":"NodeText","Data":"hmac包实现了U.S. Federal Information Processing Standards Publication 198规定的HMAC（加密哈希信息认证码）。"}]},{"ID":"20230724231654-dpthh7d","Type":"NodeParagraph","Properties":{"id":"20230724231654-dpthh7d","updated":"20230724231654"},"Children":[{"Type":"NodeText","Data":"HMAC是使用key标记信息的加密hash。接收者使用相同的key逆运算来认证hash。"}]},{"ID":"20230724231655-fyt5j7h","Type":"NodeParagraph","Properties":{"id":"20230724231655-fyt5j7h","updated":"20230724231655"},"Children":[{"Type":"NodeText","Data":"出于安全目的，接收者应使用Equal函数比较认证码："}]},{"ID":"20230724231656-wt4dp1n","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231656-wt4dp1n","updated":"20230724231656"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"// 如果messageMAC是message的合法HMAC标签，函数返回真\nfunc CheckMAC(message, messageMAC, key []byte) bool {\n\tmac := hmac.New(sha256.New, key)\n\tmac.Write(message)\n\texpectedMAC := mac.Sum(nil)\n\treturn hmac.Equal(messageMAC, expectedMAC)\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231657-3nlm1bm","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231657-3nlm1bm","updated":"20230724231657"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/crypto/hmac/hmac.go?name=release#97","TextMarkTextContent":"Equal"}]},{"ID":"20230724231658-2kl3fab","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231658-2kl3fab","updated":"20230724231658"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func Equal(mac1, mac2 []byte) bool\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231659-46oqz0n","Type":"NodeParagraph","Properties":{"id":"20230724231659-46oqz0n","updated":"20230724231659"},"Children":[{"Type":"NodeText","Data":"比较两个MAC是否相同，而不会泄露对比时间信息。（以规避时间侧信道攻击：指通过计算比较时花费的时间的长短来获取密码的信息，用于密码破解）"}]},{"ID":"20230724231660-b3zhbsc","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231660-b3zhbsc","updated":"20230724231660"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/crypto/hmac/hmac.go?name=release#78","TextMarkTextContent":"New"}]},{"ID":"20230724231661-8khqfbm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231661-8khqfbm","updated":"20230724231661"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func New(h func() hash.Hash, key []byte) hash.Hash\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231662-1v9cbd9","Type":"NodeParagraph","Properties":{"id":"20230724231662-1v9cbd9","updated":"20230724231662"},"Children":[{"Type":"NodeText","Data":"New函数返回一个采用hash.Hash作为底层hash接口、key作为密钥的HMAC算法的hash接口。"}]}]}