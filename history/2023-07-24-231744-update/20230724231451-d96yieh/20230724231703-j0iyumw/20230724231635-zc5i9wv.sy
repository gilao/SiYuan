{"ID":"20230724231635-zc5i9wv","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230724231635-zc5i9wv","title":"plugin","updated":"20230724231635"},"Children":[{"ID":"20230724231636-uwm0210","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724231636-uwm0210","updated":"20230724231636"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"plugin"}]},{"ID":"20230724231637-i4k70ha","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231637-i4k70ha","updated":"20230724231637"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"import \"plugin\"\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231638-j0j1mm3","Type":"NodeParagraph","Properties":{"id":"20230724231638-j0j1mm3","updated":"20230724231638"},"Children":[{"Type":"NodeText","Data":"Package plugin implements loading and symbol resolution of Go plugins."}]},{"ID":"20230724231639-kb5qvwu","Type":"NodeParagraph","Properties":{"id":"20230724231639-kb5qvwu","updated":"20230724231639"},"Children":[{"Type":"NodeText","Data":"Currently plugins only work on Linux."}]},{"ID":"20230724231640-fghu0am","Type":"NodeParagraph","Properties":{"id":"20230724231640-fghu0am","updated":"20230724231640"},"Children":[{"Type":"NodeText","Data":"A plugin is a Go main package with exported functions and variables that has been built with:"}]},{"ID":"20230724231641-hbehrpz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231641-hbehrpz","updated":"20230724231641"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"go build -buildmode=plugin\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231642-bdlib5s","Type":"NodeParagraph","Properties":{"id":"20230724231642-bdlib5s","updated":"20230724231642"},"Children":[{"Type":"NodeText","Data":"When a plugin is first opened, the init functions of all packages not already part of the program are called. The main function is not run. A plugin is only initialized once, and cannot be closed."}]},{"ID":"20230724231643-w3wbuul","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231643-w3wbuul","updated":"20230724231643"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/plugin/plugin.go#L20","TextMarkTextContent":"Plugin"}]},{"ID":"20230724231644-3y6il3r","Type":"NodeParagraph","Properties":{"id":"20230724231644-3y6il3r","updated":"20230724231644"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/plugin/plugin.go#L20","TextMarkTextContent":"❖"}]},{"ID":"20230724231645-h1yfrl2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231645-h1yfrl2","updated":"20230724231645"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type Plugin struct {\n    // contains filtered or unexported fields\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231646-1yhipwh","Type":"NodeParagraph","Properties":{"id":"20230724231646-1yhipwh","updated":"20230724231646"},"Children":[{"Type":"NodeText","Data":"Plugin is a loaded Go plugin."}]},{"ID":"20230724231647-t3xpsl0","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231647-t3xpsl0","updated":"20230724231647"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/plugin/plugin.go#L29","TextMarkTextContent":"Open"}]},{"ID":"20230724231648-xr6kfv0","Type":"NodeParagraph","Properties":{"id":"20230724231648-xr6kfv0","updated":"20230724231648"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/plugin/plugin.go#L29","TextMarkTextContent":"❖"}]},{"ID":"20230724231649-servuo6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231649-servuo6","updated":"20230724231649"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func Open(path string) (*Plugin, error)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231650-vvpxqyh","Type":"NodeParagraph","Properties":{"id":"20230724231650-vvpxqyh","updated":"20230724231650"},"Children":[{"Type":"NodeText","Data":"Open opens a Go plugin. If a path has already been opened, then the existing *Plugin is returned. It is safe for concurrent use by multiple goroutines."}]},{"ID":"20230724231651-9rbt42n","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231651-9rbt42n","updated":"20230724231651"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Plugin) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/plugin/plugin.go#L37","TextMarkTextContent":"Lookup"}]},{"ID":"20230724231652-d0qr94d","Type":"NodeParagraph","Properties":{"id":"20230724231652-d0qr94d","updated":"20230724231652"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/plugin/plugin.go#L37","TextMarkTextContent":"❖"}]},{"ID":"20230724231653-fjculyc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231653-fjculyc","updated":"20230724231653"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (p *Plugin) Lookup(symName string) (Symbol, error)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231654-jvi67rr","Type":"NodeParagraph","Properties":{"id":"20230724231654-jvi67rr","updated":"20230724231654"},"Children":[{"Type":"NodeText","Data":"Lookup searches for a symbol named symName in plugin p. A symbol is any exported variable or function. It reports an error if the symbol is not found. It is safe for concurrent use by multiple goroutines."}]},{"ID":"20230724231655-ezssn5s","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231655-ezssn5s","updated":"20230724231655"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/plugin/plugin.go#L73","TextMarkTextContent":"Symbol"}]},{"ID":"20230724231656-agr3s19","Type":"NodeParagraph","Properties":{"id":"20230724231656-agr3s19","updated":"20230724231656"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/plugin/plugin.go#L73","TextMarkTextContent":"❖"}]},{"ID":"20230724231657-vl1pde8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231657-vl1pde8","updated":"20230724231657"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type Symbol interface{}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231658-b3p5wco","Type":"NodeParagraph","Properties":{"id":"20230724231658-b3p5wco","updated":"20230724231658"},"Children":[{"Type":"NodeText","Data":"A Symbol is a pointer to a variable or function."}]},{"ID":"20230724231659-d4vtxn8","Type":"NodeParagraph","Properties":{"id":"20230724231659-d4vtxn8","updated":"20230724231659"},"Children":[{"Type":"NodeText","Data":"For example, a plugin defined as"}]},{"ID":"20230724231660-iwngn9g","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231660-iwngn9g","updated":"20230724231660"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package main\n\n// // No C code needed.\nimport \"C\"\n\nimport \"fmt\"\n\nvar V int\n\nfunc F() { fmt.Printf(\"Hello, number %d\\n\", V) }\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231661-3wu3r72","Type":"NodeParagraph","Properties":{"id":"20230724231661-3wu3r72","updated":"20230724231661"},"Children":[{"Type":"NodeText","Data":"may be loaded with the Open function and then the exported package symbols V and F can be accessed"}]},{"ID":"20230724231662-4xipcgu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231662-4xipcgu","updated":"20230724231662"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"p, err := plugin.Open(\"plugin_name.so\")\nif err != nil {\n\tpanic(err)\n}\nv, err := p.Lookup(\"V\")\nif err != nil {\n\tpanic(err)\n}\nf, err := p.Lookup(\"F\")\nif err != nil {\n\tpanic(err)\n}\n*v.(*int) = 7\nf.(func())() // prints \"Hello, number 7\"\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]}]}