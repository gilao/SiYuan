{"ID":"20230724231631-6zkaqqr","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230724231631-6zkaqqr","title":"net-http-pprof","updated":"20230724231631"},"Children":[{"ID":"20230724231632-3o31dk2","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724231632-3o31dk2","updated":"20230724231632"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"net-http-pprof"}]},{"ID":"20230724231633-ciwl0ja","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231633-ciwl0ja","updated":"20230724231633"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"import \"net/http/pprof\"\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231634-mdu8ncd","Type":"NodeParagraph","Properties":{"id":"20230724231634-mdu8ncd","updated":"20230724231634"},"Children":[{"Type":"NodeText","Data":"pprof包通过它的HTTP服务端提供pprof可视化工具期望格式的运行时剖面文件数据服务。关于pprof的更多信息，参见http://code.google.com/p/google-perftools/。"}]},{"ID":"20230724231635-sml0sd7","Type":"NodeParagraph","Properties":{"id":"20230724231635-sml0sd7","updated":"20230724231635"},"Children":[{"Type":"NodeText","Data":"本包一般只需导入获取其注册HTTP处理器的副作用。处理器的路径以/debug/pprof/开始。"}]},{"ID":"20230724231636-zmlq5mr","Type":"NodeParagraph","Properties":{"id":"20230724231636-zmlq5mr","updated":"20230724231636"},"Children":[{"Type":"NodeText","Data":"要使用pprof，在你的程序里导入本包："}]},{"ID":"20230724231637-5svedwo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231637-5svedwo","updated":"20230724231637"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"import _ \"net/http/pprof\"\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231638-gpbghjs","Type":"NodeParagraph","Properties":{"id":"20230724231638-gpbghjs","updated":"20230724231638"},"Children":[{"Type":"NodeText","Data":"如果你的应用还没有运行http服务器，你需要开始一个http服务器。添加\"net/http\"包和\"log\"包到你的导入列表，然后在main函数开始处添加如下代码："}]},{"ID":"20230724231639-423ns0f","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231639-423ns0f","updated":"20230724231639"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"go func() {\n\tlog.Println(http.ListenAndServe(\"localhost:6060\", nil))\n}()\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231640-szv51kp","Type":"NodeParagraph","Properties":{"id":"20230724231640-szv51kp","updated":"20230724231640"},"Children":[{"Type":"NodeText","Data":"然后使用pprof工具查看堆剖面："}]},{"ID":"20230724231641-qoik7wk","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231641-qoik7wk","updated":"20230724231641"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"go tool pprof http://localhost:6060/debug/pprof/heap\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231642-teyph5n","Type":"NodeParagraph","Properties":{"id":"20230724231642-teyph5n","updated":"20230724231642"},"Children":[{"Type":"NodeText","Data":"或查看周期30秒的CPU剖面："}]},{"ID":"20230724231643-cdxmm4u","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231643-cdxmm4u","updated":"20230724231643"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"go tool pprof http://localhost:6060/debug/pprof/profile\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231644-2zjje7y","Type":"NodeParagraph","Properties":{"id":"20230724231644-2zjje7y","updated":"20230724231644"},"Children":[{"Type":"NodeText","Data":"或查看go程阻塞剖面："}]},{"ID":"20230724231645-j3jmt01","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231645-j3jmt01","updated":"20230724231645"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"go tool pprof http://localhost:6060/debug/pprof/block\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231646-cbdtgqu","Type":"NodeParagraph","Properties":{"id":"20230724231646-cbdtgqu","updated":"20230724231646"},"Children":[{"Type":"NodeText","Data":"要查看所有可用的剖面，在你的浏览器阅读http://localhost:6060/debug/pprof/。要学习这些运转的设施，访问："}]},{"ID":"20230724231647-4pqfw1u","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231647-4pqfw1u","updated":"20230724231647"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"http://blog.golang.org/2011/06/profiling-go-programs.html\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231648-609zp8a","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231648-609zp8a","updated":"20230724231648"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/net/http/pprof/pprof.go?name=release#150","TextMarkTextContent":"Handler"}]},{"ID":"20230724231649-66quhgf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231649-66quhgf","updated":"20230724231649"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func Handler(name string) http.Handler\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231650-obpk23r","Type":"NodeParagraph","Properties":{"id":"20230724231650-obpk23r","updated":"20230724231650"},"Children":[{"Type":"NodeText","Data":"Handler返回一个提供name指定的剖面文件的服务的HTTP处理器。"}]},{"ID":"20230724231651-g14a9so","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231651-g14a9so","updated":"20230724231651"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/net/http/pprof/pprof.go?name=release#72","TextMarkTextContent":"Cmdline"}]},{"ID":"20230724231652-9il8f37","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231652-9il8f37","updated":"20230724231652"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func Cmdline(w http.ResponseWriter, r *http.Request)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231653-99tszb8","Type":"NodeParagraph","Properties":{"id":"20230724231653-99tszb8","updated":"20230724231653"},"Children":[{"Type":"NodeText","Data":"Cmdline回应执行中程序的命令行，采用NUL字节分隔的参数。本包将它注册在/debug/pprof/cmdline。"}]},{"ID":"20230724231654-tlmbsro","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231654-tlmbsro","updated":"20230724231654"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/net/http/pprof/pprof.go?name=release#173","TextMarkTextContent":"Index"}]},{"ID":"20230724231655-0rc2omy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231655-0rc2omy","updated":"20230724231655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func Index(w http.ResponseWriter, r *http.Request)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231656-bzx9q37","Type":"NodeParagraph","Properties":{"id":"20230724231656-bzx9q37","updated":"20230724231656"},"Children":[{"Type":"NodeText","Data":"Index回复请求要求的pprof格式的剖面。例如，\"/debug/pprof/heap\"会回复\"heap\"剖面。Index会回复\"/debug/pprof/\" 请求一个列出所有可用的剖面的HTML页面。"}]},{"ID":"20230724231657-8os443e","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231657-8os443e","updated":"20230724231657"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/net/http/pprof/pprof.go?name=release#79","TextMarkTextContent":"Profile"}]},{"ID":"20230724231658-gyji1dt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231658-gyji1dt","updated":"20230724231658"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func Profile(w http.ResponseWriter, r *http.Request)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231659-163h89z","Type":"NodeParagraph","Properties":{"id":"20230724231659-163h89z","updated":"20230724231659"},"Children":[{"Type":"NodeText","Data":"Profile回复pprof格式的CPU剖面。本包将它注册在/debug/pprof/profile。"}]},{"ID":"20230724231660-tqu0j4m","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231660-tqu0j4m","updated":"20230724231660"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/net/http/pprof/pprof.go?name=release#104","TextMarkTextContent":"Symbol"}]},{"ID":"20230724231661-d3k0awg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231661-d3k0awg","updated":"20230724231661"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func Symbol(w http.ResponseWriter, r *http.Request)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231662-nk0nhji","Type":"NodeParagraph","Properties":{"id":"20230724231662-nk0nhji","updated":"20230724231662"},"Children":[{"Type":"NodeText","Data":"Symbol查看请求中列出的程序计数器，回复一个映射程序计数器到函数名的表格。本包将它注册在/debug/pprof/symbol。"}]}]}