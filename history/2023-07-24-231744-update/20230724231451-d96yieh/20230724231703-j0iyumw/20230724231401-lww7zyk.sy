{"ID":"20230724231401-lww7zyk","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230724231401-lww7zyk","title":"html-template","updated":"20230724231401"},"Children":[{"ID":"20230724231402-bmj1nvp","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724231402-bmj1nvp","updated":"20230724231402"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"html-template"}]},{"ID":"20230724231403-cfrlrr7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231403-cfrlrr7","updated":"20230724231403"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"import \"html/template\"\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231404-2dskkc4","Type":"NodeParagraph","Properties":{"id":"20230724231404-2dskkc4","updated":"20230724231404"},"Children":[{"Type":"NodeText","Data":"template包（html/template）实现了数据驱动的模板，用于生成可对抗代码注入的安全HTML输出。本包提供了和text/template包相同的接口，无论何时当输出是HTML的时候都应使用本包。"}]},{"ID":"20230724231405-nwn6rod","Type":"NodeParagraph","Properties":{"id":"20230724231405-nwn6rod","updated":"20230724231405"},"Children":[{"Type":"NodeText","Data":"此处的文档关注本包的安全特性。至于如何使用模板，请参照text/template包。"}]},{"ID":"20230724231406-0zn3q6z","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231406-0zn3q6z","updated":"20230724231406"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Introduction"}]},{"ID":"20230724231407-9sygyr5","Type":"NodeParagraph","Properties":{"id":"20230724231407-9sygyr5","updated":"20230724231407"},"Children":[{"Type":"NodeText","Data":"本包是对"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"http://godoc.org/text/template","TextMarkTextContent":"text/template"},{"Type":"NodeText","Data":"包的包装，两个包提供的模板API几无差别，可以安全的随意替换两包。"}]},{"ID":"20230724231408-d2xo6fs","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231408-d2xo6fs","updated":"20230724231408"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"tmpl, err := template.New(\"name\").Parse(...)\n// 省略错误检测\nerr = tmpl.Execute(out, data)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231409-mbl9207","Type":"NodeParagraph","Properties":{"id":"20230724231409-mbl9207","updated":"20230724231409"},"Children":[{"Type":"NodeText","Data":"如果成功创建了tmpl，tmpl现在是注入安全的了。否则err将返回ErrorCode里定义的某个错误。即使成功生成了模板，执行时仍可能导致ErrorCode里定义的错误。"}]},{"ID":"20230724231410-rq0rdpu","Type":"NodeParagraph","Properties":{"id":"20230724231410-rq0rdpu","updated":"20230724231410"},"Children":[{"Type":"NodeText","Data":"HTML模板将数据视为明文文本，必须经过编码以便安全的嵌入HTML文档。转义操作会参考上下文，因此action可以出现在JavaScript、CSS、URI上下文环境里。"}]},{"ID":"20230724231411-badm4c1","Type":"NodeParagraph","Properties":{"id":"20230724231411-badm4c1","updated":"20230724231411"},"Children":[{"Type":"NodeText","Data":"本包使用的安全模型假设模板的作者是可信任的，但用于执行的数据不可信。更多细节参见下面。"}]},{"ID":"20230724231412-cacjo46","Type":"NodeParagraph","Properties":{"id":"20230724231412-cacjo46","updated":"20230724231412"},"Children":[{"Type":"NodeText","Data":"示例："}]},{"ID":"20230724231413-ubnnufc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231413-ubnnufc","updated":"20230724231413"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"import \"text/template\"\n...\nt, err := template.New(\"foo\").Parse(`{{define \"T\"}}Hello, {{.}}!{{end}}`)\nerr = t.ExecuteTemplate(out, \"T\", \"\u003cscript\u003ealert('you have been pwned')\u003c/script\u003e\")\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231414-bhia7o8","Type":"NodeParagraph","Properties":{"id":"20230724231414-bhia7o8","updated":"20230724231414"},"Children":[{"Type":"NodeText","Data":"生成："}]},{"ID":"20230724231415-ahzmd9v","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231415-ahzmd9v","updated":"20230724231415"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"Hello, \u003cscript\u003ealert('you have been pwned')\u003c/script\u003e!\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231416-gbj03tc","Type":"NodeParagraph","Properties":{"id":"20230724231416-gbj03tc","updated":"20230724231416"},"Children":[{"Type":"NodeText","Data":"但在html/template包里会根据上下文自动转义："}]},{"ID":"20230724231417-ye72rzs","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231417-ye72rzs","updated":"20230724231417"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"import \"html/template\"\n...\nt, err := template.New(\"foo\").Parse(`{{define \"T\"}}Hello, {{.}}!{{end}}`)\nerr = t.ExecuteTemplate(out, \"T\", \"\u003cscript\u003ealert('you have been pwned')\u003c/script\u003e\")\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231418-dh9d6w8","Type":"NodeParagraph","Properties":{"id":"20230724231418-dh9d6w8","updated":"20230724231418"},"Children":[{"Type":"NodeText","Data":"生成安全的转义后HTML输出："}]},{"ID":"20230724231419-d0jovqb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231419-d0jovqb","updated":"20230724231419"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"Hello, \u0026lt;script\u0026gt;alert(\u0026#39;you have been pwned\u0026#39;)\u0026lt;/script\u0026gt;!\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231420-nlrd01n","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231420-nlrd01n","updated":"20230724231420"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Contexts"}]},{"ID":"20230724231421-xv7pzia","Type":"NodeParagraph","Properties":{"id":"20230724231421-xv7pzia","updated":"20230724231421"},"Children":[{"Type":"NodeText","Data":"本包可以理解HTML、CSS、JavaScript和URI。它会给每一个简单的action pipeline都添加处理函数，如下例："}]},{"ID":"20230724231422-mzwgx5g","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231422-mzwgx5g","updated":"20230724231422"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003ca href=\"/search?q={{.}}\"\u003e{{.}}\u003c/a\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231423-068syqq","Type":"NodeParagraph","Properties":{"id":"20230724231423-068syqq","updated":"20230724231423"},"Children":[{"Type":"NodeText","Data":"在解析时每个{{.}}都会在必要时重写添加转义函数，此例中会修改为："}]},{"ID":"20230724231424-qjfkd7s","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231424-qjfkd7s","updated":"20230724231424"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003ca href=\"/search?q={{. | urlquery}}\"\u003e{{. | html}}\u003c/a\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231425-reawi2l","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231425-reawi2l","updated":"20230724231425"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Errors"}]},{"ID":"20230724231426-8f6v8f6","Type":"NodeParagraph","Properties":{"id":"20230724231426-8f6v8f6","updated":"20230724231426"},"Children":[{"Type":"NodeText","Data":"细节请参见ErrorCode类型的文档。"}]},{"ID":"20230724231427-69p0y72","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231427-69p0y72","updated":"20230724231427"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"A fuller picture"}]},{"ID":"20230724231428-5y6desl","Type":"NodeParagraph","Properties":{"id":"20230724231428-5y6desl","updated":"20230724231428"},"Children":[{"Type":"NodeText","Data":"本包剩余部分的注释第一次阅读时可以跳过；这些部分包括理解转码文本和错误信息的必要细节。多数使用者无需理解这些细节。"}]},{"ID":"20230724231429-70jawwr","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231429-70jawwr","updated":"20230724231429"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Contexts"}]},{"ID":"20230724231430-9cjzlqo","Type":"NodeParagraph","Properties":{"id":"20230724231430-9cjzlqo","updated":"20230724231430"},"Children":[{"Type":"NodeText","Data":"假设{{.}}是"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"O'Reilly: How are \u0026lt;i\u0026gt;you\u0026lt;/i\u0026gt;?"},{"Type":"NodeText","Data":"，下表展示了{{.}}用于左侧模板时的输出："}]},{"ID":"20230724231431-0whuks6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231431-0whuks6","updated":"20230724231431"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"Context                          {{.}} After\n{{.}}                            O'Reilly: How are \u0026lt;i\u0026gt;you\u0026lt;/i\u0026gt;?\n\u003ca title='{{.}}'\u003e                O\u0026#39;Reilly: How are you?\n\u003ca href=\"/{{.}}\"\u003e                O\u0026#39;Reilly: How are %3ci%3eyou%3c/i%3e?\n\u003ca href=\"?q={{.}}\"\u003e              O\u0026#39;Reilly%3a%20How%20are%3ci%3e...%3f\n\u003ca onx='f(\"{{.}}\")'\u003e             O\\x27Reilly: How are \\x3ci\\x3eyou...?\n\u003ca onx='f({{.}})'\u003e               \"O\\x27Reilly: How are \\x3ci\\x3eyou...?\"\n\u003ca onx='pattern = /{{.}}/;'\u003e     O\\x27Reilly: How are \\x3ci\\x3eyou...\\x3f\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231432-6ymg07r","Type":"NodeParagraph","Properties":{"id":"20230724231432-6ymg07r","updated":"20230724231432"},"Children":[{"Type":"NodeText","Data":"如果用在不安全的上下文里，值就可能被过滤掉："}]},{"ID":"20230724231433-3dqzpg8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231433-3dqzpg8","updated":"20230724231433"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"Context                          {{.}} After\n\u003ca href=\"{{.}}\"\u003e                 #ZgotmplZ\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231434-1ksxljj","Type":"NodeParagraph","Properties":{"id":"20230724231434-1ksxljj","updated":"20230724231434"},"Children":[{"Type":"NodeText","Data":"因为\"O'Reilly:\"不是一个可以接受的协议名，如\"http:\"。"}]},{"ID":"20230724231435-f3diu7b","Type":"NodeParagraph","Properties":{"id":"20230724231435-f3diu7b","updated":"20230724231435"},"Children":[{"Type":"NodeText","Data":"如果{{.}}是一个无害的词汇，如"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"left"},{"Type":"NodeText","Data":"，那么它就可以出现在更多地方。"}]},{"ID":"20230724231436-mjjdpwy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231436-mjjdpwy","updated":"20230724231436"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"Context                              {{.}} After\n{{.}}                                left\n\u003ca title='{{.}}'\u003e                    left\n\u003ca href='{{.}}'\u003e                     left\n\u003ca href='/{{.}}'\u003e                    left\n\u003ca href='?dir={{.}}'\u003e                left\n\u003ca style=\"border-{{.}}: 4px\"\u003e        left\n\u003ca style=\"align: {{.}}\"\u003e             left\n\u003ca style=\"background: '{{.}}'\u003e       left\n\u003ca style=\"background: url('{{.}}')\u003e  left\n\u003cstyle\u003ep.{{.}} {color:red}\u003c/style\u003e   left\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231437-nuqfvu8","Type":"NodeParagraph","Properties":{"id":"20230724231437-nuqfvu8","updated":"20230724231437"},"Children":[{"Type":"NodeText","Data":"如果{{.}}是非字符串类型的值，可以用于JavaScript上下文环境里："}]},{"ID":"20230724231438-4b4bbk7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231438-4b4bbk7","updated":"20230724231438"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"struct{A,B string}{ \"foo\", \"bar\" }\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231439-dwfv9fs","Type":"NodeParagraph","Properties":{"id":"20230724231439-dwfv9fs","updated":"20230724231439"},"Children":[{"Type":"NodeText","Data":"将该值应用在在转义后的模板里："}]},{"ID":"20230724231440-badnovp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231440-badnovp","updated":"20230724231440"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cscript\u003evar pair = {{.}};\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231441-ydbvpqe","Type":"NodeParagraph","Properties":{"id":"20230724231441-ydbvpqe","updated":"20230724231441"},"Children":[{"Type":"NodeText","Data":"模板输出为："}]},{"ID":"20230724231442-l5gmk5c","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231442-l5gmk5c","updated":"20230724231442"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cscript\u003evar pair = {\"A\": \"foo\", \"B\": \"bar\"};\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231443-7ik8las","Type":"NodeParagraph","Properties":{"id":"20230724231443-7ik8las","updated":"20230724231443"},"Children":[{"Type":"NodeText","Data":"请参见json包来理解非字符串内容是如何序列化并嵌入JavaScript里的。"}]},{"ID":"20230724231444-s9ts30j","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231444-s9ts30j","updated":"20230724231444"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Typed Strings"}]},{"ID":"20230724231445-h8zghgb","Type":"NodeParagraph","Properties":{"id":"20230724231445-h8zghgb","updated":"20230724231445"},"Children":[{"Type":"NodeText","Data":"本包默认所有的pipeline都生成明文字符串，它会在必要时添加转义pipeline阶段以安全并正确的将明文字符串嵌入输出的文本里。"}]},{"ID":"20230724231446-mmn8o5u","Type":"NodeParagraph","Properties":{"id":"20230724231446-mmn8o5u","updated":"20230724231446"},"Children":[{"Type":"NodeText","Data":"当用于执行的数据不是明文字符串时，你可以通过显式改变数据的类型以避免其被错误的转义。"}]},{"ID":"20230724231447-nzr27us","Type":"NodeParagraph","Properties":{"id":"20230724231447-nzr27us","updated":"20230724231447"},"Children":[{"Type":"NodeText","Data":"类型HTML、JS、URL和其他content.go里定义的类型可以保持不被转义的安全内容。"}]},{"ID":"20230724231448-3rarrhm","Type":"NodeParagraph","Properties":{"id":"20230724231448-3rarrhm","updated":"20230724231448"},"Children":[{"Type":"NodeText","Data":"模板："}]},{"ID":"20230724231449-yqiizfc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231449-yqiizfc","updated":"20230724231449"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"Hello, {{.}}!\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231450-gkimp0n","Type":"NodeParagraph","Properties":{"id":"20230724231450-gkimp0n","updated":"20230724231450"},"Children":[{"Type":"NodeText","Data":"可以采用如下调用："}]},{"ID":"20230724231451-xdd9cht","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231451-xdd9cht","updated":"20230724231451"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"tmpl.Execute(out, HTML(`\u003cb\u003eWorld\u003c/b\u003e`))\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231452-byp0dkw","Type":"NodeParagraph","Properties":{"id":"20230724231452-byp0dkw","updated":"20230724231452"},"Children":[{"Type":"NodeText","Data":"来输出："}]},{"ID":"20230724231453-1mkzy8u","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231453-1mkzy8u","updated":"20230724231453"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"Hello, \u003cb\u003eWorld\u003c/b\u003e!\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231454-6bz80qz","Type":"NodeParagraph","Properties":{"id":"20230724231454-6bz80qz","updated":"20230724231454"},"Children":[{"Type":"NodeText","Data":"而不是："}]},{"ID":"20230724231455-7do07n3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231455-7do07n3","updated":"20230724231455"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"Hello, \u0026lt;b\u0026gt;World\u0026lt;b\u0026gt;!\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231456-dnnxq2g","Type":"NodeParagraph","Properties":{"id":"20230724231456-dnnxq2g","updated":"20230724231456"},"Children":[{"Type":"NodeText","Data":"如果{{.}}是一个内建类型字符串就会产生该输出。"}]},{"ID":"20230724231457-vn8b823","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231457-vn8b823","updated":"20230724231457"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Security Model"}]},{"ID":"20230724231458-xwz2of4","Type":"NodeParagraph","Properties":{"id":"20230724231458-xwz2of4","updated":"20230724231458"},"Children":[{"Type":"NodeText","Data":"本包里安全的定义参加如下网页："}]},{"ID":"20230724231459-pdelnw1","Type":"NodeParagraph","Properties":{"id":"20230724231459-pdelnw1","updated":"20230724231459"},"Children":[{"Type":"NodeText","Data":"http://js-quasis-libraries-and-repl.googlecode.com/svn/trunk/safetemplate.html#problem_definition"}]},{"ID":"20230724231460-qjxre2x","Type":"NodeParagraph","Properties":{"id":"20230724231460-qjxre2x","updated":"20230724231460"},"Children":[{"Type":"NodeText","Data":"本包假设模板作者可信而执行数据不可信，目标是在保证安全性的前提下保证效率："}]},{"ID":"20230724231461-zhyd5cc","Type":"NodeParagraph","Properties":{"id":"20230724231461-zhyd5cc","updated":"20230724231461"},"Children":[{"Type":"NodeText","Data":"结构保留特性：“……当模板作者用安全的模板语言写了一个HTML标签时，不管数据的值为何浏览器都会将输出的相应部分解释为标签，该情况在其他结构里也成立，如属性边界以及JS和CSS边界。”"}]},{"ID":"20230724231462-f4d4fc5","Type":"NodeParagraph","Properties":{"id":"20230724231462-f4d4fc5","updated":"20230724231462"},"Children":[{"Type":"NodeText","Data":"代码影响特性：“……只有模板作者指定的代码能作为注入模板输出到页面的结果执行，所有模板作者指定的代码都应如此。”"}]},{"ID":"20230724231463-x08atcf","Type":"NodeParagraph","Properties":{"id":"20230724231463-x08atcf","updated":"20230724231463"},"Children":[{"Type":"NodeText","Data":"最少惊讶特性：“一个熟悉HTML、CSS、JS的开发者（或代码阅读者），应可以正确的推断出{{.}}会如何转义。"}]},{"ID":"20230724231464-6lfzsq7","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231464-6lfzsq7","updated":"20230724231464"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/error.go?name=release#24","TextMarkTextContent":"ErrorCode"}]},{"ID":"20230724231465-8hl16ec","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231465-8hl16ec","updated":"20230724231465"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type ErrorCode int\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231466-qbd7epf","Type":"NodeParagraph","Properties":{"id":"20230724231466-qbd7epf","updated":"20230724231466"},"Children":[{"Type":"NodeText","Data":"ErrorCode是代表错误种类的错误码。"}]},{"ID":"20230724231467-6d1hkez","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231467-6d1hkez","updated":"20230724231467"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"const (\n    // OK表示没有出错\n    OK  ErrorCode = iota\n    // 当上下文环境有歧义时导致ErrAmbigContext：\n    // 举例：\n    //   \u003ca href=\"{{if .C}}/path/{{else}}/search?q={{end}}{{.X}}\"\u0026rt;\n    // 说明：\n    //   {{.X}}的URL上下文环境有歧义，因为根据{{.C}}的值，\n    //   它可以是URL的后缀，或者是查询的参数。\n    //   将{{.X}}移动到如下情况可以消除歧义：\n    //   \u003ca href=\"{{if .C}}/path/{{.X}}{{else}}/search?q={{.X}}{{end}}\"\u0026rt;\n    ErrAmbigContext\n    // 期望空白、属性名、标签结束标志而没有时，标签名或无引号标签值包含非法字符时，\n    // 会导致ErrBadHTML；举例：\n    //   \u003ca href = /search?q=foo\u0026rt;\n    //   \u003chref=foo\u0026rt;\n    //   \u003cform na\u003ce=...\u0026rt;\n    //   \u003coption selected\u003c\n    // 讨论：\n    //   一般是因为HTML元素输入了错误的标签名、属性名或者未用引号的属性值，导致解析失败\n    //   将所有的属性都用引号括起来是最好的策略\n    ErrBadHTML\n    // {{if}}等分支不在相同上下文开始和结束时，导致ErrBranchEnd\n    // 示例：\n    //   {{if .C}}\u003ca href=\"{{end}}{{.X}}\n    // 讨论：\n    //   html/template包会静态的检验{{if}}、{{range}}或{{with}}的每一个分支，\n    //   以对后续的pipeline进行转义。该例出现了歧义，{{.X}}可能是HTML文本节点，\n    //   或者是HTML属性值的URL的前缀，{{.X}}的上下文环境可以确定如何转义，但该\n    //   上下文环境却是由运行时{{.C}}的值决定的，不能在编译期获知。\n    //   这种问题一般是因为缺少引号或者角括号引起的，另一些则可以通过重构将两个上下文\n    //   放进if、range、with的不同分支里来避免，如果问题出现在参数长度一定非0的\n    //   {{range}}的分支里，可以通过添加无效{{else}}分支解决。\n    ErrBranchEnd\n    // 如果以非文本上下文结束，则导致ErrEndContext\n    // 示例：\n    //   \u003cdiv\n    //   \u003cdiv title=\"no close quote\u0026rt;\n    //   \u003cscript\u003ef()\n    // 讨论：\n    //   执行模板必须生成HTML的一个文档片段，以未闭合标签结束的模板都会引发本错误。\n    //   不用在HTML上下文或者生成不完整片段的模板不应直接执行。\n    //   {{define \"main\"}} \u003cscript\u0026rt;{{template \"helper\"}}\u003c/script\u003e {{end}}\n    //   {{define \"helper\"}} document.write(' \u003cdiv title=\" ') {{end}}\n    //   模板\"helper\"不能生成合法的文档片段，所以不直接执行，用js生成。\n    ErrEndContext\n    // 调用不存在的模板时导致ErrNoSuchTemplate\n    // 示例：\n    //   {{define \"main\"}}\u003cdiv {{template \"attrs\"}}\u0026rt;{{end}}\n    //   {{define \"attrs\"}}href=\"{{.URL}}\"{{end}}\n    // 讨论：\n    //   html/template包略过模板调用计算上下文环境。\n    //   此例中，当被\"main\"模板调用时，\"attrs\"模板的{{.URL}}必须视为一个URL；\n    //   但如果解析\"main\"时，\"attrs\"还未被定义，就会导致本错误\n    ErrNoSuchTemplate\n    // 不能计算输出位置的上下文环境时，导致ErrOutputContext\n    // 示例：\n    //   {{define \"t\"}}{{if .T}}{{template \"t\" .T}}{{end}}{{.H}}\",{{end}}\n    // 讨论：\n    //   一个递归的模板，其起始和结束的上下文环境不同时；\n    //   不能计算出可信的输出位置上下文环境时，就可能导致本错误。\n    //   检查各个命名模板是否有错误；\n    //   如果模板不应在命名的起始上下文环境调用，检查在不期望上下文环境中对该模板的调用；\n    //   或者将递归模板重构为非递归模板；\n    ErrOutputContext\n    // 尚未支持JS正则表达式插入字符集\n    // 示例：\n    //     \u003cscript\u003evar pattern = /foo[{{.Chars}}]/\u003c/script\u0026rt;\n    // 讨论：\n    //   html/template不支持向JS正则表达式里插入字面值字符集\n    ErrPartialCharset\n    // 部分转义序列尚未支持\n    // 示例：\n    //   \u003cscript\u003ealert(\"\\{{.X}}\")\u003c/script\u0026rt;\n    // 讨论：\n    //   html/template包不支持紧跟在反斜杠后面的action\n    //   这一般是错误的，有更好的解决方法，例如：\n    //     \u003cscript\u003ealert(\"{{.X}}\")\u003c/script\u0026rt;\n    //   可以工作，如果{{.X}}是部分转义序列，如\"xA0\"，\n    //   可以将整个序列标记为安全文本：JSStr(`\\xA0`)\n    ErrPartialEscape\n    // range循环的重入口出错，导致ErrRangeLoopReentry\n    // 示例：\n    //   \u003cscript\u003evar x = [{{range .}}'{{.}},{{end}}]\u003c/script\u0026rt;\n    // 讨论：\n    //   如果range的迭代部分导致其结束于上一次循环的另一上下文，将不会有唯一的上下文环境\n    //   此例中，缺少一个引号，因此无法确定{{.}}是存在于一个JS字符串里，还是一个JS值文本里。\n    //   第二次迭代生成类似下面的输出：\n    //     \u003cscript\u003evar x = ['firstValue,'secondValue]\u003c/script\u0026rt;\n    ErrRangeLoopReentry\n    // 斜杠可以开始一个除法或者正则表达式\n    // 示例：\n    //   \u003cscript\u0026rt;\n    //     {{if .C}}var x = 1{{end}}\n    //     /-{{.N}}/i.test(x) ? doThis : doThat();\n    //   \u003c/script\u0026rt;\n    // 讨论：\n    //   上例可以生成`var x = 1/-2/i.test(s)...`，其中第一个斜杠作为除号；\n    //   或者它也可以生成`/-2/i.test(s)`，其中第一个斜杠生成一个正则表达式字面值\n    //   检查分支中是否缺少分号，或者使用括号来明确你的意图\n    ErrSlashAmbig\n)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231468-lvv050u","Type":"NodeParagraph","Properties":{"id":"20230724231468-lvv050u","updated":"20230724231468"},"Children":[{"Type":"NodeText","Data":"我们为转义模板时的所有错误都定义了错误码，但经过转义修正的模板仍可能在运行时出错："}]},{"ID":"20230724231469-ln48ojb","Type":"NodeParagraph","Properties":{"id":"20230724231469-ln48ojb","updated":"20230724231469"},"Children":[{"Type":"NodeText","Data":"输出\"ZgotmplZ\"的例子："}]},{"ID":"20230724231470-t0tmn16","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231470-t0tmn16","updated":"20230724231470"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cimg src=\"{{.X}}\"\u003e\n其中{{.X}}执行结果为`javascript:...`\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231471-ib9llcc","Type":"NodeParagraph","Properties":{"id":"20230724231471-ib9llcc","updated":"20230724231471"},"Children":[{"Type":"NodeText","Data":"讨论："}]},{"ID":"20230724231472-e6fs7tg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231472-e6fs7tg","updated":"20230724231472"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\"ZgotmplZ\"是一个特殊值，表示运行时在CSS或URL上下文环境生成的不安全内容。本例的输出为：\n  \u003cimg src=\"#ZgotmplZ\"\u003e\n如果数据来源可信，请转换内容类型来避免被滤除：URL(`javascript:...`)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231473-dnx6177","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231473-dnx6177","updated":"20230724231473"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/error.go?name=release#12","TextMarkTextContent":"Error"}]},{"ID":"20230724231474-79rkjad","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231474-79rkjad","updated":"20230724231474"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type Error struct {\n    // ErrorCode描述错误的种类\n    ErrorCode ErrorCode\n    // Name是发生错误的模板的名字\n    Name string\n    // Line是错误位置在模板原文中的行号或者0\n    Line int\n    // Description是供调试者阅读的错误描述\n    Description string\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231475-7ujg5y2","Type":"NodeParagraph","Properties":{"id":"20230724231475-7ujg5y2","updated":"20230724231475"},"Children":[{"Type":"NodeText","Data":"Error描述在模板转义时出现的错误。"}]},{"ID":"20230724231476-8yztpc0","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231476-8yztpc0","updated":"20230724231476"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Error) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/error.go?name=release#184","TextMarkTextContent":"Error"}]},{"ID":"20230724231477-w33q9vy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231477-w33q9vy","updated":"20230724231477"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (e *Error) Error() string\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231478-0hy9n77","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231478-0hy9n77","updated":"20230724231478"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/escape.go?name=release#780","TextMarkTextContent":"HTMLEscape"}]},{"ID":"20230724231479-4pzjlrr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231479-4pzjlrr","updated":"20230724231479"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func HTMLEscape(w io.Writer, b []byte)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231480-t5hatn5","Type":"NodeParagraph","Properties":{"id":"20230724231480-t5hatn5","updated":"20230724231480"},"Children":[{"Type":"NodeText","Data":"函数向w中写入b的HTML转义等价表示。"}]},{"ID":"20230724231481-3lkttyd","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231481-3lkttyd","updated":"20230724231481"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/escape.go?name=release#785","TextMarkTextContent":"HTMLEscapeString"}]},{"ID":"20230724231482-rzbq32q","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231482-rzbq32q","updated":"20230724231482"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func HTMLEscapeString(s string) string\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231483-ktiqf58","Type":"NodeParagraph","Properties":{"id":"20230724231483-ktiqf58","updated":"20230724231483"},"Children":[{"Type":"NodeText","Data":"返回s的HTML转义等价表示字符串。"}]},{"ID":"20230724231484-xnk0ba2","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231484-xnk0ba2","updated":"20230724231484"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/escape.go?name=release#791","TextMarkTextContent":"HTMLEscaper"}]},{"ID":"20230724231485-zsy4mxh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231485-zsy4mxh","updated":"20230724231485"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func HTMLEscaper(args ...interface{}) string\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231486-z1m9rbh","Type":"NodeParagraph","Properties":{"id":"20230724231486-z1m9rbh","updated":"20230724231486"},"Children":[{"Type":"NodeText","Data":"函数返回其所有参数文本表示的HTML转义等价表示字符串。"}]},{"ID":"20230724231487-ddsbuso","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231487-ddsbuso","updated":"20230724231487"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/escape.go?name=release#796","TextMarkTextContent":"JSEscape"}]},{"ID":"20230724231488-lo76qgp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231488-lo76qgp","updated":"20230724231488"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func JSEscape(w io.Writer, b []byte)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231489-prw8l2t","Type":"NodeParagraph","Properties":{"id":"20230724231489-prw8l2t","updated":"20230724231489"},"Children":[{"Type":"NodeText","Data":"函数向w中写入b的JavaScript转义等价表示。"}]},{"ID":"20230724231490-fpurqpw","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231490-fpurqpw","updated":"20230724231490"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/escape.go?name=release#801","TextMarkTextContent":"JSEscapeString"}]},{"ID":"20230724231491-aog2ney","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231491-aog2ney","updated":"20230724231491"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func JSEscapeString(s string) string\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231492-ej1u2ej","Type":"NodeParagraph","Properties":{"id":"20230724231492-ej1u2ej","updated":"20230724231492"},"Children":[{"Type":"NodeText","Data":"返回s的JavaScript转义等价表示字符串。"}]},{"ID":"20230724231493-z5flp5x","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231493-z5flp5x","updated":"20230724231493"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/escape.go?name=release#807","TextMarkTextContent":"JSEscaper"}]},{"ID":"20230724231494-wzdxjrv","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231494-wzdxjrv","updated":"20230724231494"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func JSEscaper(args ...interface{}) string\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231495-0izj8fh","Type":"NodeParagraph","Properties":{"id":"20230724231495-0izj8fh","updated":"20230724231495"},"Children":[{"Type":"NodeText","Data":"函数返回其所有参数文本表示的JavaScript转义等价表示字符串。"}]},{"ID":"20230724231496-6nh15jk","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231496-6nh15jk","updated":"20230724231496"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/escape.go?name=release#813","TextMarkTextContent":"URLQueryEscaper"}]},{"ID":"20230724231497-3tji8wk","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231497-3tji8wk","updated":"20230724231497"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func URLQueryEscaper(args ...interface{}) string\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231498-96oofyh","Type":"NodeParagraph","Properties":{"id":"20230724231498-96oofyh","updated":"20230724231498"},"Children":[{"Type":"NodeText","Data":"函数返回其所有参数文本表示的可以嵌入URL查询的转义等价表示字符串。"}]},{"ID":"20230724231499-99c2b3f","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231499-99c2b3f","updated":"20230724231499"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#261","TextMarkTextContent":"FuncMap"}]},{"ID":"20230724231500-suyjnt0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231500-suyjnt0","updated":"20230724231500"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type FuncMap map[string]interface{}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231501-n4bidct","Type":"NodeParagraph","Properties":{"id":"20230724231501-n4bidct","updated":"20230724231501"},"Children":[{"Type":"NodeText","Data":"FuncMap类型定义了函数名字符串到函数的映射，每个函数都必须有1到2个返回值，如果有2个则后一个必须是error接口类型；如果有2个返回值的方法返回的error非nil，模板执行会中断并返回给调用者该错误。该类型拷贝自text/template包的同名类型，因此不需要导入该包以使用该类型。"}]},{"ID":"20230724231502-nssquih","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231502-nssquih","updated":"20230724231502"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/content.go?name=release#27","TextMarkTextContent":"HTML"}]},{"ID":"20230724231503-gc8jufs","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231503-gc8jufs","updated":"20230724231503"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type HTML string\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231504-lpj75hk","Type":"NodeParagraph","Properties":{"id":"20230724231504-lpj75hk","updated":"20230724231504"},"Children":[{"Type":"NodeText","Data":"HTML用于封装一个已知安全的HTML文档片段。它不应被第三方使用，也不能用于含有未闭合的标签或注释的HTML文本。该类型适用于封装一个效果良好的HTML生成器生成的HTML文本或者本包模板的输出的文本。"}]},{"ID":"20230724231505-qfqus8l","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231505-qfqus8l","updated":"20230724231505"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/content.go?name=release#31","TextMarkTextContent":"HTMLAttr"}]},{"ID":"20230724231506-fsmx28q","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231506-fsmx28q","updated":"20230724231506"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type HTMLAttr string\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231507-iz2siof","Type":"NodeParagraph","Properties":{"id":"20230724231507-iz2siof","updated":"20230724231507"},"Children":[{"Type":"NodeText","Data":"HTMLAttr用来封装一个来源可信的HTML属性，如"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":" dir=\u0026quot;ltr\u0026quot;"},{"Type":"NodeText","Data":"。"}]},{"ID":"20230724231508-yi9x5vg","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231508-yi9x5vg","updated":"20230724231508"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/content.go?name=release#40","TextMarkTextContent":"JS"}]},{"ID":"20230724231509-gmhia83","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231509-gmhia83","updated":"20230724231509"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type JS string\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231510-xte1it2","Type":"NodeParagraph","Properties":{"id":"20230724231510-xte1it2","updated":"20230724231510"},"Children":[{"Type":"NodeText","Data":"JS用于封装一个已知安全的EcmaScript5表达式，如"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"(x + y * z())"},{"Type":"NodeText","Data":"。模板作者有责任确保封装的字符串不会破坏原有的语义，也不能包含有歧义的声明或表达式，如\"{ foo: bar() }\\n"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkTextContent":"'foo'"},{"Type":"NodeText","Data":"\"，这一句既是合法的表达式也是语义完全不同的合法程序。"}]},{"ID":"20230724231511-0xy65rl","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231511-0xy65rl","updated":"20230724231511"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/content.go?name=release#49","TextMarkTextContent":"JSStr"}]},{"ID":"20230724231512-uq6yd6d","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231512-uq6yd6d","updated":"20230724231512"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type JSStr string\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231513-4aqqfmt","Type":"NodeParagraph","Properties":{"id":"20230724231513-4aqqfmt","updated":"20230724231513"},"Children":[{"Type":"NodeText","Data":"JSStr用于封装一个打算嵌入JavaScript表达式中的字符序列，该字符串必须匹配一系列StringCharacters："}]},{"ID":"20230724231514-mk7de97","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231514-mk7de97","updated":"20230724231514"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"StringCharacter :: 除了`\\`和行终止符的SourceCharacter | EscapeSequence\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231515-5i3bha7","Type":"NodeParagraph","Properties":{"id":"20230724231515-5i3bha7","updated":"20230724231515"},"Children":[{"Type":"NodeText","Data":"注意不允许换行，JSStr(\"foo"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":"\\","Properties":{"id":""}}]},{"Type":"NodeText","Data":"nbar\")是可以的，但JSStr(\"foo"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":"\\","Properties":{"id":""}}]},{"Type":"NodeText","Data":"\\nbar\")不可以。"}]},{"ID":"20230724231516-646d7bg","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231516-646d7bg","updated":"20230724231516"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/content.go?name=release#56","TextMarkTextContent":"URL"}]},{"ID":"20230724231517-am9pid9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231517-am9pid9","updated":"20230724231517"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type URL string\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231518-caaiynv","Type":"NodeParagraph","Properties":{"id":"20230724231518-caaiynv","updated":"20230724231518"},"Children":[{"Type":"NodeText","Data":"URL用来封装一个已知安全的URL或URL子字符串（参见"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"http://tools.ietf.org/html/rfc3986","TextMarkTextContent":"RFC 3986"},{"Type":"NodeText","Data":"）"}]},{"ID":"20230724231519-msonqx8","Type":"NodeParagraph","Properties":{"id":"20230724231519-msonqx8","updated":"20230724231519"},"Children":[{"Type":"NodeText","Data":"形如"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"javascript:checkThatFormNotEditedBeforeLeavingPage()"},{"Type":"NodeText","Data":"的来源可信的URL应写进页面里，但一般动态的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"javascript:"},{"Type":"NodeText","Data":" URL排除在外（不写进页面），因为它们是频繁使用的注入向量。"}]},{"ID":"20230724231520-jbzzrp4","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231520-jbzzrp4","updated":"20230724231520"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/content.go?name=release#21","TextMarkTextContent":"CSS"}]},{"ID":"20230724231521-9mn0c8k","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231521-9mn0c8k","updated":"20230724231521"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type CSS string\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231522-o234hix","Type":"NodeParagraph","Properties":{"id":"20230724231522-o234hix","updated":"20230724231522"},"Children":[{"Type":"NodeText","Data":"CSS用于包装匹配如下任一条的已知安全的内容："}]},{"ID":"20230724231523-67f3fom","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231523-67f3fom","updated":"20230724231523"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"1. CSS3样式表，如`p { color: purple }`\n2. CSS3规则，如`a[href=~\"https:\"].foo#bar`\n3. CSS3声明，如`color: red; margin: 2px`\n4. CSS3规则，如`rgba(0, 0, 255, 127)`\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231524-vyk4lsi","Type":"NodeParagraph","Properties":{"id":"20230724231524-vyk4lsi","updated":"20230724231524"},"Children":[{"Type":"NodeText","Data":"参见：http://www.w3.org/TR/css3-syntax/#parsing"}]},{"ID":"20230724231525-tj4zoek","Type":"NodeParagraph","Properties":{"id":"20230724231525-tj4zoek","updated":"20230724231525"},"Children":[{"Type":"NodeText","Data":"以及："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://web.archive.org/web/20090211114933/http:/w3.org/TR/css3-syntax#style","TextMarkTextContent":"https://web.archive.org/web/20090211114933/http://w3.org/TR/css3-syntax#style"}]},{"ID":"20230724231526-ie8htt5","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231526-ie8htt5","updated":"20230724231526"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#19","TextMarkTextContent":"Template"}]},{"ID":"20230724231527-4hmsl49","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231527-4hmsl49","updated":"20230724231527"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type Template struct {\n    // 底层的模板解析树，会更新为HTML安全的\n    Tree *parse.Tree\n    // 内含隐藏或非导出字段\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231528-7tb5puo","Type":"NodeParagraph","Properties":{"id":"20230724231528-7tb5puo","updated":"20230724231528"},"Children":[{"Type":"NodeText","Data":"Template类型是text/template包的Template类型的特化版本，用于生成安全的HTML文本片段。"}]},{"ID":"20230724231529-11l283k","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231529-11l283k","updated":"20230724231529"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#294","TextMarkTextContent":"Must"}]},{"ID":"20230724231530-kms26wy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231530-kms26wy","updated":"20230724231530"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func Must(t *Template, err error) *Template\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231531-xhbkr1x","Type":"NodeParagraph","Properties":{"id":"20230724231531-xhbkr1x","updated":"20230724231531"},"Children":[{"Type":"NodeText","Data":"Must函数用于包装返回(*Template, error)的函数/方法调用，它会在err非nil时panic，一般用于变量初始化："}]},{"ID":"20230724231532-prnr6y9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231532-prnr6y9","updated":"20230724231532"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"var t = template.Must(template.New(\"name\").Parse(\"html\"))\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231533-aers35l","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231533-aers35l","updated":"20230724231533"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#215","TextMarkTextContent":"New"}]},{"ID":"20230724231534-yax378z","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231534-yax378z","updated":"20230724231534"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func New(name string) *Template\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231535-n4f9io0","Type":"NodeParagraph","Properties":{"id":"20230724231535-n4f9io0","updated":"20230724231535"},"Children":[{"Type":"NodeText","Data":"创建一个名为name的模板。"}]},{"ID":"20230724231536-c18nr2b","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231536-c18nr2b","updated":"20230724231536"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#305","TextMarkTextContent":"ParseFiles"}]},{"ID":"20230724231537-hj4utmk","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231537-hj4utmk","updated":"20230724231537"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func ParseFiles(filenames ...string) (*Template, error)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231538-s8upak3","Type":"NodeParagraph","Properties":{"id":"20230724231538-s8upak3","updated":"20230724231538"},"Children":[{"Type":"NodeText","Data":"ParseFiles函数创建一个模板并解析filenames指定的文件里的模板定义。返回的模板的名字是第一个文件的文件名（不含扩展名），内容为解析后的第一个文件的内容。至少要提供一个文件。如果发生错误，会停止解析并返回nil。"}]},{"ID":"20230724231539-n1i9qkc","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231539-n1i9qkc","updated":"20230724231539"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#358","TextMarkTextContent":"ParseGlob"}]},{"ID":"20230724231540-yugwdpa","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231540-yugwdpa","updated":"20230724231540"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func ParseGlob(pattern string) (*Template, error)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231541-sri7kwk","Type":"NodeParagraph","Properties":{"id":"20230724231541-sri7kwk","updated":"20230724231541"},"Children":[{"Type":"NodeText","Data":"ParseGlob创建一个模板并解析匹配pattern的文件（参见glob规则）里的模板定义。返回的模板的名字是第一个匹配的文件的文件名（不含扩展名），内容为解析后的第一个文件的内容。至少要存在一个匹配的文件。如果发生错误，会停止解析并返回nil。ParseGlob等价于使用匹配pattern的文件的列表为参数调用ParseFiles。"}]},{"ID":"20230724231542-vjmd3j6","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231542-vjmd3j6","updated":"20230724231542"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Template) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#250","TextMarkTextContent":"Name"}]},{"ID":"20230724231543-edz0b2e","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231543-edz0b2e","updated":"20230724231543"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (t *Template) Name() string\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231544-5womlc7","Type":"NodeParagraph","Properties":{"id":"20230724231544-5womlc7","updated":"20230724231544"},"Children":[{"Type":"NodeText","Data":"返回模板t的名字。"}]},{"ID":"20230724231545-kkgidnu","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231545-kkgidnu","updated":"20230724231545"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Template) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#277","TextMarkTextContent":"Delims"}]},{"ID":"20230724231546-mqgepl5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231546-mqgepl5","updated":"20230724231546"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (t *Template) Delims(left, right string) *Template\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231547-mge5t1o","Type":"NodeParagraph","Properties":{"id":"20230724231547-mge5t1o","updated":"20230724231547"},"Children":[{"Type":"NodeText","Data":"Delims方法用于设置action的分界字符串，应用于之后的Parse、ParseFiles、ParseGlob方法。嵌套模板定义会继承这种分界符设置。空字符串分界符表示相应的默认分界符：{{或}}。返回值就是t，以便进行链式调用。"}]},{"ID":"20230724231548-kqs0cdd","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231548-kqs0cdd","updated":"20230724231548"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Template) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#267","TextMarkTextContent":"Funcs"}]},{"ID":"20230724231549-13j4tws","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231549-13j4tws","updated":"20230724231549"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (t *Template) Funcs(funcMap FuncMap) *Template\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231550-eyi8b4d","Type":"NodeParagraph","Properties":{"id":"20230724231550-eyi8b4d","updated":"20230724231550"},"Children":[{"Type":"NodeText","Data":"Funcs方法向模板t的函数字典里加入参数funcMap内的键值对。如果funcMap某个键值对的值不是函数类型或者返回值不符合要求会panic。但是，可以对t函数列表的成员进行重写。方法返回t以便进行链式调用。"}]},{"ID":"20230724231551-fgpvqk0","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231551-fgpvqk0","updated":"20230724231551"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Template) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#179","TextMarkTextContent":"Clone"}]},{"ID":"20230724231552-v22ui3v","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231552-v22ui3v","updated":"20230724231552"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (t *Template) Clone() (*Template, error)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231553-5xr8j5b","Type":"NodeParagraph","Properties":{"id":"20230724231553-5xr8j5b","updated":"20230724231553"},"Children":[{"Type":"NodeText","Data":"Clone方法返回模板的一个副本，包括所有相关联的模板。模板的底层表示树并未拷贝，而是拷贝了命名空间，因此拷贝调用Parse方法不会修改原模板的命名空间。Clone方法用于准备模板的公用部分，向拷贝中加入其他关联模板后再进行使用。"}]},{"ID":"20230724231554-cpuf61s","Type":"NodeParagraph","Properties":{"id":"20230724231554-cpuf61s","updated":"20230724231554"},"Children":[{"Type":"NodeText","Data":"如果t已经执行过了，会返回错误。"}]},{"ID":"20230724231555-8v1482u","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231555-8v1482u","updated":"20230724231555"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Template) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#284","TextMarkTextContent":"Lookup"}]},{"ID":"20230724231556-k14zkxg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231556-k14zkxg","updated":"20230724231556"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (t *Template) Lookup(name string) *Template\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231557-cmnpvcx","Type":"NodeParagraph","Properties":{"id":"20230724231557-cmnpvcx","updated":"20230724231557"},"Children":[{"Type":"NodeText","Data":"Lookup方法返回与t关联的名为name的模板，如果没有这个模板会返回nil。"}]},{"ID":"20230724231558-m3zp91l","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231558-m3zp91l","updated":"20230724231558"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Template) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#38","TextMarkTextContent":"Templates"}]},{"ID":"20230724231559-pudze9x","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231559-pudze9x","updated":"20230724231559"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (t *Template) Templates() []*Template\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231560-xifeal0","Type":"NodeParagraph","Properties":{"id":"20230724231560-xifeal0","updated":"20230724231560"},"Children":[{"Type":"NodeText","Data":"Templates方法返回与t相关联的模板的切片，包括t自己。"}]},{"ID":"20230724231561-6dtk0wx","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231561-6dtk0wx","updated":"20230724231561"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Template) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#231","TextMarkTextContent":"New"}]},{"ID":"20230724231562-fdbr83q","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231562-fdbr83q","updated":"20230724231562"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (t *Template) New(name string) *Template\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231563-lhg6rfs","Type":"NodeParagraph","Properties":{"id":"20230724231563-lhg6rfs","updated":"20230724231563"},"Children":[{"Type":"NodeText","Data":"New方法创建一个和t关联的名字为name的模板并返回它。这种可以传递的关联允许一个模板使用template action调用另一个模板。"}]},{"ID":"20230724231564-n041t4r","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231564-n041t4r","updated":"20230724231564"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Template) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#151","TextMarkTextContent":"AddParseTree"}]},{"ID":"20230724231565-md2uqol","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231565-md2uqol","updated":"20230724231565"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (t *Template) AddParseTree(name string, tree *parse.Tree) (*Template, error)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231566-u7e9244","Type":"NodeParagraph","Properties":{"id":"20230724231566-u7e9244","updated":"20230724231566"},"Children":[{"Type":"NodeText","Data":"AddParseTree方法使用name和tree创建一个模板并使它和t相关联。"}]},{"ID":"20230724231567-utbiln0","Type":"NodeParagraph","Properties":{"id":"20230724231567-utbiln0","updated":"20230724231567"},"Children":[{"Type":"NodeText","Data":"如果t已经执行过了，会返回错误。"}]},{"ID":"20230724231568-r1krsl9","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231568-r1krsl9","updated":"20230724231568"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Template) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#120","TextMarkTextContent":"Parse"}]},{"ID":"20230724231569-m3lb37i","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231569-m3lb37i","updated":"20230724231569"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (t *Template) Parse(src string) (*Template, error)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231570-6exv6pr","Type":"NodeParagraph","Properties":{"id":"20230724231570-6exv6pr","updated":"20230724231570"},"Children":[{"Type":"NodeText","Data":"Parse方法将字符串text解析为模板。嵌套定义的模板会关联到最顶层的t。Parse可以多次调用，但只有第一次调用可以包含空格、注释和模板定义之外的文本。如果后面的调用在解析后仍剩余文本会引发错误、返回nil且丢弃剩余文本；如果解析得到的模板已有相关联的同名模板，会覆盖掉原模板。"}]},{"ID":"20230724231571-fy4szo8","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231571-fy4szo8","updated":"20230724231571"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Template) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#312","TextMarkTextContent":"ParseFiles"}]},{"ID":"20230724231572-f84wqas","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231572-f84wqas","updated":"20230724231572"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (t *Template) ParseFiles(filenames ...string) (*Template, error)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231573-bpe4fci","Type":"NodeParagraph","Properties":{"id":"20230724231573-bpe4fci","updated":"20230724231573"},"Children":[{"Type":"NodeText","Data":"ParseGlob方法解析filenames指定的文件里的模板定义并将解析结果与t关联。如果发生错误，会停止解析并返回nil，否则返回(t, nil)。至少要提供一个文件。"}]},{"ID":"20230724231574-m5f7x0u","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231574-m5f7x0u","updated":"20230724231574"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Template) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#367","TextMarkTextContent":"ParseGlob"}]},{"ID":"20230724231575-qe4a6h9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231575-qe4a6h9","updated":"20230724231575"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (t *Template) ParseGlob(pattern string) (*Template, error)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231576-3yf3c7z","Type":"NodeParagraph","Properties":{"id":"20230724231576-3yf3c7z","updated":"20230724231576"},"Children":[{"Type":"NodeText","Data":"ParseFiles方法解析匹配pattern的文件里的模板定义并将解析结果与t关联。如果发生错误，会停止解析并返回nil，否则返回(t, nil)。至少要存在一个匹配的文件。"}]},{"ID":"20230724231577-t5a5dki","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231577-t5a5dki","updated":"20230724231577"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Template) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#69","TextMarkTextContent":"Execute"}]},{"ID":"20230724231578-9uvteo1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231578-9uvteo1","updated":"20230724231578"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (t *Template) Execute(wr io.Writer, data interface{}) error\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231579-6e8gmem","Type":"NodeParagraph","Properties":{"id":"20230724231579-6e8gmem","updated":"20230724231579"},"Children":[{"Type":"NodeText","Data":"Execute方法将解析好的模板应用到data上，并将输出写入wr。如果执行时出现错误，会停止执行，但有可能已经写入wr部分数据。模板可以安全的并发执行。"}]},{"ID":"20230724231580-e3xj7iq","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231580-e3xj7iq","updated":"20230724231580"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Template) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/html/template/template.go?name=release#82","TextMarkTextContent":"ExecuteTemplate"}]},{"ID":"20230724231581-e6wupau","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231581-e6wupau","updated":"20230724231581"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (t *Template) ExecuteTemplate(wr io.Writer, name string, data interface{}) error\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231582-42e5jfr","Type":"NodeParagraph","Properties":{"id":"20230724231582-42e5jfr","updated":"20230724231582"},"Children":[{"Type":"NodeText","Data":"ExecuteTemplate方法类似Execute，但是使用名为name的t关联的模板产生输出。"}]}]}