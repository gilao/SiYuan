{"ID":"20230724231610-2o88vgf","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230724231610-2o88vgf","title":"compress-gzip","updated":"20230724231610"},"Children":[{"ID":"20230724231611-73696u5","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724231611-73696u5","updated":"20230724231611"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"compress-gzip"}]},{"ID":"20230724231612-wpxqsp2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231612-wpxqsp2","updated":"20230724231612"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"import \"compress/gzip\"\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231613-j9a3eg6","Type":"NodeParagraph","Properties":{"id":"20230724231613-j9a3eg6","updated":"20230724231613"},"Children":[{"Type":"NodeText","Data":"gzip包实现了gzip格式压缩文件的读写，参见"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"http://tools.ietf.org/html/rfc1952","TextMarkTextContent":"RFC 1952"},{"Type":"NodeText","Data":"。"}]},{"ID":"20230724231614-rj8quav","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231614-rj8quav","updated":"20230724231614"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Constants"}]},{"ID":"20230724231615-swqk83w","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231615-swqk83w","updated":"20230724231615"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"const (\n    NoCompression      = flate.NoCompression\n    BestSpeed          = flate.BestSpeed\n    BestCompression    = flate.BestCompression\n    DefaultCompression = flate.DefaultCompression\n)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231616-8cj50xk","Type":"NodeParagraph","Properties":{"id":"20230724231616-8cj50xk","updated":"20230724231616"},"Children":[{"Type":"NodeText","Data":"这些常量都是拷贝自flate包，因此导入\"compress/gzip\"后，就不必再导入\"compress/flate\"了。"}]},{"ID":"20230724231617-p4376ho","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231617-p4376ho","updated":"20230724231617"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Variables"}]},{"ID":"20230724231618-2qrgzt8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231618-2qrgzt8","updated":"20230724231618"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"var (\n    // 当读取的gzip数据的校验和错误时，会返回ErrChecksum\n    ErrChecksum = errors.New(\"gzip: invalid checksum\")\n    // 当读取的gzip数据的头域错误时，会返回ErrHeader\n    ErrHeader = errors.New(\"gzip: invalid header\")\n)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231619-ukkhol4","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231619-ukkhol4","updated":"20230724231619"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/compress/gzip/gunzip.go?name=release#46","TextMarkTextContent":"Header"}]},{"ID":"20230724231620-bul5if7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231620-bul5if7","updated":"20230724231620"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type Header struct {\n    Comment string    // 注释\n    Extra   []byte    // 额外数据\n    ModTime time.Time // 修改时间\n    Name    string    // 文件名\n    OS      byte      // 操作系统类型\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231621-3yjm020","Type":"NodeParagraph","Properties":{"id":"20230724231621-3yjm020","updated":"20230724231621"},"Children":[{"Type":"NodeText","Data":"gzip文件保存一个头域，提供关于被压缩的文件的一些元数据。该头域作为Writer和Reader类型的一个可导出字段，可以提供给调用者访问。"}]},{"ID":"20230724231622-5qd7xrp","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231622-5qd7xrp","updated":"20230724231622"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/compress/gzip/gunzip.go?name=release#68","TextMarkTextContent":"Reader"}]},{"ID":"20230724231623-q11ugir","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231623-q11ugir","updated":"20230724231623"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type Reader struct {\n    Header\n    // 内含隐藏或非导出字段\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231624-9ydoxwd","Type":"NodeParagraph","Properties":{"id":"20230724231624-9ydoxwd","updated":"20230724231624"},"Children":[{"Type":"NodeText","Data":"Reader类型满足io.Reader接口，可以从gzip格式压缩文件读取并解压数据。"}]},{"ID":"20230724231625-ud5lm2j","Type":"NodeParagraph","Properties":{"id":"20230724231625-ud5lm2j","updated":"20230724231625"},"Children":[{"Type":"NodeText","Data":"一般，一个gzip文件可以是多个gzip文件的串联，每一个都有自己的头域。从Reader读取数据会返回串联的每个文件的解压数据，但只有第一个文件的头域被记录在Reader的Header字段里。"}]},{"ID":"20230724231626-4smurr9","Type":"NodeParagraph","Properties":{"id":"20230724231626-4smurr9","updated":"20230724231626"},"Children":[{"Type":"NodeText","Data":"gzip文件会保存未压缩数据的长度与校验和。当读取到未压缩数据的结尾时，如果数据的长度或者校验和不正确，Reader会返回ErrCheckSum。因此，调用者应该将Read方法返回的数据视为暂定的，直到他们在数据结尾获得了一个io.EOF。"}]},{"ID":"20230724231627-7ti5ymc","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231627-7ti5ymc","updated":"20230724231627"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/compress/gzip/gunzip.go?name=release#82","TextMarkTextContent":"NewReader"}]},{"ID":"20230724231628-wvqe867","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231628-wvqe867","updated":"20230724231628"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func NewReader(r io.Reader) (*Reader, error)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231629-bg7jvhp","Type":"NodeParagraph","Properties":{"id":"20230724231629-bg7jvhp","updated":"20230724231629"},"Children":[{"Type":"NodeText","Data":"NewReader返回一个从r读取并解压数据的*Reader。其实现会缓冲输入流的数据，并可能从r中读取比需要的更多的数据。调用者有责任在读取完毕后调用返回值的Close方法。"}]},{"ID":"20230724231630-wbi91iy","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231630-wbi91iy","updated":"20230724231630"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Reader) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/compress/gzip/gunzip.go?name=release#95","TextMarkTextContent":"Reset"}]},{"ID":"20230724231631-r1hs0qp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231631-r1hs0qp","updated":"20230724231631"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (z *Reader) Reset(r io.Reader) error\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231632-14bfbhd","Type":"NodeParagraph","Properties":{"id":"20230724231632-14bfbhd","updated":"20230724231632"},"Children":[{"Type":"NodeText","Data":"Reset将z重置，丢弃当前的读取状态，并将下层读取目标设为r。效果上等价于将z设为使用r重新调用NewReader返回的Reader。这让我们可以重用z而不是再申请一个新的。（因此效率更高）"}]},{"ID":"20230724231633-uoq7b8u","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231633-uoq7b8u","updated":"20230724231633"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Reader) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/compress/gzip/gunzip.go?name=release#214","TextMarkTextContent":"Read"}]},{"ID":"20230724231634-xbdg6vt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231634-xbdg6vt","updated":"20230724231634"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (z *Reader) Read(p []byte) (n int, err error)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231635-mqzrfcr","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231635-mqzrfcr","updated":"20230724231635"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Reader) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/compress/gzip/gunzip.go?name=release#255","TextMarkTextContent":"Close"}]},{"ID":"20230724231636-jus5046","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231636-jus5046","updated":"20230724231636"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (z *Reader) Close() error\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231637-f2iv6di","Type":"NodeParagraph","Properties":{"id":"20230724231637-f2iv6di","updated":"20230724231637"},"Children":[{"Type":"NodeText","Data":"调用Close会关闭z，但不会关闭下层io.Reader接口。"}]},{"ID":"20230724231638-wlaprog","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231638-wlaprog","updated":"20230724231638"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/compress/gzip/gzip.go?name=release#27","TextMarkTextContent":"Writer"}]},{"ID":"20230724231639-nipnjzx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231639-nipnjzx","updated":"20230724231639"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type Writer struct {\n    Header\n    // 内含隐藏或非导出字段\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231640-adoku0n","Type":"NodeParagraph","Properties":{"id":"20230724231640-adoku0n","updated":"20230724231640"},"Children":[{"Type":"NodeText","Data":"Writer满足io.WriteCloser接口。它会将提供给它的数据压缩后写入下层io.Writer接口。"}]},{"ID":"20230724231641-hyryold","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231641-hyryold","updated":"20230724231641"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/compress/gzip/gzip.go?name=release#51","TextMarkTextContent":"NewWriter"}]},{"ID":"20230724231642-xhkmtzg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231642-xhkmtzg","updated":"20230724231642"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func NewWriter(w io.Writer) *Writer\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231643-grzto7n","Type":"NodeParagraph","Properties":{"id":"20230724231643-grzto7n","updated":"20230724231643"},"Children":[{"Type":"NodeText","Data":"NewWriter创建并返回一个Writer。写入返回值的数据都会在压缩后写入w。调用者有责任在结束写入后调用返回值的Close方法。因为写入的数据可能保存在缓冲中没有刷新入下层。"}]},{"ID":"20230724231644-0i0i084","Type":"NodeParagraph","Properties":{"id":"20230724231644-0i0i084","updated":"20230724231644"},"Children":[{"Type":"NodeText","Data":"如要设定Writer.Header字段，调用者必须在第一次调用Write方法或者Close方法之前设置。Header字段的Comment和Name字段是go的utf-8字符串，但下层格式要求为NUL中止的ISO 8859-1 (Latin-1)序列。如果这两个字段的字符串包含NUL或非Latin-1字符，将导致Write方法返回错误。"}]},{"ID":"20230724231645-nknj37h","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231645-nknj37h","updated":"20230724231645"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/compress/gzip/gzip.go?name=release#62","TextMarkTextContent":"NewWriterLevel"}]},{"ID":"20230724231646-tvgsd4r","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231646-tvgsd4r","updated":"20230724231646"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func NewWriterLevel(w io.Writer, level int) (*Writer, error)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231647-e7pupjz","Type":"NodeParagraph","Properties":{"id":"20230724231647-e7pupjz","updated":"20230724231647"},"Children":[{"Type":"NodeText","Data":"NewWriterLevel类似NewWriter但指定了压缩水平而不是采用默认的DefaultCompression。"}]},{"ID":"20230724231648-5wxfxbl","Type":"NodeParagraph","Properties":{"id":"20230724231648-5wxfxbl","updated":"20230724231648"},"Children":[{"Type":"NodeText","Data":"参数level可以是DefaultCompression、NoCompression或BestSpeed与BestCompression之间包括二者的任何整数。如果level合法，返回的错误值为nil。"}]},{"ID":"20230724231649-fgvyy0c","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231649-fgvyy0c","updated":"20230724231649"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Writer) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/compress/gzip/gzip.go?name=release#97","TextMarkTextContent":"Reset"}]},{"ID":"20230724231650-unyo4e2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231650-unyo4e2","updated":"20230724231650"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (z *Writer) Reset(w io.Writer)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231651-dnw73pr","Type":"NodeParagraph","Properties":{"id":"20230724231651-dnw73pr","updated":"20230724231651"},"Children":[{"Type":"NodeText","Data":"Reset将z重置，丢弃当前的写入状态，并将下层输出目标设为dst。效果上等价于将w设为使用dst和w的压缩水平重新调用NewWriterLevel返回的*Writer。这让我们可以重用z而不是再申请一个新的。（因此效率更高）"}]},{"ID":"20230724231652-pxrs16y","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231652-pxrs16y","updated":"20230724231652"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Writer) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/compress/gzip/gzip.go?name=release#161","TextMarkTextContent":"Write"}]},{"ID":"20230724231653-ghbt0bb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231653-ghbt0bb","updated":"20230724231653"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (z *Writer) Write(p []byte) (int, error)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231654-h5wr1ek","Type":"NodeParagraph","Properties":{"id":"20230724231654-h5wr1ek","updated":"20230724231654"},"Children":[{"Type":"NodeText","Data":"Write将p压缩后写入下层io.Writer接口。压缩后的数据不一定会立刻刷新，除非Writer被关闭或者显式的刷新。"}]},{"ID":"20230724231655-bvooq70","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231655-bvooq70","updated":"20230724231655"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Writer) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/compress/gzip/gzip.go?name=release#231","TextMarkTextContent":"Flush"}]},{"ID":"20230724231656-47rvp05","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231656-47rvp05","updated":"20230724231656"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (z *Writer) Flush() error\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231657-chzjxkc","Type":"NodeParagraph","Properties":{"id":"20230724231657-chzjxkc","updated":"20230724231657"},"Children":[{"Type":"NodeText","Data":"Flush将缓冲中的压缩数据刷新到下层io.Writer接口中。"}]},{"ID":"20230724231658-xwmzgmx","Type":"NodeParagraph","Properties":{"id":"20230724231658-xwmzgmx","updated":"20230724231658"},"Children":[{"Type":"NodeText","Data":"本方法主要用在传输压缩数据的网络连接中，以保证远端的接收者可以获得足够的数据来重构数据报。Flush会阻塞直到所有缓冲中的数据都写入下层io.Writer接口后才返回。如果下层的io.Writetr接口返回一个错误，Flush也会返回该错误。在zlib包的术语中，Flush方法等价于Z_SYNC_FLUSH。"}]},{"ID":"20230724231659-f1d6xh1","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231659-f1d6xh1","updated":"20230724231659"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (*Writer) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/compress/gzip/gzip.go?name=release#250","TextMarkTextContent":"Close"}]},{"ID":"20230724231660-4nrf6xt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231660-4nrf6xt","updated":"20230724231660"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (z *Writer) Close() error\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231661-vyqpy0r","Type":"NodeParagraph","Properties":{"id":"20230724231661-vyqpy0r","updated":"20230724231661"},"Children":[{"Type":"NodeText","Data":"调用Close会关闭z，但不会关闭下层io.Writer接口。"}]},{"ID":"20230724231662-c5lc0k1","Type":"NodeParagraph","Properties":{"id":"20230724231662-c5lc0k1","updated":"20230724231662"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"http://studygolang.com/","TextMarkTextContent":"Go语言中文网"},{"Type":"NodeText","Data":" | "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"http://golang.org/","TextMarkTextContent":"Go Language"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://studygolang.com/static/pkgdoc/pkg/compress_gzip.htm#","TextMarkTextContent":"Back to top"}]}]}