{"ID":"20230724231635-in91sb1","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230724231635-in91sb1","title":"image-draw","updated":"20230724231635"},"Children":[{"ID":"20230724231636-vt762wf","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724231636-vt762wf","updated":"20230724231636"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"image-draw"}]},{"ID":"20230724231637-480w0yk","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231637-480w0yk","updated":"20230724231637"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"import \"image/draw\"\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231638-b7x8evq","Type":"NodeParagraph","Properties":{"id":"20230724231638-b7x8evq","updated":"20230724231638"},"Children":[{"Type":"NodeText","Data":"draw包提供了图像合成函数。参见：http://golang.org/doc/articles/image_draw.html"}]},{"ID":"20230724231639-d84b2v1","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231639-d84b2v1","updated":"20230724231639"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/image/draw/draw.go?name=release#26","TextMarkTextContent":"Quantizer"}]},{"ID":"20230724231640-rx8s3rn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231640-rx8s3rn","updated":"20230724231640"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type Quantizer interface {\n    // Quantize方法向p中最多增加cap(p)-len(p)个色彩并返回修正后的调色板\n    // 返回值更适合（可以更少失真的）将m转换为一个调色板类型的图像\n    Quantize(p color.Palette, m image.Image) color.Palette\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231641-t49hxxd","Type":"NodeParagraph","Properties":{"id":"20230724231641-t49hxxd","updated":"20230724231641"},"Children":[{"Type":"NodeText","Data":"Quantizer接口为一个图像生成调色板。"}]},{"ID":"20230724231642-9qecus3","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231642-9qecus3","updated":"20230724231642"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/image/draw/draw.go?name=release#20","TextMarkTextContent":"Image"}]},{"ID":"20230724231643-9ducm2c","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231643-9ducm2c","updated":"20230724231643"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type Image interface {\n    image.Image\n    Set(x, y int, c color.Color)\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231644-dtckjzd","Type":"NodeParagraph","Properties":{"id":"20230724231644-dtckjzd","updated":"20230724231644"},"Children":[{"Type":"NodeText","Data":"Image接口比image.Image接口多了Set方法，该方法用于修改单个像素的色彩。"}]},{"ID":"20230724231645-0v53qr3","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231645-0v53qr3","updated":"20230724231645"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/image/draw/draw.go?name=release#49","TextMarkTextContent":"Drawer"}]},{"ID":"20230724231646-7wtjwtf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231646-7wtjwtf","updated":"20230724231646"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type Drawer interface {\n    // 对齐图像dst的r.Min和src的sp点，然后将src绘制到dst上的结果来替换矩形范围内的图像\n    Draw(dst Image, r image.Rectangle, src image.Image, sp image.Point)\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231647-hv4k49y","Type":"NodeParagraph","Properties":{"id":"20230724231647-hv4k49y","updated":"20230724231647"},"Children":[{"Type":"NodeText","Data":"Drawer包含Draw方法。"}]},{"ID":"20230724231648-wom7q16","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231648-wom7q16","updated":"20230724231648"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"var FloydSteinberg Drawer = floydSteinberg{}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231649-ykhwnnn","Type":"NodeParagraph","Properties":{"id":"20230724231649-ykhwnnn","updated":"20230724231649"},"Children":[{"Type":"NodeText","Data":"FloydSteinberg是采用Src操作并实现了Floyd-Steinberg误差扩散算法的Drawer。"}]},{"ID":"20230724231650-foyd1r9","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231650-foyd1r9","updated":"20230724231650"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/image/draw/draw.go?name=release#33","TextMarkTextContent":"Op"}]},{"ID":"20230724231651-7vkcng8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231651-7vkcng8","updated":"20230724231651"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type Op int\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231652-ooyhmln","Type":"NodeParagraph","Properties":{"id":"20230724231652-ooyhmln","updated":"20230724231652"},"Children":[{"Type":"NodeText","Data":"Op是Porter-Duff合成的操作符。"}]},{"ID":"20230724231653-400i1du","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231653-400i1du","updated":"20230724231653"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"const (\n    // 源图像透过遮罩后，覆盖在目标图像上（类似图层）\n    Over Op  = iota\n    // 源图像透过遮罩后，替换掉目标图像\n    Src\n)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231654-yormvcg","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724231654-yormvcg","updated":"20230724231654"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func (Op) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/image/draw/draw.go?name=release#44","TextMarkTextContent":"Draw"}]},{"ID":"20230724231655-i6pjyip","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231655-i6pjyip","updated":"20230724231655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func (op Op) Draw(dst Image, r image.Rectangle, src image.Image, sp image.Point)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231656-dyo38z2","Type":"NodeParagraph","Properties":{"id":"20230724231656-dyo38z2","updated":"20230724231656"},"Children":[{"Type":"NodeText","Data":"Draw方法通过使用Op参数调用包的Draw函数实现了Drawer接口。"}]},{"ID":"20230724231657-t3yimly","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231657-t3yimly","updated":"20230724231657"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/image/draw/draw.go?name=release#97","TextMarkTextContent":"Draw"}]},{"ID":"20230724231658-3nl8l8y","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231658-3nl8l8y","updated":"20230724231658"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func Draw(dst Image, r image.Rectangle, src image.Image, sp image.Point, op Op)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231659-af37le7","Type":"NodeParagraph","Properties":{"id":"20230724231659-af37le7","updated":"20230724231659"},"Children":[{"Type":"NodeText","Data":"Draw函数使用nil的mask参数调用DrawMask函数。"}]},{"ID":"20230724231660-rb02a0s","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724231660-rb02a0s","updated":"20230724231660"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"func "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://github.com/golang/go/blob/master/src/image/draw/draw.go?name=release#103","TextMarkTextContent":"DrawMask"}]},{"ID":"20230724231661-ohx9tig","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230724231661-ohx9tig","updated":"20230724231661"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func DrawMask(dst Image, r image.Rectangle, src image.Image, sp image.Point, mask image.Image, mp image.Point, op Op)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230724231662-vhx2wo3","Type":"NodeParagraph","Properties":{"id":"20230724231662-vhx2wo3","updated":"20230724231662"},"Children":[{"Type":"NodeText","Data":"对齐目标图像dst的矩形r左上角、源图像src的sp点、遮罩mask的mp点，根据op修改dst的r矩形区域内的内容，mask如果为nil则视为完全透明。"}]}]}