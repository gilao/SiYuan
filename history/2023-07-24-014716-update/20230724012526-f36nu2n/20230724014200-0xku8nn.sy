{"ID":"20230724014200-0xku8nn","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f6fb","id":"20230724014200-0xku8nn","tags":"Docker","title":"4. 操作Docker容器","updated":"20230724014338"},"Children":[{"ID":"20230724014338-wesfgm4","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724014338-wesfgm4","updated":"20230724014338"},"Children":[{"Type":"NodeText","Data":"1. 创建容器"}]},{"ID":"20230724014338-dv61uwh","Type":"NodeParagraph","Properties":{"id":"20230724014338-dv61uwh","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"1. 新建容器"}]},{"ID":"20230724014338-8s9ac5n","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724014338-8s9ac5n","updated":"20230724014338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"docker create -it ubuntu:latest\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724014338-abm32kv","Type":"NodeParagraph","Properties":{"id":"20230724014338-abm32kv","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"2. 启动容器"}]},{"ID":"20230724014338-j4loje4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724014338-j4loje4","updated":"20230724014338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"docker start af\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724014338-21oip12","Type":"NodeParagraph","Properties":{"id":"20230724014338-21oip12","updated":"20230724014338"},"Children":[{"Type":"NodeText","Data":"**\t**可以通过 docker ps 命令可以查看一个运行中的容器"}]},{"ID":"20230724014338-gxeex25","Type":"NodeParagraph","Properties":{"id":"20230724014338-gxeex25","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"3. 新建并启动容器"}]},{"ID":"20230724014338-57ytnrj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724014338-57ytnrj","updated":"20230724014338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"docker run ubuntu /bin/echo 'Hello world'\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724014338-kn2p1j9","Type":"NodeParagraph","Properties":{"id":"20230724014338-kn2p1j9","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"使用 docker run 来创建并启动容器时，Docker在后台运行的标准操作为"}]},{"ID":"20230724014338-9ewy6ys","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20230724014338-9ewy6ys","updated":"20230724014338"},"Children":[{"ID":"20230724014338-4guaif5","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20230724014338-4guaif5","updated":"20230724014338"},"Children":[{"ID":"20230724014338-irdcczh","Type":"NodeParagraph","Properties":{"id":"20230724014338-irdcczh","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"检查本地是否存在指定的镜像，不存在就从公有仓库下载："}]}]},{"ID":"20230724014338-6hhb2lv","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20230724014338-6hhb2lv","updated":"20230724014338"},"Children":[{"ID":"20230724014338-hr44be9","Type":"NodeParagraph","Properties":{"id":"20230724014338-hr44be9","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"利用镜像创建一个容器，并启动该容器"}]}]},{"ID":"20230724014338-a0d5udi","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20230724014338-a0d5udi","updated":"20230724014338"},"Children":[{"ID":"20230724014338-lgt05xo","Type":"NodeParagraph","Properties":{"id":"20230724014338-lgt05xo","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"分配一个文件系统给容器，并在只读的镜像层外面挂在一层可读写层"}]}]},{"ID":"20230724014338-nlgv4yg","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20230724014338-nlgv4yg","updated":"20230724014338"},"Children":[{"ID":"20230724014338-qgbt8pc","Type":"NodeParagraph","Properties":{"id":"20230724014338-qgbt8pc","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"从宿主主机配置的网桥接口中桥接一个虚拟接口的容器中"}]}]},{"ID":"20230724014338-h1ikm00","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20230724014338-h1ikm00","updated":"20230724014338"},"Children":[{"ID":"20230724014338-hqhete0","Type":"NodeParagraph","Properties":{"id":"20230724014338-hqhete0","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"从网桥的地址池配置一个IP 地址给容器"}]}]},{"ID":"20230724014338-oyzi549","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ni4=","Num":6},"Properties":{"id":"20230724014338-oyzi549","updated":"20230724014338"},"Children":[{"ID":"20230724014338-iz15gy7","Type":"NodeParagraph","Properties":{"id":"20230724014338-iz15gy7","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"执行用户指定的应用程序"}]}]},{"ID":"20230724014338-kmgxa3j","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ny4=","Num":7},"Properties":{"id":"20230724014338-kmgxa3j","updated":"20230724014338"},"Children":[{"ID":"20230724014338-ca0521r","Type":"NodeParagraph","Properties":{"id":"20230724014338-ca0521r","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"执行完毕后容器被自动终止"}]}]}]},{"ID":"20230724014338-e0l6w5e","Type":"NodeParagraph","Properties":{"id":"20230724014338-e0l6w5e","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"下面的命令启动一个bash 终端，允许用户进行交互："}]},{"ID":"20230724014338-txe7fjj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724014338-txe7fjj","updated":"20230724014338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"docker run -it ubuntu:latest /bin/bash \n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724014338-7c7v77x","Type":"NodeParagraph","Properties":{"id":"20230724014338-7c7v77x","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"-t 选项 让Docker 分配一个伪终端，并绑定到容器的标准输入上"}]},{"ID":"20230724014338-gec779m","Type":"NodeParagraph","Properties":{"id":"20230724014338-gec779m","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"-i 让容器的标准输入保持打开"}]},{"ID":"20230724014338-wu7g6q8","Type":"NodeParagraph","Properties":{"id":"20230724014338-wu7g6q8","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"默认情况下，常见错误代码包括："}]},{"ID":"20230724014338-ksvpvsi","Type":"NodeParagraph","Properties":{"id":"20230724014338-ksvpvsi","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"·125：Docker daemon执行出错，例如指定了不支持的Docker命令参数；"}]},{"ID":"20230724014338-it8ykda","Type":"NodeParagraph","Properties":{"id":"20230724014338-it8ykda","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"·126：所指定命令无法执行，例如权限出错；"}]},{"ID":"20230724014338-0109okx","Type":"NodeParagraph","Properties":{"id":"20230724014338-0109okx","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"·127：容器内命令无法找到。"}]},{"ID":"20230724014338-djr1n0a","Type":"NodeParagraph","Properties":{"id":"20230724014338-djr1n0a","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"命令执行后出错，会默认返回错误码。"}]},{"ID":"20230724014338-2kee4h5","Type":"NodeParagraph","Properties":{"id":"20230724014338-2kee4h5","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"4.守护态运行"}]},{"ID":"20230724014338-4mi1ori","Type":"NodeParagraph","Properties":{"id":"20230724014338-4mi1ori","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"更多的时候，需要让Docker容器在后台以守护态（Daemonized）形式运行。此时，可以通过添加-d参数来实现。"}]},{"ID":"20230724014338-4qactaj","Type":"NodeParagraph","Properties":{"id":"20230724014338-4qactaj","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"例如下面的命令会在后台运行容器："}]},{"ID":"20230724014338-d7xd6ks","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724014338-d7xd6ks","updated":"20230724014338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ docker run -d ubuntu /bin/sh -c \"while true; do echo hello world; sleep 1; done\"ce554267d7a4c34eefc92c5517051dc37b918b588736d0823e4c846596b04d83\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724014338-0dd03nk","Type":"NodeParagraph","Properties":{"id":"20230724014338-0dd03nk","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"容器启动后会返回一个唯一的id，"}]},{"ID":"20230724014338-b32qtcj","Type":"NodeParagraph","Properties":{"id":"20230724014338-b32qtcj","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"-e 指定容器内的环境变量"}]},{"ID":"20230724014338-js9hb74","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724014338-js9hb74","updated":"20230724014338"},"Children":[{"Type":"NodeText","Data":"2. 终止容器"}]},{"ID":"20230724014338-8q67hz5","Type":"NodeParagraph","Properties":{"id":"20230724014338-8q67hz5","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"使用docker stop 来终止一个运行中的容器"}]},{"ID":"20230724014338-d8mmy7r","Type":"NodeParagraph","Properties":{"id":"20230724014338-d8mmy7r","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"该命令的格式为："}]},{"ID":"20230724014338-pwrd1qx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724014338-pwrd1qx","updated":"20230724014338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"docker stop [-t | --time[=10]] [CONTAINER...]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724014338-1fqqvjz","Type":"NodeParagraph","Properties":{"id":"20230724014338-1fqqvjz","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"首先向容器发送SIGTERM信号，等待一段时间后，再发送SIGKILL信号来终止容器"}]},{"ID":"20230724014338-3xso6pp","Type":"NodeParagraph","Properties":{"id":"20230724014338-3xso6pp","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"docker kill  命令会直接发送SIGKILL信号来强行终止容器"}]},{"ID":"20230724014338-oj3auvc","Type":"NodeParagraph","Properties":{"id":"20230724014338-oj3auvc","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"当Docker容器中指定的应用终结时，容器也会自动终止。"}]},{"ID":"20230724014338-jxk062m","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724014338-jxk062m","updated":"20230724014338"},"Children":[{"Type":"NodeText","Data":"3. 进入容器"}]},{"ID":"20230724014338-twmmcvd","Type":"NodeParagraph","Properties":{"id":"20230724014338-twmmcvd","updated":"20230724014345"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"在使用 -d 参数时，容器启动后会进入后台，用户无法看到容器中的信息"}]},{"ID":"20230724014338-4z81kxk","Type":"NodeParagraph","Properties":{"id":"20230724014338-4z81kxk","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"1.attach 命令"}]},{"ID":"20230724014338-8sie726","Type":"NodeParagraph","Properties":{"id":"20230724014338-8sie726","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"attach 是Docker 自带的命令，命令格式为"}]},{"ID":"20230724014338-nkyxpkg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724014338-nkyxpkg","updated":"20230724014338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"docker attach [---detach-keys[=[]]] [--no-stdin] [--sig-proxy[=true]] CONTAINER\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724014338-8jy8r8o","Type":"NodeParagraph","Properties":{"id":"20230724014338-8jy8r8o","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"支持三个主要选项："}]},{"ID":"20230724014338-getitke","Type":"NodeParagraph","Properties":{"id":"20230724014338-getitke","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"·--detach-keys[=[]]：指定退出attach模式的快捷键序列，默认是CTRL-p CTRL-q；"}]},{"ID":"20230724014338-78aifna","Type":"NodeParagraph","Properties":{"id":"20230724014338-78aifna","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"·--no-stdin=true|false：是否关闭标准输入，默认是保持打开；"}]},{"ID":"20230724014338-d7e6jv1","Type":"NodeParagraph","Properties":{"id":"20230724014338-d7e6jv1","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"·--sig-proxy=true|false：是否代理收到的系统信号给应用进程，默认为true。"}]},{"ID":"20230724014338-2d7peby","Type":"NodeParagraph","Properties":{"id":"20230724014338-2d7peby","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"但是使用attach命令有时候并不方便。当多个窗口同时用attach命令连到同一个容器的时候，所有窗口都会同步显示。当某个窗口因命令阻塞时，其他窗口也无法执行操作了。"}]},{"ID":"20230724014338-51f6gei","Type":"NodeParagraph","Properties":{"id":"20230724014338-51f6gei","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"2. exec 命令"}]},{"ID":"20230724014338-u7b6xzz","Type":"NodeParagraph","Properties":{"id":"20230724014338-u7b6xzz","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"可以在容器内直接执行任意命令。该命令的基本格式为："}]},{"ID":"20230724014338-8f4np5f","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724014338-8f4np5f","updated":"20230724014338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"docker exec [-d|--detach] [--detach-keys[=[]]] [-i|--interactive] [--privileged] [-t|--tty] [-u|--user[=USER]] CONTAINER COMMAND [ARG...]。\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724014338-38gxve1","Type":"NodeParagraph","Properties":{"id":"20230724014338-38gxve1","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"比较重要的参数有："}]},{"ID":"20230724014338-qpi7psr","Type":"NodeParagraph","Properties":{"id":"20230724014338-qpi7psr","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"·-i，--interactive=true|false：打开标准输入接受用户输入命令，默认为false；"}]},{"ID":"20230724014338-frcywoh","Type":"NodeParagraph","Properties":{"id":"20230724014338-frcywoh","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"·--privileged=true|false：是否给执行命令以高权限，默认为false；"}]},{"ID":"20230724014338-grmmo61","Type":"NodeParagraph","Properties":{"id":"20230724014338-grmmo61","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"·-t，--tty=true|false：分配伪终端，默认为false；"}]},{"ID":"20230724014338-ju918a2","Type":"NodeParagraph","Properties":{"id":"20230724014338-ju918a2","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"·-u，--user=\u0026quot;\u0026quot;：执行命令的用户名或ID。"}]},{"ID":"20230724014338-1v7sc3y","Type":"NodeParagraph","Properties":{"id":"20230724014338-1v7sc3y","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"可以看到，一个bash终端打开了，在不影响容器内其他应用的前提下，用户可以很容易与容器进行交互。注意"}]},{"ID":"20230724014338-zg3zl5h","Type":"NodeParagraph","Properties":{"id":"20230724014338-zg3zl5h","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"通过指定-it参数来保持标准输入打开，并且分配一个伪终端。通过exec命令对容器执行操作是最为推荐的方式。"}]},{"ID":"20230724014338-9ctlfb2","Type":"NodeParagraph","Properties":{"id":"20230724014338-9ctlfb2","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"3. nsenter工具"}]},{"ID":"20230724014338-k7l5m0h","Type":"NodeParagraph","Properties":{"id":"20230724014338-k7l5m0h","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"如果系统中的util-linux包没有该命令，可以按照下面的方法从源码安装："}]},{"ID":"20230724014338-o50an08","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724014338-o50an08","updated":"20230724014338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ cd /tmp; curl https://www.kernel.org/pub/linux/utils/util-linux/v2.24/util- linux-2.24.tar.gz | tar -zxf-; cd util-linux-2.24;\n\n$ ./configure --without-ncurses\n\n$ make nsenter \u0026\u0026 cp nsenter /usr/local/bin\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724014338-mhayka8","Type":"NodeParagraph","Properties":{"id":"20230724014338-mhayka8","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"为了使用nsenter连接到容器，还需要找到容器进程的PID，可以通过下面的命令获取："}]},{"ID":"20230724014338-sxmpmwl","Type":"NodeParagraph","Properties":{"id":"20230724014338-sxmpmwl","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"PID=$(docker inspect --format \u0026quot;{{ .State.Pid }}\u0026quot; "},{"Type":"NodeTextMark","TextMarkType":"strong strong","TextMarkTextContent":"\u0026lt;container\u0026gt;"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":")"}]},{"ID":"20230724014338-ebmzywt","Type":"NodeParagraph","Properties":{"id":"20230724014338-ebmzywt","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"通过这个PID，就可以连接到这个容器："}]},{"ID":"20230724014338-2eql8gr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724014338-2eql8gr","updated":"20230724014338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ nsenter --target $PID --mount --uts --ipc --net --pid\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724014338-7tkl30k","Type":"NodeParagraph","Properties":{"id":"20230724014338-7tkl30k","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"下面给出一个完整的例子，通过nsenter命令进入容器："}]},{"ID":"20230724014338-0kex9qm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724014338-0kex9qm","updated":"20230724014338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ docker run -idt ubuntu\n\n243c32535da7d142fb0e6df616a3c3ada0b8ab417937c853a9e1c251f499f550\n\n$ docker ps\n\nCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES\n\n243c32535da7 ubuntu:latest \"/bin/bash\" 18 seconds ago Up 17 seconds nostalgic_hypatia\n\n$ PID=$(docker-pid 243c32535da7)\n\n10981\n\n$ nsenter --target 10981 --mount --uts --ipc --net --pid\n\nroot@243c32535da7:/#\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724014338-oglxims","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724014338-oglxims","updated":"20230724014338"},"Children":[{"Type":"NodeText","Data":"4. 删除容器"}]},{"ID":"20230724014338-hodrotz","Type":"NodeParagraph","Properties":{"id":"20230724014338-hodrotz","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"可以使用docker rm命令来删除处于终止或退出状态的容器，命令格式为"}]},{"ID":"20230724014338-fm6dshh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724014338-fm6dshh","updated":"20230724014338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"docker rm\\[-f|--force][-l|--link][-v|--volumes]CONTAINER[CONTAINER...]。\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724014338-2ehbcm3","Type":"NodeParagraph","Properties":{"id":"20230724014338-2ehbcm3","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"主要支持的选项包括："}]},{"ID":"20230724014338-dto69y5","Type":"NodeParagraph","Properties":{"id":"20230724014338-dto69y5","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"·-f，--force=false：是否强行终止并删除一个运行中的容器；"}]},{"ID":"20230724014338-7h3sqk4","Type":"NodeParagraph","Properties":{"id":"20230724014338-7h3sqk4","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"·-l，--link=false：删除容器的连接，但保留容器；"}]},{"ID":"20230724014338-5dtlfuu","Type":"NodeParagraph","Properties":{"id":"20230724014338-5dtlfuu","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"·-v，--volumes=false：删除容器挂载的数据卷。"}]},{"ID":"20230724014338-tjgf1ns","Type":"NodeParagraph","Properties":{"id":"20230724014338-tjgf1ns","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"默认情况下，docker rm命令只能删除处于终止或退出状态的容器，并不能删除还处于运行状态的容器。"}]},{"ID":"20230724014338-43dh4jm","Type":"NodeParagraph","Properties":{"id":"20230724014338-43dh4jm","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"如果要直接删除一个运行中的容器，可以添加-f参数。Docker会先发送SIGKILL信号给容器，终止其中的应用，之后强行删除"}]},{"ID":"20230724014338-tkchfqz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724014338-tkchfqz","updated":"20230724014338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"docker rm $(docker ps -all -q -f status=exited)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724014338-kdt51fu","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724014338-kdt51fu","updated":"20230724014338"},"Children":[{"Type":"NodeText","Data":"5.退出容器"}]},{"ID":"20230724014338-1xeexc3","Type":"NodeParagraph","Properties":{"id":"20230724014338-1xeexc3","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"在"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker"},{"Type":"NodeText","Data":"​容器中使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Ctrl+D"},{"Type":"NodeText","Data":"​即可退出容器，但是这样会让容器停止运行。"}]},{"ID":"20230724014338-8btksac","Type":"NodeParagraph","Properties":{"id":"20230724014338-8btksac","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"如果想退出容器但又不想让容器停止，使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Ctrl+P+Q"},{"Type":"NodeText","Data":"​即可"}]},{"ID":"20230724014338-vdsjeae","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724014338-vdsjeae","updated":"20230724014338"},"Children":[{"Type":"NodeText","Data":"6. 导入和导出容器"}]},{"ID":"20230724014338-cbangy5","Type":"NodeParagraph","Properties":{"id":"20230724014338-cbangy5","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"1. 导出容器"}]},{"ID":"20230724014338-d8tj6j1","Type":"NodeParagraph","Properties":{"id":"20230724014338-d8tj6j1","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"导出容器是指导出一个已经创建的容器到一个文件，不管此时这个容器是否处于运行状态，可以使用docker export 命令，该命令格式为"}]},{"ID":"20230724014338-2i9sj4p","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724014338-2i9sj4p","updated":"20230724014338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"docker export [-o|--output[=\" \"]]CONTAINER\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724014338-69kak7y","Type":"NodeParagraph","Properties":{"id":"20230724014338-69kak7y","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"其中  -o 可以指定导出的tar文件名"}]},{"ID":"20230724014338-ctc6si5","Type":"NodeParagraph","Properties":{"id":"20230724014338-ctc6si5","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"2. 导入容器"}]},{"ID":"20230724014338-1idipv0","Type":"NodeParagraph","Properties":{"id":"20230724014338-1idipv0","updated":"20230724014338"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"导出的文件又可以使用docker import 命令导入编程镜像，该命令格式为"}]},{"ID":"20230724014338-18f94t1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724014338-18f94t1","updated":"20230724014338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"docker import [-c |--change [=[]]] [-m | --message[=MESSAGE]] file|URL|-[REPOSITORY[:TAG]]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}