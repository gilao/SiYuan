{"ID":"20231109110024-sarlcjm","Spec":"1","Type":"NodeDocument","Properties":{"icon":"26ea","id":"20231109110024-sarlcjm","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20231109110024-sarlcjm\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20231109110024-2ti95ex\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20231109110024-2ti95ex\u0026quot;,\u0026quot;scrollTop\u0026quot;:0,\u0026quot;focusId\u0026quot;:\u0026quot;20231109110024-2ti95ex\u0026quot;,\u0026quot;focusStart\u0026quot;:0,\u0026quot;focusEnd\u0026quot;:0\u0026#125;","title":"系统调用","updated":"20231109112310"},"Children":[{"ID":"20231109110024-2ti95ex","Type":"NodeParagraph","Properties":{"id":"20231109110024-2ti95ex","updated":"20231109112240"},"Children":[{"Type":"NodeText","Data":"如果用户态程序需要执行系统调用，就需要切换到内核态执行。在上一篇文章也提到过下面讲这个过程的原理："}]},{"ID":"20231109112247-t3njlel","Type":"NodeParagraph","Properties":{"id":"20231109112247-t3njlel","updated":"20231109112247"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231109112247-x2k2h0i.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231109112247-3b032zn","Type":"NodeParagraph","Properties":{"id":"20231109112247-3b032zn","updated":"20231109112254"},"Children":[{"Type":"NodeText","Data":"如上图所示："},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"内核程序执行在内核态（Kernal Mode），用户程序执行在用户态（User Mode）。当发生系统调用时，用户态的程序发起系统调用。因为系统调用中牵扯特权指令，用户态程序权限不足，因此会中断执行，也就是 Trap（Trap 是一种中断）。"}]},{"ID":"20231109112308-qsy8g3r","Type":"NodeParagraph","Properties":{"id":"20231109112308-qsy8g3r","updated":"20231109112309"},"Children":[{"Type":"NodeText","Data":"发生中断后，当前 CPU 执行的程序会中断，跳转到中断处理程序。内核程序开始执行，也就是开始处理系统调用。内核处理完成后，主动触发 Trap，这样会再次发生中断，切换回用户态工作。"}]},{"ID":"20231109112310-6frpa7q","Type":"NodeParagraph","Properties":{"id":"20231109112310-6frpa7q"}}]}