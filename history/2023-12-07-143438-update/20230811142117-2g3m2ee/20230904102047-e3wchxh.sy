{"ID":"20230904102047-e3wchxh","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f685","id":"20230904102047-e3wchxh","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20230904102047-e3wchxh\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20230904102050-actba7r\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20231206091418-k3x1qm4\u0026quot;,\u0026quot;scrollTop\u0026quot;:10034.6669921875\u0026#125;","title":"框架详细设计文档","updated":"20231207143350"},"Children":[{"ID":"20230904102050-actba7r","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230904102050-actba7r","updated":"20230904102050"},"Children":[{"Type":"NodeText","Data":"1 背景"}]},{"ID":"20230904102050-ehkkvt4","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230904102050-ehkkvt4","updated":"20231205155440"},"Children":[{"Type":"NodeText","Data":"1.1 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"框架的背景和意义"}]},{"ID":"20230904102610-7scc8ym","Type":"NodeParagraph","Properties":{"id":"20230904102610-7scc8ym","updated":"20230904112058"},"Children":[{"Type":"NodeText","Data":"      原有的模型框架是基于Python的Flask框架进行封装，对外提供Web接口。Flask框架比较适合轻量型的中小项目，对于大量的并发请求处理并不出色。Go语言天然支持并发和异步操作，Gin框架采用了高效的并发模型和协程机制，性能较为优秀，也拥有强大的中间件的支持。故选择Go语言的Gin框架重新搭建大模型的后端，并通过gRPC来实现python端与go端的进程间通信。"}]},{"ID":"20230904110311-s39c9s8","Type":"NodeParagraph","Properties":{"id":"20230904110311-s39c9s8","updated":"20231204142413"},"Children":[{"Type":"NodeText","Data":"      基于gRPC和Gin框架来封装大模型可以实现模型与后端的轻耦合，在python端只要封装好模型的类，并基于gRPC实现调用即可；后端的功能全部放在Gin框架中实现，避免了改动后端时，影响模型的运行。由于Go语言的并发特性，Gin框架对于处理大量并发请求和IO密集型任务具有优势，处理大模型的高并发请求也更加方便。"}]},{"ID":"20230904102050-emtkkaj","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230904102050-emtkkaj","updated":"20231205155454"},"Children":[{"Type":"NodeText","Data":"1.2 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"框架的目标、特点和使用场景"}]},{"ID":"20231204160344-pi32qxf","Type":"NodeParagraph","Properties":{"id":"20231204160344-pi32qxf","updated":"20231204160349"},"Children":[{"Type":"NodeText","Data":"该框架要实现的目标有以下几点："}]},{"ID":"20231204145146-9x0q5r4","Type":"NodeList","ListData":{},"Properties":{"id":"20231204145146-9x0q5r4","updated":"20231205105803"},"Children":[{"ID":"20231204145148-ouocv4i","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231204145148-ouocv4i","updated":"20231204145451"},"Children":[{"ID":"20231204145148-g8iz4dk","Type":"NodeParagraph","Properties":{"id":"20231204145148-g8iz4dk","updated":"20231204145451"},"Children":[{"Type":"NodeText","Data":"对模型进行统一封装，将模型开发、训练与提供外部接口的工作分离；"}]}]},{"ID":"20231205105445-r7k7ww8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205105445-r7k7ww8","updated":"20231205105803"},"Children":[{"ID":"20231205105445-6n30ywg","Type":"NodeParagraph","Properties":{"id":"20231205105445-6n30ywg","updated":"20231205105803"},"Children":[{"Type":"NodeText","Data":"可以基于负载均衡算法来调用多个相同的算法模型；"}]}]}]},{"ID":"20231204145055-7v6jbfw","Type":"NodeList","ListData":{},"Properties":{"id":"20231204145055-7v6jbfw","updated":"20231204150719"},"Children":[{"ID":"20231204145057-j7q1mkz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231204145057-j7q1mkz","updated":"20231204145057"},"Children":[{"ID":"20231204145057-43h2rib","Type":"NodeParagraph","Properties":{"id":"20231204145057-43h2rib","updated":"20231204150513"},"Children":[{"Type":"NodeText","Data":"提供标准的外部接口来调用模型，用于生产部署；"}]}]},{"ID":"20231204145755-f343hif","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231204145755-f343hif"},"Children":[{"ID":"20231204145755-cva4omr","Type":"NodeParagraph","Properties":{"id":"20231204145755-cva4omr","updated":"20231204150534"},"Children":[{"Type":"NodeText","Data":"限制外部的请求数量，保证模型可以在合适的请求量中正常运行；"}]}]},{"ID":"20231204150534-uhgqcb5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231204150534-uhgqcb5","updated":"20231204150719"},"Children":[{"ID":"20231204150534-wugwz2a","Type":"NodeParagraph","Properties":{"id":"20231204150534-wugwz2a","updated":"20231204150719"},"Children":[{"Type":"NodeText","Data":"为外部调用提供后端支持；"}]}]}]},{"ID":"20231204150653-vw5m1pj","Type":"NodeParagraph","Properties":{"id":"20231204150653-vw5m1pj","updated":"20231204150959"},"Children":[{"Type":"NodeText","Data":"该框架根据实际需求，主要有以下的特点："}]},{"ID":"20231204150959-l3a9poj","Type":"NodeList","ListData":{},"Properties":{"id":"20231204150959-l3a9poj","updated":"20231205105733"},"Children":[{"ID":"20231204151408-kx6gahm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231204151408-kx6gahm"},"Children":[{"ID":"20231204151408-qfqyuv6","Type":"NodeParagraph","Properties":{"id":"20231204151408-qfqyuv6","updated":"20231204152902"},"Children":[{"Type":"NodeText","Data":"模型与后端是使用gRPC进行通信，传输外部请求和模型生成的数据，该通信方式对比传统RESTful API具有更高的性能；"}]}]},{"ID":"20231204153217-kn6htut","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231204153217-kn6htut"},"Children":[{"ID":"20231204153217-u2oebl3","Type":"NodeParagraph","Properties":{"id":"20231204153217-u2oebl3","updated":"20231204155838"},"Children":[{"Type":"NodeText","Data":"可以限制发送给模型的请求数量，多余的请求将会在模型可以处理时再发送；"}]}]},{"ID":"20231205105551-phghqmj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205105551-phghqmj","updated":"20231205105733"},"Children":[{"ID":"20231205105551-wva5ts7","Type":"NodeParagraph","Properties":{"id":"20231205105551-wva5ts7","updated":"20231205105733"},"Children":[{"Type":"NodeText","Data":"使用服务注册和服务发现，可以保证请求都会发送给可用的模型中处理，出现问题的模型将不会接收到请求；"}]}]},{"ID":"20231204151340-63ggmm6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231204151340-63ggmm6"},"Children":[{"ID":"20231204151340-4qxpu5y","Type":"NodeParagraph","Properties":{"id":"20231204151340-4qxpu5y","updated":"20231204155842"},"Children":[{"Type":"NodeText","Data":"拥有鉴权功能，框架在启动和运行过程中会验证启动密码和本地mac，发现异常后将启动失败或返回错误的调用结果，避免模型和框架被篡改和不合规的使用；"}]}]},{"ID":"20231204155035-vy33b3z","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231204155035-vy33b3z"},"Children":[{"ID":"20231204155035-y8hahfd","Type":"NodeParagraph","Properties":{"id":"20231204155035-y8hahfd","updated":"20231204155832"},"Children":[{"Type":"NodeText","Data":"具有详细的日志记录，会将每次的调用过程记录到日志中，便于后续的调试和错误排查。。"}]}]}]},{"ID":"20231205105229-uonklqy","Type":"NodeParagraph","Properties":{"id":"20231205105229-uonklqy","updated":"20231205111114"},"Children":[{"Type":"NodeText","Data":"当有以下需求时可以使用该框架进行封装："}]},{"ID":"20231205110331-m3l351c","Type":"NodeList","ListData":{},"Properties":{"id":"20231205110331-m3l351c","updated":"20231205111655"},"Children":[{"ID":"20231205110334-bc9u0t5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205110334-bc9u0t5","updated":"20231205110334"},"Children":[{"ID":"20231205110334-od159kc","Type":"NodeParagraph","Properties":{"id":"20231205110334-od159kc","updated":"20231205110427"},"Children":[{"Type":"NodeText","Data":"需要对外部提供 Web 接口来调用模型；"}]}]},{"ID":"20231205110412-jejkg6g","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205110412-jejkg6g"},"Children":[{"ID":"20231205110412-v78xgzw","Type":"NodeParagraph","Properties":{"id":"20231205110412-v78xgzw","updated":"20231205110517"},"Children":[{"Type":"NodeText","Data":"需要基于实际的硬件资源限制模型在同一时刻下的调用数量；"}]}]},{"ID":"20231205110931-phbf4fw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205110931-phbf4fw"},"Children":[{"ID":"20231205110931-ei5ywpp","Type":"NodeParagraph","Properties":{"id":"20231205110931-ei5ywpp","updated":"20231205111409"},"Children":[{"Type":"NodeText","Data":"需要在多个模型下保证服务的高可用性，不会因为一个模型出现问题导致整体服务不可用；"}]}]},{"ID":"20231205111653-1om62rx","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205111653-1om62rx","updated":"20231205111655"},"Children":[{"ID":"20231205111653-8xp1l1v","Type":"NodeParagraph","Properties":{"id":"20231205111653-8xp1l1v","updated":"20231205111655"},"Children":[{"Type":"NodeText","Data":"需要保证模型不会迁移到其他服务器中部署；"}]}]},{"ID":"20231205111606-8attoxw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205111606-8attoxw"},"Children":[{"ID":"20231205111606-h7k1qo4","Type":"NodeParagraph","Properties":{"id":"20231205111606-h7k1qo4","updated":"20231205111625"},"Children":[{"Type":"NodeText","Data":"需要后端的功能对模型提供支持；"}]}]}]},{"ID":"20231205111424-2bbnfjh","Type":"NodeParagraph","Properties":{"id":"20231205111424-2bbnfjh","updated":"20231205111908"},"Children":[{"Type":"NodeText","Data":"有上述需求时只需要根据用户手册对模型进行封装，并提供模型的接口等信息即可交付后端工程师来实现模型的封装，如果有其他后端需求可以和后端工程师沟通，商讨实现细节；"}]},{"ID":"20230904102050-2oecgcs","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230904102050-2oecgcs","updated":"20230904102050"},"Children":[{"Type":"NodeText","Data":"2 需求分析"}]},{"ID":"20230904102050-cy38flw","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230904102050-cy38flw","updated":"20231205155505"},"Children":[{"Type":"NodeText","Data":"2.1 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"高并发高负载场景下的需求和挑战"}]},{"ID":"20231205113914-b9tlf3j","Type":"NodeParagraph","Properties":{"id":"20231205113914-b9tlf3j","updated":"20231205114611"},"Children":[{"Type":"NodeText","Data":"模型部署后，当用户数量达到一定规模，特别是在某一时刻出现大量请求时，就可能出现高并发高负载的情况。在这种情况下，模型服务需要有效地应对大量的请求。在处理大量的请求时需要保证以下几点："}]},{"ID":"20231205114612-ly85m0o","Type":"NodeList","ListData":{},"Properties":{"id":"20231205114612-ly85m0o","updated":"20231205114614"},"Children":[{"ID":"20231205114614-ez5kujh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205114614-ez5kujh","updated":"20231205114614"},"Children":[{"ID":"20231205114614-idonldr","Type":"NodeParagraph","Properties":{"id":"20231205114614-idonldr","updated":"20231205114629"},"Children":[{"Type":"NodeText","Data":"模型的性能不要受到高并发高负载影响；"}]}]},{"ID":"20231205114616-yt4af66","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205114616-yt4af66"},"Children":[{"ID":"20231205114616-me3l48h","Type":"NodeParagraph","Properties":{"id":"20231205114616-me3l48h"},"Children":[{"Type":"NodeText","Data":"不会因为过多的请求导致模型崩溃；"}]}]},{"ID":"20231205114632-r095rx0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205114632-r095rx0"},"Children":[{"ID":"20231205114632-r9nzpxs","Type":"NodeParagraph","Properties":{"id":"20231205114632-r9nzpxs","updated":"20231205114638"},"Children":[{"Type":"NodeText","Data":"当某一模型出现问题不会导致整体服务不可用；"}]}]},{"ID":"20231205114636-mif4l38","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205114636-mif4l38"},"Children":[{"ID":"20231205114636-2dbnoyh","Type":"NodeParagraph","Properties":{"id":"20231205114636-2dbnoyh","updated":"20231205114701"},"Children":[{"Type":"NodeText","Data":"可以自动扩展新部署的模型服务；"}]}]},{"ID":"20231205114649-w4uzzo2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205114649-w4uzzo2"},"Children":[{"ID":"20231205114649-hx7pm2h","Type":"NodeParagraph","Properties":{"id":"20231205114649-hx7pm2h","updated":"20231205114711"},"Children":[{"Type":"NodeText","Data":"数据的一致性和完整性。"}]}]}]},{"ID":"20231205114724-kqfzxde","Type":"NodeParagraph","Properties":{"id":"20231205114724-kqfzxde","updated":"20231205114820"},"Children":[{"Type":"NodeText","Data":"在高并发和高负载场景下的挑战有以下几点："}]},{"ID":"20231205114820-76axht3","Type":"NodeList","ListData":{},"Properties":{"id":"20231205114820-76axht3","updated":"20231205141026"},"Children":[{"ID":"20231205114822-hmihkh8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205114822-hmihkh8","updated":"20231205114822"},"Children":[{"ID":"20231205114822-cwfiynm","Type":"NodeParagraph","Properties":{"id":"20231205114822-cwfiynm","updated":"20231205115038"},"Children":[{"Type":"NodeText","Data":"资源的限制：过多的请求会导致显存和CPU等系统资源使用率过高，导致影响模型的正常推理，甚至导致模型崩溃和服务器崩溃；"}]}]},{"ID":"20231205115038-8lhldzm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205115038-8lhldzm"},"Children":[{"ID":"20231205115038-x2lqr1z","Type":"NodeParagraph","Properties":{"id":"20231205115038-x2lqr1z","updated":"20231205140740"},"Children":[{"Type":"NodeText","Data":"响应时间：随着负载的增加，请求后的响应需要的时间可能会变长；"}]}]},{"ID":"20231205140533-00p8h8z","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205140533-00p8h8z"},"Children":[{"ID":"20231205140533-t5n0zjs","Type":"NodeParagraph","Properties":{"id":"20231205140533-t5n0zjs","updated":"20231205140736"},"Children":[{"Type":"NodeText","Data":"模型的稳定性：高负载状态可能导致模型不稳定和崩溃，影响服务的运行；"}]}]},{"ID":"20231205140818-46vixzo","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205140818-46vixzo","updated":"20231205141026"},"Children":[{"ID":"20231205140818-mupse94","Type":"NodeParagraph","Properties":{"id":"20231205140818-mupse94","updated":"20231205141026"},"Children":[{"Type":"NodeText","Data":"模型与外部间的通信：在高并发下，服务间通信有可能成为性能的瓶颈；"}]}]},{"ID":"20231205140444-7aflepj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205140444-7aflepj"},"Children":[{"ID":"20231205140444-bf619on","Type":"NodeParagraph","Properties":{"id":"20231205140444-bf619on","updated":"20231205140513"},"Children":[{"Type":"NodeText","Data":"数据一致性：在高并发下，可能会出现数据不一致的问题；"}]}]}]},{"ID":"20230904102050-xmmwvab","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230904102050-xmmwvab","updated":"20231205155516"},"Children":[{"Type":"NodeText","Data":"2.2 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"为什么选择go语言封装深度学习模型"}]},{"ID":"20231205112007-9wdvwys","Type":"NodeParagraph","Properties":{"id":"20231205112007-9wdvwys","updated":"20231205141258"},"Children":[{"Type":"NodeText","Data":"选择Go语言来封装深度学习模型解决高并发高负载问题，主要是Go语言具有以下特点："}]},{"ID":"20231205141258-oog6eb8","Type":"NodeList","ListData":{},"Properties":{"id":"20231205141258-oog6eb8","updated":"20231206095157"},"Children":[{"ID":"20231205141259-nm6ukqo","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205141259-nm6ukqo","updated":"20231206095157"},"Children":[{"ID":"20231205141259-noz7och","Type":"NodeParagraph","Properties":{"id":"20231205141259-noz7och","updated":"20231206095157"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"支持高并发"},{"Type":"NodeText","Data":"：Go语言天生支持并发编程，Go语言中具有"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"goroutines"},{"Type":"NodeText","Data":"​​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"channel"},{"Type":"NodeText","Data":"​​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"select"},{"Type":"NodeText","Data":"​​等概念，降低了并发编程的复杂度；"}]}]},{"ID":"20231205141715-21ormu1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205141715-21ormu1","updated":"20231206095156"},"Children":[{"ID":"20231205141715-smkebva","Type":"NodeParagraph","Properties":{"id":"20231205141715-smkebva","updated":"20231206095156"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"性能优秀"},{"Type":"NodeText","Data":"：Go 语言编译成机器码，执行效率高，性能接近 C/C++ 等编译型语言；"}]}]},{"ID":"20231205143550-4498yvw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205143550-4498yvw","updated":"20231206095154"},"Children":[{"ID":"20231205143550-roohek3","Type":"NodeParagraph","Properties":{"id":"20231205143550-roohek3","updated":"20231206095154"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Go语言是静态类型语言"},{"Type":"NodeText","Data":"：很多问题可以在编译阶段被发现，从而可以提高代码的稳定性和质量；"}]}]},{"ID":"20231205142618-qgqv3qu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205142618-qgqv3qu","updated":"20231206095152"},"Children":[{"ID":"20231205142618-v2sqni0","Type":"NodeParagraph","Properties":{"id":"20231205142618-v2sqni0","updated":"20231206095152"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"拥有良好的生态系统"},{"Type":"NodeText","Data":"：GO语言提供了大量的库和工具帮助开发者构建高性能的应用程序；"}]}]},{"ID":"20231205142200-m92xlna","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205142200-m92xlna","updated":"20231206095149"},"Children":[{"ID":"20231205142200-uil78aj","Type":"NodeParagraph","Properties":{"id":"20231205142200-uil78aj","updated":"20231206095149"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"部署简便，可跨平台编译"},{"Type":"NodeText","Data":"：Go语言编译为二进制文件，无需额外的依赖，支持跨平台编译，便于为不同的操作系统构建应用程序。"}]}]}]},{"ID":"20230904102050-f1m5qrf","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230904102050-f1m5qrf","updated":"20231205155529"},"Children":[{"Type":"NodeText","Data":"2.3 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"所选框架的特点和优势"}]},{"ID":"20231205143835-aop5vb1","Type":"NodeParagraph","Properties":{"id":"20231205143835-aop5vb1","updated":"20231205160009"},"Children":[{"Type":"NodeText","Data":"基于高并发高负载的场景，选择使用Gin框架、gRPC框架来构建大模型封装框架；大模型封装的框架的具有以下的特点："}]},{"ID":"20231205150553-f9tu688","Type":"NodeList","ListData":{},"Properties":{"id":"20231205150553-f9tu688","updated":"20231205155813"},"Children":[{"ID":"20231205150556-v5u2o5u","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205150556-v5u2o5u","updated":"20231205150556"},"Children":[{"ID":"20231205150556-o0up0j8","Type":"NodeParagraph","Properties":{"id":"20231205150556-o0up0j8","updated":"20231205151427"},"Children":[{"Type":"NodeText","Data":"使用 gRPC 来实现 Python 与 Go 之间的数据通信；gRPC 支持多种编程语言，使用Protocol Buffers（protobuf）作为默认的数据序列化机制，它是一种高效、跨语言、可扩展的序列化格式。"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"protobuf 的二进制消息格式比文本格式更紧凑，传输效率更高。"}]}]},{"ID":"20231205151056-zlanuco","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205151056-zlanuco","updated":"20231205152007"},"Children":[{"ID":"20231205151056-8ov615s","Type":"NodeParagraph","Properties":{"id":"20231205151056-8ov615s","updated":"20231205152007"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"gRPC还支持双向流和流式处理"},{"Type":"NodeText","Data":"：允许客户端和服务端之间同时发送和接收多个消息，可以传输大模型生成的流式数据；"}]}]},{"ID":"20231205151442-eqspj4o","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205151442-eqspj4o","updated":"20231205155813"},"Children":[{"ID":"20231205151442-untfseg","Type":"NodeParagraph","Properties":{"id":"20231205151442-untfseg","updated":"20231205155813"},"Children":[{"Type":"NodeText","Data":"gRPC使用多路复用技术在单个连接上同时进行多个并发请求，减少了网络延迟，提高了gRPC 的通信性能。"}]}]}]},{"ID":"20231205150534-g80jykc","Type":"NodeList","ListData":{},"Properties":{"id":"20231205150534-g80jykc","updated":"20231205155909"},"Children":[{"ID":"20231205150539-cgh2z97","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205150539-cgh2z97","updated":"20231205150539"},"Children":[{"ID":"20231205150539-bj8wlfu","Type":"NodeParagraph","Properties":{"id":"20231205150539-bj8wlfu","updated":"20231205152831"},"Children":[{"Type":"NodeText","Data":"Gin框架具有高性能、轻量级等特点，使用Gin框架来构建 Web 服务，为外部提供接口，Gin框架的路由性能非常接近原生的HttpRouter库，是目前响应最快的HTTP路由器之一，可以更快速的处理请求；"}]}]},{"ID":"20231205152820-2lo8jtj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205152820-2lo8jtj","updated":"20231205155832"},"Children":[{"ID":"20231205152820-a9qbsd7","Type":"NodeParagraph","Properties":{"id":"20231205152820-a9qbsd7","updated":"20231205155832"},"Children":[{"Type":"NodeText","Data":"Gin框架支持中间件，可以自定义中间件逻辑并插入，例如日志记录、时间记录等；"}]}]},{"ID":"20231205152930-xvzvulm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205152930-xvzvulm","updated":"20231205155909"},"Children":[{"ID":"20231205152930-qf8jt7q","Type":"NodeParagraph","Properties":{"id":"20231205152930-qf8jt7q","updated":"20231205155909"},"Children":[{"Type":"NodeText","Data":"Gin框架提供了集中式的错误处理方式，可以捕获和管理请求过程中发生的错误，保证了服务的稳定性；"}]}]}]},{"ID":"20230904102050-6ar290u","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230904102050-6ar290u","updated":"20230904102050"},"Children":[{"Type":"NodeText","Data":"3 框架设计"}]},{"ID":"20231206103232-g8jpx6l","Type":"NodeParagraph","Properties":{"id":"20231206103232-g8jpx6l","updated":"20231206103239"},"Children":[{"Type":"NodeText","Data":"服务框架的流程图如下："}]},{"ID":"20231206103226-pbag66f","Type":"NodeParagraph","Properties":{"id":"20231206103226-pbag66f","updated":"20231206103227"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231205160310-5w8aotc.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231205155940-utde640","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231205155940-utde640","updated":"20231205155950"},"Children":[{"Type":"NodeText","Data":"3.1 框架的设计思路和实现方法"}]},{"ID":"20231205160310-paxmmiu","Type":"NodeParagraph","Properties":{"id":"20231205160310-paxmmiu","updated":"20231206103223"},"Children":[{"Type":"NodeText","Data":"​服务框架的设计思路和实现方法如下："}]},{"ID":"20231205160435-0z4u88k","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231205160435-0z4u88k","updated":"20231206100008"},"Children":[{"ID":"20231205160439-21y3e8m","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20231205160439-21y3e8m","updated":"20231205160439"},"Children":[{"ID":"20231205160439-xeg51ft","Type":"NodeParagraph","Properties":{"id":"20231205160439-xeg51ft","updated":"20231205160851"},"Children":[{"Type":"NodeText","Data":"使用Model类对单个模型进行封装，Model类封装完成后再进行Pipe类的封装；具体的封装步骤参考"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"服务框架用户手册"},{"Type":"NodeText","Data":"；"}]}]},{"ID":"20231205160852-2ufl0k7","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20231205160852-2ufl0k7"},"Children":[{"ID":"20231205160852-xh6nang","Type":"NodeParagraph","Properties":{"id":"20231205160852-xh6nang","updated":"20231205161403"},"Children":[{"Type":"NodeText","Data":"实例化Pipe类，使用 gRPC框架搭建gRPC的服务端，接收来自Go语言的gRPC客户端发送的请求；"}]}]},{"ID":"20231205161403-zbjtmge","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20231205161403-zbjtmge"},"Children":[{"ID":"20231205161403-aio7eop","Type":"NodeParagraph","Properties":{"id":"20231205161403-aio7eop","updated":"20231206093018"},"Children":[{"Type":"NodeText","Data":"将python的gRPC服务端的IP、端口等信息注册到Consul上，并加入健康检查机制，模型服务出现问题后将注销Consul 上的信息；"}]}]},{"ID":"20231206092809-t3xsktd","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20231206092809-t3xsktd"},"Children":[{"ID":"20231206092809-nwacltr","Type":"NodeParagraph","Properties":{"id":"20231206092809-nwacltr","updated":"20231206093439"},"Children":[{"Type":"NodeText","Data":"Go端将基于服务发现来获取可用的模型端口，并设计负载均衡算法提供可用的gRPC服务端的IP和端口；"}]}]},{"ID":"20231205161503-6jag1oy","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20231205161503-6jag1oy","updated":"20231205161940"},"Children":[{"ID":"20231205161503-lyee32y","Type":"NodeParagraph","Properties":{"id":"20231205161503-lyee32y","updated":"20231206092517"},"Children":[{"Type":"NodeText","Data":"基于Gin框架搭建Web接口，接收外部的请求；基于Go语言的"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"channel"},{"Type":"NodeText","Data":"​特性设计并发控制机制，限制请求数量；"}]}]},{"ID":"20231206092450-u42xxrp","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ni4=","Num":6},"Properties":{"id":"20231206092450-u42xxrp"},"Children":[{"ID":"20231206092450-ob6c1nh","Type":"NodeParagraph","Properties":{"id":"20231206092450-ob6c1nh","updated":"20231206093514"},"Children":[{"Type":"NodeText","Data":"将外部发送的请求体解析为gRPC请求体，从负载均衡模块获取可用gRPC IP和端口；"}]}]},{"ID":"20231206093456-g3jk5n6","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ny4=","Num":7},"Properties":{"id":"20231206093456-g3jk5n6"},"Children":[{"ID":"20231206093456-3z4rpjw","Type":"NodeParagraph","Properties":{"id":"20231206093456-3z4rpjw","updated":"20231206093801"},"Children":[{"Type":"NodeText","Data":"Go的gRPC客户端连接Python 的gRPC服务端，发送gRPC 请求， Python端服务器解析请求，调用模型获取生成结果，将生成结果封装为gRPC 响应体返回；"}]}]},{"ID":"20231206093801-ysusm5j","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"OC4=","Num":8},"Properties":{"id":"20231206093801-ysusm5j","updated":"20231206093942"},"Children":[{"ID":"20231206093801-3d4068u","Type":"NodeParagraph","Properties":{"id":"20231206093801-3d4068u","updated":"20231206093942"},"Children":[{"Type":"NodeText","Data":"Go的gRPC 客户端解析gRPC响应，封装为Web 端的响应返回；"}]}]},{"ID":"20231206095938-tqz6f3g","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"OS4=","Num":9},"Properties":{"id":"20231206095938-tqz6f3g","updated":"20231206100008"},"Children":[{"ID":"20231206095938-m5e4kcp","Type":"NodeParagraph","Properties":{"id":"20231206095938-m5e4kcp","updated":"20231206100008"},"Children":[{"Type":"NodeText","Data":"在Go 端有超时模块基于 Go语言中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"context"},{"Type":"NodeText","Data":"​管理请求时长，长时间收不到模型的生成结果则返回超时结果；错误收集模块是通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"defer recover()"},{"Type":"NodeText","Data":"​捕获和管理请求过程中发生的错误，保证服务的稳定性；日志模块使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"logger"},{"Type":"NodeText","Data":"​包记录请求的全过程，用于后期的监控、调试；鉴权密钥模块使用加密算法来验证是否为合法启动，运行过程中会随机检查服务器是否发生迁移，这是为了防止模型服务被随意部署调用；"}]}]}]},{"ID":"20230904102050-rm0xesh","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230904102050-rm0xesh","updated":"20231205160045"},"Children":[{"Type":"NodeText","Data":"3.2 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"框架的代码结构和模块划分"}]},{"ID":"20231206105845-3teunjx","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20231206105845-3teunjx","updated":"20231206111804"},"Children":[{"Type":"NodeText","Data":"3.2.1 Python 端代码结构："}]},{"ID":"20231206110022-nnsalry","Type":"NodeParagraph","Properties":{"id":"20231206110022-nnsalry","updated":"20231206142043"},"Children":[{"Type":"NodeText","Data":"Python端代码结构包括 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Model.py"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Pipe.py"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"grpc_server.py"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"proto"},{"Type":"NodeText","Data":"​目录和模型自身的代码；"}]},{"ID":"20231206142049-z3m4weo","Type":"NodeList","ListData":{},"Properties":{"id":"20231206142049-z3m4weo","updated":"20231206143256"},"Children":[{"ID":"20231206142051-sgp1wug","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206142051-sgp1wug","updated":"20231206142051"},"Children":[{"ID":"20231206142051-ygw31qu","Type":"NodeParagraph","Properties":{"id":"20231206142051-ygw31qu","updated":"20231206142051"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Model.py"},{"Type":"NodeText","Data":"​ 文件内包括了对单个模型的封装的Model类和自测程序；"}]}]},{"ID":"20231206142054-mbpir07","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206142054-mbpir07"},"Children":[{"ID":"20231206142054-3s2w77p","Type":"NodeParagraph","Properties":{"id":"20231206142054-3s2w77p","updated":"20231206142306"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Pipe.py"},{"Type":"NodeText","Data":"​文件内使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Pipe"},{"Type":"NodeText","Data":"​类实现了对模型按照策略的推理流程进行了封装，该文件内还有对"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Pipe"},{"Type":"NodeText","Data":"​的自测程序；"}]}]},{"ID":"20231206142306-hv9elhr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206142306-hv9elhr"},"Children":[{"ID":"20231206142306-enk5dv1","Type":"NodeParagraph","Properties":{"id":"20231206142306-enk5dv1","updated":"20231206142956"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"proto"},{"Type":"NodeText","Data":"​中包括了定义gRPC的通信协议的"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".proto"},{"Type":"NodeText","Data":"​文件和自动生成的"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"model_pb2.py"},{"Type":"NodeText","Data":"​和"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"model_pb2_grpc.py"},{"Type":"NodeText","Data":"​，这些文件提供了gRPC通信中必要的接口和数据结构的定义，以及实现了序列化和反序列化的功能；"}]}]},{"ID":"20231206143038-tfh7tkm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206143038-tfh7tkm","updated":"20231206143256"},"Children":[{"ID":"20231206143038-t0y8a0y","Type":"NodeParagraph","Properties":{"id":"20231206143038-t0y8a0y","updated":"20231206143256"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"grpc_server.py"},{"Type":"NodeText","Data":"​文件中实例化了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Pipe"},{"Type":"NodeText","Data":"​类来调用模型，创建了gRPC服务端，使用proto定义的数据结构与gRPC客户端进行通信；"}]}]}]},{"ID":"20231206110025-o9dgto3","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20231206110025-o9dgto3","updated":"20231206111955"},"Children":[{"Type":"NodeText","Data":"3.2.2 Go 端代码结构："}]},{"ID":"20231206111959-cx5c7ny","Type":"NodeParagraph","Properties":{"id":"20231206111959-cx5c7ny","updated":"20231206143811"},"Children":[{"Type":"NodeText","Data":"Go端代码结构包括 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"conf/config.yaml"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"controllers/controllers.go"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"global/global.go"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"pkg/logger/logger.go"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"pkg/proto"},{"Type":"NodeText","Data":"​目录、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"routers/api.go"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"service"},{"Type":"NodeText","Data":"​目录、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"setting/setting.go"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"storage"},{"Type":"NodeText","Data":"​目录、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"main.go"},{"Type":"NodeText","Data":"​文件；"}]},{"ID":"20231206143619-rkn45e0","Type":"NodeList","ListData":{},"Properties":{"id":"20231206143619-rkn45e0","updated":"20231206150737"},"Children":[{"ID":"20231206143629-zonyqnu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206143629-zonyqnu","updated":"20231206143629"},"Children":[{"ID":"20231206143629-pumv585","Type":"NodeParagraph","Properties":{"id":"20231206143629-pumv585","updated":"20231206143936"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"conf/config.yaml"},{"Type":"NodeText","Data":"​文件中定义了一些配置信息，包括Gin框架启动端口，鉴权验证url、日志等级、日志存放位置；"}]}]},{"ID":"20231206143936-734gp0g","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206143936-734gp0g"},"Children":[{"ID":"20231206143936-cr5nk4m","Type":"NodeParagraph","Properties":{"id":"20231206143936-cr5nk4m","updated":"20231206145441"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"controllers/controlles.go"},{"Type":"NodeText","Data":"​文件包含了对应接口的处理函数和控制并发的函数；"}]}]},{"ID":"20231206144118-6qaqjwc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206144118-6qaqjwc"},"Children":[{"ID":"20231206144118-6xffmxg","Type":"NodeParagraph","Properties":{"id":"20231206144118-6xffmxg","updated":"20231206144539"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"global/global.go"},{"Type":"NodeText","Data":"​文件定义了请求体、响应体、配置文件的数据结构，并根据简单工厂设计模式设计了对应的构造函数；"}]}]},{"ID":"20231206144539-4q74gv0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206144539-4q74gv0"},"Children":[{"ID":"20231206144539-pp2w0cn","Type":"NodeParagraph","Properties":{"id":"20231206144539-pp2w0cn","updated":"20231206144759"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"pkg/logger/logger.go"},{"Type":"NodeText","Data":"​ 文件是根据Go 语言的标准库 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"log"},{"Type":"NodeText","Data":"​自己设计的日志记录库，可以设置和输出不同等级的日志，并按照日期对日志进行存储。"}]}]},{"ID":"20231206144810-7cfrla3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206144810-7cfrla3"},"Children":[{"ID":"20231206144810-ti07jlg","Type":"NodeParagraph","Properties":{"id":"20231206144810-ti07jlg","updated":"20231206145030"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"pkg/proto"},{"Type":"NodeText","Data":"​目录中包含了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".proto"},{"Type":"NodeText","Data":"​和自动生成的"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"model.pb.go"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"model_grpc.pb.go"},{"Type":"NodeText","Data":"​文件；这些文件与Python中的"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"proto"},{"Type":"NodeText","Data":"​目录中的文件一样，提供了gRPC通信中必要的接口和数据结构的定义，以及实现了序列化和反序列化的功能；"}]}]},{"ID":"20231206145033-ftfknbn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206145033-ftfknbn"},"Children":[{"ID":"20231206145033-c28muun","Type":"NodeParagraph","Properties":{"id":"20231206145033-c28muun","updated":"20231206145213"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"routers/api.go"},{"Type":"NodeText","Data":"​文件对Gin框架的路由进行初始化，设置了HTTP路由和处理程序。"}]}]},{"ID":"20231206145213-muzfcb0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206145213-muzfcb0"},"Children":[{"ID":"20231206145213-8mjuxfw","Type":"NodeParagraph","Properties":{"id":"20231206145213-8mjuxfw","updated":"20231206150340"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"service"},{"Type":"NodeText","Data":"​目录包含了"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"servicd.go"},{"Type":"NodeText","Data":"​文件，该文件将"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"controllers.go"},{"Type":"NodeText","Data":"​文件中解析的请求数据、gRPC的连接信息进行汇总并进行鉴权验证，验证通过后将信息给到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"service/python.go"},{"Type":"NodeText","Data":"​文件中，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"python.go"},{"Type":"NodeText","Data":"​文件与 gRPC服务端建立连接，将请求数据转化为gRPC的通信结构，发送请求，获取python的gRPC服务端返回的结果，将结果转化为Web的响应结构。"}]}]},{"ID":"20231206150434-ihl9inf","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206150434-ihl9inf"},"Children":[{"ID":"20231206150434-zxguyqa","Type":"NodeParagraph","Properties":{"id":"20231206150434-zxguyqa","updated":"20231206150604"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"setting/setting.go"},{"Type":"NodeText","Data":"​文件包括一些初始化步骤：设置命令参数，读取配置文件等。"}]}]},{"ID":"20231206150542-bu41qxr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206150542-bu41qxr"},"Children":[{"ID":"20231206150542-0avjbh8","Type":"NodeParagraph","Properties":{"id":"20231206150542-0avjbh8","updated":"20231206150628"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"stroage"},{"Type":"NodeText","Data":"​目录是存储日志的目录，也可以更改 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"conf/config.yaml"},{"Type":"NodeText","Data":"​中的配置更改日志的存储位置。"}]}]},{"ID":"20231206150632-wi2126h","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206150632-wi2126h","updated":"20231206150737"},"Children":[{"ID":"20231206150632-cyolxx7","Type":"NodeParagraph","Properties":{"id":"20231206150632-cyolxx7","updated":"20231206150737"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"main.go"},{"Type":"NodeText","Data":"​文件是该框架的主文件，包括了初始化框架，进行鉴权验证并启动Gin框架。"}]}]}]},{"ID":"20230904102050-3v4f7ek","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230904102050-3v4f7ek","updated":"20231205160054"},"Children":[{"Type":"NodeText","Data":"3.3 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"框架的核心功能和特点"}]},{"ID":"20231206154206-8nzedwa","Type":"NodeParagraph","Properties":{"id":"20231206154206-8nzedwa","updated":"20231206154220"},"Children":[{"Type":"NodeText","Data":"该框架的核心功能和特点如下："}]},{"ID":"20231206104820-vkd12yp","Type":"NodeList","ListData":{},"Properties":{"id":"20231206104820-vkd12yp","updated":"20231206152547"},"Children":[{"ID":"20231206105926-aaochs9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206105926-aaochs9","updated":"20231206105926"},"Children":[{"ID":"20231206105926-ek43nab","Type":"NodeParagraph","Properties":{"id":"20231206105926-ek43nab","updated":"20231206154938"},"Children":[{"Type":"NodeText","Data":"轻耦合，基于微服务的理念，python服务和go服务独立运行，两者使用gRPC通信，不会因为某一个服务崩溃而导致整体框架的崩溃，也可以更新某一服务而另一服务不受影响；"}]}]},{"ID":"20231206151224-mj9kvej","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206151224-mj9kvej","updated":"20231206152547"},"Children":[{"ID":"20231206151224-agrd8cl","Type":"NodeParagraph","Properties":{"id":"20231206151224-agrd8cl","updated":"20231206152547"},"Children":[{"Type":"NodeText","Data":"高性能，基于Gin框架的特点，该框架可以处理大量的并发请求，并且响应速度也很快；Python端与Go端直接的通信由于使用了gRPC框架，可以实现高效的进程间通讯，对响应时间影响很小；"}]}]},{"ID":"20231206152016-47bb1k2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206152016-47bb1k2"},"Children":[{"ID":"20231206152016-0a3945v","Type":"NodeParagraph","Properties":{"id":"20231206152016-0a3945v","updated":"20231206152957"},"Children":[{"Type":"NodeText","Data":"并发控制，可以基于模型的实际并发能力限制发送给模型的请求数量，保证模型不会应为过多的请求导致占用系统资源过多，导致模型崩溃或服务器崩溃；"}]}]},{"ID":"20231206154256-quy4hsm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206154256-quy4hsm"},"Children":[{"ID":"20231206154256-97g7piy","Type":"NodeParagraph","Properties":{"id":"20231206154256-97g7piy","updated":"20231206154537"},"Children":[{"Type":"NodeText","Data":"轻量型：该框架不仅可以快速编译，还可以适应不同的操作系统；"}]}]},{"ID":"20231206154658-8y8dof2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206154658-8y8dof2"},"Children":[{"ID":"20231206154658-34sw4u2","Type":"NodeParagraph","Properties":{"id":"20231206154658-34sw4u2","updated":"20231206154739"},"Children":[{"Type":"NodeText","Data":"占用资源少：基于Go语言的垃圾回收机制和并发机制，该框架在运行过程中也不会占用过高的资源，"}]}]},{"ID":"20231206152137-g7c8cg5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206152137-g7c8cg5"},"Children":[{"ID":"20231206152137-0ndejav","Type":"NodeParagraph","Properties":{"id":"20231206152137-0ndejav","updated":"20231206155248"},"Children":[{"Type":"NodeText","Data":"稳定性：模型进行集群部署时，基于服务注册发现的功能，该框架可以保证及时发现不可用的模型，不会因为集群中个别的模型加载失败导致整体服务无法使用。"}]}]}]},{"ID":"20230904102050-prz1atr","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230904102050-prz1atr","updated":"20230904102050"},"Children":[{"Type":"NodeText","Data":"4 功能模块"}]},{"ID":"20231206105028-kkp0mbb","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231206105028-kkp0mbb","updated":"20231206105048"},"Children":[{"Type":"NodeText","Data":"4.1 框架包含的各个模块及其功能"}]},{"ID":"20231206104948-6cdoa6j","Type":"NodeParagraph","Properties":{"id":"20231206104948-6cdoa6j","updated":"20231206105014"},"Children":[{"Type":"NodeText","Data":"框架的功能模块分为Python和Go两大部分，每一部分又由一些小模块构成。"}]},{"ID":"20231206104948-r86hre0","Type":"NodeParagraph","Properties":{"id":"20231206104948-r86hre0","updated":"20231206104948"},"Children":[{"Type":"NodeText","Data":"Python部分可以分为四个模块："}]},{"ID":"20231206104948-w6nldbv","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231206104948-w6nldbv","updated":"20231206104948"},"Children":[{"ID":"20231206104948-dde3cpn","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20231206104948-dde3cpn","updated":"20231206104948"},"Children":[{"ID":"20231206104948-v09tuad","Type":"NodeParagraph","Properties":{"id":"20231206104948-v09tuad","updated":"20231206104948"},"Children":[{"Type":"NodeText","Data":"Model类模块：将单个模型使用Model 类进行算子类封装，用于调用模型实现单个模型的输入输出；"}]}]},{"ID":"20231206104948-yr4ttp9","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20231206104948-yr4ttp9","updated":"20231206104948"},"Children":[{"ID":"20231206104948-ts83ycn","Type":"NodeParagraph","Properties":{"id":"20231206104948-ts83ycn","updated":"20231206104948"},"Children":[{"Type":"NodeText","Data":"Pipe类模块： 将模型的策略推理流程按照Pipe类进行封装，用于外部调用；"}]}]},{"ID":"20231206104948-2qmff1f","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20231206104948-2qmff1f","updated":"20231206104948"},"Children":[{"ID":"20231206104948-7xun3vb","Type":"NodeParagraph","Properties":{"id":"20231206104948-7xun3vb","updated":"20231206104948"},"Children":[{"Type":"NodeText","Data":"gRPC服务端模块：负责与Go部分进行通信，调用Pipe类获取模型推理结果"}]}]},{"ID":"20231206104948-3g8aja4","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20231206104948-3g8aja4","updated":"20231206104948"},"Children":[{"ID":"20231206104948-9cfnk0u","Type":"NodeParagraph","Properties":{"id":"20231206104948-9cfnk0u","updated":"20231206104948"},"Children":[{"Type":"NodeText","Data":"服务注册模块：将gRPC 的连接信息发送到Consul上进行服务注册；"}]}]}]},{"ID":"20231206104948-2vmfwd3","Type":"NodeParagraph","Properties":{"id":"20231206104948-2vmfwd3","updated":"20231206104948"},"Children":[{"Type":"NodeText","Data":"Go部分可以分为四个模块："}]},{"ID":"20231206104948-wojxlf5","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231206104948-wojxlf5","updated":"20231206104948"},"Children":[{"ID":"20231206104948-lero8yf","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20231206104948-lero8yf","updated":"20231206104948"},"Children":[{"ID":"20231206104948-04jpqdm","Type":"NodeParagraph","Properties":{"id":"20231206104948-04jpqdm","updated":"20231206104948"},"Children":[{"Type":"NodeText","Data":"Gin Web端模块：接收并处理外部请求，将请求体解析为模型的输入信息并给到gRPC客户端模块，解析gRPC返回的结果，封装并返回Web响应；监控整体框架的运行，保证框架的高可用性和稳定性；"}]}]},{"ID":"20231206104948-h80l008","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20231206104948-h80l008","updated":"20231206104948"},"Children":[{"ID":"20231206104948-fua327t","Type":"NodeParagraph","Properties":{"id":"20231206104948-fua327t","updated":"20231206104948"},"Children":[{"Type":"NodeText","Data":"gRPC客户端模块：与Python端gRPC服务端建立连接并进行通信，发送模型需要的输入信息格式，获取模型的返回结果；"}]}]},{"ID":"20231206104948-c2ynolj","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20231206104948-c2ynolj","updated":"20231206104948"},"Children":[{"ID":"20231206104948-0pjkqrv","Type":"NodeParagraph","Properties":{"id":"20231206104948-0pjkqrv","updated":"20231206104948"},"Children":[{"Type":"NodeText","Data":"服务发现模块：从Consul中获取Python的gRPC服务端的连接信息，并持续监控连接信息是否发生变化，及时淘汰更新连接信息；"}]}]},{"ID":"20231206104948-r2xhk4b","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20231206104948-r2xhk4b","updated":"20231206104948"},"Children":[{"ID":"20231206104948-i5trcx8","Type":"NodeParagraph","Properties":{"id":"20231206104948-i5trcx8","updated":"20231206104948"},"Children":[{"Type":"NodeText","Data":"负载均衡模块：基于服务发现模块获取的连接信息列表进行负载均衡处理，为gRPC客户端提供可用gRPC服务端连接信息；"}]}]}]},{"ID":"20231206105053-8raiygj","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231206105053-8raiygj","updated":"20231206105202"},"Children":[{"Type":"NodeText","Data":"4.2 模块之间的交互方式和流程"}]},{"ID":"20230904102050-1urdtp8","Type":"NodeParagraph","Properties":{"id":"20230904102050-1urdtp8","updated":"20231206155559"},"Children":[{"Type":"NodeText","Data":"模块之间的交互流程如下："}]},{"ID":"20231206155559-31fl2jy","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231206155559-31fl2jy","updated":"20231206160956"},"Children":[{"ID":"20231206155604-suyvg1g","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20231206155604-suyvg1g","updated":"20231206155604"},"Children":[{"ID":"20231206155604-7zgvvvo","Type":"NodeParagraph","Properties":{"id":"20231206155604-7zgvvvo","updated":"20231206160647"},"Children":[{"Type":"NodeText","Data":"单个模型被封装为Model类；基于策略的推理流程将Model模块中的Model类封装为Pipe类，组成Pipe 模块；"}]}]},{"ID":"20231206155851-n6zkhn9","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20231206155851-n6zkhn9"},"Children":[{"ID":"20231206155851-z13wtrv","Type":"NodeParagraph","Properties":{"id":"20231206155851-z13wtrv","updated":"20231206160630"},"Children":[{"Type":"NodeText","Data":"grpc_server模块将Pipe 模块中Pipe类实例化，并搭建gRPC服务端；"}]}]},{"ID":"20231206155919-iuza4v3","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20231206155919-iuza4v3"},"Children":[{"ID":"20231206155919-4v0tnt2","Type":"NodeParagraph","Properties":{"id":"20231206155919-4v0tnt2","updated":"20231206160025"},"Children":[{"Type":"NodeText","Data":"服务注册模块获取gRPC服务端的连接IP和端口，将上述信息注册到Consul中；"}]}]},{"ID":"20231206160039-m0xav30","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20231206160039-m0xav30"},"Children":[{"ID":"20231206160039-apzl8qy","Type":"NodeParagraph","Properties":{"id":"20231206160039-apzl8qy","updated":"20231206160159"},"Children":[{"Type":"NodeText","Data":"服务发现模块获取Consul中的gRPC服务端的连接信息；"}]}]},{"ID":"20231206160200-wna6xyu","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20231206160200-wna6xyu","updated":"20231206161003"},"Children":[{"ID":"20231206160200-a7614kk","Type":"NodeParagraph","Properties":{"id":"20231206160200-a7614kk","updated":"20231206161003"},"Children":[{"Type":"NodeText","Data":"负载均衡模块基于服务发现模块获取的连接信息做负载均衡处理，提供一个可用的gRPC服务端连接信息；"}]}]},{"ID":"20231206160327-7usdms2","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ni4=","Num":6},"Properties":{"id":"20231206160327-7usdms2"},"Children":[{"ID":"20231206160327-s5b13dm","Type":"NodeParagraph","Properties":{"id":"20231206160327-s5b13dm","updated":"20231206160425"},"Children":[{"Type":"NodeText","Data":"Gin Web端模块接收外部的Post 请求，将请求信息解析后，发送给gRPC客户端；"}]}]},{"ID":"20231206160426-1fsys67","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ny4=","Num":7},"Properties":{"id":"20231206160426-1fsys67"},"Children":[{"ID":"20231206160426-fpel35v","Type":"NodeParagraph","Properties":{"id":"20231206160426-fpel35v","updated":"20231206160558"},"Children":[{"Type":"NodeText","Data":"gRPC客户端从负载均衡模块获取gRPC的连接信息，与Python端的gRPC服务端建立连接；从Gin Web 端获取请求信息，将请求信息整理后发送给gRPC服务端；"}]}]},{"ID":"20231206160558-jx07l2m","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"OC4=","Num":8},"Properties":{"id":"20231206160558-jx07l2m","updated":"20231206160959"},"Children":[{"ID":"20231206160558-kd42b2o","Type":"NodeParagraph","Properties":{"id":"20231206160558-kd42b2o","updated":"20231206160959"},"Children":[{"Type":"NodeText","Data":"gRPC服务端模块将请求信息解析后给到实例化的Pipe类，获取Pipe类生成结果，将生成的结果封装后返回给gRPC客户端；"}]}]},{"ID":"20231206160830-2hgxvge","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"OS4=","Num":9},"Properties":{"id":"20231206160830-2hgxvge","updated":"20231206160928"},"Children":[{"ID":"20231206160830-x2gxra5","Type":"NodeParagraph","Properties":{"id":"20231206160830-x2gxra5","updated":"20231206160928"},"Children":[{"Type":"NodeText","Data":"gRPC客户端模块将生成的信息给到Gin Web模块；"}]}]},{"ID":"20231206160923-zkoqdv7","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MTAu","Num":10},"Properties":{"id":"20231206160923-zkoqdv7","updated":"20231206160956"},"Children":[{"ID":"20231206160923-hwwne4g","Type":"NodeParagraph","Properties":{"id":"20231206160923-hwwne4g","updated":"20231206160956"},"Children":[{"Type":"NodeText","Data":"Gin 模块将大模型返回的内容进行解析封装，返回给请求者；"}]}]}]},{"ID":"20230904102050-lvhges0","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230904102050-lvhges0","updated":"20230904102050"},"Children":[{"Type":"NodeText","Data":"5 测试与优化"}]},{"ID":"20231206161122-4dq96na","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231206161122-4dq96na","updated":"20231206161159"},"Children":[{"Type":"NodeText","Data":"5.1 测试过程中遇到的问题和挑战"}]},{"ID":"20231206161159-h9psbkz","Type":"NodeParagraph","Properties":{"id":"20231206161159-h9psbkz","updated":"20231206161726"},"Children":[{"Type":"NodeText","Data":"在测试过程中遇到的问题和挑战有："}]},{"ID":"20231206161731-i2qfzfs","Type":"NodeList","ListData":{},"Properties":{"id":"20231206161731-i2qfzfs","updated":"20231206164638"},"Children":[{"ID":"20231206161733-jbud0t8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206161733-jbud0t8","updated":"20231206161733"},"Children":[{"ID":"20231206161733-cydjxu4","Type":"NodeParagraph","Properties":{"id":"20231206161733-cydjxu4","updated":"20231206161834"},"Children":[{"Type":"NodeText","Data":"python端的grpc服务端和大模型集成到一起，无法单独测试python服务端的grpc服务端消耗的资源，但不与大模型集成时测试python的gRPC服务端并不会占用过多的系统资源；"}]}]},{"ID":"20231206161836-n3duys2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206161836-n3duys2","updated":"20231206164638"},"Children":[{"ID":"20231206161836-dlbvygb","Type":"NodeParagraph","Properties":{"id":"20231206161836-dlbvygb","updated":"20231206164638"},"Children":[{"Type":"NodeText","Data":"现有的测试工具无法测试在单位时间服务可以处理的服务数量，故开发了并发测试工具来进行测试；"}]}]}]},{"ID":"20231206162046-fe8rs0z","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231206162046-fe8rs0z","updated":"20231206162103"},"Children":[{"Type":"NodeText","Data":"5.2 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"如何进行模型测试和优化，以达到最佳性能和运维效果"}]},{"ID":"20231206162105-686va2f","Type":"NodeParagraph","Properties":{"id":"20231206162105-686va2f","updated":"20231206163047"},"Children":[{"Type":"NodeText","Data":"为了保证模型的最佳性能，需要单独测试模型的实际的处理能力，看模型可以承受多大的请求量且性能不受影响，并根据模型的实际处理能力来限制并发的数量；"}]},{"ID":"20231206163057-fvky438","Type":"NodeParagraph","Properties":{"id":"20231206163057-fvky438","updated":"20231206163435"},"Children":[{"Type":"NodeText","Data":"框架可以优化负载均衡策略，保证系统资源不浪费的情况下尽快的处理外部的请求；"}]},{"ID":"20231206163438-vjlda6x","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231206163438-vjlda6x","updated":"20231206163459"},"Children":[{"Type":"NodeText","Data":"5.3 测试结果和性能指标"}]},{"ID":"20231206163505-snhyepy","Type":"NodeParagraph","Properties":{"id":"20231206163505-snhyepy","updated":"20231206173415"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"对该框架和Flask框架进行对比测试，详细的测试内容可见文档："},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://www.yuque.com/jiali-xymr9/wxd7us/rmx040gzoqmpdzkt","TextMarkTextContent":"性能测试报告"}]},{"ID":"20231206164335-6eb9uhe","Type":"NodeParagraph","Properties":{"id":"20231206164335-6eb9uhe","updated":"20231206164407"},"Children":[{"Type":"NodeText","Data":"下面是通过测试得到的结论："}]},{"ID":"20231206164407-fc0gzdk","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231206164407-fc0gzdk","updated":"20231206165252"},"Children":[{"ID":"20231206164455-fim5oon","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20231206164455-fim5oon","updated":"20231206165252"},"Children":[{"ID":"20231206164455-qoyfi3h","Type":"NodeParagraph","Properties":{"id":"20231206164455-qoyfi3h","updated":"20231206164455"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"单次请求推理时间响应时间测试："}]},{"ID":"20231206164925-f40xwfc","Type":"NodeList","ListData":{},"Properties":{"id":"20231206164925-f40xwfc","updated":"20231206165252"},"Children":[{"ID":"20231206164928-s3uzp4u","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206164928-s3uzp4u","updated":"20231206165252"},"Children":[{"ID":"20231206164928-7jb4b1s","Type":"NodeParagraph","Properties":{"id":"20231206164928-7jb4b1s","updated":"20231206165252"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"测试过程："}]},{"ID":"20231206164932-q0vxm87","Type":"NodeParagraph","Properties":{"id":"20231206164932-q0vxm87","updated":"20231206164948"},"Children":[{"Type":"NodeText","Data":"将 go 服务和 Flask 服务分别部署到单机单卡和多机多卡上，使用 Postman 对 Post 接口进行测试，对每种部署方式进行 10 次测试，并记录请求的时间和计算平均耗时"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"。"}]}]},{"ID":"20231206164950-g0tb9mz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206164950-g0tb9mz","updated":"20231206165250"},"Children":[{"ID":"20231206164950-hyg6hjd","Type":"NodeParagraph","Properties":{"id":"20231206164950-hyg6hjd","updated":"20231206165250"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"测试结论："}]},{"ID":"20231206165003-z2dcsch","Type":"NodeParagraph","Properties":{"id":"20231206165003-z2dcsch","updated":"20231206165003"},"Children":[{"Type":"NodeText","Data":"处理 Post 请求，go 服务和 flask 服务都很快，go 服务更快。"}]},{"ID":"20231206165003-nyyk26x","Type":"NodeList","ListData":{},"Properties":{"id":"20231206165003-nyyk26x","updated":"20231206165003"},"Children":[{"ID":"20231206165003-g96mmwi","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206165003-g96mmwi","updated":"20231206165003"},"Children":[{"ID":"20231206165003-x9mcxic","Type":"NodeParagraph","Properties":{"id":"20231206165003-x9mcxic","updated":"20231206165003"},"Children":[{"Type":"NodeText","Data":"单机单卡，go 服务要比 flask 服务的平均耗时要快 9.7 ms；"}]}]},{"ID":"20231206165003-uhcegfh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206165003-uhcegfh","updated":"20231206165003"},"Children":[{"ID":"20231206165003-fecx3a8","Type":"NodeParagraph","Properties":{"id":"20231206165003-fecx3a8","updated":"20231206165003"},"Children":[{"Type":"NodeText","Data":"单机8卡时，go服务比flask服务的平均耗时要快 1.7ms；"}]}]},{"ID":"20231206165003-wtyirui","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206165003-wtyirui","updated":"20231206165003"},"Children":[{"ID":"20231206165003-8p7ruko","Type":"NodeParagraph","Properties":{"id":"20231206165003-8p7ruko","updated":"20231206165003"},"Children":[{"Type":"NodeText","Data":"多机16卡时，go服务比flask服务的平均耗时要快3.2ms。"}]}]}]}]}]}]}]},{"ID":"20231206164509-cstw2w7","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231206164509-cstw2w7","updated":"20231206165246"},"Children":[{"ID":"20231206164530-2w5m7mg","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20231206164530-2w5m7mg","updated":"20231206165246"},"Children":[{"ID":"20231206164530-94xsgb9","Type":"NodeParagraph","Properties":{"id":"20231206164530-94xsgb9","updated":"20231206164702"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"单位时间内服务处理请求的数量："}]},{"ID":"20231206165020-umbx8t5","Type":"NodeList","ListData":{},"Properties":{"id":"20231206165020-umbx8t5","updated":"20231206165246"},"Children":[{"ID":"20231206165021-fj8whx6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206165021-fj8whx6","updated":"20231206165246"},"Children":[{"ID":"20231206165021-u8r5945","Type":"NodeParagraph","Properties":{"id":"20231206165021-u8r5945","updated":"20231206165246"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"测试过程："}]},{"ID":"20231206165032-j3h83zo","Type":"NodeParagraph","Properties":{"id":"20231206165032-j3h83zo","updated":"20231206165059"},"Children":[{"Type":"NodeText","Data":"通过go语言开发的工具请求服务的端口，该工具会在10秒内不断的发送请求，并计算统计请求成功返回响应的数量，该测试指标可以查看服务的并发处理能力"}]}]},{"ID":"20231206165024-wi7xl6h","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206165024-wi7xl6h","updated":"20231206165244"},"Children":[{"ID":"20231206165024-ps3kdhd","Type":"NodeParagraph","Properties":{"id":"20231206165024-ps3kdhd","updated":"20231206165244"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"测试结论："}]},{"ID":"20231206165115-wc085g0","Type":"NodeParagraph","Properties":{"id":"20231206165115-wc085g0","updated":"20231206165115"},"Children":[{"Type":"NodeText","Data":"在10秒内，单机单卡下go服务处理的请求要比flask服务更多，多卡状态下go服务和flask服务都可以处理大部分请求："}]},{"ID":"20231206165115-kywcpru","Type":"NodeList","ListData":{},"Properties":{"id":"20231206165115-kywcpru","updated":"20231206165115"},"Children":[{"ID":"20231206165115-gf52b2r","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206165115-gf52b2r","updated":"20231206165115"},"Children":[{"ID":"20231206165115-j4x4axi","Type":"NodeParagraph","Properties":{"id":"20231206165115-j4x4axi","updated":"20231206165115"},"Children":[{"Type":"NodeText","Data":"单机单卡，go服务要比flask服务处理请求的能力高25.03%；"}]}]},{"ID":"20231206165115-lwvixxs","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206165115-lwvixxs","updated":"20231206165115"},"Children":[{"ID":"20231206165115-4nxalph","Type":"NodeParagraph","Properties":{"id":"20231206165115-4nxalph","updated":"20231206165115"},"Children":[{"Type":"NodeText","Data":"单机8卡，go服务要比flask服务处理请求的能力高8.21%；"}]}]},{"ID":"20231206165115-1uc6oe2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206165115-1uc6oe2","updated":"20231206165115"},"Children":[{"ID":"20231206165115-8twpxjl","Type":"NodeParagraph","Properties":{"id":"20231206165115-8twpxjl","updated":"20231206165115"},"Children":[{"Type":"NodeText","Data":"多机16卡，go服务和flask服务处理请求的能力相当，都可以在10秒内处理99.80%的请求。"}]}]}]}]}]}]}]},{"ID":"20231206164746-awfcs7q","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231206164746-awfcs7q","updated":"20231206165237"},"Children":[{"ID":"20231206164749-gkzw69z","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20231206164749-gkzw69z","updated":"20231206165237"},"Children":[{"ID":"20231206164806-1rvpp85","Type":"NodeParagraph","Properties":{"id":"20231206164806-1rvpp85","updated":"20231206164819"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"同时访问Web服务的请求数："}]},{"ID":"20231206165140-mt7cfyc","Type":"NodeList","ListData":{},"Properties":{"id":"20231206165140-mt7cfyc","updated":"20231206165237"},"Children":[{"ID":"20231206165141-x72r5so","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206165141-x72r5so","updated":"20231206165237"},"Children":[{"ID":"20231206165141-eesl25b","Type":"NodeParagraph","Properties":{"id":"20231206165141-eesl25b","updated":"20231206165237"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"测试过程"}]},{"ID":"20231206165148-rrzldpa","Type":"NodeParagraph","Properties":{"id":"20231206165148-rrzldpa","updated":"20231206165225"},"Children":[{"Type":"NodeText","Data":"使用go语言开发的工具在瞬时请求Post端口500次，查看flask服务和go服务运行状态和处理请求的耗时"}]}]},{"ID":"20231206165145-4f95wko","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206165145-4f95wko","updated":"20231206165234"},"Children":[{"ID":"20231206165145-8b2oxox","Type":"NodeParagraph","Properties":{"id":"20231206165145-8b2oxox","updated":"20231206165234"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"测试结论"}]},{"ID":"20231206165201-cs0r0wi","Type":"NodeParagraph","Properties":{"id":"20231206165201-cs0r0wi","updated":"20231206165201"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"单机单卡的服务的请求最长耗时都比单机多卡和多级多卡的要高，这是由于所有的请求都在一张卡上处理，单卡性能爆满导致部分请求无法及时处理。"}]},{"ID":"20231206165201-eqvzhjv","Type":"NodeList","ListData":{},"Properties":{"id":"20231206165201-eqvzhjv","updated":"20231206165201"},"Children":[{"ID":"20231206165201-rcfsldq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206165201-rcfsldq","updated":"20231206165201"},"Children":[{"ID":"20231206165201-wpec2z9","Type":"NodeParagraph","Properties":{"id":"20231206165201-wpec2z9","updated":"20231206165201"},"Children":[{"Type":"NodeText","Data":"单机单卡，go服务要比flask服务的请求的平均耗时要快3039ms；"}]}]},{"ID":"20231206165201-rh1qiwm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206165201-rh1qiwm","updated":"20231206165201"},"Children":[{"ID":"20231206165201-yyw93o5","Type":"NodeParagraph","Properties":{"id":"20231206165201-yyw93o5","updated":"20231206165201"},"Children":[{"Type":"NodeText","Data":"单机8卡，go服务要比flask服务的请求平均耗时要快3742ms；"}]}]},{"ID":"20231206165201-rf8d0yu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231206165201-rf8d0yu","updated":"20231206165201"},"Children":[{"ID":"20231206165201-0njw50n","Type":"NodeParagraph","Properties":{"id":"20231206165201-0njw50n","updated":"20231206165201"},"Children":[{"Type":"NodeText","Data":"多机16卡，go服务要比flask服务的请求平均耗时要快39ms。"}]}]}]}]}]}]}]},{"ID":"20230904102050-vu1lcm6","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230904102050-vu1lcm6","updated":"20230904102050"},"Children":[{"Type":"NodeText","Data":"6 接入方案及流程"}]},{"ID":"20231206165317-nk6dwz4","Type":"NodeParagraph","Properties":{"id":"20231206165317-nk6dwz4","updated":"20231206173359"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"接入方案及流程见"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://rises-tech.yuque.com/iffdfi/ui60km/ye5hvh9n7vmaq091","TextMarkATitle":"服务框架用户手册(Beta版本)","TextMarkTextContent":"服务框架用户手册(Beta版本)"}]},{"ID":"20230904102050-pf0qkdl","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230904102050-pf0qkdl","updated":"20230904102050"},"Children":[{"Type":"NodeText","Data":"7 总结与展望"}]},{"ID":"20231206165510-a9bkopc","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231206165510-a9bkopc","updated":"20231206172143"},"Children":[{"Type":"NodeText","Data":"7.1 框架的优点和不足之处"}]},{"ID":"20231206165532-96ypc6u","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20231206165532-96ypc6u","updated":"20231206172147"},"Children":[{"Type":"NodeText","Data":"7.1.1 优点："}]},{"ID":"20231206170108-iv34127","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231206170108-iv34127","updated":"20231206172106"},"Children":[{"ID":"20231206170125-u5zft4p","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20231206170125-u5zft4p","updated":"20231206170125"},"Children":[{"ID":"20231206170125-7n6xp53","Type":"NodeParagraph","Properties":{"id":"20231206170125-7n6xp53","updated":"20231206171312"},"Children":[{"Type":"NodeText","Data":"高性能：可以在短时间内处理大量的请求；相较于Flask框架，处理外部请求的速度更快，可以在单位时间内处理更多的请求；"}]}]},{"ID":"20231206170923-zvtd0ne","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20231206170923-zvtd0ne"},"Children":[{"ID":"20231206170923-p9phnrd","Type":"NodeParagraph","Properties":{"id":"20231206170923-p9phnrd","updated":"20231206171623"},"Children":[{"Type":"NodeText","Data":"并发控制：可根据模型的实际并发能力向模型发送请求，保证模型不会接收过多的请求导致崩溃；"}]}]},{"ID":"20231206171034-ta90cka","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20231206171034-ta90cka"},"Children":[{"ID":"20231206171034-yk2mzu8","Type":"NodeParagraph","Properties":{"id":"20231206171034-yk2mzu8","updated":"20231206171220"},"Children":[{"Type":"NodeText","Data":"占用系统资源不高：基于Go语言底层的垃圾回收机制和并发模型等机制，该框架在运行过程中也不会占用过高的资源；"}]}]},{"ID":"20231206171233-dbf86o4","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20231206171233-dbf86o4"},"Children":[{"ID":"20231206171233-hngxxs8","Type":"NodeParagraph","Properties":{"id":"20231206171233-hngxxs8","updated":"20231206171607"},"Children":[{"Type":"NodeText","Data":"稳定性高：Go语言的Gin框架提供了集中式的错误处理方式，同时框架内也加入了防止崩溃的程序，保证框架不因发生错误导致崩溃；"}]}]},{"ID":"20231206171554-c3fq5l2","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20231206171554-c3fq5l2"},"Children":[{"ID":"20231206171554-4m5xef9","Type":"NodeParagraph","Properties":{"id":"20231206171554-4m5xef9","updated":"20231206171805"},"Children":[{"Type":"NodeText","Data":"详细的日志记录：基于logger包，可以将请求过程详细的记录到日志文件中，并基于日志的重要与否将日志进行分级记录；"}]}]},{"ID":"20231206171807-kb4pr6y","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ni4=","Num":6},"Properties":{"id":"20231206171807-kb4pr6y","updated":"20231206172106"},"Children":[{"ID":"20231206171807-mb59sr6","Type":"NodeParagraph","Properties":{"id":"20231206171807-mb59sr6","updated":"20231206172106"},"Children":[{"Type":"NodeText","Data":"Python服务和Go服务之间处于轻耦合状态。python服务和go服务独立运行，不会因为某一个服务崩溃而导致整体框架的崩溃，也可以更新某一服务而另一服务不受影响；"}]}]}]},{"ID":"20231206170109-bjkay9s","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20231206170109-bjkay9s","updated":"20231206172153"},"Children":[{"Type":"NodeText","Data":"7.1.2 不足："}]},{"ID":"20231206170133-k2jvakc","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231206170133-k2jvakc","updated":"20231206170648"},"Children":[{"ID":"20231206170135-2ed43eq","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20231206170135-2ed43eq","updated":"20231206170135"},"Children":[{"ID":"20231206170135-92urhbn","Type":"NodeParagraph","Properties":{"id":"20231206170135-92urhbn","updated":"20231206170429"},"Children":[{"Type":"NodeText","Data":"每次请求时都要建立gRPC连接，增加了一些耗时，模型与Go服务部署在同一服务器下时，该连接耗时可以忽略不计，当模型需要进行集群部署时，就会增加一定的耗时；"}]}]},{"ID":"20231206170429-v3tse4l","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20231206170429-v3tse4l","updated":"20231206170652"},"Children":[{"ID":"20231206170429-1oifymf","Type":"NodeParagraph","Properties":{"id":"20231206170429-1oifymf","updated":"20231206170652"},"Children":[{"Type":"NodeText","Data":"负载均衡策略目前是轮询策略，后续要根据模型的实际性能等因素优化负载均衡策略；"}]}]},{"ID":"20231206170540-2my2zp0","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20231206170540-2my2zp0","updated":"20231206170648"},"Children":[{"ID":"20231206170540-9pc8faq","Type":"NodeParagraph","Properties":{"id":"20231206170540-9pc8faq","updated":"20231206170648"},"Children":[{"Type":"NodeText","Data":"日志目前只是记录在本地文件中，查看时需要翻看本地文件，后续可以利用ES将日志可视化；"}]}]}]},{"ID":"20230904102050-gzb1g6o","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230904102050-gzb1g6o","updated":"20231206172201"},"Children":[{"Type":"NodeText","Data":"7.2 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"展望未来的改进和发展方向"}]},{"ID":"20231207141915-5ym2s57","Type":"NodeParagraph","Properties":{"id":"20231207141915-5ym2s57","updated":"20231207143350"},"Children":[{"Type":"NodeText","Data":"该框架目前以微服务架构为设计理念，设计的服务架构为松耦合结构，每个服务都专注自己的功能，服务可以独立开发、部署和扩展。未来将继续基于微服务的理念来扩展模型的后端功能，例如问答的缓存，用户身份验证、等"}]},{"ID":"20231207142847-bfz0qzy","Type":"NodeParagraph","Properties":{"id":"20231207142847-bfz0qzy"},"Children":[{"Type":"NodeText","Data":"目前首先要解决现有的问题，"}]},{"ID":"20231207142743-hqu8hig","Type":"NodeParagraph","Properties":{"id":"20231207142743-hqu8hig"},"Children":[{"Type":"NodeText","Data":"  针对Python 服务与 Go服务之间的gRPC通讯，要基于gRPC 的链接建立连接池，当Go服务启动"}]},{"ID":"20231207141917-4dsbu0l","Type":"NodeParagraph","Properties":{"id":"20231207141917-4dsbu0l"}},{"ID":"20230904102050-3nj8qxs","Type":"NodeList","ListData":{},"Properties":{"id":"20230904102050-3nj8qxs","updated":"20230904102050"},"Children":[{"ID":"20230904102050-31it5v3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-31it5v3","updated":"20230904102050"},"Children":[{"ID":"20230904102050-qdhw39g","Type":"NodeParagraph","Properties":{"id":"20230904102050-qdhw39g","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"路由模块：用于处理请求的URL路径和HTTP方法，将请求映射到相应的处理函数上。"}]}]},{"ID":"20230904102050-0lsicl9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-0lsicl9","updated":"20230904102050"},"Children":[{"ID":"20230904102050-8ya5tj5","Type":"NodeParagraph","Properties":{"id":"20230904102050-8ya5tj5","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"请求体解析模块：用于解析来自客户端的请求体，如"},{"Type":"NodeText","Data":"JSON"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"、表单数据等。"}]}]},{"ID":"20230904102050-u89klnw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-u89klnw","updated":"20230904102050"},"Children":[{"ID":"20230904102050-f3t0gyn","Type":"NodeParagraph","Properties":{"id":"20230904102050-f3t0gyn","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"响应模块：用于构建并发送响应给客户端，包括响应头和响应体。"}]}]},{"ID":"20230904102050-t4jnid4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-t4jnid4","updated":"20230904102050"},"Children":[{"ID":"20230904102050-86n5tg1","Type":"NodeParagraph","Properties":{"id":"20230904102050-86n5tg1","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"模型封装模块：用于定义和操作模型，包括模型实例化、参数转入等。"}]}]},{"ID":"20230904102050-vc5q1o1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-vc5q1o1","updated":"20230904102050"},"Children":[{"ID":"20230904102050-doh0a30","Type":"NodeParagraph","Properties":{"id":"20230904102050-doh0a30","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"中间件模块：用于处理请求的生命周期中的一些通用逻辑，如身份验证、日志记录等。"}]}]},{"ID":"20230904102050-dru4mq9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-dru4mq9","updated":"20230904102050"},"Children":[{"ID":"20230904102050-k8kw25v","Type":"NodeParagraph","Properties":{"id":"20230904102050-k8kw25v","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"配置管理模块：用于读取和解析配置文件，为应用程序提供灵活的配置选项。"}]}]},{"ID":"20230904102050-dkgesg2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-dkgesg2","updated":"20230904102050"},"Children":[{"ID":"20230904102050-h6drs01","Type":"NodeParagraph","Properties":{"id":"20230904102050-h6drs01","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"日志模块：用于记录应用程序的运行日志，包括错误日志、警告日志等。"}]}]},{"ID":"20230904102050-ffzw9qc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-ffzw9qc","updated":"20230904102050"},"Children":[{"ID":"20230904102050-arwps9u","Type":"NodeParagraph","Properties":{"id":"20230904102050-arwps9u","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"异常处理模块：用于统一处理应用程序中出现的错误，提供友好的错误提示和错误追踪功能。"}]}]},{"ID":"20230904102050-oszggui","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-oszggui","updated":"20230904102050"},"Children":[{"ID":"20230904102050-7s3l1ov","Type":"NodeParagraph","Properties":{"id":"20230904102050-7s3l1ov","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"启动与停止模块：用于启动和停止应用程序，包括配置启动参数、处理信号等。"}]}]}]},{"ID":"20230904102050-jpgv4zo","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230904102050-jpgv4zo","updated":"20231206172214"},"Children":[{"Type":"NodeText","Data":"7.3 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"下一步工作计划"}]},{"ID":"20231205152325-udl749p","Type":"NodeList","ListData":{},"Properties":{"id":"20231205152325-udl749p","updated":"20231206172207"},"Children":[{"ID":"20231205152328-xwrmuvt","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205152328-xwrmuvt","updated":"20231205152328"},"Children":[{"ID":"20231205152328-a83zmfm","Type":"NodeParagraph","Properties":{"id":"20231205152328-a83zmfm","updated":"20231205152333"},"Children":[{"Type":"NodeText","Data":"grpc连接池"}]}]},{"ID":"20231205152334-maav26k","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205152334-maav26k"},"Children":[{"ID":"20231205152334-24hpef1","Type":"NodeParagraph","Properties":{"id":"20231205152334-24hpef1","updated":"20231205152338"},"Children":[{"Type":"NodeText","Data":"负载均衡"}]}]},{"ID":"20231205152338-matprqp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205152338-matprqp"},"Children":[{"ID":"20231205152338-w8618pb","Type":"NodeParagraph","Properties":{"id":"20231205152338-w8618pb","updated":"20231205152349"},"Children":[{"Type":"NodeText","Data":"服务注册和服务发现；"}]}]},{"ID":"20231205152353-65l0g83","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231205152353-65l0g83","updated":"20231205152357"},"Children":[{"ID":"20231205152353-ztw3y6w","Type":"NodeParagraph","Properties":{"id":"20231205152353-ztw3y6w","updated":"20231205152357"},"Children":[{"Type":"NodeText","Data":"日志系统升级；"}]}]}]},{"ID":"20231206091418-k3x1qm4","Type":"NodeParagraph","Properties":{"id":"20231206091418-k3x1qm4"}}]}