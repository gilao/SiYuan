{"ID":"20231023095957-w9ndhx5","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f6fa","id":"20231023095957-w9ndhx5","tags":"公众号-捡田螺的小男孩,未完成","title":"接口请求合并，效率直接加倍","updated":"20231023101100"},"Children":[{"ID":"20231023095957-3ljmjd7","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20231023095957-3ljmjd7","updated":"20231023100054"},"Children":[{"Type":"NodeText","Data":"请求合并到底有什么意义呢？"}]},{"ID":"20231023100224-95lyx3b","Type":"NodeParagraph","Properties":{"id":"20231023100224-95lyx3b"},"Children":[{"Type":"NodeText","Data":"我们来看下图。"}]},{"ID":"20231023100111-4zdk7ph","Type":"NodeParagraph","Properties":{"id":"20231023100111-4zdk7ph","updated":"20231023100111"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231023100111-5ndv8sw.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231023100120-j1i4i3b","Type":"NodeParagraph","Properties":{"id":"20231023100120-j1i4i3b","updated":"20231023100134"},"Children":[{"Type":"NodeText","Data":"假设我们3个用户（用户id分别是1、2、3），现在他们都要查询自己的基本信息，请求到服务器，服务器端请求数据库，发出3次请求。我们都知道数据库连接资源是相当宝贵的，那么我们怎么尽可能节省连接资源呢？"}]},{"ID":"20231023100135-gsa73hx","Type":"NodeBlockquote","Properties":{"id":"20231023100135-gsa73hx","updated":"20231023100143"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20231023100142-1jrbva9","Type":"NodeParagraph","Properties":{"id":"20231023100142-1jrbva9","updated":"20231023100143"},"Children":[{"Type":"NodeText","Data":"这里把数据库换成被调用的远程服务，也是同样的道理。"}]}]},{"ID":"20231023100144-5bvaodv","Type":"NodeParagraph","Properties":{"id":"20231023100144-5bvaodv","updated":"20231023100147"},"Children":[{"Type":"NodeText","Data":"我们改变下思路，如下图所示。"}]},{"ID":"20231023100200-paiwnw3","Type":"NodeParagraph","Properties":{"id":"20231023100200-paiwnw3","updated":"20231023100200"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231023100200-axh754c.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231023100211-jog2s1v","Type":"NodeParagraph","Properties":{"id":"20231023100211-jog2s1v","updated":"20231023100211"},"Children":[{"Type":"NodeText","Data":"我们在服务器端把请求合并，只发出一条SQL查询数据库，数据库返回后，服务器端处理返回数据，根据一个唯一请求ID，把数据分组，返回给对应用户。"}]},{"ID":"20231023100214-zdst5dg","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20231023100214-zdst5dg","updated":"20231023100236"},"Children":[{"Type":"NodeText","Data":"技术手段"}]},{"ID":"20231023100237-s8kf1o2","Type":"NodeList","ListData":{},"Properties":{"id":"20231023100237-s8kf1o2","updated":"20231023100429"},"Children":[{"ID":"20231023100238-fq0b6tx","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231023100238-fq0b6tx","updated":"20231023100238"},"Children":[{"ID":"20231023100238-kt46k0o","Type":"NodeParagraph","Properties":{"id":"20231023100238-kt46k0o","updated":"20231023100304"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"LinkedBlockQueue"},{"Type":"NodeText","Data":"​ 阻塞队列"}]}]},{"ID":"20231023100304-4j7n95u","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231023100304-4j7n95u"},"Children":[{"ID":"20231023100304-sl6pji1","Type":"NodeParagraph","Properties":{"id":"20231023100304-sl6pji1","updated":"20231023100336"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ScheduledThreadPoolExecutor"},{"Type":"NodeText","Data":"​ 定时任务线程池"}]}]},{"ID":"20231023100336-vtevgvb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231023100336-vtevgvb","updated":"20231023100429"},"Children":[{"ID":"20231023100336-hkc3wfz","Type":"NodeParagraph","Properties":{"id":"20231023100336-hkc3wfz","updated":"20231023100429"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"CompleteableFuture future"},{"Type":"NodeText","Data":"​阻塞机制"}]}]}]},{"ID":"20231023101100-yiocnz3","Type":"NodeParagraph","Properties":{"id":"20231023101100-yiocnz3"}}]}