{"ID":"20230926213729-032jjm6","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230926213729-032jjm6","title":"CMD 和 ENTRYPOINT 区别","updated":"20230926215030"},"Children":[{"ID":"20230926213852-71k0lcy","Type":"NodeParagraph","Properties":{"id":"20230926213852-71k0lcy","updated":"20230926214041"},"Children":[{"Type":"NodeText","Data":"CMD 指令和 ENTRYPOINT指令的作用都是为镜像指定容器后的命令，那么他们分别有何优点呢？"}]},{"ID":"20230926214041-c4aldj5","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230926214041-c4aldj5","updated":"20230926214110"},"Children":[{"Type":"NodeText","Data":"CMD"}]},{"ID":"20230926214111-9enrl9m","Type":"NodeParagraph","Properties":{"id":"20230926214111-9enrl9m","updated":"20230926214116"},"Children":[{"Type":"NodeText","Data":"支持三种格式"}]},{"ID":"20230926214118-u74j1s4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230926214118-u74j1s4","updated":"20230926214126"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"  CMD [\"executable\",\"param1\",\"param2\"] 使用 exec 执行，推荐方式；\n  CMD command param1 param2 在 /bin/sh 中执行，提供给需要交互的应用；\n  CMD [\"param1\",\"param2\"] 提供给 ENTRYPOINT 的默认参数；\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230926213729-8rv3yg7","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20230926213729-8rv3yg7","updated":"20230926214559"},"Children":[{"ID":"20230926214333-be9irmv","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20230926214333-be9irmv","updated":"20230926214333"},"Children":[{"ID":"20230926214333-b4l99ky","Type":"NodeParagraph","Properties":{"id":"20230926214333-b4l99ky","updated":"20230926214500"},"Children":[{"Type":"NodeText","Data":"指定启动容器时执行的命令，"},{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-card-error-background); color: var(--b3-card-error-color);"},"TextMarkType":"strong text","TextMarkTextContent":"每个Dockerfile 只能有一条CMD命令，如果指定了多条命令，只有最后一条会被执行"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-card-error-background); color: var(--b3-card-error-color);\"}"},{"Type":"NodeText","Data":"。"}]}]},{"ID":"20230926214504-jq7tyug","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20230926214504-jq7tyug","updated":"20230926214559"},"Children":[{"ID":"20230926214504-lydba6u","Type":"NodeParagraph","Properties":{"id":"20230926214504-lydba6u","updated":"20230926214559"},"Children":[{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-card-info-background); color: var(--b3-font-color5);"},"TextMarkType":"text strong","TextMarkTextContent":"如果用户启动容器时候指定了运行docker run 的命令，则会覆盖掉 CMD 指定的命令"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-card-info-background); color: var(--b3-font-color5);\"}"}]}]}]},{"ID":"20230926214501-nd5wm4q","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230926214501-nd5wm4q","updated":"20230926214634"},"Children":[{"Type":"NodeText","Data":"ENTRYPOINT"}]},{"ID":"20230926214635-9497fdv","Type":"NodeParagraph","Properties":{"id":"20230926214635-9497fdv","updated":"20230926214645"},"Children":[{"Type":"NodeText","Data":"两种格式："}]},{"ID":"20230926214646-vz2s6xy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230926214646-vz2s6xy","updated":"20230926214653"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"ENTRYPOINT [\"executable\", \"param1\", \"param2\"]\n\nENTRYPOINT command param1 param2（shell中执行）。\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230926214654-6z6j3ol","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20230926214654-6z6j3ol","updated":"20230926214710"},"Children":[{"ID":"20230926214710-7hbh1pp","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20230926214710-7hbh1pp","updated":"20230926214710"},"Children":[{"ID":"20230926214710-asfkcz5","Type":"NodeParagraph","Properties":{"id":"20230926214710-asfkcz5","updated":"20230926214721"},"Children":[{"Type":"NodeText","Data":"配置容器启动后执行的命令，并且不可被 docker run 提供的参数覆盖。"}]}]},{"ID":"20230926214721-0fkub9w","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20230926214721-0fkub9w"},"Children":[{"ID":"20230926214721-7ynxr3d","Type":"NodeParagraph","Properties":{"id":"20230926214721-7ynxr3d","updated":"20230926214731"},"Children":[{"Type":"NodeText","Data":"每个 Dockerfile 中只能有一个 ENTRYPOINT，当指定多个时，只有最后一个起效。"}]}]}]},{"ID":"20230926214731-4qr8y6n","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230926214731-4qr8y6n","updated":"20230926214824"},"Children":[{"Type":"NodeText","Data":"共同点"}]},{"ID":"20230926214825-az3fv0e","Type":"NodeParagraph","Properties":{"id":"20230926214825-az3fv0e","updated":"20230926214832"},"Children":[{"Type":"NodeText","Data":"从上面的说明，我们可以看到有两个共同点："}]},{"ID":"20230926214834-koisi46","Type":"NodeParagraph","Properties":{"id":"20230926214834-koisi46","updated":"20230926214847"},"Children":[{"Type":"NodeText","Data":"1、都可以指定shell或exec函数调用的方式执行命令；\n2、当存在多个CMD指令或ENTRYPOINT指令时，只有最后一个生效；"}]},{"ID":"20230926214848-546fgb5","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230926214848-546fgb5","updated":"20230926214853"},"Children":[{"Type":"NodeText","Data":"差异"}]},{"ID":"20230926214858-70p7xsy","Type":"NodeParagraph","Properties":{"id":"20230926214858-70p7xsy","updated":"20230926214858"},"Children":[{"Type":"NodeText","Data":"差异1：CMD指令指定的容器启动时命令可以被docker run指定的命令覆盖，\n\t  而ENTRYPOINT指令指定的命令不能被覆盖，而是将docker run指定的参数当做ENTRYPOINT指定命令的参数。"}]},{"ID":"20230926214858-il2nsv4","Type":"NodeParagraph","Properties":{"id":"20230926214858-il2nsv4","updated":"20230926214858"},"Children":[{"Type":"NodeText","Data":"差异2：CMD指令可以为ENTRYPOINT指令设置默认参数，而且可以被docker run指定的参数覆盖；"}]},{"ID":"20230926215030-rtsye28","Type":"NodeParagraph","Properties":{"id":"20230926215030-rtsye28"}}]}