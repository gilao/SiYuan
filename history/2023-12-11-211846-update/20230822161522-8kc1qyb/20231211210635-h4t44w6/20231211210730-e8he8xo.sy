{"ID":"20231211210730-e8he8xo","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f6d5","id":"20231211210730-e8he8xo","tags":"公众号-凉凉的知识库,gRPC","title":"01-protobuf基础","updated":"20231211211845"},"Children":[{"ID":"20231211210730-bceykua","Type":"NodeParagraph","Properties":{"id":"20231211210730-bceykua","updated":"20231211210829"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"gRPC"},{"Type":"NodeText","Data":"​是谷歌开源的一款"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"高性能"},{"Type":"NodeText","Data":"、支持多种开发语言的服务框架，对于一个rpc我们关注如下几方面："}]},{"ID":"20231211210836-jlfv4u8","Type":"NodeParagraph","Properties":{"id":"20231211210836-jlfv4u8","updated":"20231211210836"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"序列化协议"},{"Type":"NodeText","Data":"。"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"gRPC"},{"Type":"NodeText","Data":"​使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"protobuf"},{"Type":"NodeText","Data":"​，首先使用protobuf定义服务，然后使用这个文件来生成客户端和服务端的代码。因为pb是跨语言的，因此即使服务端和客户端语言并不一致也是可以互相序列化和反序列化的"}]},{"ID":"20231211210836-iervq70","Type":"NodeParagraph","Properties":{"id":"20231211210836-iervq70","updated":"20231211210836"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"网络传输层"},{"Type":"NodeText","Data":"。gRPC使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http2.0"},{"Type":"NodeText","Data":"​协议，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http2.0"},{"Type":"NodeText","Data":"​相比于"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"HTTP 1.x"},{"Type":"NodeText","Data":"​ ，大幅度的提升了 web 性能。"}]},{"ID":"20231211210845-ficn6zd","Type":"NodeParagraph","Properties":{"id":"20231211210845-ficn6zd","updated":"20231211210845"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"849515ad57df8eae86e60fb19708053c"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/849515ad57df8eae86e60fb19708053c-20231211210845-rdmzhv0.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231211210852-3a8mnar","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231211210852-3a8mnar","updated":"20231211210859"},"Children":[{"Type":"NodeText","Data":"Protobuf IDL"}]},{"ID":"20231211210907-7gxlhzk","Type":"NodeParagraph","Properties":{"id":"20231211210907-7gxlhzk","updated":"20231211210907"},"Children":[{"Type":"NodeText","Data":"所谓序列化通俗来说就是把内存的一段数据转化成二进制并存储或者通过网络传输，而读取磁盘或另一端收到后可以在内存中重建这段数据"}]},{"ID":"20231211210907-apxlsus","Type":"NodeParagraph","Properties":{"id":"20231211210907-apxlsus","updated":"20231211210907"},"Children":[{"Type":"NodeText","Data":"1、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"protobuf"},{"Type":"NodeText","Data":"​协议是跨语言跨平台的序列化协议。"}]},{"ID":"20231211210907-sdu183t","Type":"NodeParagraph","Properties":{"id":"20231211210907-sdu183t","updated":"20231211210907"},"Children":[{"Type":"NodeText","Data":"2、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"protobuf"},{"Type":"NodeText","Data":"​本身并不是和"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"gRPC"},{"Type":"NodeText","Data":"​绑定的。它也可以被用于非RPC场景，如存储等"}]},{"ID":"20231211210907-h1mwcmw","Type":"NodeParagraph","Properties":{"id":"20231211210907-h1mwcmw","updated":"20231211210907"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"json"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026lt;span\u0026gt; \u0026lt;/span\u0026gt;xml"},{"Type":"NodeText","Data":"​都是一种序列化的方式，只是他们不需要提前预定义idl，且具备可读性，当然他们传输的体积也因此较大，可以说是各有优劣"}]},{"ID":"20231211210907-k8ru7nq","Type":"NodeParagraph","Properties":{"id":"20231211210907-k8ru7nq","updated":"20231211210907"},"Children":[{"Type":"NodeText","Data":"所以先来介绍下"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"protobuf"},{"Type":"NodeText","Data":"​的idl怎么写。"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"protobuf"},{"Type":"NodeText","Data":"​最新版本为"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"proto3"},{"Type":"NodeText","Data":"​，在这里你可以看到详细的文档说明：https://protobuf.dev/programming-guides/proto3/"}]},{"ID":"20231211211345-wj5cgm9","Type":"NodeParagraph","Properties":{"id":"20231211211345-wj5cgm9"}},{"ID":"20231211211346-f3lq4bt","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20231211211346-f3lq4bt","updated":"20231211211354"},"Children":[{"Type":"NodeText","Data":"定义消息类型"}]},{"ID":"20231211211354-t4nuqil","Type":"NodeParagraph","Properties":{"id":"20231211211354-t4nuqil","updated":"20231211211400"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"protobuf"},{"Type":"NodeText","Data":"​里最基本的类型就是"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"message"},{"Type":"NodeText","Data":"​，每一个"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"message"},{"Type":"NodeText","Data":"​都会有一个或者多个字段("},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"field"},{"Type":"NodeText","Data":"​)，其中字段包含如下元素"}]},{"ID":"20231211211408-807azs5","Type":"NodeParagraph","Properties":{"id":"20231211211408-807azs5","updated":"20231211211408"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"69dc349d9655d4a407479d2da0f22428"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/69dc349d9655d4a407479d2da0f22428-20231211211408-bj9im8d.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231211211430-trmbq1b","Type":"NodeList","ListData":{},"Properties":{"id":"20231211211430-trmbq1b","updated":"20231211211430"},"Children":[{"ID":"20231211211430-xeayej1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231211211430-xeayej1","updated":"20231211211430"},"Children":[{"ID":"20231211211430-5p2njfi","Type":"NodeParagraph","Properties":{"id":"20231211211430-5p2njfi","updated":"20231211211430"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"类型"},{"Type":"NodeText","Data":"：类型不仅可以是标量类型（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"int"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"string"},{"Type":"NodeText","Data":"​等），也可以是复合类型（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"enum"},{"Type":"NodeText","Data":"​等），也可以是其他"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"message"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20231211211430-sgwku1q","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231211211430-sgwku1q","updated":"20231211211430"},"Children":[{"ID":"20231211211430-3u97xce","Type":"NodeParagraph","Properties":{"id":"20231211211430-3u97xce","updated":"20231211211430"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"字段名"},{"Type":"NodeText","Data":"：字段名比较推荐的是使用下划线/分隔名称"}]}]},{"ID":"20231211211430-zhf3i1p","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231211211430-zhf3i1p","updated":"20231211211430"},"Children":[{"ID":"20231211211430-nfkook7","Type":"NodeParagraph","Properties":{"id":"20231211211430-nfkook7","updated":"20231211211430"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"字段编号"},{"Type":"NodeText","Data":"：一个message内每一个字段编号都必须唯一的，在编码后其实传递的是这个编号而不是字段名"}]}]},{"ID":"20231211211430-qusvxru","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231211211430-qusvxru","updated":"20231211211430"},"Children":[{"ID":"20231211211430-vrt25y8","Type":"NodeParagraph","Properties":{"id":"20231211211430-vrt25y8","updated":"20231211211430"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"字段规则"},{"Type":"NodeText","Data":"：消息字段可以是以下字段之一"}]},{"ID":"20231211211430-l38u3qf","Type":"NodeList","ListData":{},"Properties":{"id":"20231211211430-l38u3qf","updated":"20231211211430"},"Children":[{"ID":"20231211211430-h69kgrd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231211211430-h69kgrd","updated":"20231211211430"},"Children":[{"ID":"20231211211430-u850axs","Type":"NodeParagraph","Properties":{"id":"20231211211430-u850axs","updated":"20231211211430"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"singular"},{"Type":"NodeText","Data":"​：格式正确的消息可以有零个或一个字段（但不能超过一个）。使用 proto3 语法时，如果未为给定字段指定其他字段规则，则这是默认字段规则"}]}]},{"ID":"20231211211430-9az3c9q","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231211211430-9az3c9q","updated":"20231211211430"},"Children":[{"ID":"20231211211430-f97pt0w","Type":"NodeParagraph","Properties":{"id":"20231211211430-f97pt0w","updated":"20231211211430"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"optional"},{"Type":"NodeText","Data":"​：与 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"singular"},{"Type":"NodeText","Data":"​ 相同，不过您可以检查该值是否明确设置"}]}]},{"ID":"20231211211430-5kuy4bp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231211211430-5kuy4bp","updated":"20231211211430"},"Children":[{"ID":"20231211211430-eo8b1xz","Type":"NodeParagraph","Properties":{"id":"20231211211430-eo8b1xz","updated":"20231211211430"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"repeated"},{"Type":"NodeText","Data":"​：在格式正确的消息中，此字段类型可以重复零次或多次。系统会保留重复值的顺序"}]}]},{"ID":"20231211211430-fu1x3kw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231211211430-fu1x3kw","updated":"20231211211430"},"Children":[{"ID":"20231211211430-4lvumpv","Type":"NodeParagraph","Properties":{"id":"20231211211430-4lvumpv","updated":"20231211211430"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"map"},{"Type":"NodeText","Data":"​：这是一个成对的键值对字段"}]}]}]}]},{"ID":"20231211211430-f18sjda","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231211211430-f18sjda","updated":"20231211211430"},"Children":[{"ID":"20231211211430-26opn7v","Type":"NodeParagraph","Properties":{"id":"20231211211430-26opn7v","updated":"20231211211430"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"保留字段"},{"Type":"NodeText","Data":"：为了避免再次使用到已移除的字段可以设定保留字段。如果任何未来用户尝试使用这些字段标识符，协议缓冲区编译器就会报错"}]}]}]},{"ID":"20231211211523-egfldw5","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20231211211523-egfldw5","updated":"20231211211531"},"Children":[{"Type":"NodeText","Data":"标量值类"}]},{"ID":"20231211211531-22yyqxk","Type":"NodeParagraph","Properties":{"id":"20231211211531-22yyqxk","updated":"20231211211616"},"Children":[{"Type":"NodeText","Data":"标量类型会涉及到不同语言和编码方式，后续有机会深入讲"}]},{"ID":"20231211211624-i8rrr26","Type":"NodeTable","TableAligns":[0,0,0],"Properties":{"colgroup":"||","id":"20231211211624-i8rrr26","updated":"20231211211624"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":".proto Type"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"Go Type"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"Notes"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"double"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"float64"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeBr","Data":"br"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"float"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"float32"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeBr","Data":"br"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int32"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int32"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"使用可变长度的编码。对负数的编码效率低下 - 如果您的字段可能包含负值，请改用 sint32。"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int64"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int64"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"使用可变长度的编码。对负数的编码效率低下 - 如果字段可能有负值，请改用 sint64。"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"uint32"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"uint32"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"使用可变长度的编码。"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"uint64"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"uint64"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"使用可变长度的编码。"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"sint32"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int32"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"使用可变长度的编码。有符号整数值。与常规 int32 相比，这些函数可以更高效地对负数进行编码。"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"sint64"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int64"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"使用可变长度的编码。有符号整数值。与常规 int64 相比，这些函数可以更高效地对负数进行编码。"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"fixed32"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"uint32"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"始终为 4 个字节。如果值通常大于 2^28，则比 uint32 更高效。"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"fixed64"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"uint64"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"始终为 8 个字节。如果值通常大于 2^56，则比 uint64 更高效。"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"sfixed32"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int32"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"始终为 4 个字节。"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"sfixed64"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int64"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"始终为 8 个字节。"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"bool"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"bool"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeBr","Data":"br"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"字符串必须始终包含 UTF-8 编码或 7 位 ASCII 文本，并且长度不得超过 232。"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"bytes"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"[]byte"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"可以包含任意长度的 2^32 字节。"}]}]}]},{"ID":"20231211211713-7fe2c8m","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20231211211713-7fe2c8m","updated":"20231211211713"},"Children":[{"Type":"NodeText","Data":"复合类型"}]},{"ID":"20231211211713-f7qk51b","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20231211211713-f7qk51b","updated":"20231211211713"},"Children":[{"Type":"NodeText","Data":"数组"}]},{"ID":"20231211211713-dp78aiy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231211211713-dp78aiy","updated":"20231211211713"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"message SearchResponse {\n  repeated Result results = 1;\n}\n\nmessage Result {\n  string url = 1;\n  string title = 2;\n  repeated string snippets = 3;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231211211713-fzs34cw","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20231211211713-fzs34cw","updated":"20231211211713"},"Children":[{"Type":"NodeText","Data":"枚举"}]},{"ID":"20231211211713-b89cwo4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231211211713-b89cwo4","updated":"20231211211713"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"message SearchRequest {\n  string query = 1;\n  int32 page_number = 2;\n  int32 result_per_page = 3;\n  enum Corpus {\n    UNIVERSAL = 0;\n    WEB = 1;\n    IMAGES = 2;\n    LOCAL = 3;\n    NEWS = 4;\n    PRODUCTS = 5;\n    VIDEO = 6;\n  }\n  Corpus corpus = 4;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231211211713-lg9rfdf","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20231211211713-lg9rfdf","updated":"20231211211713"},"Children":[{"Type":"NodeText","Data":"服务"}]},{"ID":"20231211211724-kotm369","Type":"NodeParagraph","Properties":{"id":"20231211211724-kotm369","updated":"20231211211729"},"Children":[{"Type":"NodeText","Data":"定义的method仅能有一个入参和出参数。如果需要传递多个参数需要定义成message"}]},{"ID":"20231211211732-34j1k9o","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231211211732-34j1k9o","updated":"20231211211816"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"service SearchService {\n  rpc Search(SearchRequest) returns (SearchResponse)\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231211211818-0ss1t6t","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231211211818-0ss1t6t","updated":"20231211211831"},"Children":[{"Type":"NodeText","Data":"使用其他消息类型"}]},{"ID":"20231211211839-nzpmx5e","Type":"NodeParagraph","Properties":{"id":"20231211211839-nzpmx5e","updated":"20231211211844"},"Children":[{"Type":"NodeText","Data":"使用import引用另外一个文件的pb"}]},{"ID":"20231211211845-qxeirmf","Type":"NodeParagraph","Properties":{"id":"20231211211845-qxeirmf"}}]}