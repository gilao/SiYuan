{"ID":"20231008200319-t968lt4","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1fa94","id":"20231008200319-t968lt4","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20231008200319-t968lt4\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20231008200319-h6o5om6\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20231008200319-h6o5om6\u0026quot;,\u0026quot;scrollTop\u0026quot;:0\u0026#125;","tags":"Go,工作区模式","title":"快速掌握 Go 工作区模式","updated":"20231008205525"},"Children":[{"ID":"20231008200319-h6o5om6","Type":"NodeParagraph","Properties":{"id":"20231008200319-h6o5om6","updated":"20231008200449"},"Children":[{"Type":"NodeText","Data":"在 Go 项目的模块管理中，先是 GOPATH，然后到废弃。再到强推 Go modules，从被社区抗拒到 rsc 硬上弓。现在最新要了解的，就是工作区模式（workspace mode）。这是一个在 Go1.18 引入的重要特性。"}]},{"ID":"20231008200512-zlb737w","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20231008200512-zlb737w","updated":"20231008200524"},"Children":[{"Type":"NodeText","Data":"背景"}]},{"ID":"20231008200714-56f60en","Type":"NodeParagraph","Properties":{"id":"20231008200714-56f60en","updated":"20231008200714"},"Children":[{"Type":"NodeText","Data":"在 Go1.11 起有了 Go modules 后，看起来 Go 模块管理逐步按序有了约束、规范了起来。但也带来了一些使用上的问题。"}]},{"ID":"20231008200714-rsckr8i","Type":"NodeParagraph","Properties":{"id":"20231008200714-rsckr8i","updated":"20231008200714"},"Children":[{"Type":"NodeText","Data":"现实开发时，当我们需要对多个关联模块进行开发（修改）时，这个事情就麻烦了起来。我见过两种方式。"}]},{"ID":"20231008200714-kqrtz98","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231008200714-kqrtz98","updated":"20231008200721"},"Children":[{"ID":"20231008200721-mtpmgis","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20231008200721-mtpmgis","updated":"20231008200721"},"Children":[{"ID":"20231008200721-kq5kurk","Type":"NodeParagraph","Properties":{"id":"20231008200721-kq5kurk","updated":"20231008200820"},"Children":[{"Type":"NodeText","Data":"第一种：直接在 go.mod 文件上配置replace，配置到本地的开发目录。这是最常见的方式。"}]}]}]},{"ID":"20231008200821-454mdt3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008200821-454mdt3","updated":"20231008200932"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"// go.mod\nreplace example.com/golang/text =\u003e \"../eddycjy/golang/text\"\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008200935-gcjushe","Type":"NodeParagraph","Properties":{"id":"20231008200935-gcjushe","updated":"20231008200944"},"Children":[{"Type":"NodeText","Data":"这种做法经常会有人不小心提交到 Git 仓库上。还挺折腾人的，一个不小心就为此 debug 了半天，或者发布部署一直卡着过不去。"}]},{"ID":"20231008202228-wj2iw72","Type":"NodeParagraph","Properties":{"id":"20231008202228-wj2iw72","updated":"20231008202454"},"Children":[{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-card-info-background); color: var(--b3-card-info-color);"},"TextMarkType":"text","TextMarkTextContent":"这种做法经常会有人不小心提交到Git仓库上，还挺折腾人的，一个不小心就为此 debug 了半天，或者发布部署一直卡着过不去。"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-card-info-background); color: var(--b3-card-info-color);\"}"}]},{"ID":"20231008202455-3lby4c3","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231008202455-3lby4c3","updated":"20231008202730"},"Children":[{"ID":"20231008202500-5kjya92","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20231008202500-5kjya92","updated":"20231008202730"},"Children":[{"ID":"20231008202500-rdrzlyg","Type":"NodeParagraph","Properties":{"id":"20231008202500-rdrzlyg","updated":"20231008202730"},"Children":[{"Type":"NodeText","Data":"第二种： 直接在依赖模块上编码，编码到一定的程度。才上传 GitHub/GitLab。再去发布版本标签再引用。这种用法比较少。只有模块比较简单且对程序比较自信的会这么干。（不推荐）"}]}]}]},{"ID":"20231008202731-c8zm07s","Type":"NodeParagraph","Properties":{"id":"20231008202731-c8zm07s","updated":"20231008202736"},"Children":[{"Type":"NodeText","Data":"总的来讲，就是有了 Go modules 后，多模块间的依赖开发还是挺麻烦的。要经常 replace，有时候又会忘了删。"}]},{"ID":"20231008202737-9ecq6fg","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20231008202737-9ecq6fg"},"Children":[{"Type":"NodeText","Data":"go work 指令集"}]},{"ID":"20231008202756-o3dgciw","Type":"NodeParagraph","Properties":{"id":"20231008202756-o3dgciw","updated":"20231008202756"},"Children":[{"Type":"NodeText","Data":"在大家痛苦了许久后，Go1.18 时终于发布了工作区模式的方式，来优化这个用法和问题。"}]},{"ID":"20231008202756-2gpenbs","Type":"NodeParagraph","Properties":{"id":"20231008202756-2gpenbs","updated":"20231008202756"},"Children":[{"Type":"NodeText","Data":"以下是 go work 的指令集："}]},{"ID":"20231008202758-svo3n2p","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008202758-svo3n2p","updated":"20231008202813"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"go work \u003ccommand\u003e [argument]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008202822-dhcw2ad","Type":"NodeList","ListData":{},"Properties":{"id":"20231008202822-dhcw2ad","updated":"20231008202822"},"Children":[{"ID":"20231008202822-h2sur6i","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231008202822-h2sur6i","updated":"20231008202822"},"Children":[{"ID":"20231008202822-izjg3oz","Type":"NodeParagraph","Properties":{"id":"20231008202822-izjg3oz","updated":"20231008202822"},"Children":[{"Type":"NodeText","Data":"edit：从工具或脚本中编辑 go.work。"}]}]},{"ID":"20231008202822-zj27lqo","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231008202822-zj27lqo","updated":"20231008202822"},"Children":[{"ID":"20231008202822-dbtzdix","Type":"NodeParagraph","Properties":{"id":"20231008202822-dbtzdix","updated":"20231008202822"},"Children":[{"Type":"NodeText","Data":"init：初始化工作区文件（go.work）。"}]}]},{"ID":"20231008202822-vl5v6qj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231008202822-vl5v6qj","updated":"20231008202822"},"Children":[{"ID":"20231008202822-oxvgwyu","Type":"NodeParagraph","Properties":{"id":"20231008202822-oxvgwyu","updated":"20231008202822"},"Children":[{"Type":"NodeText","Data":"sync：将工作区构建列表同步到模块。"}]}]},{"ID":"20231008202822-4q7juxg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231008202822-4q7juxg","updated":"20231008202822"},"Children":[{"ID":"20231008202822-g22xpa2","Type":"NodeParagraph","Properties":{"id":"20231008202822-g22xpa2","updated":"20231008202822"},"Children":[{"Type":"NodeText","Data":"use：将模块添加到工作区文件。"}]}]}]},{"ID":"20231008202824-ndhquj9","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20231008202824-ndhquj9","updated":"20231008202838"},"Children":[{"Type":"NodeText","Data":"快速使用"}]},{"ID":"20231008202847-rwuv7q8","Type":"NodeParagraph","Properties":{"id":"20231008202847-rwuv7q8","updated":"20231008202847"},"Children":[{"Type":"NodeText","Data":"接下来我们快速应用 Go 工作区模式，让大家有个直观的了解。"}]},{"ID":"20231008202847-t4vc1dv","Type":"NodeParagraph","Properties":{"id":"20231008202847-t4vc1dv","updated":"20231008202847"},"Children":[{"Type":"NodeText","Data":"需要注意，该特性需要确保 Go 版本 \u003e= 1.18。"}]},{"ID":"20231008202848-8tsiv31","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20231008202848-8tsiv31","updated":"20231008202900"},"Children":[{"Type":"NodeText","Data":"创建工作区"}]},{"ID":"20231008202900-apjt3n1","Type":"NodeParagraph","Properties":{"id":"20231008202900-apjt3n1","updated":"20231008202916"},"Children":[{"Type":"NodeText","Data":"首先我们创建一个工作区，执行如下命令："}]},{"ID":"20231008202916-xm1u5fe","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008202916-xm1u5fe","updated":"20231008203009"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"mkdir workspace-main \u0026\u0026 cd workspace-main\ngo work init\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008203026-bb9hx41","Type":"NodeParagraph","Properties":{"id":"20231008203026-bb9hx41","updated":"20231008203027"},"Children":[{"Type":"NodeText","Data":"执行完毕后会在该目录下创建一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"go.work"},{"Type":"NodeText","Data":"​ 文件，文件内容包含："}]},{"ID":"20231008203027-c5pniqw","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008203027-c5pniqw","updated":"20231008203035"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"go 1.20\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008203037-s4tgvn4","Type":"NodeParagraph","Properties":{"id":"20231008203037-s4tgvn4","updated":"20231008203044"},"Children":[{"Type":"NodeText","Data":"仅包含版本信息，因为当前是空白的工作区，只有初始化行为。"}]},{"ID":"20231008203045-hdabgsl","Type":"NodeParagraph","Properties":{"id":"20231008203045-hdabgsl","updated":"20231008204648"}},{"ID":"20231008204649-hko2e1z","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20231008204649-hko2e1z","updated":"20231008204657"},"Children":[{"Type":"NodeText","Data":"创建演示模块"}]},{"ID":"20231008204657-xbii36b","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008204657-xbii36b","updated":"20231008204751"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"mkdir hello-world \u0026\u0026 cd hello-world\ngo mod init example.com/hello\ngo: creating new go.mod: module example.com/hello\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008204756-52jfa8v","Type":"NodeParagraph","Properties":{"id":"20231008204756-52jfa8v","updated":"20231008204803"},"Children":[{"Type":"NodeText","Data":"写入代码 hello.go"}]},{"ID":"20231008204803-0jmmq36","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008204803-0jmmq36","updated":"20231008204941"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport (\n  \"fmt\"\n  \n  \"golang.org/x/example/hello/reverse\"\n)\n\nfunc main() {\n  fmt.Println(reverse.String(\"Hello, 煎鱼\")\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008204942-23r6415","Type":"NodeParagraph","Properties":{"id":"20231008204942-23r6415","updated":"20231008204950"},"Children":[{"Type":"NodeText","Data":"如果你这时候直接 go run。可能会出现如下报错："}]},{"ID":"20231008204955-21fuppg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008204955-21fuppg","updated":"20231008205003"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"hello.go:6:5: no required module provides package golang.org/x/example/hello/reverse: go.mod file not found in current directory or any parent directory; see 'go help modules'\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008205010-k1plywt","Type":"NodeParagraph","Properties":{"id":"20231008205010-k1plywt","updated":"20231008205010"},"Children":[{"Type":"NodeText","Data":"看着非常迷惑人，很多同学以为是环境变量 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"GO111MODULE"},{"Type":"NodeText","Data":"​ 没有设置为 on。其实是没有将本模块加入工作区中，导致运行错误。"}]},{"ID":"20231008205010-pfhw0js","Type":"NodeParagraph","Properties":{"id":"20231008205010-pfhw0js","updated":"20231008205010"},"Children":[{"Type":"NodeText","Data":"所以可以看出来，在设计上是先有项目，再有工作区的路径。也是相对符合的。"}]},{"ID":"20231008205010-p7kfjr9","Type":"NodeParagraph","Properties":{"id":"20231008205010-p7kfjr9","updated":"20231008205010"},"Children":[{"Type":"NodeText","Data":"这时候需要回到工作区目录 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"workspace-main"},{"Type":"NodeText","Data":"​。执行如下命令："}]},{"ID":"20231008205021-d2anv4m","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008205021-d2anv4m","updated":"20231008205032"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"go work use ./hello-world\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008205039-mgwmes7","Type":"NodeParagraph","Properties":{"id":"20231008205039-mgwmes7","updated":"20231008205040"},"Children":[{"Type":"NodeText","Data":"go.work 文件内会变成："}]},{"ID":"20231008205040-3jqu91k","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008205040-3jqu91k","updated":"20231008205059"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"cat go.work\ngo 1.20\n\nuse ./hello-world\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008205105-5n7rgua","Type":"NodeParagraph","Properties":{"id":"20231008205105-5n7rgua","updated":"20231008205105"},"Children":[{"Type":"NodeText","Data":"再运行程序："}]},{"ID":"20231008205106-gckzk7w","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008205106-gckzk7w","updated":"20231008205148"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"go run hello-world/hello.go\n鱼煎，olleH\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008205155-8c31gv8","Type":"NodeParagraph","Properties":{"id":"20231008205155-8c31gv8","updated":"20231008205155"},"Children":[{"Type":"NodeText","Data":"一切正常。"}]},{"ID":"20231008205156-f5r63yq","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20231008205156-f5r63yq","updated":"20231008205210"},"Children":[{"Type":"NodeText","Data":"创建需修改的模块"}]},{"ID":"20231008205219-vnyicok","Type":"NodeParagraph","Properties":{"id":"20231008205219-vnyicok","updated":"20231008205219"},"Children":[{"Type":"NodeText","Data":"这时候我们有了一个实际的诉求，我们希望 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"golang.org/x/example/hello"},{"Type":"NodeText","Data":"​ 改一下这个 SDK 库。"}]},{"ID":"20231008205219-6mt3os1","Type":"NodeParagraph","Properties":{"id":"20231008205219-6mt3os1","updated":"20231008205219"},"Children":[{"Type":"NodeText","Data":"如果是以前的话，我们需要写 replace 来解决。现在的话可以用工作区模式来完成这个诉求。"}]},{"ID":"20231008205219-7g2v2jj","Type":"NodeParagraph","Properties":{"id":"20231008205219-7g2v2jj","updated":"20231008205219"},"Children":[{"Type":"NodeText","Data":"我们先需要回到工作区根目录 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"workspace-main"},{"Type":"NodeText","Data":"​ 下，拉取这个 SDK 库到工作区中："}]},{"ID":"20231008205229-vcde5vx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008205229-vcde5vx","updated":"20231008205250"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"git clone https://go.googlesource.com/example\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008205251-5gitino","Type":"NodeParagraph","Properties":{"id":"20231008205251-5gitino","updated":"20231008205256"},"Children":[{"Type":"NodeText","Data":"再将其引入项目的工作区中："}]},{"ID":"20231008205257-9ni1v8h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008205257-9ni1v8h","updated":"20231008205317"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"go work use ./example/hello\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008205303-f8u3t03","Type":"NodeParagraph","Properties":{"id":"20231008205303-f8u3t03","updated":"20231008205320"},"Children":[{"Type":"NodeText","Data":"go.work 文件会变成："}]},{"ID":"20231008205321-lvuqt8m","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008205321-lvuqt8m","updated":"20231008205348"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"go 1.20\n\nuse (\n  ./example/hello\n  ./hello-world\n)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008205410-9uwpxjo","Type":"NodeParagraph","Properties":{"id":"20231008205410-9uwpxjo","updated":"20231008205410"},"Children":[{"Type":"NodeText","Data":"这里需要注意，go work 以 go.mod 为单位。如果你直接引入 ./example。是无法对 ./example/hello 的 module 起效果的。"}]},{"ID":"20231008205410-22dryyu","Type":"NodeParagraph","Properties":{"id":"20231008205410-22dryyu","updated":"20231008205410"},"Children":[{"Type":"NodeText","Data":"在引入成功后，我们回到 ./example/hello 目录下的 reverse.go 文件，新增一个用于 Demo 的方法："}]},{"ID":"20231008205411-fn9j15h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008205411-fn9j15h","updated":"20231008205438"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"...\nfunc Hello() string {\n  return \"煎鱼，你好！\"\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008205443-ntatqqy","Type":"NodeParagraph","Properties":{"id":"20231008205443-ntatqqy","updated":"20231008205450"},"Children":[{"Type":"NodeText","Data":"再到 hello 项目中，新增调用："}]},{"ID":"20231008205451-ml20t9v","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008205451-ml20t9v","updated":"20231008205501"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport (\n \"fmt\"\n\n \"golang.org/x/example/hello/reverse\"\n)\n\nfunc main() {\n fmt.Println(reverse.String(\"Hello, 煎鱼\"))\n fmt.Println(reverse.Hello())\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008205503-21zz1dx","Type":"NodeParagraph","Properties":{"id":"20231008205503-21zz1dx","updated":"20231008205509"},"Children":[{"Type":"NodeText","Data":"输出结果："}]},{"ID":"20231008205510-t9j5kt4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231008205510-t9j5kt4","updated":"20231008205515"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"鱼煎 ,olleH\n煎鱼，你好\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231008205525-e35hlfj","Type":"NodeParagraph","Properties":{"id":"20231008205525-e35hlfj","updated":"20231008205525"},"Children":[{"Type":"NodeText","Data":"一切正常。满足不添加 replace 的要求，也使用了 go.work，不用担心把 replace 不小心提交到 Git 仓库中。"}]},{"ID":"20231008205525-xhzxc59","Type":"NodeParagraph","Properties":{"id":"20231008205525-xhzxc59","updated":"20231008205525"},"Children":[{"Type":"NodeText","Data":"另外 Go 工作区中的项目在进行编译时，也是引用所配置好的工作区内的模块。而不是单单只针对开发阶段的 go run，也可以在产线上去使用，编译成二进制去应用和部署。"}]},{"ID":"20231008205525-56h0u28","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231008205525-56h0u28","updated":"20231008205525"},"Children":[{"Type":"NodeText","Data":"场景汇总"}]},{"ID":"20231008205525-ugh2fx8","Type":"NodeParagraph","Properties":{"id":"20231008205525-ugh2fx8","updated":"20231008205525"},"Children":[{"Type":"NodeText","Data":"我们已经对 Go 的工作区模式有了一定的了解，其使用场景聚焦在如下："}]},{"ID":"20231008205525-3fomoot","Type":"NodeList","ListData":{},"Properties":{"id":"20231008205525-3fomoot","updated":"20231008205525"},"Children":[{"ID":"20231008205525-gjo8ikq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231008205525-gjo8ikq","updated":"20231008205525"},"Children":[{"ID":"20231008205525-6mtibnh","Type":"NodeParagraph","Properties":{"id":"20231008205525-6mtibnh","updated":"20231008205525"},"Children":[{"Type":"NodeText","Data":"开发较大的产品，其项目存在着多个互相依赖的模块。可以直接设置成一个工作区。"}]}]},{"ID":"20231008205525-fg0yc94","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231008205525-fg0yc94","updated":"20231008205525"},"Children":[{"ID":"20231008205525-ywqc4we","Type":"NodeParagraph","Properties":{"id":"20231008205525-ywqc4we","updated":"20231008205525"},"Children":[{"Type":"NodeText","Data":"开发第三方库（类似 SDK 库），需要对上游的模块新增新特性。势必要在本地模块先引用做开发、测试、验证。也可以直接使用工作区。"}]}]}]},{"ID":"20231008205525-8e36gz8","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231008205525-8e36gz8","updated":"20231008205525"},"Children":[{"Type":"NodeText","Data":"总结"}]},{"ID":"20231008205525-a69rp62","Type":"NodeParagraph","Properties":{"id":"20231008205525-a69rp62","updated":"20231008205525"},"Children":[{"Type":"NodeText","Data":"今天我们快速了解了 Go 工作区模式（workspace mode）的背景、使用、场景。这对于解决项目中多模块依赖有着一定的作用，可以不再需要去 go.mod 里 replace，算是给了一个规范化的解决方案。"}]},{"ID":"20231008205525-sj8qsom","Type":"NodeParagraph","Properties":{"id":"20231008205525-sj8qsom","updated":"20231008205525"},"Children":[{"Type":"NodeText","Data":"但在实际应用中，我们会发现工作区模式的便利度，其实不太高。可能依赖模块数量少时，还不如 replace 一把梭来得快。"}]},{"ID":"20231008205525-4ivwprh","Type":"NodeParagraph","Properties":{"id":"20231008205525-4ivwprh","updated":"20231008205525"},"Children":[{"Type":"NodeText","Data":"另外目前阶段的使用宣传还是做得比较弱的，前两天问了一圈，还真有一些同学不知道，也没有用过的。"}]}]}