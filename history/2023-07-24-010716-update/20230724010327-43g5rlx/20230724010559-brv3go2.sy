{"ID":"20230724010559-brv3go2","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230724010559-brv3go2","title":"awk","updated":"20230724010610"},"Children":[{"ID":"20230724010610-xj8fp5k","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230724010610-xj8fp5k","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"awk"}]},{"ID":"20230724010610-xwcnv4j","Type":"NodeParagraph","Properties":{"id":"20230724010610-xwcnv4j","updated":"20230724010610"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"awk不仅仅是Linux系统中的一个命令，而且是一种编程语言，可以用来处理数据和生成报告（excel）。处理的数据可以是一个或多个文件，它是Linux系统最强大的文本处理工具，没有之一（见表11-7）。本节主要讲解awk命令行的文本处理常见的功能和技巧运用。"}]},{"ID":"20230724010610-uua4d34","Type":"NodeParagraph","Properties":{"id":"20230724010610-uua4d34","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"2b8fd2003e40c9e1a0f74706765b3e6"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"file://E:\\Typora%20picture\\2b8fd2003e40c9e1a0f74706765b3e6.png?lastModify=1690131968"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724010610-tunvavn","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724010610-tunvavn","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"选项说明"}]},{"ID":"20230724010610-xynkq06","Type":"NodeParagraph","Properties":{"id":"20230724010610-xynkq06","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"70a6bd41c126e48e22e1ba89a088e9a"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"file://E:\\Typora%20picture\\70a6bd41c126e48e22e1ba89a088e9a.png?lastModify=1690131968"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724010610-ikz2b4d","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724010610-ikz2b4d","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"常用功能"}]},{"ID":"20230724010610-x5mt62i","Type":"NodeParagraph","Properties":{"id":"20230724010610-x5mt62i","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"b6da6d875a37ff0ac2f8c19a0af4b7a"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"file://E:\\Typora%20picture\\b6da6d875a37ff0ac2f8c19a0af4b7a.png?lastModify=1690131968"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724010610-reztteo","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724010610-reztteo","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"问题1：取test.txt文件的第2～3行的内容。"}]},{"ID":"20230724010610-ld4mj8e","Type":"NodeParagraph","Properties":{"id":"20230724010610-ld4mj8e","updated":"20230724010610"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"解答：这道题是sed功能的特长（见前文），不过awk也有取行的功能，考察的是NR变量和\u0026amp;\u0026amp;（并且）逻辑符及==（相等）号的用法。"}]},{"ID":"20230724010610-k53l292","Type":"NodeParagraph","Properties":{"id":"20230724010610-k53l292","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"** sed -n '1，5p' /etc/passwd \u003etest.txt**"}]},{"ID":"20230724010610-4et532o","Type":"NodeParagraph","Properties":{"id":"20230724010610-4et532o","updated":"20230724010610"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"方法1："}]},{"ID":"20230724010610-c7cwdsu","Type":"NodeParagraph","Properties":{"id":"20230724010610-c7cwdsu","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"** awk 'NR\u003e1\u0026\u0026NR\u003c4' test.txt #\u003c==NR表示行号，\u0026\u0026表示并且**"}]},{"ID":"20230724010610-6ee36h9","Type":"NodeParagraph","Properties":{"id":"20230724010610-6ee36h9","updated":"20230724010610"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"方法2："}]},{"ID":"20230724010610-g64wvv3","Type":"NodeParagraph","Properties":{"id":"20230724010610-g64wvv3","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"** awk 'NR**"},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"2，NR"},{"Type":"NodeText","Data":"3' test.txt #\u003c==NR表示行号，用逗号表示从第2～3行。"}]},{"ID":"20230724010610-t6fo8wn","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724010610-t6fo8wn","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"问题2：过滤出含有root字符串的行。"}]},{"ID":"20230724010610-okmq3lr","Type":"NodeParagraph","Properties":{"id":"20230724010610-okmq3lr","updated":"20230724010610"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"解答：这道题考察的是awk的过滤功能，这个功能和sed的过滤类似，需要将要过滤的内容用两个斜线包含起来。"}]},{"ID":"20230724010610-803s6eu","Type":"NodeParagraph","Properties":{"id":"20230724010610-803s6eu","updated":"20230724010610"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"awk '/root/' test.txt #\u0026lt;==类似sed过滤，但是结尾不需要p符号了。"}]},{"ID":"20230724010610-47cgnt0","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724010610-47cgnt0","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"问题3：删除含有root字符串的行。"}]},{"ID":"20230724010610-pbb0s2f","Type":"NodeParagraph","Properties":{"id":"20230724010610-pbb0s2f","updated":"20230724010610"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"解答：这道题考察的是awk的删除功能，这不是awk的特长，但可以通过正则表达式组合匹配达到间接解答这道题的目的。"}]},{"ID":"20230724010610-1onpwr8","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724010610-1onpwr8","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"步骤1：过滤出非r字符的行。"}]},{"ID":"20230724010610-pjtjlot","Type":"NodeParagraph","Properties":{"id":"20230724010610-pjtjlot","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"** awk '/"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"["},{"Type":"NodeText","Data":"^r]/' test.txt**"}]},{"ID":"20230724010610-a9vt57s","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724010610-a9vt57s","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"步骤2：过滤出以非r字符开头的行，也就是结果要求的。"}]},{"ID":"20230724010610-0yvdmvg","Type":"NodeParagraph","Properties":{"id":"20230724010610-0yvdmvg","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"** awk '/**"},{"Type":"NodeTextMark","TextMarkType":"sup","TextMarkTextContent":"\\["},{"Type":"NodeText","Data":"r]/' test.txt"}]},{"ID":"20230724010610-8i62hid","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724010610-8i62hid","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"问题4：取文件的第1列、第3列和最后1列内容，并打印行号。"}]},{"ID":"20230724010610-fwxph1m","Type":"NodeParagraph","Properties":{"id":"20230724010610-fwxph1m","updated":"20230724010610"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"解答：这道题考察的是awk的取列功能，这是awk的本行，即考察$n及NF、NR的用法。"}]},{"ID":"20230724010610-o0h6g5f","Type":"NodeParagraph","Properties":{"id":"20230724010610-o0h6g5f","updated":"20230724010610"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"awk -F \u0026quot;：\u0026quot; '{print NR，"},{"Type":"NodeText","Data":"1，"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"3，$NF}' test.txt#\u0026lt;==注意语法格式。"}]},{"ID":"20230724010610-0p70ypk","Type":"NodeParagraph","Properties":{"id":"20230724010610-0p70ypk","updated":"20230724010610"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"#\u0026lt;==-F \u0026quot;：\u0026quot;表示以冒号为分隔符，print是打印，$1是取分隔后的第1列，NF是取最后1列，NR表示行号。"}]},{"ID":"20230724010610-8fxact7","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724010610-8fxact7","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"问题5：取出Linux中执行ifconfig eth0后对应的IP地址（只能输出IP地址）。"}]},{"ID":"20230724010610-n0q6gdr","Type":"NodeParagraph","Properties":{"id":"20230724010610-n0q6gdr","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"**ifconfig en33|awk -F \" \" 'NR==2{print **2}'|awk '{print "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"1}'"}]},{"ID":"20230724010610-0fl3w69","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724010610-0fl3w69","updated":"20230724010610"},"Children":[{"Type":"NodeText","Data":"问题6：过滤文件中第1列内容匹配root的字符串，把符合的行的最后1列输出。"}]},{"ID":"20230724010610-71bpep3","Type":"NodeParagraph","Properties":{"id":"20230724010610-71bpep3","updated":"20230724010610"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"解答：这道题在过滤日志信息的时候常用，示例如下。"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"awk -F \u0026quot;：\u0026quot; '"},{"Type":"NodeText","Data":"1～/root/ {print $NF}' test.txt  #\u003c=="},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"1～/root/表示第1列内容匹配root条件，$NF表示最后1列。"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"/bin/bash"}]}]}