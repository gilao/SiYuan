{"ID":"20230727000721-1mbbhzp","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230727000721-1mbbhzp","title":"24. Go deferæ€»ç»“","updated":"20230727000721"},"Children":[{"ID":"20230727000722-ez9myf2","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230727000722-ez9myf2","updated":"20230727000722"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeText","Data":"24. Go deferæ€»ç»“"}]},{"ID":"20230727000723-97i9hi1","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230727000723-97i9hi1","updated":"20230727000723"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"1. deferä»‹ç»"}]},{"ID":"20230727000724-gr2u7s8","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000724-gr2u7s8","updated":"20230727000724"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1.1 deferçš„ä½œç”¨"}]},{"ID":"20230727000725-fkuz952","Type":"NodeParagraph","Properties":{"id":"20230727000725-fkuz952","updated":"20230727000725"},"Children":[{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"deferçš„å®šä¹‰æ˜¯ï¼šdeferè¯­å¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„æ‰§è¡Œè¢«æ¨è¿Ÿåˆ°å…¶æ‰€åœ¨å‡½æ•°è¿”å›çš„é‚£ä¸€åˆ»ï¼Œè¦ä¹ˆæ˜¯æ‰€åœ¨å‡½æ•°æ‰§è¡Œäº†returnè¯­å¥ï¼Œè¦ä¹ˆæ˜¯åˆ°è¾¾äº†æ‰€åœ¨å‡½æ•°ä½“çš„æœ«å°¾ï¼Œè¦ä¹ˆæ˜¯æ‰€åœ¨çš„goroutineå‘ç”Ÿäº†panicã€‚"},{"Type":"NodeMark2CloseMarker","Data":"=="}]}]},{"ID":"20230727000726-uztfcu4","Type":"NodeParagraph","Properties":{"id":"20230727000726-uztfcu4","updated":"20230727000726"},"Children":[{"Type":"NodeStrong","Children":[{"Type":"NodeStrongA6kOpenMarker","Data":"**"},{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"deferå¸¸ç”¨æ¥å…³é—­æ–‡ä»¶æè¿°ç¬¦ã€å…³é—­æ•°æ®åº“è¿æ¥ã€é‡Šæ”¾é”èµ„æºç­‰ï¼Œå¯ä»¥å‡å°‘èµ„æºæ³„æ¼çš„æƒ…å†µå‘ç”Ÿã€‚"},{"Type":"NodeMark2CloseMarker","Data":"=="}]},{"Type":"NodeStrongA6kCloseMarker","Data":"**"}]}]},{"ID":"20230727000727-exjkblv","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000727-exjkblv","updated":"20230727000727"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1.2 deferçš„ç”¨æ³•"}]},{"ID":"20230727000728-0x31l4c","Type":"NodeParagraph","Properties":{"id":"20230727000728-0x31l4c","updated":"20230727000728"},"Children":[{"Type":"NodeText","Data":"deferçš„åŸºæœ¬ç”¨æ³•æœ‰äº”ç§ï¼Œåˆ†åˆ«æ˜¯ï¼š"}]},{"ID":"20230727000729-he0ueeu","Type":"NodeList","ListData":{"Typ":1,"Start":1,"Delimiter":46,"Padding":3,"Marker":"MQ==","Num":1},"Properties":{"id":"20230727000729-he0ueeu","updated":"20230727000729"},"Children":[{"ID":"20230727000730-iysj8r9","Type":"NodeListItem","Data":"1","ListData":{"Typ":1,"Start":1,"Delimiter":46,"Padding":3,"Marker":"MQ==","Num":1},"Properties":{"id":"20230727000730-iysj8r9","updated":"20230727000730"},"Children":[{"ID":"20230727000731-1oqviln","Type":"NodeParagraph","Properties":{"id":"20230727000731-1oqviln","updated":"20230727000731"},"Children":[{"Type":"NodeStrong","Children":[{"Type":"NodeStrongA6kOpenMarker","Data":"**"},{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"å»¶è¿Ÿè°ƒç”¨ï¼šdeferè°ƒç”¨çš„å‡½æ•°åœ¨returnå‰æ‰è¢«æ‰§è¡Œï¼›"},{"Type":"NodeMark2CloseMarker","Data":"=="}]},{"Type":"NodeStrongA6kCloseMarker","Data":"**"}]}]}]},{"ID":"20230727000732-6m759ou","Type":"NodeListItem","Data":"2","ListData":{"Typ":1,"Tight":true,"Start":2,"Delimiter":46,"Padding":3,"Marker":"Mg==","Num":2},"Properties":{"id":"20230727000732-6m759ou","updated":"20230727000732"},"Children":[{"ID":"20230727000733-qmwc677","Type":"NodeParagraph","Properties":{"id":"20230727000733-qmwc677","updated":"20230727000733"},"Children":[{"Type":"NodeText","Data":"=="},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"LIFOï¼ˆLast In First Outï¼Œåè¿›å…ˆå‡ºï¼‰ï¼šå¤šä¸ªdeferè¯­å¥ï¼ŒæŒ‰å‹æ ˆçš„æ–¹å¼å³åè¿›å…ˆå‡ºçš„é¡ºåºæ‰§è¡Œï¼›"},{"Type":"NodeText","Data":"=="}]}]},{"ID":"20230727000734-6j8g5mv","Type":"NodeListItem","Data":"3","ListData":{"Typ":1,"Tight":true,"Start":3,"Delimiter":46,"Padding":3,"Marker":"Mw==","Num":3},"Properties":{"id":"20230727000734-6j8g5mv","updated":"20230727000734"},"Children":[{"ID":"20230727000735-8ynzt6x","Type":"NodeParagraph","Properties":{"id":"20230727000735-8ynzt6x","updated":"20230727000735"},"Children":[{"Type":"NodeText","Data":"=="},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"ä½œç”¨åŸŸï¼šdefer åªä¼šå’Œ defer è¯­å¥æ‰€åœ¨çš„ç‰¹å®šå‡½æ•°ç»‘å®šåœ¨ä¸€èµ·ï¼Œä½œç”¨åŸŸä¹Ÿåªåœ¨è¿™ä¸ªå‡½æ•°ï¼›"},{"Type":"NodeText","Data":"=="}]}]},{"ID":"20230727000736-lkhe9fl","Type":"NodeListItem","Data":"4","ListData":{"Typ":1,"Tight":true,"Start":4,"Delimiter":46,"Padding":3,"Marker":"NA==","Num":4},"Properties":{"id":"20230727000736-lkhe9fl","updated":"20230727000736"},"Children":[{"ID":"20230727000737-lhhhui8","Type":"NodeParagraph","Properties":{"id":"20230727000737-lhhhui8","updated":"20230727000737"},"Children":[{"Type":"NodeText","Data":"=="},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"å¯¹å‡½æ•°ä¼ å…¥å˜é‡çš„ä¸åŒå¤„ç†ï¼šå˜é‡ä½œä¸ºå‡½æ•°å‚æ•°ï¼Œåœ¨deferç”³æ˜æ—¶å°±æŠŠå€¼ä¼ é€’ç»™deferï¼Œå¹¶å°†å€¼ç¼“å­˜èµ·æ¥ä½¿ç”¨ï¼›å˜é‡ä½œä¸ºåŒ¿åå‡½æ•°å¼•ç”¨ï¼Œåœ¨deferå‡½æ•°æ‰§è¡Œæ—¶æ ¹æ®æ•´ä¸ªä¸Šä¸‹æ–‡ç¡®å®šå˜é‡çš„å€¼ï¼›"},{"Type":"NodeText","Data":"=="}]}]},{"ID":"20230727000738-np6z00b","Type":"NodeListItem","Data":"5","ListData":{"Typ":1,"Tight":true,"Start":5,"Delimiter":46,"Padding":3,"Marker":"NQ==","Num":5},"Properties":{"id":"20230727000738-np6z00b","updated":"20230727000738"},"Children":[{"ID":"20230727000739-vtweelu","Type":"NodeParagraph","Properties":{"id":"20230727000739-vtweelu","updated":"20230727000739"},"Children":[{"Type":"NodeText","Data":"=="},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"å¼‚å¸¸å¤„ç†ï¼šé€šè¿‡ defer å’Œ recover çš„ç»“åˆï¼Œå¯ä»¥æ•æ‰ defer æ‰€åœ¨å‡½æ•°çš„ panicï¼›"},{"Type":"NodeText","Data":"=="}]}]}]},{"ID":"20230727000740-y03yj9j","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230727000740-y03yj9j","updated":"20230727000740"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"2. deferçš„è°ƒç”¨é¡ºåº"}]},{"ID":"20230727000741-ihvkw78","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000741-ihvkw78","updated":"20230727000741"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2.1 å¤šä¸ªdeferè¯­å¥ï¼ŒæŒ‰å…ˆè¿›åå‡ºçš„æ–¹å¼æ‰§è¡Œ"}]},{"ID":"20230727000742-jk9n1e3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000742-jk9n1e3","updated":"20230727000742"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport \"fmt\"\n\nfunc main() {\n    var whatever [5]struct{}\n    for i := range whatever {\n        defer fmt.Println(i)\n    }\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000743-xkk0m9v","Type":"NodeParagraph","Properties":{"id":"20230727000743-xkk0m9v","updated":"20230727000743"},"Children":[{"Type":"NodeText","Data":"è¾“å‡º"}]},{"ID":"20230727000744-xgjtpxm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000744-xgjtpxm","updated":"20230727000744"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"4\n3\n2\n1\n0\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000745-s1jqmj9","Type":"NodeParagraph","Properties":{"id":"20230727000745-s1jqmj9","updated":"20230727000745"},"Children":[{"Type":"NodeText","Data":"æ‰€æœ‰çš„deferè¯­å¥ä¼šæ”¾å…¥æ ˆä¸­ï¼Œåœ¨å…¥æ ˆçš„æ—¶å€™ä¼šè¿›è¡Œç›¸å…³çš„å€¼æ‹·è´ï¼ˆä¹Ÿå°±æ˜¯ä¸‹é¢çš„â€œå¯¹åº”çš„å‚æ•°ä¼šå®æ—¶è§£æâ€ï¼‰ã€‚"}]},{"ID":"20230727000746-qy7xlcu","Type":"NodeParagraph","Properties":{"id":"20230727000746-qy7xlcu","updated":"20230727000746"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"image-20230303094151754","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"../../Typora picture/image-20230303094151754.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230727000747-jmrkuyr","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230727000747-jmrkuyr","updated":"20230727000747"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"å¤šä¸ªdefer å‡ºç°æ—¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ ˆçš„å…³ç³»ï¼Œå…ˆè¿›åå‡º"},{"Type":"NodeMark2CloseMarker","Data":"=="}]}]},{"ID":"20230727000748-6gboj39","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000748-6gboj39","updated":"20230727000748"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2.2 deferå£°æ˜æ—¶ï¼Œå¯¹åº”çš„å‚æ•°ä¼šå®æ—¶è§£æ"}]},{"ID":"20230727000749-zfhtugj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000749-zfhtugj","updated":"20230727000749"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport \"fmt\"\n\nfunc main() {\n\ti := 1\n\tfmt.Println(\"i =\", i)\n\tdefer fmt.Print(i)\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000750-h7dwat4","Type":"NodeParagraph","Properties":{"id":"20230727000750-h7dwat4","updated":"20230727000750"},"Children":[{"Type":"NodeText","Data":"è¾“å‡º"}]},{"ID":"20230727000751-tvlrfhr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000751-tvlrfhr","updated":"20230727000751"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"i = 1\n1\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000752-mehr6ec","Type":"NodeParagraph","Properties":{"id":"20230727000752-mehr6ec","updated":"20230727000752"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"deferåé¢çš„è¯­å¥æœ€åæ‰ä¼šæ‰§è¡Œ"},{"Type":"NodeText","Data":"ï¼Œåé¢ä¼šè®²å½“deferå­˜åœ¨æ—¶returnçš„æ‰§è¡Œé€»è¾‘ã€‚"}]},{"ID":"20230727000753-2193dmh","Type":"NodeParagraph","Properties":{"id":"20230727000753-2193dmh","updated":"20230727000753"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"è¾¨æï¼šdeferåé¢è·Ÿæ— å‚å‡½æ•°ã€æœ‰å‚å‡½æ•°å’Œæ–¹æ³•ï¼š"}]},{"ID":"20230727000754-xuzih47","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000754-xuzih47","updated":"20230727000754"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport \"fmt\"\n\nfunc test(a int) {//æ— è¿”å›å€¼å‡½æ•°\n\tdefer fmt.Println(\"1ã€a =\", a) //æ–¹æ³•\n\tdefer func(v int) { fmt.Println(\"2ã€a =\", v)} (a) //æœ‰å‚å‡½æ•°\n\tdefer func() { fmt.Println(\"3ã€a =\", a)} () //æ— å‚å‡½æ•°\n\ta++\n}\nfunc main() {\n\ttest(1)\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000755-rcsm3gm","Type":"NodeParagraph","Properties":{"id":"20230727000755-rcsm3gm","updated":"20230727000755"},"Children":[{"Type":"NodeText","Data":"è¾“å‡ºï¼š"}]},{"ID":"20230727000756-qs4rtn0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000756-qs4rtn0","updated":"20230727000756"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"3ã€a = 2\n2ã€a = 1\n1ã€a = 1\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000757-p6528y9","Type":"NodeParagraph","Properties":{"id":"20230727000757-p6528y9","updated":"20230727000757"},"Children":[{"Type":"NodeText","Data":"è§£é‡Šï¼š"}]},{"ID":"20230727000758-1hymq1i","Type":"NodeParagraph","Properties":{"id":"20230727000758-1hymq1i","updated":"20230727000758"},"Children":[{"Type":"NodeText","Data":"æ–¹æ³•ä¸­çš„å‚æ•°aï¼Œ"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"æœ‰å‚å‡½æ•°ä¸­çš„å‚æ•°vï¼Œä¼šè¯·æ±‚å‚æ•°ï¼Œç›´æ¥æŠŠå‚æ•°ä»£å…¥ï¼Œæ‰€ä»¥è¾“å‡ºçš„éƒ½æ˜¯1"},{"Type":"NodeText","Data":"ã€‚"}]},{"ID":"20230727000759-gvgtalz","Type":"NodeParagraph","Properties":{"id":"20230727000759-gvgtalz","updated":"20230727000759"},"Children":[{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"a++å˜æˆ2ä¹‹å"},{"Type":"NodeMark2CloseMarker","Data":"=="}]},{"Type":"NodeText","Data":"ï¼Œ3ä¸ªdeferè¯­å¥ä»¥åå£°æ˜å…ˆæ‰§è¡Œçš„é¡ºåºæ‰§è¡Œï¼Œ"}]},{"ID":"20230727000760-hcpv0sr","Type":"NodeParagraph","Properties":{"id":"20230727000760-hcpv0sr","updated":"20230727000760"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"æ— å‚å‡½æ•°ä¸­ä½¿ç”¨çš„aç°åœ¨å·²ç»æ˜¯2äº†ï¼Œæ•…è¾“å‡º2ã€‚"}]},{"ID":"20230727000761-cre1yet","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230727000761-cre1yet","updated":"20230727000761"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"defer åæœ‰å‚æ•°ï¼Œä¼šå®æ—¶è§£æå‚æ•°å€¼å¸¦å…¥ã€‚"},{"Type":"NodeMark2CloseMarker","Data":"=="}]}]},{"ID":"20230727000762-7x5u27c","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000762-7x5u27c","updated":"20230727000762"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2.3 å¯è¯»å–å‡½æ•°è¿”å›å€¼ ï¼ˆreturn è¿”å›æœºåˆ¶ï¼‰"}]},{"ID":"20230727000763-fpv1w59","Type":"NodeParagraph","Properties":{"id":"20230727000763-fpv1w59","updated":"20230727000763"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"image-20230303104545425","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"../../Typora picture/image-20230303104545425.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230727000764-fo5d7zl","Type":"NodeParagraph","Properties":{"id":"20230727000764-fo5d7zl","updated":"20230727000764"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"deferã€returnã€è¿”å›å€¼ä¸‰è€…çš„æ‰§è¡Œé€»è¾‘åº”è¯¥æ˜¯ï¼š"}]},{"ID":"20230727000765-6dcausj","Type":"NodeParagraph","Properties":{"id":"20230727000765-6dcausj","updated":"20230727000765"},"Children":[{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"returnæœ€å…ˆæ‰§è¡Œï¼Œreturnè´Ÿè´£å°†ç»“æœå†™å…¥è¿”å›å€¼ä¸­ï¼›"},{"Type":"NodeMark2CloseMarker","Data":"=="}]}]},{"ID":"20230727000766-v6hxv9u","Type":"NodeParagraph","Properties":{"id":"20230727000766-v6hxv9u","updated":"20230727000766"},"Children":[{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"æ¥ç€deferå¼€å§‹æ‰§è¡Œä¸€äº›æ”¶å°¾å·¥ä½œï¼›"},{"Type":"NodeMark2CloseMarker","Data":"=="}]}]},{"ID":"20230727000767-tf3b229","Type":"NodeParagraph","Properties":{"id":"20230727000767-tf3b229","updated":"20230727000767"},"Children":[{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"æœ€åå‡½æ•°æºå¸¦å½“å‰è¿”å›å€¼ï¼ˆå¯èƒ½å’Œæœ€åˆçš„è¿”å›å€¼ä¸ç›¸åŒï¼‰é€€å‡ºã€‚"},{"Type":"NodeMark2CloseMarker","Data":"=="}]}]},{"ID":"20230727000768-ilggub6","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230727000768-ilggub6","updated":"20230727000768"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"å½“deferè¯­å¥æ”¾åœ¨returnåé¢æ—¶ï¼Œä¸ä¼šè¢«æ‰§è¡Œ"},{"Type":"NodeMark2CloseMarker","Data":"=="}]}]},{"ID":"20230727000769-q6433md","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000769-q6433md","updated":"20230727000769"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"ï¼ˆ1ï¼‰æ— åè¿”å›å€¼"}]},{"ID":"20230727000770-8hfl1wf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000770-8hfl1wf","updated":"20230727000770"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport (\n\t\"fmt\"\n)\n\nfunc a() int {\n\tvar i int\n\tdefer func() {\n\t\ti++\n\t\tfmt.Println(\"defer2:\", i) \n\t}()\n\tdefer func() {\n\t\ti++\n\t\tfmt.Println(\"defer1:\", i) \n\t}()\n\treturn i\n}\n\nfunc main() {\n\tfmt.Println(\"return:\", a()) \n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000771-xd3st6k","Type":"NodeParagraph","Properties":{"id":"20230727000771-xd3st6k","updated":"20230727000771"},"Children":[{"Type":"NodeText","Data":"è¾“å‡ºï¼š"}]},{"ID":"20230727000772-27r05ps","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000772-27r05ps","updated":"20230727000772"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"defer1ï¼š1\ndefer2ï¼š2\nreturnï¼š0\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000773-o1l5spd","Type":"NodeParagraph","Properties":{"id":"20230727000773-o1l5spd","updated":"20230727000773"},"Children":[{"Type":"NodeText","Data":"è§£é‡Šï¼š"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"è¿”å›å€¼ç”±å˜é‡ièµ‹å€¼ï¼Œç›¸å½“äºè¿”å›å€¼=i=0ã€‚ç¬¬äºŒä¸ªdeferä¸­i++ = 1ï¼Œ ç¬¬ä¸€ä¸ªdeferä¸­i++ = 2ï¼Œæ‰€ä»¥æœ€ç»ˆiçš„å€¼æ˜¯2ã€‚ä½†æ˜¯è¿”å›å€¼å·²ç»è¢«èµ‹å€¼äº†ï¼Œå³ä½¿åç»­ä¿®æ”¹iä¹Ÿä¸ä¼šå½±å“è¿”å›å€¼ã€‚æœ€ç»ˆè¿”å›å€¼è¿”å›ï¼Œæ‰€ä»¥mainä¸­æ‰“å°0ã€‚"}]},{"ID":"20230727000774-17z6h4i","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230727000774-17z6h4i","updated":"20230727000774"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"è¿”å›å€¼ç”±å˜é‡ièµ‹å€¼ï¼Œæ•…æ‰§è¡Œreturnåè¿”å›å€¼å·²ç»ç¡®å®šï¼Œä¸ä¼šæ ¹æ®deferåçš„å‡½æ•°å¯¹å˜é‡içš„æ›´æ”¹è€Œæ›´æ”¹è¿”å›å€¼"},{"Type":"NodeMark2CloseMarker","Data":"=="}]}]},{"ID":"20230727000775-27j38nc","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000775-27j38nc","updated":"20230727000775"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"ï¼ˆ2ï¼‰æœ‰åè¿”å›å€¼"}]},{"ID":"20230727000776-jnqgwwg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000776-jnqgwwg","updated":"20230727000776"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport (\n\t\"fmt\"\n)\n\nfunc b() (i int) {\n\tdefer func() {\n\t\ti++\n\t\tfmt.Println(\"defer2:\", i)\n\t}()\n\tdefer func() {\n\t\ti++\n\t\tfmt.Println(\"defer1:\", i)\n\t}()\n\treturn i //æˆ–è€…ç›´æ¥å†™æˆreturn\n}\n\nfunc main() {\n\tfmt.Println(\"return:\", b())\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000777-wbqt89n","Type":"NodeParagraph","Properties":{"id":"20230727000777-wbqt89n","updated":"20230727000777"},"Children":[{"Type":"NodeText","Data":"è¾“å‡ºï¼š"}]},{"ID":"20230727000778-nte2k26","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000778-nte2k26","updated":"20230727000778"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"defer1ï¼š1\ndefer2ï¼š2\nreturnï¼š2\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000779-2m3h3xq","Type":"NodeParagraph","Properties":{"id":"20230727000779-2m3h3xq","updated":"20230727000779"},"Children":[{"Type":"NodeText","Data":"è§£é‡Šï¼š"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"è¿™é‡Œå·²ç»æŒ‡æ˜äº†è¿”å›å€¼å°±æ˜¯iï¼Œæ‰€ä»¥åç»­å¯¹iè¿›è¡Œä¿®æ”¹éƒ½ç›¸å½“äºåœ¨ä¿®æ”¹è¿”å›å€¼ï¼Œæ‰€ä»¥æœ€ç»ˆå‡½æ•°çš„è¿”å›å€¼æ˜¯2ã€‚"}]},{"ID":"20230727000780-zea0ic8","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230727000780-zea0ic8","updated":"20230727000780"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"å·²ç»æŒ‡æ˜è¿”å›å€¼å°±æ˜¯iï¼Œæ•…åç»­deferåçš„å‡½æ•°å¯¹içš„æ›´æ”¹éƒ½æ˜¯åœ¨å¯¹è¿”å›å€¼è¿›è¡Œä¿®æ”¹"},{"Type":"NodeMark2CloseMarker","Data":"=="}]}]},{"ID":"20230727000781-e6y36tk","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000781-e6y36tk","updated":"20230727000781"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"ï¼ˆ3ï¼‰å‡½æ•°è¿”å›å€¼ä¸ºåœ°å€ï¼ˆæŒ‡é’ˆï¼‰"}]},{"ID":"20230727000782-2p5dscf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000782-2p5dscf","updated":"20230727000782"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport (\n\t\"fmt\"\n)\n\nfunc c() *int {\n\tvar i int\n\tdefer func() {\n\t\ti++\n\t\tfmt.Println(\"defer2:\", i)\n\t}()\n\tdefer func() {\n\t\ti++\n\t\tfmt.Println(\"defer1:\", i)\n\t}()\n\treturn \u0026i\n}\n\nfunc main() {\n\tfmt.Println(\"return:\", *(c()))\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000783-hfzsiae","Type":"NodeParagraph","Properties":{"id":"20230727000783-hfzsiae","updated":"20230727000783"},"Children":[{"Type":"NodeText","Data":"è¾“å‡ºï¼š"}]},{"ID":"20230727000784-xwclwy9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000784-xwclwy9","updated":"20230727000784"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"defer1: 1\ndefer2: 2\nreturn: 2\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000785-lbqd5su","Type":"NodeParagraph","Properties":{"id":"20230727000785-lbqd5su","updated":"20230727000785"},"Children":[{"Type":"NodeText","Data":"è§£é‡Šï¼š"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"æ­¤æ—¶çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ˆåœ°å€ï¼‰ï¼Œè¿™ä¸ªæŒ‡é’ˆ=\u0026iï¼Œç›¸å½“äºæŒ‡å‘å˜é‡iæ‰€åœ¨çš„åœ°å€ï¼Œä¸¤ä¸ªdeferè¯­å¥éƒ½å¯¹iè¿›è¡Œäº†ä¿®æ”¹ï¼Œé‚£ä¹ˆè¿”å›å€¼æŒ‡å‘çš„åœ°å€çš„å†…å®¹ä¹Ÿå‘ç”Ÿäº†æ”¹å˜ï¼Œæ‰€ä»¥æœ€ç»ˆçš„è¿”å›å€¼æ˜¯2ã€‚"}]},{"ID":"20230727000786-7d123p4","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230727000786-7d123p4","updated":"20230727000786"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"è¿”å›çš„ä¸ºæŒ‡é’ˆ(åœ°å€)ï¼Œdefer å¯¹æŒ‡å‘è¯¥åœ°å€çš„å˜é‡è¿›è¡Œä¿®æ”¹ï¼Œæœ€ç»ˆçš„è¿”å›å€¼ä¹Ÿä¼šè¢«æ›´æ”¹"},{"Type":"NodeMark2CloseMarker","Data":"=="}]}]},{"ID":"20230727000787-2xq3f8y","Type":"NodeParagraph","Properties":{"id":"20230727000787-2xq3f8y","updated":"20230727000787"},"Children":[{"Type":"NodeText","Data":"å†çœ‹ä¸€ä¸ªä¾‹å­ï¼š"}]},{"ID":"20230727000788-gx58ojh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000788-gx58ojh","updated":"20230727000788"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func f() (r int) {\n    defer func(r int) {\n          r = r + 5\n    }(r)\n    return 1\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000789-fovreso","Type":"NodeParagraph","Properties":{"id":"20230727000789-fovreso","updated":"20230727000789"},"Children":[{"Type":"NodeText","Data":"æœ€åˆè¿”å›å€¼rçš„å€¼æ˜¯1ï¼Œè™½ç„¶deferè¯­å¥ä¸­å‡½æ•°çš„å‚æ•°åä¹Ÿå«rï¼ˆè¿™é‡Œæˆ‘è®°ä½œrâ€™ï¼‰ï¼Œä½†ä¼ å‚çš„æ—¶å€™ç›¸å½“äºrâ€˜=rï¼ˆå€¼ä¼ é€’ï¼‰ï¼Œå‡½æ•°å†…çš„è¯­å¥ç›¸å½“äºrâ€™=râ€˜+5ï¼Œæ‰€ä»¥è¿”å›å€¼rå¹¶æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œæœ€ç»ˆçš„è¿”å›å€¼ä»æ˜¯1ã€‚"}]},{"ID":"20230727000790-go4v3yu","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000790-go4v3yu","updated":"20230727000790"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2.4 defer ä¸é—­åŒ…"}]},{"ID":"20230727000791-c94ayld","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000791-c94ayld","updated":"20230727000791"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport \"fmt\"\n\ntype Test struct {\n    name string \n}\n\nfunc (t *Test) pp() {\n    fmt.Println(t.name)\n}\n\nfunc main() {\n    ts := []Test{{\"a\"},{\"b\"},{\"c\"}}\n    for _, t := range ts {\n        defer t.pp()\n    }\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000792-499pajb","Type":"NodeParagraph","Properties":{"id":"20230727000792-499pajb","updated":"20230727000792"},"Children":[{"Type":"NodeText","Data":"è¾“å‡ºï¼š"}]},{"ID":"20230727000793-rj0wtl5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000793-rj0wtl5","updated":"20230727000793"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"c\nc\nc\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000794-gcm802i","Type":"NodeParagraph","Properties":{"id":"20230727000794-gcm802i","updated":"20230727000794"},"Children":[{"Type":"NodeText","Data":"è§£é‡Šï¼š"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"forç»“æŸæ—¶t.name=â€œcâ€ï¼Œæ¥ä¸‹æ¥æ‰§è¡Œçš„é‚£äº›deferè¯­å¥ä¸­ç”¨åˆ°çš„t.nameçš„å€¼å‡ä¸ºâ€câ€œã€‚"}]},{"ID":"20230727000795-q2z5jbm","Type":"NodeParagraph","Properties":{"id":"20230727000795-q2z5jbm","updated":"20230727000795"},"Children":[{"Type":"NodeText","Data":"ä¿®æ”¹ä»£ç ä¸º"}]},{"ID":"20230727000796-i7lg1cu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000796-i7lg1cu","updated":"20230727000796"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport \"fmt\"\n\ntype Test string {\n    name string\n}\n\nfunc pp(t Test) {\n    fmt.Println(t.name)\n}\nfunc main() {\n    ts := []Test{{\"a\"}, {\"b\"}, {\"c\"}}\n\tfor _, t := range ts {\n\t\tdefer pp(t)\n\t}\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000797-jovjp9q","Type":"NodeParagraph","Properties":{"id":"20230727000797-jovjp9q","updated":"20230727000797"},"Children":[{"Type":"NodeText","Data":"è¾“å‡ºï¼š"}]},{"ID":"20230727000798-m0asdkd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000798-m0asdkd","updated":"20230727000798"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"c\nb\na\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000799-2rp6o41","Type":"NodeParagraph","Properties":{"id":"20230727000799-2rp6o41","updated":"20230727000799"},"Children":[{"Type":"NodeText","Data":"è§£é‡Šï¼š"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"deferè¯­å¥ä¸­çš„å‚æ•°ä¼šå®æ—¶è§£æï¼Œæ‰€ä»¥åœ¨ç¢°åˆ°deferè¯­å¥çš„æ—¶å€™å°±æŠŠè¯¥æ—¶çš„tä»£å…¥äº†ã€‚"}]},{"ID":"20230727000800-rv70xrx","Type":"NodeParagraph","Properties":{"id":"20230727000800-rv70xrx","updated":"20230727000800"},"Children":[{"Type":"NodeText","Data":"å†æ¬¡ä¿®æ”¹ä»£ç ï¼š"}]},{"ID":"20230727000801-a9e8esn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000801-a9e8esn","updated":"20230727000801"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport \"fmt\"\n\ntype Test struct {\n\tname string\n}\nfunc (t *Test) pp() {\n\tfmt.Println(t.name)\n}\n\nfunc main() {\n\tts := []Test{{\"a\"}, {\"b\"}, {\"c\"}}\n\tfor _, t := range ts {\n\t\ttt := t\n\t\tprintln(\u0026tt)\n\t\tdefer tt.pp()\n\t}\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000802-h97l7jt","Type":"NodeParagraph","Properties":{"id":"20230727000802-h97l7jt","updated":"20230727000802"},"Children":[{"Type":"NodeText","Data":"è¾“å‡ºï¼š"}]},{"ID":"20230727000803-gms157r","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000803-gms157r","updated":"20230727000803"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"0xc000010200\n0xc000010210\n0xc000010220\nc\nb\na\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000804-8ktape4","Type":"NodeParagraph","Properties":{"id":"20230727000804-8ktape4","updated":"20230727000804"},"Children":[{"Type":"NodeText","Data":"è§£é‡Šï¼š"}]},{"ID":"20230727000805-saqrmo4","Type":"NodeParagraph","Properties":{"id":"20230727000805-saqrmo4","updated":"20230727000805"},"Children":[{"Type":"NodeText","Data":":=ç”¨æ¥å£°æ˜å¹¶èµ‹å€¼ï¼Œè¿ç»­ä½¿ç”¨2æ¬¡a:=1å°±ä¼šæŠ¥é”™ï¼Œä½†æ˜¯åœ¨forå¾ªç¯å†…ï¼Œå¯ä»¥çœ‹å‡ºæ¯æ¬¡tt:=tæ—¶ï¼Œttçš„åœ°å€éƒ½ä¸åŒï¼Œè¯´æ˜ä»–ä»¬æ˜¯ä¸åŒçš„å˜é‡ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šæŠ¥é”™ã€‚æ¯æ¬¡éƒ½æœ‰ä¸€ä¸ªæ–°çš„å˜é‡tt:=tï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‰§è¡Œdeferè¯­å¥æ—¶ï¼Œå¯¹åº”çš„ttä¸æ˜¯åŒä¸€ä¸ªï¼ˆforå¾ªç¯ä¸­å®é™…ä¸Šç”Ÿæˆäº†3ä¸ªä¸åŒçš„ttï¼‰ï¼Œæ‰€ä»¥è¾“å‡ºçš„ç»“æœä¹Ÿä¸ç›¸åŒã€‚"}]},{"ID":"20230727000806-9yh1t47","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000806-9yh1t47","updated":"20230727000806"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2.5 defer ç”¨äºå…³é—­æ–‡ä»¶å’Œäº’æ–¥é”"}]},{"ID":"20230727000807-9jf9t2y","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000807-9jf9t2y","updated":"20230727000807"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func ReadFile(filename string) ([]byte, error) {\n    f, err := os.Open(filename)\n    if err != nil {\n        return nil, err\n    }\n    defer f.close()\n    return ReadAll()\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000808-7ostzr2","Type":"NodeParagraph","Properties":{"id":"20230727000808-7ostzr2","updated":"20230727000808"},"Children":[{"Type":"NodeText","Data":"äº’æ–¥é”"}]},{"ID":"20230727000809-7a36ubd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000809-7a36ubd","updated":"20230727000809"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"var mu sync.Mutex\nvar m = make(map[string]int)\n \nfunc lookup(key string) int {\n    mu.Lock()\n    defer mu.Unlock()\n    return m[key]\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000810-lcr1kt2","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000810-lcr1kt2","updated":"20230727000810"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2.6 \"è§£é™¤\" å¯¹æ‰€åœ¨å‡½æ•°çš„ä¾èµ–"}]},{"ID":"20230727000811-u7oykbi","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000811-u7oykbi","updated":"20230727000811"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport \"fmt\"\nimport \"time\"\n\ntype User struct {\n\tusername string\n}\n\nfunc (this *User) Close() {\n\tfmt.Println(this.username, \"Closed !!!\")\n}\n\nfunc main() {\n\tu1 := \u0026User{\"jack\"}\n\tdefer u1.Close()\n\tu2 := \u0026User{\"lily\"}\n\tdefer u2.Close()\n\ttime.Sleep(10 * time.Second)\n\tfmt.Println(\"Done !\")\n\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000812-p70hlqj","Type":"NodeParagraph","Properties":{"id":"20230727000812-p70hlqj","updated":"20230727000812"},"Children":[{"Type":"NodeText","Data":"è¾“å‡ºï¼š"}]},{"ID":"20230727000813-lt17c9m","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000813-lt17c9m","updated":"20230727000813"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"Done !\nlily Closed !!!\njack Closed !!!\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000814-rilv9dz","Type":"NodeParagraph","Properties":{"id":"20230727000814-rilv9dz","updated":"20230727000814"},"Children":[{"Type":"NodeText","Data":"è§£é‡Šï¼š"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"deferåé¢è·Ÿæ— å‚å‡½æ•°ï¼Œu1.Close()å’Œu2.Close()è¦ç­‰sleepå’Œfmt.Println(â€œDone !â€)ä¹‹åæ‰å¯ä»¥æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯åœ¨å‡½æ•°æœ€ç»ˆè¿”å›ä¹‹å‰æ‰§è¡Œã€‚"}]},{"ID":"20230727000815-suhaz41","Type":"NodeParagraph","Properties":{"id":"20230727000815-suhaz41","updated":"20230727000815"},"Children":[{"Type":"NodeText","Data":"ä¿®æ”¹ä»£ç ä¸ºï¼š"}]},{"ID":"20230727000816-3bvyshs","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000816-3bvyshs","updated":"20230727000816"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport \"fmt\"\nimport \"time\"\n\ntype User struct {\n\tusername string\n}\n\nfunc (this *User) Close() {\n\tfmt.Println(this.username, \"Closed !!!\")\n}\n\nfunc f(u *User) {\n\tdefer u.Close()\n}\n\nfunc main() {\n\tu1 := \u0026User{\"jack\"}\n\tf(u1)\n\tu2 := \u0026User{\"lily\"}\n\tfunc() { defer u2.Close() }()\n\n\ttime.Sleep(10 * time.Second)\n\tfmt.Println(\"Done !\")\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000817-6jskktl","Type":"NodeParagraph","Properties":{"id":"20230727000817-6jskktl","updated":"20230727000817"},"Children":[{"Type":"NodeText","Data":"è¾“å‡ºï¼š"}]},{"ID":"20230727000818-i8r9h93","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000818-i8r9h93","updated":"20230727000818"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"jack Closed !!!\nlily Closed !!!\nDone !\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000819-wq9fjs0","Type":"NodeParagraph","Properties":{"id":"20230727000819-wq9fjs0","updated":"20230727000819"},"Children":[{"Type":"NodeText","Data":"è¿™æ ·çš„ä½¿ç”¨æ–¹å¼ï¼Œä¼¼ä¹ä¸å¤ªåˆç†ï¼Œä½†å´æœ‰å­˜åœ¨çš„å¿…è¦æ€§ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥ç”¨äº u1,u2 ä¹‹ç±»éå¸¸æ¶ˆè€—å†…å­˜ï¼Œæˆ–è€…cpuï¼Œå…¶åæ‰§è¡Œæ—¶é—´è¿‡ç¨‹ä¸”æ²¡æœ‰å¤ªå¤šå…³è”çš„æƒ…å†µã€‚æ—¢ä¿ç•™äº†deferçš„åŠŸèƒ½ç‰¹æ€§ï¼Œä¹Ÿæ»¡è¶³èŒƒå›´ç²¾ç¡®æ§åˆ¶çš„æ¡ä»¶ï¼ï¼ˆç®—æ˜¯å¥‡æŠ€æ·«å·§å§ğŸ˜‚ï¼‰"}]},{"ID":"20230727000820-08uhj5a","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000820-08uhj5a","updated":"20230727000820"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2.7 defer ä¸ panic"}]},{"ID":"20230727000821-gbg5trk","Type":"NodeParagraph","Properties":{"id":"20230727000821-gbg5trk","updated":"20230727000821"},"Children":[{"Type":"NodeText","Data":"é‡åˆ°panicæ—¶ï¼Œéå†æœ¬åç¨‹çš„deferé“¾è¡¨ï¼Œå¹¶æ‰§è¡Œdeferã€‚åœ¨æ‰§è¡Œdeferè¿‡ç¨‹ä¸­:é‡åˆ°recoveråˆ™åœæ­¢panicï¼Œè¿”å›recoverå¤„ç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚å¦‚æœæ²¡æœ‰é‡åˆ°recoverï¼Œéå†å®Œæœ¬åç¨‹çš„deferé“¾è¡¨åï¼Œå‘stderræŠ›å‡ºpanicä¿¡æ¯ã€‚"}]},{"ID":"20230727000822-alzo51o","Type":"NodeParagraph","Properties":{"id":"20230727000822-alzo51o","updated":"20230727000822"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"image-20230303104658066","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"E:\\Typora picture\\image-20230303104658066.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230727000823-l1c7o9w","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000823-l1c7o9w","updated":"20230727000823"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"ï¼ˆ1ï¼‰åœ¨panicè¯­å¥åé¢çš„deferè¯­å¥ä¸è¢«æ‰§è¡Œ"}]},{"ID":"20230727000824-sjam35p","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000824-sjam35p","updated":"20230727000824"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func panicDefer() {\n    panic(\"panic\")\n    defer fmt.Println(\"defer after panic\")\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000825-3jr9lq4","Type":"NodeParagraph","Properties":{"id":"20230727000825-3jr9lq4","updated":"20230727000825"},"Children":[{"Type":"NodeText","Data":"è¾“å‡ºï¼š"}]},{"ID":"20230727000826-5iaffx5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"c2g=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000826-5iaffx5","updated":"20230727000826"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2g=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"panic: panic\ngoroutine 1 [running]:\nmain.panicDefer()\n    E:/godemo/testdefer.go:17 +0x39\nmain.main()\n    E:/godemo/testdefer.go:13 +0x20\nProcess finished with exit code 2\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000827-q1vnx84","Type":"NodeParagraph","Properties":{"id":"20230727000827-q1vnx84","updated":"20230727000827"},"Children":[{"Type":"NodeText","Data":"å¯ä»¥çœ‹åˆ° defer è¯­å¥æ²¡æœ‰æ‰§è¡Œã€‚"}]},{"ID":"20230727000828-gziothe","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000828-gziothe","updated":"20230727000828"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"ï¼ˆ2ï¼‰åœ¨panicè¯­å¥å‰çš„deferè¯­å¥ä¼šè¢«æ‰§è¡Œ"}]},{"ID":"20230727000829-ghczcl5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000829-ghczcl5","updated":"20230727000829"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func deferPanic() {\n    defer fmt.Println(\"defer before panic\")\n    panic(\"panic\")\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000830-ngw9j90","Type":"NodeParagraph","Properties":{"id":"20230727000830-ngw9j90","updated":"20230727000830"},"Children":[{"Type":"NodeText","Data":"è¾“å‡º"}]},{"ID":"20230727000831-es4snii","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"c2g=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000831-es4snii","updated":"20230727000831"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2g=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"defer before panic\npanic: panic\ngoroutine 1 [running]:\nmain.deferPanic()\n    E:/godemo/testdefer.go:19 +0x95\nmain.main()\n    E:/godemo/testdefer.go:14 +0x20\nProcess finished with exit code 2\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000832-10smt1u","Type":"NodeParagraph","Properties":{"id":"20230727000832-10smt1u","updated":"20230727000832"},"Children":[{"Type":"NodeText","Data":"defer è¯­å¥è¾“å‡ºäº†å†…å®¹ã€‚"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Goä¸­çš„panicç±»ä¼¼å…¶å®ƒè¯­è¨€ä¸­çš„æŠ›å‡ºå¼‚å¸¸ï¼Œpanicåé¢çš„ä»£ç ä¸å†æ‰§è¡Œ(panicè¯­å¥å‰é¢çš„deferè¯­å¥ä¼šè¢«æ‰§è¡Œ)ã€‚"}]},{"ID":"20230727000833-dgya1sb","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230727000833-dgya1sb","updated":"20230727000833"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"8ã€è°ƒç”¨os.Exitæ—¶deferä¸ä¼šè¢«æ‰§è¡Œ"}]},{"ID":"20230727000834-8tz90n9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000834-8tz90n9","updated":"20230727000834"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"func deferExit() {\n    defer func() {\n        fmt.Println(\"defer\")\n    }()\n    os.Exit(0)\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000835-j1vq02f","Type":"NodeParagraph","Properties":{"id":"20230727000835-j1vq02f","updated":"20230727000835"},"Children":[{"Type":"NodeText","Data":"å½“è°ƒç”¨os.Exit()æ–¹æ³•é€€å‡ºç¨‹åºæ—¶ï¼Œdeferå¹¶ä¸ä¼šè¢«æ‰§è¡Œï¼Œä¸Šé¢çš„deferå¹¶ä¸ä¼šè¾“å‡ºã€‚"}]},{"ID":"20230727000836-6owqfwo","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230727000836-6owqfwo","updated":"20230727000836"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"3. deferçš„æ•°æ®ç»“æ„å’Œä¸‰ç§å®ç°æ–¹å¼"}]},{"ID":"20230727000837-p2rc84y","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000837-p2rc84y","updated":"20230727000837"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"3.1 deferæ•°æ®ç»“æ„"}]},{"ID":"20230727000838-u9uu6h6","Type":"NodeParagraph","Properties":{"id":"20230727000838-u9uu6h6","updated":"20230727000838"},"Children":[{"Type":"NodeText","Data":"deferå…³é”®å­—åœ¨Goè¯­è¨€æºä»£ç ä¸­çš„æ•°æ®ç»“æ„æ˜¯ runtime_defer:"}]},{"ID":"20230727000839-zs3kfz5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000839-zs3kfz5","updated":"20230727000839"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"type _defer struct {\n\tstarted bool        // æ ‡è¯†deferå‡½æ•°æ˜¯å¦å·²ç»å¼€å§‹æ‰§è¡Œ\n\theap    bool        // æ ‡è¯†è¯¥deferç»“æ„æ˜¯å¦åœ¨å †ä¸Šåˆ†é…\n\topenDefer bool      // æ˜¯å¦ä»¥å¼€æ”¾ç¼–ç çš„æ–¹å¼å®ç°è¯¥defer\n\tsp        uintptr   // è°ƒç”¨æ–¹çš„æ ˆæŒ‡é’ˆ\n\tpc        uintptr   // è°ƒç”¨æ–¹çš„ç¨‹åºè®¡æ•°å™¨\n\tfn        func()    // deferè°ƒç”¨çš„å‡½æ•°\n\t_panic    *_panic   // deferå…³è”çš„panicï¼Œépanicè§¦å‘æ—¶ä¸ºç©º\n\tlink      *_defer   // G ä¸Šçš„deferé“¾è¡¨; æ—¢å¯ä»¥æŒ‡å‘å †ä¹Ÿå¯ä»¥æŒ‡å‘æ ˆ\n\tfd   unsafe.Pointer // è·Ÿdeferè°ƒç”¨å‡½æ•°ç›¸å…³çš„å‚æ•°\n\tvarp uintptr        \n\tframepc uintptr\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000840-q3yl1wo","Type":"NodeParagraph","Properties":{"id":"20230727000840-q3yl1wo","updated":"20230727000840"},"Children":[{"Type":"NodeText","Data":"ä¸»è¦çš„å­—æ®µæœ‰ï¼š"}]},{"ID":"20230727000841-6ivf51v","Type":"NodeList","ListData":{"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230727000841-6ivf51v","updated":"20230727000841"},"Children":[{"ID":"20230727000842-fz1oxn9","Type":"NodeListItem","Data":"-","ListData":{"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230727000842-fz1oxn9","updated":"20230727000842"},"Children":[{"ID":"20230727000843-ihtnfu1","Type":"NodeParagraph","Properties":{"id":"20230727000843-ihtnfu1","updated":"20230727000843"},"Children":[{"Type":"NodeText","Data":"heap æ ‡è¯†è¯¥deferç»“æ„"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"æ˜¯å¦åœ¨"},{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"å †ä¸Šåˆ†é…"},{"Type":"NodeMark2CloseMarker","Data":"=="}]},{"Type":"NodeText","Data":"ï¼›"}]}]},{"ID":"20230727000844-ni5vlvr","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230727000844-ni5vlvr","updated":"20230727000844"},"Children":[{"ID":"20230727000845-dbys1q8","Type":"NodeParagraph","Properties":{"id":"20230727000845-dbys1q8","updated":"20230727000845"},"Children":[{"Type":"NodeText","Data":"openDefer è¡¨ç¤ºå½“å‰ defer "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"æ˜¯å¦ä»¥"},{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"å¼€æ”¾ç¼–ç çš„æ–¹å¼å®ç°"},{"Type":"NodeMark2CloseMarker","Data":"=="}]},{"Type":"NodeText","Data":"ï¼›"}]}]},{"ID":"20230727000846-vjfkjqg","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230727000846-vjfkjqg","updated":"20230727000846"},"Children":[{"ID":"20230727000847-npisxtk","Type":"NodeParagraph","Properties":{"id":"20230727000847-npisxtk","updated":"20230727000847"},"Children":[{"Type":"NodeText","Data":"sp å’Œ pc åˆ†åˆ«ä»£è¡¨"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"è°ƒç”¨æ–¹çš„æ ˆæŒ‡é’ˆå’Œç¨‹åºè®¡æ•°å™¨"},{"Type":"NodeText","Data":"ï¼›"}]}]},{"ID":"20230727000848-ri8bt8g","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230727000848-ri8bt8g","updated":"20230727000848"},"Children":[{"ID":"20230727000849-gwje3yx","Type":"NodeParagraph","Properties":{"id":"20230727000849-gwje3yx","updated":"20230727000849"},"Children":[{"Type":"NodeText","Data":"fn æ˜¯ "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"defer å…³é”®å­—ä¸­ä¼ å…¥çš„å‡½æ•°"},{"Type":"NodeText","Data":"ï¼›"}]}]},{"ID":"20230727000850-wyaukhx","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230727000850-wyaukhx","updated":"20230727000850"},"Children":[{"ID":"20230727000851-kay6c2n","Type":"NodeParagraph","Properties":{"id":"20230727000851-kay6c2n","updated":"20230727000851"},"Children":[{"Type":"NodeText","Data":"_panic æ˜¯"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"è§¦å‘deferå»¶è¿Ÿè°ƒç”¨çš„ç»“æ„ä½“"},{"Type":"NodeText","Data":"ï¼Œépanicè§¦å‘æ—¶ä¸ºç©ºï¼›"}]}]},{"ID":"20230727000852-4t2q2uy","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230727000852-4t2q2uy","updated":"20230727000852"},"Children":[{"ID":"20230727000853-zmnauck","Type":"NodeParagraph","Properties":{"id":"20230727000853-zmnauck","updated":"20230727000853"},"Children":[{"Type":"NodeText","Data":"ink  "},{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"deferé“¾è¡¨"},{"Type":"NodeMark2CloseMarker","Data":"=="}]},{"Type":"NodeText","Data":"ï¼ŒæŒ‡æ‰€åœ¨å‡½æ•°çš„goroutineçš„deferé“¾è¡¨ï¼›"}]}]}]},{"ID":"20230727000854-1va2ytd","Type":"NodeParagraph","Properties":{"id":"20230727000854-1va2ytd","updated":"20230727000854"},"Children":[{"Type":"NodeText","Data":"ä¸€ä¸ªå‡½æ•°å†…å¯ä»¥æœ‰å¤šä¸ª defer è°ƒç”¨ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„æ¥ç»„ç»‡è¿™äº› _defer ç»“æ„ä½“ï¼Œè¿™å°±æ˜¯linkå­—æ®µçš„ä½œç”¨ï¼Œ å®ƒæŠŠå‡½æ•°ä¸­çš„æ‰€æœ‰_deferä¸²æˆä¸€ä¸ªé“¾è¡¨ï¼Œè¡¨å¤´æ˜¯æŒ‚åœ¨å½“å‰Goroutine çš„ _defer å­—æ®µã€‚"}]},{"ID":"20230727000855-9ivf5dp","Type":"NodeParagraph","Properties":{"id":"20230727000855-9ivf5dp","updated":"20230727000855"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"E:\\Typora picture\\7000.webp","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230727000856-gdmdns9","Type":"NodeParagraph","Properties":{"id":"20230727000856-gdmdns9","updated":"20230727000856"},"Children":[{"Type":"NodeText","Data":"å›¾2.1 å‡½æ•°ä¸­çš„å¤šä¸ªdeferä¼šä»¥é“¾è¡¨å½¢å¼æŒ‚åœ¨å‡½æ•°æ‰€åœ¨Gä¸Š"}]},{"ID":"20230727000857-ozzvnxm","Type":"NodeParagraph","Properties":{"id":"20230727000857-ozzvnxm","updated":"20230727000857"},"Children":[{"Type":"NodeText","Data":"å‡½æ•°ä¸­çš„deferæŒ‰ä»ä¸Šåˆ°ä¸‹çš„æ³¨å†Œé¡ºåºä¾æ¬¡"},{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"æ”¾å…¥linké“¾è¡¨å¤´"},{"Type":"NodeMark2CloseMarker","Data":"=="}]},{"Type":"NodeText","Data":"ï¼Œå‡½æ•°é€€å‡ºæ—¶è°ƒç”¨çš„é¡ºåºä¹Ÿæ˜¯ä¾æ¬¡ä»é“¾è¡¨å¤´è·å–ï¼Œè¿™å°±æ˜¯LIFOç‰¹æ€§çš„ç”±æ¥ï¼Œåé¢ä¼šå…·ä½“åˆ†æã€‚"}]},{"ID":"20230727000858-589ru1y","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000858-589ru1y","updated":"20230727000858"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"3.2 deferçš„ä¸‰ç§å®ç°æ–¹å¼"}]},{"ID":"20230727000859-ieqwh0h","Type":"NodeParagraph","Properties":{"id":"20230727000859-ieqwh0h","updated":"20230727000859"},"Children":[{"Type":"NodeText","Data":"ä»ç›´è§‰ä¸Šçœ‹ï¼Œ defer åº”è¯¥ç”±ç¼–è¯‘å™¨ç›´æ¥å°†éœ€è¦çš„å‡½æ•°è°ƒç”¨æ’å…¥åˆ°è¯¥è°ƒç”¨çš„åœ°æ–¹ï¼Œä¼¼ä¹æ˜¯ä¸€ä¸ªç¼–è¯‘æœŸç‰¹æ€§ï¼Œ ä¸åº”è¯¥å­˜åœ¨è¿è¡Œæ—¶æ€§èƒ½é—®é¢˜ã€‚ä½†å®é™…æƒ…å†µæ˜¯ï¼Œç”±äº defer å¹¶æ²¡æœ‰ä¸å…¶ä¾èµ–èµ„æºæŒ‚é’©ï¼Œä¹Ÿå…è®¸åœ¨æ¡ä»¶ã€å¾ªç¯è¯­å¥ä¸­å‡ºç°ï¼Œ è¿™ä½¿å¾— defer çš„è¯­ä¹‰å˜å¾—ç›¸å¯¹å¤æ‚ï¼Œæœ‰æ—¶æ— æ³•åœ¨ç¼–è¯‘æœŸå†³å®šå­˜åœ¨å¤šå°‘ä¸ª defer è°ƒç”¨ã€‚è¿™ä½¿deferæœ‰å¯èƒ½åœ¨å †ä¸Šæˆ–æ ˆä¸Šå®ç°ã€‚"}]},{"ID":"20230727000860-87ylxih","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000860-87ylxih","updated":"20230727000860"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"3.2.1 Goè¯­è¨€ç¼–è¯‘å™¨åŸç†åˆæ¢"}]},{"ID":"20230727000861-0h6yeum","Type":"NodeParagraph","Properties":{"id":"20230727000861-0h6yeum","updated":"20230727000861"},"Children":[{"Type":"NodeText","Data":"åœ¨è®¨è®ºdeferçš„"},{"Type":"NodeStrong","Children":[{"Type":"NodeStrongA6kOpenMarker","Data":"**"},{"Type":"NodeMark","Children":[{"Type":"NodeMark2OpenMarker","Data":"=="},{"Type":"NodeText","Data":"å †åˆ†é…ã€æ ˆåˆ†é…ã€å¼€æ”¾ç¼–ç ä¸‰ç§å®ç°æ–¹å¼"},{"Type":"NodeMark2CloseMarker","Data":"=="}]},{"Type":"NodeStrongA6kCloseMarker","Data":"**"}]},{"Type":"NodeText","Data":"ä¹‹å‰ï¼Œéœ€è¦å…ˆè¯»æ‡‚ Go è¯­è¨€ç¼–è¯‘å™¨ä¼˜åŒ–çš„ä»£ç é€»è¾‘ï¼Œè¦è¯»æ‡‚ Go ç¼–è¯‘å™¨ä¼˜åŒ–çš„ä»£ç ï¼Œéœ€è¦å…ˆå¼„æ¸…æ¥š Go è¯­è¨€ç¼–è¯‘å™¨æ€æ ·å°†ç¨‹åºå‘˜å†™çš„ Goä»£ç ç¼–è¯‘æˆæœºå™¨å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶ä»£ç ã€‚"}]},{"ID":"20230727000862-uaqkqiq","Type":"NodeParagraph","Properties":{"id":"20230727000862-uaqkqiq","updated":"20230727000862"},"Children":[{"Type":"NodeText","Data":"Goç¼–è¯‘å™¨å°†ç¨‹åºå‘˜å†™çš„Goä»£ç ç¼–è¯‘æˆæœºå™¨å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶ä»£ç çš„ä¸»è¦æ­¥éª¤æ˜¯ï¼š"}]},{"ID":"20230727000863-o5cpasr","Type":"NodeParagraph","Properties":{"id":"20230727000863-o5cpasr","updated":"20230727000863"},"Children":[{"Type":"NodeText","Data":"1ï¼‰Go ç¼–è¯‘å™¨å°†ç¨‹åºå‘˜å†™çš„æºä»£ç ç»è¿‡è¯æ³•åˆ†æï¼ˆlexical analysis, è§£ææºä»£ç æ–‡ä»¶ï¼Œå®ƒå°†æ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²åºåˆ—è½¬æ¢æˆ Token åºåˆ—ï¼‰å’Œè¯­æ³•åˆ†æï¼ˆsyntax analysisï¼ŒæŒ‰ç…§é¡ºåºè§£æ Token åºåˆ—å¹¶å¯¹æ¯ä¸ªæºæ–‡ä»¶ç”Ÿæˆä¸€ä¸ªä¸ªè¯­æ³•æ ‘syntax treeï¼Œè¯­æ³•æ ‘ä½¿ç”¨èŠ‚ç‚¹Nodeè¡¨è¾¾å˜é‡ã€å‡½æ•°å£°æ˜ã€è¡¨è¾¾å¼è¯­å¥ç­‰ï¼‰ï¼Œè¯¥æ®µé€»è¾‘ä¸»è¦ä½“ç°åœ¨ cmd/compile/internal/syntax åŒ…ä¸­ï¼›"}]},{"ID":"20230727000864-02q8e4o","Type":"NodeParagraph","Properties":{"id":"20230727000864-02q8e4o","updated":"20230727000864"},"Children":[{"Type":"NodeText","Data":"2ï¼‰æ¥ç€ç¼–è¯‘å™¨ä¼šå°†ä¸Šé¢ç”Ÿæˆçš„è¯­æ³•æ ‘è½¬åŒ–ä¸ºæŠ½è±¡è¯­æ³•æ ‘ ASTï¼ˆAbstract Syntax Treeï¼‰ï¼Œæ¥ç€æ˜¯åšç±»å‹æ£€æŸ¥ï¼Œç±»å‹æ£€æŸ¥ä¼šéå†æŠ½è±¡è¯­æ³•æ ‘ä¸­çš„NodeèŠ‚ç‚¹ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹çš„ç±»å‹è¿›è¡Œæ£€éªŒï¼Œæ‰¾å‡ºå…¶ä¸­å­˜åœ¨çš„è¯­æ³•é”™è¯¯ï¼Œå»é™¤ä¸ä¼šè¢«æ‰§è¡Œçš„ä»£ç ï¼Œæ‰§è¡Œé€ƒé€¸åˆ†æï¼Œè¿›è¡Œå‡½æ•°å†…è”ä¼˜åŒ–ä»¥æé«˜æ•ˆç‡ç­‰ï¼›è¯¥æ®µé€»è¾‘ä¸»è¦ä½“ç°åœ¨ cmd/compile/internal/gc åŒ…ä¸­ï¼Œæ³¨æ„ï¼Œè¿™é‡Œçš„ gc æ˜¯go compilerç¼–è¯‘å™¨çš„æ„æ€ï¼Œè€Œä¸æ˜¯GCåƒåœ¾å›æ”¶çš„æ„æ€ï¼›"}]},{"ID":"20230727000865-9rlnc5y","Type":"NodeParagraph","Properties":{"id":"20230727000865-9rlnc5y","updated":"20230727000865"},"Children":[{"Type":"NodeText","Data":"3ï¼‰ç»è¿‡ä¸Šé¢çš„è¯­æ³•åˆ†æå’Œç±»å‹æ£€æŸ¥ï¼Œå°±å¯ä»¥è®¤ä¸ºå½“å‰æ–‡ä»¶ä¸­çš„ä»£ç ä¸å­˜åœ¨è¯­æ³•é”™è¯¯å’Œç±»å‹é”™è¯¯çš„é—®é¢˜äº†ï¼›æ¥ç€ï¼ŒGoç¼–è¯‘å™¨ä¼šå°†æŠ½è±¡è¯­æ³•æ ‘ASTç¼–è¯‘æˆä¸€ç§å…·æœ‰SSAï¼ˆStatic Single Assignmentï¼Œé™æ€å•èµ‹å€¼ï¼‰ç‰¹æ€§çš„ä¸­é—´ä»£ç ï¼Œä¸­é—´ä»£ç æ˜¯ä¸€ç§æ›´æ¥è¿‘æœºå™¨è¯­è¨€çš„è¡¨ç¤ºå½¢å¼ï¼Œè¿™ç§ä¸­é—´ä»£ç è¦ç»è¿‡50å¤šè½®å¤„ç†è½¬æ¢ï¼Œä¼šç”Ÿæˆæœ€ç»ˆçš„SSAä¸­é—´ä»£ç ï¼Œç›®çš„æ˜¯ä¸ºäº†æé«˜æ‰§è¡Œæ•ˆç‡ï¼ŒGoè¯­è¨€ä¸­çš„è®¸å¤šå…³é”®å­—éƒ½æ˜¯åœ¨è¿™ä¸ªé˜¶æ®µè¢«è½¬æ¢æˆè¿è¡Œæ—¶ä¸­çš„æ–¹æ³•çš„ï¼ŒåŒ…æ‹¬ä»Šå¤©è¦åˆ†æçš„deferï¼›è¯¥æ®µé€»è¾‘ä¸»è¦ä½“ç°åœ¨cmd/compile/internal/gc å’Œ cmd/compile/internal/ssa åŒ…ä¸­ï¼›"}]},{"ID":"20230727000866-z9paux9","Type":"NodeParagraph","Properties":{"id":"20230727000866-z9paux9","updated":"20230727000866"},"Children":[{"Type":"NodeText","Data":"4ï¼‰æœ€åä¸€æ­¥ï¼Œæ˜¯å°†SSAä¸­é—´ä»£ç ç”Ÿæˆå¯æ‰§è¡Œçš„æœºå™¨ä»£ç ï¼Œå³åœ¨ç›®æ ‡ CPU æ¶æ„ä¸Šèƒ½å¤Ÿè¿è¡Œçš„äºŒè¿›åˆ¶ä»£ç ï¼Œè¯¥è¿‡ç¨‹å…¶å®æ˜¯å¯¹ SSA ä¸­é—´ä»£ç çš„é™çº§ï¼ˆlowerï¼‰è¿‡ç¨‹ï¼Œå¹¶æ¶‰åŠå¯¹ç‰¹å®šCPUã€å¯„å­˜å™¨å’Œå†…å­˜çš„å¤„ç†ï¼›æˆ‘ä»¬ç»å¸¸ç”¨æ¥æ‰“å° Go æ±‡ç¼–ä»£ç çš„å‘½ä»¤GOOS=linux GOARCH=amd64 go tool compile -S -N -l main.goç”Ÿæˆçš„å°±æ˜¯æœºå™¨ç ï¼›è¯¥æ®µé€»è¾‘ä¸»è¦ä½“ç°åœ¨ cmd/compile/internal/ssa å’Œcmd/internal/objåŒ…ä¸­ï¼›"}]},{"ID":"20230727000867-g57qsma","Type":"NodeParagraph","Properties":{"id":"20230727000867-g57qsma","updated":"20230727000867"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"em","TextMarkTextContent":"å‚è€ƒ src/cmd/compile/README.md å’Œã€ŠGoè¯­è¨€è®¾è®¡ä¸å®ç°ã€‹ç¬¬ä¸€ç« ï¼Œè¦äº†è§£ Goè¯­è¨€å„ç§å…³é”®å­—çš„å®ç°åŸç†ï¼Œé˜…è¯»Goç¼–è¯‘å™¨çš„æºç æ˜¯ç»•ä¸å¼€çš„ã€‚"}]},{"ID":"20230727000868-kb8ynu0","Type":"NodeParagraph","Properties":{"id":"20230727000868-kb8ynu0","updated":"20230727000868"},"Children":[{"Type":"NodeText","Data":"å¦‚å›¾2.2æ‰€ç¤ºï¼Œæ˜¯Go1.18çš„ç¼–è¯‘å™¨çš„æ‰§è¡Œè¿‡ç¨‹ã€‚"}]},{"ID":"20230727000869-jzfs4wl","Type":"NodeParagraph","Properties":{"id":"20230727000869-jzfs4wl","updated":"20230727000869"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"E:\\Typora picture\\7000-16782549315871.webp","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230727000870-3rdtr55","Type":"NodeParagraph","Properties":{"id":"20230727000870-3rdtr55","updated":"20230727000870"},"Children":[{"Type":"NodeText","Data":"å›¾2.2 Goè¯­è¨€ç¼–è¯‘å™¨æ‰§è¡Œé€»è¾‘"}]},{"ID":"20230727000871-jsva9tb","Type":"NodeParagraph","Properties":{"id":"20230727000871-jsva9tb","updated":"20230727000871"},"Children":[{"Type":"NodeText","Data":"1ï¼‰ç¼–è¯‘å™¨å…¥å£åœ¨cmd/compile/internal/gc/main.goåŒ…çš„gc.Main()æ–¹æ³•ï¼›"}]},{"ID":"20230727000872-ak9s1pu","Type":"NodeParagraph","Properties":{"id":"20230727000872-ak9s1pu","updated":"20230727000872"},"Children":[{"Type":"NodeText","Data":"2ï¼‰gc.Main() è°ƒç”¨cmd/compile/internal/noder/noder.go çš„ noder.LoadPackage() è¿›è¡Œè¯æ³•åˆ†æã€è¯­æ³•åˆ†æå’Œç±»å‹æ£€æŸ¥ï¼Œå¹¶ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ ASTï¼›"}]},{"ID":"20230727000873-f294bgd","Type":"NodeParagraph","Properties":{"id":"20230727000873-f294bgd","updated":"20230727000873"},"Children":[{"Type":"NodeText","Data":"3ï¼‰Main() è°ƒç”¨ cmd/compile/internal/gc/compile.goçš„gc.enqueueFunc()ï¼Œåè€…è°ƒç”¨gc.prepareFunc()ï¼Œæœ€ç»ˆè°ƒç”¨cmd/compile/internal/walk/walk.goåŒ…çš„walk.Walk()æ–¹æ³•ï¼Œéå†å¹¶æ”¹å†™ä»£ç ä¸­çš„ASTèŠ‚ç‚¹ï¼Œä¸ºç”Ÿæˆæœ€ç»ˆçš„æŠ½è±¡è¯­æ³•æ ‘ASTåšå¥½å‡†å¤‡ï¼›éœ€è¦æ³¨æ„çš„æ˜¯ï¼šwalk.Walk()æ–¹æ³•é‡Œä¼šå°†ä¸€äº›å…³é”®å­—å’Œå†…å»ºå‡½æ•°è½¬æ¢æˆè¿è¡Œæ—¶çš„å‡½æ•°è°ƒç”¨ï¼Œæ¯”å¦‚ï¼Œä¼šå°† panicã€recover ä¸¤ä¸ªå†…å»ºå‡½æ•°è½¬æ¢æˆ runtime.gopanic å’Œ runtime.gorecover ä¸¤ä¸ªçœŸæ­£è¿è¡Œæ—¶å‡½æ•°ï¼Œå…³é”®å­— new ä¹Ÿä¼šè¢«è½¬æ¢æˆè°ƒç”¨ runtime.newobject å‡½æ•°ï¼Œè¿˜ä¼šå°†Channelã€mapã€makeã€new ä»¥åŠ select ç­‰å…³é”®å­—è½¬æ¢æˆç›¸åº”è¿è¡Œæ—¶å‡½æ•°ï¼›"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"è€Œdeferå…³é”®å­—çš„ä¸»è¦å¤„ç†é€»è¾‘å´ä¸åœ¨è¿™é‡Œ"},{"Type":"NodeText","Data":"ï¼›"}]},{"ID":"20230727000874-fvho5p3","Type":"NodeParagraph","Properties":{"id":"20230727000874-fvho5p3","updated":"20230727000874"},"Children":[{"Type":"NodeText","Data":"4ï¼‰ç„¶åï¼ŒMain() æ–¹æ³•è°ƒç”¨ cmd/compile/internal/gc/compile.go çš„ gc.compileFunctions()æ–¹æ³•ï¼Œå°†æŠ½è±¡è¯­æ³•æ ‘ASTç”ŸæˆSSAä¸­é—´ä»£ç ï¼Œå…¶ä¸­å…·ä½“è°ƒç”¨çš„æ˜¯cmd/compile/internal/ssagen/pgen.go çš„ ssagen.Compile()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è°ƒç”¨cmd/compile/internal/ssagen/ssa.go çš„ssagen.buildssa()ï¼›"}]},{"ID":"20230727000875-22qfnii","Type":"NodeParagraph","Properties":{"id":"20230727000875-22qfnii","updated":"20230727000875"},"Children":[{"Type":"NodeText","Data":"5ï¼‰ssagen.buildssa()è°ƒç”¨åŒæ–‡ä»¶çš„state.stmtList()ï¼Œstate.stmtList()ä¼šä¸ºä¼ å…¥çš„æ¯ä¸ªèŠ‚ç‚¹è°ƒç”¨state.stmt()æ–¹æ³•ï¼Œstate.stmt()æ ¹æ®èŠ‚ç‚¹æ“ä½œç¬¦çš„ä¸åŒå°†å½“å‰ASTèŠ‚ç‚¹è½¬æ¢æˆå¯¹åº”çš„ä¸­é—´ä»£ç ï¼›æ³¨æ„ï¼š"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"deferå…³é”®å­—çš„å¤„ç†åœ¨state.stmt()æ–¹æ³•è¿™é‡Œ"},{"Type":"NodeText","Data":"ï¼›"}]},{"ID":"20230727000876-akcu2bc","Type":"NodeParagraph","Properties":{"id":"20230727000876-akcu2bc","updated":"20230727000876"},"Children":[{"Type":"NodeText","Data":"6ï¼‰ssagen.buildssa() è°ƒç”¨ cmd/compile/internal/ssa/compile.go çš„ ssa.Compile() æ–¹æ³•ï¼Œç»è¿‡50å¤šè½®å¤„ç†ä¼˜åŒ–ï¼ŒåŒ…æ‹¬å»æ‰æ— ç”¨ä»£ç ã€æ ¹æ®ç›®æ ‡CPUæ¶æ„å¯¹ä»£ç è¿›è¡Œæ”¹å†™ç­‰ï¼Œæé«˜ä¸­é—´ä»£ç æ‰§è¡Œæ•ˆç‡ï¼Œå¾—åˆ°æœ€ç»ˆçš„SSAä¸­é—´ä»£ç ï¼›"}]},{"ID":"20230727000877-5u4i7kl","Type":"NodeParagraph","Properties":{"id":"20230727000877-5u4i7kl","updated":"20230727000877"},"Children":[{"Type":"NodeText","Data":"7ï¼‰é€šè¿‡å‘½ä»¤ GOSSAFUNC=main GOOS=linux GOARCH=amd64 go build main.goå¯ä»¥æ‰“å°å¹¶æŸ¥çœ‹æºä»£ç ã€å¯¹åº”çš„æŠ½è±¡è¯­æ³•æ ‘ASTã€å‡ åä¸ªç‰ˆæœ¬çš„ä¸­é—´ä»£ç ã€æœ€ç»ˆç”Ÿæˆçš„ SSAä»¥åŠæœºå™¨ç ã€‚"}]},{"ID":"20230727000878-9t7wju4","Type":"NodeParagraph","Properties":{"id":"20230727000878-9t7wju4","updated":"20230727000878"},"Children":[{"Type":"NodeText","Data":"è¿™æ•´ä¸ªç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œæ¶‰åŠåˆ°deferå…³é”®å­—å¤„ç†çš„é€»è¾‘åœ¨cmd/compile/internal/ssagen/ssa.goåŒ…çš„state.stmtList()è°ƒç”¨çš„state.stmt()æ–¹æ³•ï¼Œä¸‹é¢ä¼šå¤šæ¬¡ç”¨åˆ°ã€‚"}]},{"ID":"20230727000879-6zyajux","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000879-6zyajux","updated":"20230727000879"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"3.2.2 deferçš„ç¼–è¯‘å™¨ä¼˜åŒ–"}]},{"ID":"20230727000880-dler0ne","Type":"NodeParagraph","Properties":{"id":"20230727000880-dler0ne","updated":"20230727000880"},"Children":[{"Type":"NodeText","Data":"cmd/compile/internal/ssagen/ssa.goåŒ…çš„state.stmt()æ–¹æ³•è´Ÿè´£å¤„ç†ä»£ç ä¸­çš„deferå…³é”®å­—ï¼Œä¼šæ ¹æ®æ¡ä»¶çš„ä¸åŒï¼Œä½¿ç”¨ä¸‰ç§ä¸åŒçš„æœºåˆ¶å®ç° deferï¼š"}]},{"ID":"20230727000881-rd8gmki","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"amF2YXNjcmlwdA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000881-rd8gmki","updated":"20230727000881"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"// è½¬åŒ–è¯­å¥åˆ°SSAä¸­é—´ä»£ç \nfunc (s *state) stmt(n ir.Node) {\n        ......\n\tcase ir.ODEFER:    // å¦‚æœASTèŠ‚ç‚¹æ˜¯deferç±»å‹\n\t\tn := n.(*ir.GoDeferStmt)\n\t\tif base.Debug.Defer \u003e 0 {  // ä¸ºç¼–è¯‘å™¨çš„è°ƒè¯•çŠ¶æ€æ‰“å°deferç±»å‹: å¼€æ”¾ç¼–ç ï¼Œæ ˆåˆ†é…ï¼Œå †åˆ†é…\n\t\t\tvar defertype string\n\t\t\tif s.hasOpenDefers {\n\t\t\t\tdefertype = \"open-coded\"\n\t\t\t} else if n.Esc() == ir.EscNever {\n\t\t\t\tdefertype = \"stack-allocated\"\n\t\t\t} else {\n\t\t\t\tdefertype = \"heap-allocated\"\n\t\t\t}\n\t\t\tbase.WarnfAt(n.Pos(), \"%s defer\", defertype)\n\t\t}\n\t\tif s.hasOpenDefers {                 // å¦‚æœå…è®¸å¼€æ”¾ç¼–ç ï¼Œåˆ™ç”¨è¯¥æ–¹å¼å®ç°defer\n\t\t\ts.openDeferRecord(n.Call.(*ir.CallExpr))\n\t\t} else {\n\t\t\td := callDefer               // é»˜è®¤ä½¿ç”¨å †åˆ†é…çš„æ–¹å¼å®ç°defer\n\t\t\tif n.Esc() == ir.EscNever {  // å¦‚æœæ²¡æœ‰å‘ç”Ÿå†…å­˜é€ƒé€¸ï¼Œä½¿ç”¨æ ˆåˆ†é…çš„æ–¹å¼å®ç°defer\n\t\t\t\td = callDeferStack\n\t\t\t}\n\t\t\ts.callResult(n.Call.(*ir.CallExpr), d)\n\t\t}\n        ......\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000882-oc247jz","Type":"NodeParagraph","Properties":{"id":"20230727000882-oc247jz","updated":"20230727000882"},"Children":[{"Type":"NodeText","Data":"ä»è¿™æ®µé€»è¾‘å¯ä»¥çŸ¥é“ï¼š"}]},{"ID":"20230727000883-f4wem4m","Type":"NodeParagraph","Properties":{"id":"20230727000883-f4wem4m","updated":"20230727000883"},"Children":[{"Type":"NodeText","Data":"1ï¼‰å®ç°deferçš„æ–¹å¼æœ‰ä¸‰ç§ï¼šå¼€æ”¾ç¼–ç ï¼Œæ ˆåˆ†é…ï¼Œå †åˆ†é…ï¼›"}]},{"ID":"20230727000884-z1u8i2f","Type":"NodeParagraph","Properties":{"id":"20230727000884-z1u8i2f","updated":"20230727000884"},"Children":[{"Type":"NodeText","Data":"2ï¼‰å¦‚æœå…è®¸ä½¿ç”¨å¼€æ”¾ç¼–ç çš„æ–¹å¼ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨è¯¥æ–¹å¼å®ç°deferï¼Œè¿™æ˜¯Go1.14å¼•å…¥çš„ï¼Œæ€§èƒ½æœ€å¥½ï¼›åé¢æˆ‘ä»¬ä¼šåˆ†æåˆ°ï¼Œå®ç°å¼€æ”¾ç¼–ç çš„æ¡ä»¶æ˜¯ï¼ša) ç¼–è¯‘å™¨æ²¡æœ‰è®¾ç½®å‚æ•°-Nï¼Œå³æ²¡æœ‰ç¦ç”¨å†…è”ä¼˜åŒ–ï¼›bï¼‰å‡½æ•°ä¸­deferçš„ä¸ªæ•°ä¸è¶…è¿‡ä¸€ä¸ªå­—èŠ‚çš„ä½æ•°ï¼Œå³ä¸è¶…è¿‡8ä¸ªï¼›cï¼‰deferçš„å‡½æ•°ä¸ªæ•°å’Œå‚æ•°çš„ä¸ªæ•°ä¹˜ç§¯å°äº15ï¼›dï¼‰deferå…³é”®å­—ä¸èƒ½åœ¨å¾ªç¯ä¸­æ‰§è¡Œï¼Œæ»¡è¶³è¿™äº›æ¡ä»¶çš„deferè°ƒç”¨åœºæ™¯ç®€å•ï¼Œç»å¤§å¤šæ•°ä¿¡æ¯éƒ½èƒ½åœ¨ç¼–è¯‘æœŸç¡®å®šï¼›"}]},{"ID":"20230727000885-c2zv2ze","Type":"NodeParagraph","Properties":{"id":"20230727000885-c2zv2ze","updated":"20230727000885"},"Children":[{"Type":"NodeText","Data":"3ï¼‰å¦‚æœæ²¡æœ‰å‘ç”Ÿå†…å­˜é€ƒé€¸åˆ°å †ä¸Šï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨æ ˆåˆ†é…çš„æ–¹å¼å®ç°deferï¼Œè¿™æ˜¯Go1.13å¼•å…¥çš„ä¼˜åŒ–æ–¹å¼ï¼Œå‡å°‘äº†å†…å­˜åœ¨å †ä¸Šåˆ†é…çš„é¢å¤–å¼€é”€ï¼Œæå‡äº†30%å·¦å³çš„æ€§èƒ½ï¼›"}]},{"ID":"20230727000886-22dm5bl","Type":"NodeParagraph","Properties":{"id":"20230727000886-22dm5bl","updated":"20230727000886"},"Children":[{"Type":"NodeText","Data":"4ï¼‰å‰é¢ä¸¤ç§æ–¹å¼éƒ½ä¸ç¬¦åˆæ¡ä»¶ï¼Œåˆ™é»˜è®¤ä½¿ç”¨å †ä¸Šåˆ†é…çš„æ–¹å¼å®ç°deferï¼›"}]},{"ID":"20230727000887-p9c9h9g","Type":"NodeParagraph","Properties":{"id":"20230727000887-p9c9h9g","updated":"20230727000887"},"Children":[{"Type":"NodeText","Data":"ä¸‹é¢é¦–å…ˆåˆ†æGoæœ€æ—©é‡‡ç”¨çš„deferåœ¨å †ä¸Šåˆ†é…çš„å®ç°æ–¹å¼ï¼Œæ¥ç€åˆ†ædeferæ ˆä¸Šåˆ†é…ï¼Œæœ€åæ˜¯å¼€æ”¾ç¼–ç çš„å®ç°æ–¹å¼ã€‚"}]}]}