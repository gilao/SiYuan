{"ID":"20240422143220-8175w28","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f4b8","id":"20240422143220-8175w28","title":"FastChat API","type":"doc","updated":"20240629124808"},"Children":[{"ID":"20240422143231-t9llwja","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240422143231-t9llwja","updated":"20240629110934"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"source .bashrc\n\nconda activate fastchat\n\nconda activate vllm\n\nconda activate chatglm-6b-310\n\npython -m fastchat.serve.controller --dispatch-method lottery\n\npython -m fastchat.serve.controller 2\u003e\u00261 | tee -a /mnt/e/go/src/FastChatSimulation/controller-log.txt\n\npython3 -m fastchat.serve.model_worker --model-path /root/.cache/huggingface/hub/models--THUDM--chatglm3-6b/snapshots/103caa40027ebfd8450289ca2f278eac4ff26405 \n \npython -m fastchat.serve.vllm_worker --model-path /root/.cache/huggingface/hub/models--THUDM--chatglm3-6b/snapshots/103caa40027ebfd8450289ca2f278eac4ff26405\n\npython -m fastchat.serve.vllm_worker --model-path /root/.cache/huggingface/hub/models--THUDM--chatglm3-6b/snapshots/103caa40027ebfd8450289ca2f278eac4ff26405 --port 21003\n\npython -m fastchat.serve.openai_api_server --host localhost --port 8000\n\n/root/.cache/huggingface/hub/models--THUDM--chatglm3-6b/snapshots/103caa40027ebfd8450289ca2f278eac4ff26405\n\ncd /mnt/e/go/src/FastChatSimulation/\n\npython openai_api_server.py --host 0.0.0.0  --port 8000\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240422143220-so6nxf2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240422143220-so6nxf2","updated":"20240629093042"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"// GPU 命令\nlshw -class display\nnvidia-smi\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240629123654-5f1rqsb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240629123654-5f1rqsb","updated":"20240629124152"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"日志导出方法：\ndate=$(date +%Y%m%d)\nif ! nohup ./my_script.sh \u003e\u003e \"my_output_$date.log\" 2\u003e\u00261 \u0026; then\n    echo \"Error starting my_script.sh, check the logs.\" \u003e\u00262\n    exit 1\nfi\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240629123705-ckoagr0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240629123705-ckoagr0","updated":"20240629124223"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"#!/bin/bash\n\n# 创建日志文件\ndate=$(date +%Y%m%d)\necho \"command started at $(date)\" \u003e\u003e my_output_$date.log\n\n# 运行 my_script.sh 并重定向输出到日志文件\nif ! nohup ./my_script.sh \u003e\u003e \"my_output_$date.log\" 2\u003e\u00261 \u0026; then\n    echo \"Error starting my_script.sh, check the logs.\" \u003e\u00262\n    exit 1\nfi\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240629124230-you4unp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240629124230-you4unp","updated":"20240629124505"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"#!/bin/bash\n\n# 创建日志文件\ndate=$(date +%Y%m%d)\necho \"command started at $(date)\" \u003e\u003e my_output_$date.log\n\n# 运行 my_script.sh 并重定向输出到日志文件\nif ! nohup python -m fastchat.serve.controller \u003e\u003e \"my_output_$date.log\" 2\u003e\u00261 \u0026; then\n    echo \"Error starting my_script.sh, check the logs.\" \u003e\u00262\n    exit 1\nfi\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240629124505-6v6jfqx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240629124505-6v6jfqx","updated":"20240629124540"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"#!/bin/bash\n\n# 创建日志文件\ndate=$(date +%Y%m%d)\necho \"command started at $(date)\" \u003e\u003e my_output_$date.log\n\n# 运行 my_script.sh 并重定向输出到日志文件\nif ! nohup python openai_api_server.py --host 0.0.0.0  --port 8000 \u003e\u003e \"my_output_$date.log\" 2\u003e\u00261 \u0026; then\n    echo \"Error starting my_script.sh, check the logs.\" \u003e\u00262\n    exit 1\nfi\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240629124555-4u3ejwa","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240629124555-4u3ejwa","updated":"20240629124609"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240629124603-1zzolzk","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240629124603-1zzolzk","updated":"20240629124808"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"#!/bin/bash\n\n# 创建日志文件\ndate=$(date +%Y%m%d)\nport=21002\nnum\nlogname=\"vllm_worker_1\"\necho \"command started at $(date)\" \u003e\u003e my_output_$date.log\n\n# 运行 my_script.sh 并重定向输出到日志文件\nif ! nohup python -m fastchat.serve.vllm_worker --model-path /root/.cache/huggingface/hub/models--THUDM--chatglm3-6b/snapshots/103caa40027ebfd8450289ca2f278eac4ff26405 --port 21003 \u003e\u003e \"my_output_$date.log\" 2\u003e\u00261 \u0026; then\n    echo \"Error starting my_script.sh, check the logs.\" \u003e\u00262\n    exit 1\nfi\n\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}