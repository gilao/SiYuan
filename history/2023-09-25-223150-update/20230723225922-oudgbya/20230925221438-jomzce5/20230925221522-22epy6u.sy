{"ID":"20230925221522-22epy6u","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f304","id":"20230925221522-22epy6u","tags":"Go,Go 1.21.0版本变化,slice,slices,map,maps","title":"Go 1.21.0 新增标准库 slices 和 maps 详解","updated":"20230925223143"},"Children":[{"ID":"20230925221522-k4atvkd","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230925221522-k4atvkd","updated":"20230925221558"},"Children":[{"Type":"NodeText","Data":"介绍"}]},{"ID":"20230925221738-q0wrmar","Type":"NodeParagraph","Properties":{"id":"20230925221738-q0wrmar","updated":"20230925221738"},"Children":[{"Type":"NodeText","Data":"在 Go 语言项目开发中，我们经常会使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"slice"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"map"},{"Type":"NodeText","Data":"​ 数据类型，因为 Go 1.18.0 开始支持泛型，所以 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"slice"},{"Type":"NodeText","Data":"​ 的元素可能是任意类型，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"map"},{"Type":"NodeText","Data":"​ 的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"key"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"value"},{"Type":"NodeText","Data":"​ 也可能是任意类型。"}]},{"ID":"20230925221738-u2o0pae","Type":"NodeParagraph","Properties":{"id":"20230925221738-u2o0pae","updated":"20230925221738"},"Children":[{"Type":"NodeText","Data":"Go 1.21.0 新增操作 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"slice"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"map"},{"Type":"NodeText","Data":"​ 数据类型的标准库 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"slices"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"maps"},{"Type":"NodeText","Data":"​，提供了操作 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"slice"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"map"},{"Type":"NodeText","Data":"​ 的泛型函数。"}]},{"ID":"20230925221738-waqt1a6","Type":"NodeParagraph","Properties":{"id":"20230925221738-waqt1a6","updated":"20230925221738"},"Children":[{"Type":"NodeText","Data":"本文我们介绍标准库 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"slices"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"maps"},{"Type":"NodeText","Data":"​ 的使用方式。"}]},{"ID":"20230925221739-es5g9mq","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230925221739-es5g9mq","updated":"20230925221806"},"Children":[{"Type":"NodeText","Data":"标准库 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"slices"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230925221822-1k6om20","Type":"NodeParagraph","Properties":{"id":"20230925221822-1k6om20","updated":"20230925221822"},"Children":[{"Type":"NodeText","Data":"标准库 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"slices"},{"Type":"NodeText","Data":"​ 提供了许多操作任意类型元素 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"slice"},{"Type":"NodeText","Data":"​ 的函数，可以方便我们实现业务需求。"}]},{"ID":"20230925221822-5oe0czr","Type":"NodeParagraph","Properties":{"id":"20230925221822-5oe0czr","updated":"20230925221822"},"Children":[{"Type":"NodeText","Data":"建议感兴趣的读者朋友们阅读手册了解关于标准库 slices"},{"Type":"NodeTextMark","TextMarkType":"sup","TextMarkTextContent":"[1]"},{"Type":"NodeText","Data":" 的所有函数的功能。"}]},{"ID":"20230925221822-fws4qwv","Type":"NodeParagraph","Properties":{"id":"20230925221822-fws4qwv","updated":"20230925221822"},"Children":[{"Type":"NodeText","Data":"限于篇幅，我们介绍关于查找的函数的使用方式。"}]},{"ID":"20230925221822-xkjgabr","Type":"NodeParagraph","Properties":{"id":"20230925221822-xkjgabr","updated":"20230925221822"},"Children":[{"Type":"NodeText","Data":"查找功能的函数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"BinarySearch"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"BinarySearchFunc"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20230925221822-a85g5vn","Type":"NodeParagraph","Properties":{"id":"20230925221822-a85g5vn","updated":"20230925221822"},"Children":[{"Type":"NodeText","Data":"函数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"BinarySearch"},{"Type":"NodeText","Data":"​ 示例代码："}]},{"ID":"20230925221833-d1csj4o","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230925221833-d1csj4o","updated":"20230925222103"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"func main() {\n  names := []string{\"Alice\", \"Bob\", \"Vera\"}\n  n, found  := slices.BinarySearch(names, \"Vera\")\n  fmt.Println(\"Vera:\", n, found)\n  n, found = slices.BinarySearch(names, \"Bill\")\n  fmt.Println(\"Bill\", n, found)\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230925222108-naz22tv","Type":"NodeParagraph","Properties":{"id":"20230925222108-naz22tv","updated":"20230925222115"},"Children":[{"Type":"NodeText","Data":"输出结果："}]},{"ID":"20230925222116-z5yehcs","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230925222116-z5yehcs","updated":"20230925222141"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"Vera: 2 true\nBil: 1 false\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230925222146-uudwkkw","Type":"NodeParagraph","Properties":{"id":"20230925222146-uudwkkw","updated":"20230925222152"},"Children":[{"Type":"NodeText","Data":"阅读上面这段代码，我们定义一个字符串元素类型的切片 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"names"},{"Type":"NodeText","Data":"​，使用标准库 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"slices"},{"Type":"NodeText","Data":"​ 提供的二分查找函数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"BinarySearch"},{"Type":"NodeText","Data":"​ 查找 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"names"},{"Type":"NodeText","Data":"​ 切片中的元素 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Vera"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20230925222206-pffr5pr","Type":"NodeParagraph","Properties":{"id":"20230925222206-pffr5pr","updated":"20230925222206"},"Children":[{"Type":"NodeText","Data":"该函数返回被查找元素在切片中的索引位置或被查找元素在切片中应该出现的位置，和被查找元素是否真实存在于切片中的一个布尔值。"}]},{"ID":"20230925222206-8xn9gqn","Type":"NodeParagraph","Properties":{"id":"20230925222206-8xn9gqn","updated":"20230925222206"},"Children":[{"Type":"NodeText","Data":"什么是被查找元素在切片中应该出现的位置？示例代码中，查找 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Bill"},{"Type":"NodeText","Data":"​，切片中没有该元素，按照切片中递增排序，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Bill"},{"Type":"NodeText","Data":"​ 应该在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Alice"},{"Type":"NodeText","Data":"​ 后面，即索引为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"1"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20230925222206-wj6oyep","Type":"NodeParagraph","Properties":{"id":"20230925222206-wj6oyep","updated":"20230925222206"},"Children":[{"Type":"NodeText","Data":"需要注意的是，使用函数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"BinarySearch"},{"Type":"NodeText","Data":"​ 查找元素的切片，切片中的元素必须是按照递增顺序排序。"}]},{"ID":"20230925222240-vfbn04y","Type":"NodeParagraph","Properties":{"id":"20230925222240-vfbn04y","updated":"20230925222257"},"Children":[{"Type":"NodeText","Data":"函数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"BinarySearchFunc"},{"Type":"NodeText","Data":"​ 示例代码："}]},{"ID":"20230925222258-xaenpwe","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230925222258-xaenpwe","updated":"20230925222955"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"func main() {\n    type Person struct {\n        Name string\n        Age  int\n    }\n    people := []Person{\n        {\"Alice\", 55},\n        {\"Bob\", 24},\n        {\"Gopher\", 13},\n    }\n    n, found := slices.BinarySearchFunc(people, Person{\"Bob\", 0}, func(a, b Person) int {\n        return cmp.Compare(a.Name, b.Name)\n    })\n    fmt.Println(\"Bob\", n, found)\n}"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230925222957-j7pcpf9","Type":"NodeParagraph","Properties":{"id":"20230925222957-j7pcpf9","updated":"20230925223008"},"Children":[{"Type":"NodeText","Data":"输出结果："}]},{"ID":"20230925223005-7uyhaxc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230925223005-7uyhaxc","updated":"20230925223019"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"Bob: 1 true\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230925223020-bupfcef","Type":"NodeParagraph","Properties":{"id":"20230925223020-bupfcef","updated":"20230925223027"},"Children":[{"Type":"NodeText","Data":"阅读上面这段代码，函数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"BinarySearchFunc"},{"Type":"NodeText","Data":"​ 与 函数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"BinarySearch"},{"Type":"NodeText","Data":"​ 的功能类似，区别是可以使用自定义比较函数。"}]},{"ID":"20230925223043-1euaohj","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230925223043-1euaohj","updated":"20230925223054"},"Children":[{"Type":"NodeText","Data":"标准库 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"maps"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230925223104-gn0gico","Type":"NodeParagraph","Properties":{"id":"20230925223104-gn0gico","updated":"20230925223104"},"Children":[{"Type":"NodeText","Data":"标准库 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"maps"},{"Type":"NodeText","Data":"​ 提供了许多操作任意类型 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"key"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"value"},{"Type":"NodeText","Data":"​ 的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"map"},{"Type":"NodeText","Data":"​ 的函数，可以方便我们实现业务需求。"}]},{"ID":"20230925223104-cvuqsk9","Type":"NodeParagraph","Properties":{"id":"20230925223104-cvuqsk9","updated":"20230925223104"},"Children":[{"Type":"NodeText","Data":"建议感兴趣的读者朋友们阅读手册了解关于标准库 maps"},{"Type":"NodeTextMark","TextMarkType":"sup","TextMarkTextContent":"[2]"},{"Type":"NodeText","Data":" 的所有函数的功能。"}]},{"ID":"20230925223104-rdaummv","Type":"NodeParagraph","Properties":{"id":"20230925223104-rdaummv","updated":"20230925223104"},"Children":[{"Type":"NodeText","Data":"限于篇幅，我们介绍关于比较两个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"map"},{"Type":"NodeText","Data":"​ 中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"key"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"value"},{"Type":"NodeText","Data":"​ 是否相同的函数的使用方式。"}]},{"ID":"20230925223104-nxjcnof","Type":"NodeParagraph","Properties":{"id":"20230925223104-nxjcnof","updated":"20230925223104"},"Children":[{"Type":"NodeText","Data":"函数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Equal"},{"Type":"NodeText","Data":"​ 示例代码："}]},{"ID":"20230925223108-nbcq41j","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230925223108-nbcq41j","updated":"20230925223123"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"func main() {\n   m1 := map[string]int{\"lucy\": 17, \"lily\": 18}\n   m2 := map[string]int{\"lucy\": 17, \"lily\": 18}\n   m3 := map[string]int{\"lucy\": 18, \"lily\": 17}\n   fmt.Println(maps.Equal(m1, m2))\n   fmt.Println(maps.Equal(m1, m3))\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230925223132-s0g6h4a","Type":"NodeParagraph","Properties":{"id":"20230925223132-s0g6h4a","updated":"20230925223137"},"Children":[{"Type":"NodeText","Data":"输出结果："}]},{"ID":"20230925223137-fynjt5h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230925223137-fynjt5h","updated":"20230925223142"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"true\nfalse\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230925223143-14qr0oc","Type":"NodeParagraph","Properties":{"id":"20230925223143-14qr0oc"}}]}