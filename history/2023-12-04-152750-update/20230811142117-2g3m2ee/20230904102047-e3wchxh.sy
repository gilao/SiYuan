{"ID":"20230904102047-e3wchxh","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f685","id":"20230904102047-e3wchxh","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20230904102047-e3wchxh\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20230904102050-actba7r\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20230904102050-76l5uno\u0026quot;,\u0026quot;scrollTop\u0026quot;:300,\u0026quot;focusId\u0026quot;:\u0026quot;20230904111621-cybg3ax\u0026quot;,\u0026quot;focusStart\u0026quot;:0,\u0026quot;focusEnd\u0026quot;:0\u0026#125;","title":"框架详细设计文档","updated":"20231204152749"},"Children":[{"ID":"20230904102050-actba7r","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230904102050-actba7r","updated":"20230904102050"},"Children":[{"Type":"NodeText","Data":"1 背景"}]},{"ID":"20230904102050-7i63kqb","Type":"NodeList","ListData":{},"Properties":{"id":"20230904102050-7i63kqb","updated":"20230904102050"},"Children":[{"ID":"20230904102050-sle8mvb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-sle8mvb","updated":"20230904102050"},"Children":[{"ID":"20230904102050-ehkkvt4","Type":"NodeParagraph","Properties":{"id":"20230904102050-ehkkvt4","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"介绍框架的背景和意义"}]}]}]},{"ID":"20230904102610-7scc8ym","Type":"NodeParagraph","Properties":{"id":"20230904102610-7scc8ym","updated":"20230904112058"},"Children":[{"Type":"NodeText","Data":"      原有的模型框架是基于Python的Flask框架进行封装，对外提供Web接口。Flask框架比较适合轻量型的中小项目，对于大量的并发请求处理并不出色。Go语言天然支持并发和异步操作，Gin框架采用了高效的并发模型和协程机制，性能较为优秀，也拥有强大的中间件的支持。故选择Go语言的Gin框架重新搭建大模型的后端，并通过gRPC来实现python端与go端的进程间通信。"}]},{"ID":"20230904110311-s39c9s8","Type":"NodeParagraph","Properties":{"id":"20230904110311-s39c9s8","updated":"20231204142413"},"Children":[{"Type":"NodeText","Data":"      基于gRPC和Gin框架来封装大模型可以实现模型与后端的轻耦合，在python端只要封装好模型的类，并基于gRPC实现调用即可；后端的功能全部放在Gin框架中实现，避免了改动后端时，影响模型的运行。由于Go语言的并发特性，Gin框架对于处理大量并发请求和IO密集型任务具有优势，处理大模型的高并发请求也更加方便。"}]},{"ID":"20230904102612-mase1nc","Type":"NodeList","ListData":{},"Properties":{"id":"20230904102612-mase1nc","updated":"20230904102612"},"Children":[{"ID":"20230904102050-zm0wost","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-zm0wost","updated":"20230904102050"},"Children":[{"ID":"20230904102050-emtkkaj","Type":"NodeParagraph","Properties":{"id":"20230904102050-emtkkaj","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"概述该框架的目标、特点和使用场景"}]}]}]},{"ID":"20230904111621-cybg3ax","Type":"NodeParagraph","Properties":{"id":"20230904111621-cybg3ax","updated":"20231204145054"},"Children":[{"Type":"NodeText","Data":"    该框架要实现的目标有以下几点："}]},{"ID":"20231204145146-9x0q5r4","Type":"NodeList","ListData":{},"Properties":{"id":"20231204145146-9x0q5r4","updated":"20231204145451"},"Children":[{"ID":"20231204145148-ouocv4i","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231204145148-ouocv4i","updated":"20231204145451"},"Children":[{"ID":"20231204145148-g8iz4dk","Type":"NodeParagraph","Properties":{"id":"20231204145148-g8iz4dk","updated":"20231204145451"},"Children":[{"Type":"NodeText","Data":"对模型进行统一封装，将模型开发、训练与提供外部接口的工作分离；"}]}]}]},{"ID":"20231204145055-7v6jbfw","Type":"NodeList","ListData":{},"Properties":{"id":"20231204145055-7v6jbfw","updated":"20231204150719"},"Children":[{"ID":"20231204145057-j7q1mkz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231204145057-j7q1mkz","updated":"20231204145057"},"Children":[{"ID":"20231204145057-43h2rib","Type":"NodeParagraph","Properties":{"id":"20231204145057-43h2rib","updated":"20231204150513"},"Children":[{"Type":"NodeText","Data":"提供标准的外部接口来调用模型，用于生产部署；"}]}]},{"ID":"20231204145755-f343hif","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231204145755-f343hif"},"Children":[{"ID":"20231204145755-cva4omr","Type":"NodeParagraph","Properties":{"id":"20231204145755-cva4omr","updated":"20231204150534"},"Children":[{"Type":"NodeText","Data":"限制外部的请求数量，保证模型可以在合适的请求量中正常运行；"}]}]},{"ID":"20231204150534-uhgqcb5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231204150534-uhgqcb5","updated":"20231204150719"},"Children":[{"ID":"20231204150534-wugwz2a","Type":"NodeParagraph","Properties":{"id":"20231204150534-wugwz2a","updated":"20231204150719"},"Children":[{"Type":"NodeText","Data":"为外部调用提供后端支持；"}]}]}]},{"ID":"20231204150653-vw5m1pj","Type":"NodeParagraph","Properties":{"id":"20231204150653-vw5m1pj","updated":"20231204150959"},"Children":[{"Type":"NodeText","Data":"该框架根据实际需求，主要有以下的特点："}]},{"ID":"20231204150959-l3a9poj","Type":"NodeList","ListData":{},"Properties":{"id":"20231204150959-l3a9poj","updated":"20231204152749"},"Children":[{"ID":"20231204151408-kx6gahm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231204151408-kx6gahm","updated":"20231204152749"},"Children":[{"ID":"20231204151408-qfqyuv6","Type":"NodeParagraph","Properties":{"id":"20231204151408-qfqyuv6","updated":"20231204152749"},"Children":[{"Type":"NodeText","Data":"模型与后端是使用grpc进行通信，传输外部请求和模型生成的数据，该通信方式在具有"}]}]},{"ID":"20231204151015-hy0a7uc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231204151015-hy0a7uc","updated":"20231204151015"},"Children":[{"ID":"20231204151015-7wnad58","Type":"NodeParagraph","Properties":{"id":"20231204151015-7wnad58","updated":"20231204151331"},"Children":[{"Type":"NodeText","Data":"可以根据模型实际处理请求的数量限制发送给模型的请求数量，多余的请求数量将会在模型可以处理后再发送；"}]}]},{"ID":"20231204151340-63ggmm6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231204151340-63ggmm6"},"Children":[{"ID":"20231204151340-4qxpu5y","Type":"NodeParagraph","Properties":{"id":"20231204151340-4qxpu5y","updated":"20231204151358"},"Children":[{"Type":"NodeText","Data":"为外部提供"}]}]}]},{"ID":"20230904102050-2oecgcs","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230904102050-2oecgcs","updated":"20230904102050"},"Children":[{"Type":"NodeText","Data":"2 需求分析"}]},{"ID":"20230904102050-89h00z9","Type":"NodeList","ListData":{},"Properties":{"id":"20230904102050-89h00z9","updated":"20230904102050"},"Children":[{"ID":"20230904102050-zn5g6na","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-zn5g6na","updated":"20230904102050"},"Children":[{"ID":"20230904102050-cy38flw","Type":"NodeParagraph","Properties":{"id":"20230904102050-cy38flw","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"分析高并发高负载场景下的需求和挑战"}]}]},{"ID":"20230904102050-wdslfzb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-wdslfzb","updated":"20230904102050"},"Children":[{"ID":"20230904102050-xmmwvab","Type":"NodeParagraph","Properties":{"id":"20230904102050-xmmwvab","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"说明为什么选择go语言封装深度学习模型"}]}]},{"ID":"20230904102050-4gqg268","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-4gqg268","updated":"20230904102050"},"Children":[{"ID":"20230904102050-f1m5qrf","Type":"NodeParagraph","Properties":{"id":"20230904102050-f1m5qrf","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"阐述所选框架的特点和优势"}]}]}]},{"ID":"20230904102050-6ar290u","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230904102050-6ar290u","updated":"20230904102050"},"Children":[{"Type":"NodeText","Data":"3 框架设计"}]},{"ID":"20230904102050-nkcknnh","Type":"NodeList","ListData":{},"Properties":{"id":"20230904102050-nkcknnh","updated":"20230904102050"},"Children":[{"ID":"20230904102050-nps2umh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-nps2umh","updated":"20230904102050"},"Children":[{"ID":"20230904102050-19c7rjk","Type":"NodeParagraph","Properties":{"id":"20230904102050-19c7rjk","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"详细描述框架的设计思路和实现方法"}]}]},{"ID":"20230904102050-qlmgfo5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-qlmgfo5","updated":"20230904102050"},"Children":[{"ID":"20230904102050-rm0xesh","Type":"NodeParagraph","Properties":{"id":"20230904102050-rm0xesh","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"解释框架的代码结构和模块划分"}]}]},{"ID":"20230904102050-aprmudz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-aprmudz","updated":"20230904102050"},"Children":[{"ID":"20230904102050-3v4f7ek","Type":"NodeParagraph","Properties":{"id":"20230904102050-3v4f7ek","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"说明框架的核心功能和特点"}]}]}]},{"ID":"20230904102050-prz1atr","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230904102050-prz1atr","updated":"20230904102050"},"Children":[{"Type":"NodeText","Data":"4 功能模块"}]},{"ID":"20230904102050-ho2f0ba","Type":"NodeList","ListData":{},"Properties":{"id":"20230904102050-ho2f0ba","updated":"20230904102050"},"Children":[{"ID":"20230904102050-wu4bhrs","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-wu4bhrs","updated":"20230904102050"},"Children":[{"ID":"20230904102050-571oob1","Type":"NodeParagraph","Properties":{"id":"20230904102050-571oob1","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"列举框架所包含的各个模块及其功能"}]}]},{"ID":"20230904102050-8c3d2uv","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-8c3d2uv","updated":"20230904102050"},"Children":[{"ID":"20230904102050-u1m5unx","Type":"NodeParagraph","Properties":{"id":"20230904102050-u1m5unx","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"详细说明每个模块的作用和特点"}]}]},{"ID":"20230904102050-a20pxqq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-a20pxqq","updated":"20230904102050"},"Children":[{"ID":"20230904102050-1urdtp8","Type":"NodeParagraph","Properties":{"id":"20230904102050-1urdtp8","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"描述模块之间的交互方式和流程"}]}]}]},{"ID":"20230904102050-lvhges0","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230904102050-lvhges0","updated":"20230904102050"},"Children":[{"Type":"NodeText","Data":"5 测试与优化"}]},{"ID":"20230904102050-x4uhryh","Type":"NodeList","ListData":{},"Properties":{"id":"20230904102050-x4uhryh","updated":"20230904102050"},"Children":[{"ID":"20230904102050-hmghr0m","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-hmghr0m","updated":"20230904102050"},"Children":[{"ID":"20230904102050-zxbftk8","Type":"NodeParagraph","Properties":{"id":"20230904102050-zxbftk8","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"描述测试过程中遇到的问题和挑战"}]}]},{"ID":"20230904102050-2hcb2up","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-2hcb2up","updated":"20230904102050"},"Children":[{"ID":"20230904102050-nphcwzo","Type":"NodeParagraph","Properties":{"id":"20230904102050-nphcwzo","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"说明如何进行模型测试和优化，以达到最佳性能和运维效果"}]}]},{"ID":"20230904102050-7aqfiew","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-7aqfiew","updated":"20230904102050"},"Children":[{"ID":"20230904102050-z948fei","Type":"NodeParagraph","Properties":{"id":"20230904102050-z948fei","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"列举测试结果和性能指标"}]}]}]},{"ID":"20230904102050-vu1lcm6","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230904102050-vu1lcm6","updated":"20230904102050"},"Children":[{"Type":"NodeText","Data":"6 接入方案及流程"}]},{"ID":"20230904102050-rsvw21g","Type":"NodeParagraph","Properties":{"id":"20230904102050-rsvw21g","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"（用户手册链接）"}]},{"ID":"20230904102050-pf0qkdl","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230904102050-pf0qkdl","updated":"20230904102050"},"Children":[{"Type":"NodeText","Data":"7 总结与展望"}]},{"ID":"20230904102050-76l5uno","Type":"NodeList","ListData":{},"Properties":{"id":"20230904102050-76l5uno","updated":"20230904102050"},"Children":[{"ID":"20230904102050-2glkyup","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-2glkyup","updated":"20230904102050"},"Children":[{"ID":"20230904102050-my08f8m","Type":"NodeParagraph","Properties":{"id":"20230904102050-my08f8m","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"总结该框架的优点和不足之处"}]}]},{"ID":"20230904102050-s22hkbg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-s22hkbg","updated":"20230904102050"},"Children":[{"ID":"20230904102050-gzb1g6o","Type":"NodeParagraph","Properties":{"id":"20230904102050-gzb1g6o","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"展望未来的改进和发展方向"}]},{"ID":"20230904102050-3nj8qxs","Type":"NodeList","ListData":{},"Properties":{"id":"20230904102050-3nj8qxs","updated":"20230904102050"},"Children":[{"ID":"20230904102050-31it5v3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-31it5v3","updated":"20230904102050"},"Children":[{"ID":"20230904102050-qdhw39g","Type":"NodeParagraph","Properties":{"id":"20230904102050-qdhw39g","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"路由模块：用于处理请求的URL路径和HTTP方法，将请求映射到相应的处理函数上。"}]}]},{"ID":"20230904102050-0lsicl9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-0lsicl9","updated":"20230904102050"},"Children":[{"ID":"20230904102050-8ya5tj5","Type":"NodeParagraph","Properties":{"id":"20230904102050-8ya5tj5","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"请求体解析模块：用于解析来自客户端的请求体，如"},{"Type":"NodeText","Data":"JSON"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"、表单数据等。"}]}]},{"ID":"20230904102050-u89klnw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-u89klnw","updated":"20230904102050"},"Children":[{"ID":"20230904102050-f3t0gyn","Type":"NodeParagraph","Properties":{"id":"20230904102050-f3t0gyn","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"响应模块：用于构建并发送响应给客户端，包括响应头和响应体。"}]}]},{"ID":"20230904102050-t4jnid4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-t4jnid4","updated":"20230904102050"},"Children":[{"ID":"20230904102050-86n5tg1","Type":"NodeParagraph","Properties":{"id":"20230904102050-86n5tg1","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"模型封装模块：用于定义和操作模型，包括模型实例化、参数转入等。"}]}]},{"ID":"20230904102050-vc5q1o1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-vc5q1o1","updated":"20230904102050"},"Children":[{"ID":"20230904102050-doh0a30","Type":"NodeParagraph","Properties":{"id":"20230904102050-doh0a30","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"中间件模块：用于处理请求的生命周期中的一些通用逻辑，如身份验证、日志记录等。"}]}]},{"ID":"20230904102050-dru4mq9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-dru4mq9","updated":"20230904102050"},"Children":[{"ID":"20230904102050-k8kw25v","Type":"NodeParagraph","Properties":{"id":"20230904102050-k8kw25v","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"配置管理模块：用于读取和解析配置文件，为应用程序提供灵活的配置选项。"}]}]},{"ID":"20230904102050-dkgesg2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-dkgesg2","updated":"20230904102050"},"Children":[{"ID":"20230904102050-h6drs01","Type":"NodeParagraph","Properties":{"id":"20230904102050-h6drs01","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"日志模块：用于记录应用程序的运行日志，包括错误日志、警告日志等。"}]}]},{"ID":"20230904102050-ffzw9qc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-ffzw9qc","updated":"20230904102050"},"Children":[{"ID":"20230904102050-arwps9u","Type":"NodeParagraph","Properties":{"id":"20230904102050-arwps9u","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"异常处理模块：用于统一处理应用程序中出现的错误，提供友好的错误提示和错误追踪功能。"}]}]},{"ID":"20230904102050-oszggui","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-oszggui","updated":"20230904102050"},"Children":[{"ID":"20230904102050-7s3l1ov","Type":"NodeParagraph","Properties":{"id":"20230904102050-7s3l1ov","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"启动与停止模块：用于启动和停止应用程序，包括配置启动参数、处理信号等。"}]}]}]}]},{"ID":"20230904102050-3vqj269","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230904102050-3vqj269","updated":"20230904102050"},"Children":[{"ID":"20230904102050-jpgv4zo","Type":"NodeParagraph","Properties":{"id":"20230904102050-jpgv4zo","updated":"20230904102050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"提出下一步工作计划"}]}]}]},{"ID":"20231204142436-fp4j56a","Type":"NodeParagraph","Properties":{"id":"20231204142436-fp4j56a"}}]}