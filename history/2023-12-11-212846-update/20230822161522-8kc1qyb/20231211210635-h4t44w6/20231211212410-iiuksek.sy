{"ID":"20231211212410-iiuksek","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2721","id":"20231211212410-iiuksek","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20231211212410-iiuksek\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20231211212418-lhoo9ky\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20231211212444-fzo0ils\u0026quot;,\u0026quot;scrollTop\u0026quot;:0,\u0026quot;focusId\u0026quot;:\u0026quot;20231211212444-fzo0ils\u0026quot;,\u0026quot;focusStart\u0026quot;:11,\u0026quot;focusEnd\u0026quot;:11\u0026#125;","tags":"公众号-凉凉的知识库,gRPC","title":"02-通信模式","updated":"20231211212549"},"Children":[{"ID":"20231211212418-lhoo9ky","Type":"NodeParagraph","Properties":{"id":"20231211212418-lhoo9ky"}},{"ID":"20231211212410-xtpzmv8","Type":"NodeParagraph","Properties":{"id":"20231211212410-xtpzmv8","updated":"20231211212443"},"Children":[{"Type":"NodeText","Data":"上一篇介绍了如何编写 protobuf 的 idl，并使用 idl 生成了 gRPC 的代码，现在来看看如何编写客户端和服务端的代码"}]},{"ID":"20231211212444-fzo0ils","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231211212444-fzo0ils","updated":"20231211212534"},"Children":[{"Type":"NodeText","Data":"Simple RPC（Unary RPC)"}]},{"ID":"20231211212534-xbt4jsa","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231211212534-xbt4jsa","updated":"20231211212542"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"\nsyntax = \"proto3\";\n\npackage ecommerce;\n\nimport \"google/protobuf/wrappers.proto\";\n\noption go_package = \"ecommerce/\";\n\nmessage Order {\n  string id = 1;\n  repeated string items = 2;\n  string description = 3;\n  float price = 4;\n  string destination = 5;\n}\n\nservice OrderManagement {\n  rpc getOrder(google.protobuf.StringValue) returns (Order);\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231211212549-6fvdxfl","Type":"NodeParagraph","Properties":{"id":"20231211212549-6fvdxfl","updated":"20231211212549"},"Children":[{"Type":"NodeText","Data":"定义如上的 idl，需要关注几个事项"}]},{"ID":"20231211212549-bkbt3tl","Type":"NodeList","ListData":{},"Properties":{"id":"20231211212549-bkbt3tl","updated":"20231211212549"},"Children":[{"ID":"20231211212549-pv0ydea","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231211212549-pv0ydea","updated":"20231211212549"},"Children":[{"ID":"20231211212549-1w2wddz","Type":"NodeParagraph","Properties":{"id":"20231211212549-1w2wddz","updated":"20231211212549"},"Children":[{"Type":"NodeText","Data":"使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"protobuf"},{"Type":"NodeText","Data":"​最新版本"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"syntax = \u0026quot;proto3\u0026quot;;"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20231211212549-mxngl9l","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231211212549-mxngl9l","updated":"20231211212549"},"Children":[{"ID":"20231211212549-d3fz21k","Type":"NodeParagraph","Properties":{"id":"20231211212549-d3fz21k","updated":"20231211212549"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"protoc-gen-go"},{"Type":"NodeText","Data":"​要求 pb 文件必须指定 go 包的路径。即"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"option go_package = \u0026quot;ecommerce/\u0026quot;;"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20231211212549-cilatl7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231211212549-cilatl7","updated":"20231211212549"},"Children":[{"ID":"20231211212549-8b9yim2","Type":"NodeParagraph","Properties":{"id":"20231211212549-8b9yim2","updated":"20231211212549"},"Children":[{"Type":"NodeText","Data":"定义的"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"method"},{"Type":"NodeText","Data":"​仅能有一个入参和出参数。如果需要传递多个参数需要定义成"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"message"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20231211212549-9gtjnlg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231211212549-9gtjnlg","updated":"20231211212549"},"Children":[{"ID":"20231211212549-ujbernc","Type":"NodeParagraph","Properties":{"id":"20231211212549-ujbernc","updated":"20231211212549"},"Children":[{"Type":"NodeText","Data":"使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"import"},{"Type":"NodeText","Data":"​引用另外一个文件的 pb。"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"google/protobuf/wrappers.proto"},{"Type":"NodeText","Data":"​是 google 内置的类型"}]}]}]},{"ID":"20231211212549-78qvav8","Type":"NodeParagraph","Properties":{"id":"20231211212549-78qvav8","updated":"20231211212549"},"Children":[{"Type":"NodeText","Data":"生成 go 和 grpc 的代码"}]}]}