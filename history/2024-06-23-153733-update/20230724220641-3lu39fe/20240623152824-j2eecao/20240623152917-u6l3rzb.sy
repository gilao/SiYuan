{"ID":"20240623152917-u6l3rzb","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f99b","id":"20240623152917-u6l3rzb","title":"倒排索引详解","type":"doc","updated":"20240623153221"},"Children":[{"ID":"20240623153152-eof56wr","Type":"NodeParagraph","Properties":{"id":"20240623153152-eof56wr","updated":"20240623153152"},"Children":[{"Type":"NodeText","Data":"Elasticsearch 使用倒排索引来高效地支持文本搜索。倒排索引是一种数据结构，它将文档中的词汇项与包含这些词汇项的文档相关联，相比于传统的通过文档ID查找内容的正排索引，倒排索引更加适合全文搜索的需求。以下是Elasticsearch中倒排索引的几个关键点："}]},{"ID":"20240623153152-u5wbn02","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240623153152-u5wbn02","updated":"20240623153152"},"Children":[{"Type":"NodeText","Data":"索引过程"}]},{"ID":"20240623153152-n88jiv4","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240623153152-n88jiv4","updated":"20240623153221"},"Children":[{"ID":"20240623153152-w80fe1k","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240623153152-w80fe1k","updated":"20240623153221"},"Children":[{"ID":"20240623153152-5bx7l76","Type":"NodeParagraph","Properties":{"id":"20240623153152-5bx7l76","updated":"20240623153221"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"分析（Analysis）"},{"Type":"NodeText","Data":": 在文档被索引之前，Elasticsearch 使用分析器（Analyzer）对文档的内容进行处理。分析过程通常包括"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color1);"},"TextMarkType":"strong text","TextMarkTextContent":"分词（Tokenization）"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color1);\"}"},{"Type":"NodeText","Data":"，即将文本切分成单词或短语（Tokens），以及"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color1);"},"TextMarkType":"strong text","TextMarkTextContent":"转换（Token Filtering）"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color1);\"}"},{"Type":"NodeText","Data":"，比如去除停用词、转换为小写等。"}]}]},{"ID":"20240623153152-jyc7r8y","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240623153152-jyc7r8y","updated":"20240623153152"},"Children":[{"ID":"20240623153152-7xoix6f","Type":"NodeParagraph","Properties":{"id":"20240623153152-7xoix6f","updated":"20240623153152"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Term Dictionary（词典）"},{"Type":"NodeText","Data":": 分析后的每个term（词元）都会被添加到一个词典中，词典是一个有序的列表，其中每个term对应一个指向posting list（倒排列表）的指针。"}]}]},{"ID":"20240623153152-9req6o6","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240623153152-9req6o6","updated":"20240623153152"},"Children":[{"ID":"20240623153152-js5wvsh","Type":"NodeParagraph","Properties":{"id":"20240623153152-js5wvsh","updated":"20240623153152"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Posting List（倒排列表）"},{"Type":"NodeText","Data":": 每个term的posting list是一个包含所有包含该term的文档ID的列表，并可能包括其他信息，如词频（Term Frequency）、位置（Position）和偏移量（Offset），这些信息用于计算文档的相关性评分（如TF-IDF算法）。"}]}]},{"ID":"20240623153152-x4l9pa7","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20240623153152-x4l9pa7","updated":"20240623153152"},"Children":[{"ID":"20240623153152-q2pwa6a","Type":"NodeParagraph","Properties":{"id":"20240623153152-q2pwa6a","updated":"20240623153152"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"压缩与优化"},{"Type":"NodeText","Data":": 为了节省空间和提高效率，Elasticsearch会对倒排索引进行压缩，并使用多种策略来优化索引的存储和检索速度。"}]}]}]},{"ID":"20240623153152-39890b3","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240623153152-39890b3","updated":"20240623153152"},"Children":[{"Type":"NodeText","Data":"查询过程"}]},{"ID":"20240623153152-zbf6dee","Type":"NodeList","ListData":{},"Properties":{"id":"20240623153152-zbf6dee","updated":"20240623153153"},"Children":[{"ID":"20240623153152-ymsr6t8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240623153152-ymsr6t8","updated":"20240623153152"},"Children":[{"ID":"20240623153152-ge0sk2c","Type":"NodeParagraph","Properties":{"id":"20240623153152-ge0sk2c","updated":"20240623153152"},"Children":[{"Type":"NodeText","Data":"当用户发起一个查询时，Elasticsearch首先使用相同的分析器处理查询字符串，生成查询term。"}]}]},{"ID":"20240623153152-nwcfnxm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240623153152-nwcfnxm","updated":"20240623153152"},"Children":[{"ID":"20240623153152-kcjyyv5","Type":"NodeParagraph","Properties":{"id":"20240623153152-kcjyyv5","updated":"20240623153152"},"Children":[{"Type":"NodeText","Data":"然后，它查找词典中这些term的位置，获取相应的倒排列表。"}]}]},{"ID":"20240623153152-k1261i5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240623153152-k1261i5","updated":"20240623153152"},"Children":[{"ID":"20240623153152-6kuu4kk","Type":"NodeParagraph","Properties":{"id":"20240623153152-6kuu4kk","updated":"20240623153152"},"Children":[{"Type":"NodeText","Data":"最后，通过合并这些倒排列表并应用相关性算法（如BM25），Elasticsearch确定哪些文档最相关，并按照相关度排序返回给用户。"}]}]}]},{"ID":"20240623153152-65vwktb","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240623153152-65vwktb","updated":"20240623153152"},"Children":[{"Type":"NodeText","Data":"特性与优势"}]},{"ID":"20240623153152-fl7x2ft","Type":"NodeList","ListData":{},"Properties":{"id":"20240623153152-fl7x2ft","updated":"20240623153153"},"Children":[{"ID":"20240623153152-t2yd01p","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240623153152-t2yd01p","updated":"20240623153152"},"Children":[{"ID":"20240623153152-o4y5feg","Type":"NodeParagraph","Properties":{"id":"20240623153152-o4y5feg","updated":"20240623153152"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"高效搜索"},{"Type":"NodeText","Data":": 倒排索引允许快速定位包含特定词汇的所有文档，即使在大规模数据集中也能实现近实时搜索。"}]}]},{"ID":"20240623153152-5h0t1t1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240623153152-5h0t1t1","updated":"20240623153152"},"Children":[{"ID":"20240623153152-vxqgyee","Type":"NodeParagraph","Properties":{"id":"20240623153152-vxqgyee","updated":"20240623153152"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"灵活性"},{"Type":"NodeText","Data":": 可以为不同的字段定义不同的分析器，支持多语言、同义词、模糊匹配等多种搜索需求。"}]}]},{"ID":"20240623153152-xm6oqzt","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240623153152-xm6oqzt","updated":"20240623153152"},"Children":[{"ID":"20240623153152-06iwnqu","Type":"NodeParagraph","Properties":{"id":"20240623153152-06iwnqu","updated":"20240623153152"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"分布式处理"},{"Type":"NodeText","Data":": Elasticsearch设计为分布式系统，可以将倒排索引分布在多个节点上，实现水平扩展和高可用性。"}]}]}]},{"ID":"20240623153152-0jkdyt2","Type":"NodeParagraph","Properties":{"id":"20240623153152-0jkdyt2","updated":"20240623153153"},"Children":[{"Type":"NodeText","Data":"综上所述，倒排索引是Elasticsearch实现高性能、可扩展全文搜索的核心机制，通过分析、索引和查询过程，确保了快速、准确的信息检索能力。"}]},{"ID":"20240623152917-emp98mz","Type":"NodeParagraph","Properties":{"id":"20240623152917-emp98mz","updated":"20240623153153"}}]}