{"ID":"20230915092817-vgs9gd3","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f964","id":"20230915092817-vgs9gd3","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20230915092817-vgs9gd3\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20230915105910-91s50an\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20230915110633-2nxgw3r\u0026quot;,\u0026quot;scrollTop\u0026quot;:6246\u0026#125;","title":"python 代码加密","updated":"20230921161211"},"Children":[{"ID":"20230915105910-91s50an","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230915105910-91s50an","updated":"20230915105927"},"Children":[{"Type":"NodeText","Data":"代码混淆\\加密工具"}]},{"ID":"20230915092826-yc7p47r","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230915092826-yc7p47r","updated":"20230915092845"},"Children":[{"Type":"NodeText","Data":"pyinstaller"}]},{"ID":"20230915092846-rdmghb2","Type":"NodeParagraph","Properties":{"id":"20230915092846-rdmghb2","updated":"20230915094719"},"Children":[{"Type":"NodeText","Data":"将代码打包成可在Windows、Linux、Mac OS 等操作系统上运行的二进制文件，"}]},{"ID":"20230915094725-tctfe9r","Type":"NodeParagraph","Properties":{"id":"20230915094725-tctfe9r","updated":"20230915094900"},"Children":[{"Type":"NodeText","Data":"安全性：*"}]},{"ID":"20230915094901-32qn9ce","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230915094901-32qn9ce","updated":"20230921161211"},"Children":[{"Type":"NodeText","Data":"pyminifier 工具"}]},{"ID":"20230915094903-sayp6hl","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230915094903-sayp6hl","updated":"20230915094915"},"Children":[{"Type":"NodeText","Data":"PyArmor 工具"}]},{"ID":"20230915094916-ndnaay0","Type":"NodeList","ListData":{},"Properties":{"id":"20230915094916-ndnaay0","updated":"20230915102548"},"Children":[{"ID":"20230915095002-yfjtem1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230915095002-yfjtem1","updated":"20230915095002"},"Children":[{"ID":"20230915095002-idy7eex","Type":"NodeParagraph","Properties":{"id":"20230915095002-idy7eex","updated":"20230915095116"},"Children":[{"Type":"NodeText","Data":"加密Python 脚本，使用特定的算法和技术将代码进行混淆，使得代码难以被理解和修改"}]}]},{"ID":"20230915095118-2wjg92z","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230915095118-2wjg92z"},"Children":[{"ID":"20230915095118-tja006p","Type":"NodeParagraph","Properties":{"id":"20230915095118-tja006p","updated":"20230915095243"},"Children":[{"Type":"NodeText","Data":"许可证管理，PyArmor支持生成和管理许可证文件，可以通过许可证控制代码的运行方式，例如设置试用期限、限制运行次数、限制并发用户等。"}]}]},{"ID":"20230915095246-h31f62n","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230915095246-h31f62n"},"Children":[{"ID":"20230915095246-950nk3s","Type":"NodeParagraph","Properties":{"id":"20230915095246-950nk3s","updated":"20230915095420"},"Children":[{"Type":"NodeText","Data":"动态加载保护，提供了一些特殊的机制和API，可以在运行时动态加载加密的模块和代码片段，使得加密的代码只有在运行时才会被解密，"}]}]},{"ID":"20230915095423-viistzr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230915095423-viistzr"},"Children":[{"ID":"20230915095423-nxdtkyr","Type":"NodeParagraph","Properties":{"id":"20230915095423-nxdtkyr","updated":"20230915095500"},"Children":[{"Type":"NodeText","Data":"合并多个脚本，允许将多个python脚本合成一个单一的可执行文件"}]}]},{"ID":"20230915095503-k9s7bq6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230915095503-k9s7bq6","updated":"20230915102548"},"Children":[{"ID":"20230915095503-rw55t1n","Type":"NodeParagraph","Properties":{"id":"20230915095503-rw55t1n","updated":"20230915095520"},"Children":[{"Type":"NodeText","Data":"兼容大部分python版本"}]},{"ID":"20230915095252-jdqzmh9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230915095252-jdqzmh9","updated":"20230915102548"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"pip install pyarmor\n\npyarmor obfuscate your_script.py\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20230915102619-c20zqom","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230915102619-c20zqom","updated":"20230915102635"},"Children":[{"Type":"NodeText","Data":"混淆一个脚本"}]},{"ID":"20230915102635-vpd792y","Type":"NodeParagraph","Properties":{"id":"20230915102635-vpd792y","updated":"20230915102644"},"Children":[{"Type":"NodeText","Data":"三个命令都可以"}]},{"ID":"20230915102645-q8tqge2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230915102645-q8tqge2","updated":"20230915103315"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"pyarmor gen your_script.py\npyarmor g your_script.py\npyarmor generate your_script.py\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230915103317-mt4h468","Type":"NodeParagraph","Properties":{"id":"20230915103317-mt4h468","updated":"20230915103647"},"Children":[{"Type":"NodeText","Data":"该命令 生成一个混淆的脚本 dist/your_script.py, 这是一个有效的Python脚本，通过python 解释器运行它："}]},{"ID":"20230915103647-i58foh0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230915103647-i58foh0","updated":"20230915103704"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"python dist/foo.py\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230915103706-ldnguev","Type":"NodeParagraph","Properties":{"id":"20230915103706-ldnguev","updated":"20230915103734"},"Children":[{"Type":"NodeText","Data":"检查默认输出路径中所有的文件："}]},{"ID":"20230915103734-80mfh2o","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230915103734-80mfh2o","updated":"20230915103815"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"ls dist/\n...    your_script.py\n...    pyarmor_runtime_000000\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230915105145-dmnpvnw","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230915105145-dmnpvnw","updated":"20230915105156"},"Children":[{"Type":"NodeText","Data":"分发脚本"}]},{"ID":"20230915105145-7ctsjc1","Type":"NodeParagraph","Properties":{"id":"20230915105145-7ctsjc1","updated":"20230915105145"},"Children":[{"Type":"NodeText","Data":"仅仅复制"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"dist/foo.py"},{"Type":"NodeText","Data":"​到另一台机器是行不通的，而是复制 "},{"Type":"NodeTextMark","TextMarkType":"strong code","TextMarkTextContent":"dist/"},{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"."}]},{"ID":"20230915105145-civun26","Type":"NodeParagraph","Properties":{"id":"20230915105145-civun26","updated":"20230915105145"},"Children":[{"Type":"NodeText","Data":"请在相同Python版本、相同平台的机器上运行此混淆代码，否则无法运行。因为"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"pyarmor_runtime_000000"},{"Type":"NodeText","Data":"​有"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://pyarmor.readthedocs.io/en/stable/reference/concepts.html#term-extension-module","TextMarkATitle":"扩展模块","TextMarkTextContent":"扩展模块"},{"Type":"NodeText","Data":"，所以它是平台相关的并且绑定到Python版本。"}]},{"ID":"20230915105148-5wty8no","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230915105148-5wty8no","updated":"20230915105207"},"Children":[{"Type":"NodeText","Data":"混淆包"}]},{"ID":"20230915105207-yp97n82","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230915105207-yp97n82","updated":"20230915105225"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"pyarmor gen -O dist2 src/mypkg\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230915105135-onm8c7g","Type":"NodeParagraph","Properties":{"id":"20230915105135-onm8c7g","updated":"20230915105247"},"Children":[{"Type":"NodeText","Data":"检查输出格式是否正确"}]},{"ID":"20230915105250-fey2vqd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230915105250-fey2vqd","updated":"20230915105256"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"$ ls dist2/\n...    mypkg\n...    pyarmor_runtime_000000\n \n$ ls dist2/mypkg/\n...          __init__.py\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230915105301-mnsqmtp","Type":"NodeParagraph","Properties":{"id":"20230915105301-mnsqmtp","updated":"20230915105310"},"Children":[{"Type":"NodeText","Data":"中的所有混淆脚本"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"dist2/mypkg"},{"Type":"NodeText","Data":"​​，测试一下："}]},{"ID":"20230915105302-99z09jo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230915105302-99z09jo","updated":"20230915105338"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"cd dist2/\npython -C 'import mypkg'\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230915105622-vd2ze8x","Type":"NodeParagraph","Properties":{"id":"20230915105622-vd2ze8x","updated":"20230915105649"},"Children":[{"Type":"NodeText","Data":"如果有子包，使用 -r 启动递归模式"}]},{"ID":"20230915105649-yb3i32h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230915105649-yb3i32h","updated":"20230915105711"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"pyarmor gen -O dist2 -r src/mypkg\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230915105717-1nn62qp","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230915105717-1nn62qp","updated":"20230915105731"},"Children":[{"Type":"NodeText","Data":"直接加密文件夹"}]},{"ID":"20230915105731-ho206ry","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230915105731-ho206ry","updated":"20230915105739"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"pyarmor gen .\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230915105717-p8q8j5b","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230915105717-p8q8j5b","updated":"20230915105818"},"Children":[{"Type":"NodeText","Data":"生成跨平台版本"}]},{"ID":"20230915105818-a1mrafp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230915105818-a1mrafp","updated":"20230915105834"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"pyarmor gen --platform windows.x86_64\n              --platform linux.x86_64 \\\n              --platform darwin.x86_64 \\\n              foo.py\n \npyarmor gen --platform linux.x86_64 .\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230915105717-qy441jb","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230915105717-qy441jb","updated":"20230915112226"},"Children":[{"Type":"NodeText","Data":"生成新的许可证，收费"}]},{"ID":"20230915105717-nga1eg2","Type":"NodeParagraph","Properties":{"id":"20230915105717-nga1eg2"}},{"ID":"20230915105717-kjgsaph","Type":"NodeParagraph","Properties":{"id":"20230915105717-kjgsaph"}},{"ID":"20230915092817-dkfoo9d","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230915092817-dkfoo9d","updated":"20230915100327"},"Children":[{"Type":"NodeText","Data":"pycrypto 工具2012 年停止开发工作"}]},{"ID":"20230915100327-f3lzpv8","Type":"NodeParagraph","Properties":{"id":"20230915100327-f3lzpv8","updated":"20230915100348"},"Children":[{"Type":"NodeText","Data":"PyCrytodome"}]},{"ID":"20230915100545-9ukrdir","Type":"NodeParagraph","Properties":{"id":"20230915100545-9ukrdir","updated":"20230915100556"},"Children":[{"Type":"NodeText","Data":"主要用于变量等数据加密，"}]},{"ID":"20230915100214-ovjtdva","Type":"NodeParagraph","Properties":{"id":"20230915100214-ovjtdva"}},{"ID":"20230915101240-kh5pq2f","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230915101240-kh5pq2f","updated":"20230915101639"},"Children":[{"Type":"NodeText","Data":"easycython 工具"}]},{"ID":"20230915101640-8896x32","Type":"NodeParagraph","Properties":{"id":"20230915101640-8896x32","updated":"20230915101650"},"Children":[{"Type":"NodeText","Data":"在 Windows 平台上进行"}]},{"ID":"20230915101650-8vri8iv","Type":"NodeParagraph","Properties":{"id":"20230915101650-8vri8iv","updated":"20230915101855"},"Children":[{"Type":"NodeText","Data":"生成的PYD 文件是经过 C/C++ 编译的动态链接库，在Linux系统上可以使用 .os 文件替代"}]},{"ID":"20230915101859-lyqrd2h","Type":"NodeParagraph","Properties":{"id":"20230915101859-lyqrd2h"}},{"ID":"20230915101859-e99yjfc","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230915101859-e99yjfc","updated":"20230915110222"},"Children":[{"Type":"NodeText","Data":"可以将python 生成 .os 动态链接库的工具"}]},{"ID":"20230915110551-xs8kyy8","Type":"NodeParagraph","Properties":{"id":"20230915110551-xs8kyy8","updated":"20230915150628"},"Children":[{"Type":"NodeText","Data":"在Python中生成动态库，需要使用 Cython模块"}]},{"ID":"20230915150628-hs0tsv3","Type":"NodeParagraph","Properties":{"id":"20230915150628-hs0tsv3","updated":"20230915150707"},"Children":[{"Type":"NodeText","Data":"Cython是一个Python编译器，可以将Python代码编译为 C或C++代码，并生成动态库"}]},{"ID":"20230915150707-vfo7l2w","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230915150707-vfo7l2w","updated":"20230915150723"},"Children":[{"Type":"NodeText","Data":"安装Cython模块"}]},{"ID":"20230915150735-db4zv4j","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230915150735-db4zv4j","updated":"20230915150744"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"pip install Cython\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230915150751-520w0ku","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230915150751-520w0ku","updated":"20230915150845"},"Children":[{"Type":"NodeText","Data":"创建一个名为 my_lib.pyx 的Cython文件，其中包含你要生成的动态库中的函数，"}]},{"ID":"20230915150846-yj7xkzk","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230915150846-yj7xkzk","updated":"20230915150907"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"def add(x,y):\n    return x + y\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230915150752-a8ip9cq","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230915150752-a8ip9cq","updated":"20230915150943"},"Children":[{"Type":"NodeText","Data":"创建一个名为 setup.py 的 setup文件，用于调用 Cython编译器"}]},{"ID":"20230915150943-je88pm8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230915150943-je88pm8","updated":"20230915151140"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"from setuptools import setup\nfrom Cython.Build import cythonize\n \nsetup(\n    name='my_lib',\n    ext_modules=cythonize(\"my_lib.pyx\")\n)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230915150908-i3flbmy","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230915150908-i3flbmy","updated":"20230915151201"},"Children":[{"Type":"NodeText","Data":"在命令行中运行一下命令"}]},{"ID":"20230915151201-f5g6x68","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230915151201-f5g6x68","updated":"20230915151219"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"python setup.py build_ext --inplace\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230915151229-uo41j5w","Type":"NodeParagraph","Properties":{"id":"20230915151229-uo41j5w","updated":"20230915151229"},"Children":[{"Type":"NodeText","Data":"这样就会在当前目录下生成一个名为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"my_lib.so"},{"Type":"NodeText","Data":"​ 的动态库文件。"}]},{"ID":"20230915151229-i720r77","Type":"NodeParagraph","Properties":{"id":"20230915151229-i720r77","updated":"20230915151229"},"Children":[{"Type":"NodeText","Data":"你可以在 Python 中使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ctypes"},{"Type":"NodeText","Data":"​ 模块来加载并调用这个动态库中的函数。"}]},{"ID":"20230915150752-w70tyj6","Type":"NodeParagraph","Properties":{"id":"20230915150752-w70tyj6"}},{"ID":"20230915150752-d92oh5y","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230915150752-d92oh5y","updated":"20230918141829"},"Children":[{"Type":"NodeText","Data":"许可 License 生成"}]},{"ID":"20230918141829-ipfq9sa","Type":"NodeParagraph","Properties":{"id":"20230918141829-ipfq9sa","updated":"20230918141957"},"Children":[{"Type":"NodeText","Data":"每一台计算机都拥有不同的物理地址。MAC地址由计算机的网卡决定，而且它是固定的，一般不会被更改。因此将电脑的mac地址是作为电脑的标识。"}]},{"ID":"20230915151231-ssvodsj","Type":"NodeParagraph","Properties":{"id":"20230915151231-ssvodsj","updated":"20230918142010"},"Children":[{"Type":"NodeText","Data":"获取mac地址后，通过一套加密算法将地址生成license，并给出license失效时间。然后每次运行软件前，需读取license进行解密，并与当前电脑的mac地址对比。如果相等，则授权成功，成功运行软件；否则授权失败。"}]},{"ID":"20230918160336-pz7rk5q","Type":"NodeParagraph","Properties":{"id":"20230918160336-pz7rk5q"}},{"ID":"20230918160336-4vhyzru","Type":"NodeParagraph","Properties":{"id":"20230918160336-4vhyzru"}},{"ID":"20230915150752-dj54b0h","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230915150752-dj54b0h","updated":"20230918142027"},"Children":[{"Type":"NodeText","Data":"实现方式"}]},{"ID":"20230918142028-o869zht","Type":"NodeParagraph","Properties":{"id":"20230918142028-o869zht","updated":"20230918160413"},"Children":[{"Type":"NodeText","Data":"使用 hash算法对mac地址进行加密，hash 算法的特点是正向快速，逆向困难，输入敏感、冲突避免"}]},{"ID":"20230918160413-igkd0dg","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230918160413-igkd0dg","updated":"20230918160421"},"Children":[{"Type":"NodeText","Data":"加密过程"}]},{"ID":"20230918160421-8zratut","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230918160421-8zratut","updated":"20230918160430"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"# 首先获取license字典，包含mac地址，license失效时间，和mac加密结果\npsw = Utils().hash_msg('jerry' + str(self.mac_addr))  # 将mac地址加个字符串进行编译，增加破解难度，字符串自定义\n\nlicense = {}\nlicense['mac'] = self.mac_addr\nlicense['license_time'] = self.license_time\nlicense['psw'] = psw\nprint('license:', license)\n# license: {'mac': 'f0:2f:74:f3:9e:9e', 'license_time': '2022-09-11T10:03:15.447229', 'psw': '1860d86e80d9d1a80c330e0b22e66def40aa22c79d3bc4412b7537eb7c6c8fe5'}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230918160432-09kk1sj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230918160432-09kk1sj","updated":"20230918160441"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"# 上述license还是很容易看出的，需要进一步加密。\nfrom utils import PrpCrypt, Utils\npc = PrpCrypt('keyskeyskeyskeys')  # 初始化密钥,可以为16位，32位，以及更长，一般为16位，加密解密都需要这个,字符串自定义\nencrypted_license = pc.encrypt(str(license))  # 加密 \u003cclass 'bytes'\u003e\nencrypted_license = str(encrypted_license, encoding = \"utf-8\")   #  bytes to str\nprint(encrypted_license)\n# encrypted_license = ba00b17adf2f10d8274b9a59ec71287cb633acd1b69905875602dd0bc4c1903c6926a3272e199fb65eaaafdfb85eae4c3d0d4063abaf4792a603f0eb38691fce3a436071c694d64b2825a385e3c81a70dd9af5eebebdbfa975ff5d97a5a03ffa1b46d41b91f857e11b894faf9c0cbe180e956c8e163964a14eeacf17fb8436f8719021dfe3dfcaf81c0f1fd029ef509c0dc3b3031da38d84e7a2e20fd742fb6d\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230918160444-65rlimo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230918160444-65rlimo","updated":"20230918160450"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"# 将生成的encrypted_license写入特定文件中，完成license生成。\ndef write_license(self, file_path, s_encrypt):\n    with open(file_path, 'w', encoding='utf-8') as lic:\n        lic.write(str(s_encrypt))\n        lic.close()\n      \nUtils().write_license(file_path, str(encrypted_license))\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230918160444-he9wif7","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230918160444-he9wif7","updated":"20230918160507"},"Children":[{"Type":"NodeText","Data":"解密过程"}]},{"ID":"20230918160507-kdelg8k","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230918160507-kdelg8k","updated":"20230918160514"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"# 解密过程需要用到两个字符串，分别是加密过程中，mac地址前加的jerry和初始化密钥keyskeyskeyskeys\ndef lic_decrypt(self, lic_path):\n    encrpted_content = Utils().get_license_lic(lic_path)\n    pc = PrpCrypt('keyskeyskeyskeys')\n    d = pc.decrypt(encrpted_content)\n    lic = ast.literal_eval(d)\n    # print(lic)\n    return lic\n# 然后将生成的license与已有的mac地址，或者加密的mac地址进行对比即可\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230918160516-07q0vd2","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230918160516-07q0vd2","updated":"20230918160544"},"Children":[{"Type":"NodeText","Data":"一些工具类函数"}]},{"ID":"20230918160544-5vwkfto","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230918160544-5vwkfto","updated":"20230918160554"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"# 获取mac地址，win和linux通用\ndef get_mac_address(self):\n    mac = uuid.UUID(int = uuid.getnode()).hex[-12:]\n    return \":\".join([mac[e:e+2] for e in range(0,11,2)])\n\n# 进行hash计算加密\ndef hash_msg(self, msg):\n    sha256 = hashlib.sha256()\n    sha256.update(msg.encode('utf-8'))\n    res = sha256.hexdigest()\n    return res\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230918160532-n79tgz7","Type":"NodeParagraph","Properties":{"id":"20230918160532-n79tgz7","updated":"20230918160608"},"Children":[{"Type":"NodeText","Data":"程序打包"}]},{"ID":"20230918160608-dsqv4t9","Type":"NodeParagraph","Properties":{"id":"20230918160608-dsqv4t9","updated":"20230918160628"},"Children":[{"Type":"NodeText","Data":"四、 小结\n首先，代码使用aes对称加密，密钥是保存在客户端的，包括生成的hash值也是存在客户端，这是危险的。如果客户端被逆向，可能会反推出加密算法。使用rsa做授权码生成比较安全，公钥加密，私钥解密，至少可以保证授权码很难被逆推出来。\n授权过期时间读取本地系统时间，使用授权截止日期减去当前日期。如果黑客在自己电脑上修改系统时间，将会非常容易绕过授权验证。可以改成远端获取实际时间的方式，起码可以避免修改系统时间导致的绕过问题"}]},{"ID":"20230918160556-7fu03ql","Type":"NodeParagraph","Properties":{"id":"20230918160556-7fu03ql"}},{"ID":"20230918160557-9lo3a2q","Type":"NodeParagraph","Properties":{"id":"20230918160557-9lo3a2q"}},{"ID":"20230918160557-94em4lm","Type":"NodeParagraph","Properties":{"id":"20230918160557-94em4lm","updated":"20230920161115"},"Children":[{"Type":"NodeText","Data":"混淆"}]},{"ID":"20230920161116-id4n4he","Type":"NodeParagraph","Properties":{"id":"20230920161116-id4n4he"}},{"ID":"20230920161159-hlkjvp8","Type":"NodeParagraph","Properties":{"id":"20230920161159-hlkjvp8","updated":"20230920161206"},"Children":[{"Type":"NodeText","Data":"动态库"}]},{"ID":"20230920161207-bv6txs9","Type":"NodeParagraph","Properties":{"id":"20230920161207-bv6txs9"}},{"ID":"20230920161117-valr6mz","Type":"NodeParagraph","Properties":{"id":"20230920161117-valr6mz","updated":"20230920161130"},"Children":[{"Type":"NodeText","Data":"动态库+打包exe"}]},{"ID":"20230920161355-8y74udg","Type":"NodeParagraph","Properties":{"id":"20230920161355-8y74udg"}},{"ID":"20230920161356-h8z00bd","Type":"NodeParagraph","Properties":{"id":"20230920161356-h8z00bd","updated":"20230920161408"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"exe 加壳加密"}]},{"ID":"20230918160557-ikx8uie","Type":"NodeParagraph","Properties":{"id":"20230918160557-ikx8uie"}},{"ID":"20230918160533-281c1cy","Type":"NodeParagraph","Properties":{"id":"20230918160533-281c1cy"}},{"ID":"20230918160533-38382or","Type":"NodeParagraph","Properties":{"id":"20230918160533-38382or"}},{"ID":"20230918160533-q3zjd50","Type":"NodeParagraph","Properties":{"id":"20230918160533-q3zjd50"}},{"ID":"20230918160445-d1h3hpc","Type":"NodeParagraph","Properties":{"id":"20230918160445-d1h3hpc"}},{"ID":"20230915110552-m925me7","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230915110552-m925me7","updated":"20230915110555"},"Children":[{"Type":"NodeText","Data":"加密方案"}]},{"ID":"20230915110556-33z3r5z","Type":"NodeParagraph","Properties":{"id":"20230915110556-33z3r5z","updated":"20230918231003"},"Children":[{"Type":"NodeText","Data":"先进行代码混淆，再将代码生成为动态库加密，再将代码打包为exe文件，运行时加入密码参数，包含日期和某些字段"}]},{"ID":"20230918231004-yx0f7rx","Type":"NodeParagraph","Properties":{"id":"20230918231004-yx0f7rx"}},{"ID":"20230915110633-2nxgw3r","Type":"NodeParagraph","Properties":{"id":"20230915110633-2nxgw3r"}}]}