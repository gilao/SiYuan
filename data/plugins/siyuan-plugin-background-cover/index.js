/*!
 * MIT License
 *
 * Copyright (c) 2023 SiYuan 思源笔记
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */(()=>{"use strict";var __webpack_modules__={713:(e,_,s)=>{s.d(_,{w:()=>p});var c=s(514),r=s(992),h=s.n(r),E=(C,m,D)=>new Promise((O,P)=>{var M=A=>{try{F(D.next(A))}catch(y){P(y)}},b=A=>{try{F(D.throw(A))}catch(y){P(y)}},F=A=>A.done?O(A.value):Promise.resolve(A.value).then(M,b);F((D=D.apply(C,m)).next())});const f="",g="";class d{siyuanRequest(m,D){return E(this,null,function*(){const O=`${f}${m}`,P={body:JSON.stringify(D),method:"POST"};g!==""&&Object.assign(P,{headers:{Authorization:`Token ${g}`}}),(0,c.fF)("\u5F00\u59CB\u5411\u601D\u6E90\u8BF7\u6C42\u6570\u636E\uFF0CreqUrl=>",O),(0,c.fF)("\u5F00\u59CB\u5411\u601D\u6E90\u8BF7\u6C42\u6570\u636E\uFF0CfetchOps=>",P);const b=yield(yield fetch(O,P)).json();if((0,c.fF)("\u601D\u6E90\u8BF7\u6C42\u6570\u636E\u8FD4\u56DE\uFF0CresJson=>",b),b.code===-1)throw new Error(b.msg);return b})}}class p extends d{lsNotebooks(){return E(this,null,function*(){return yield this.siyuanRequest("/api/notebook/lsNotebooks",{})})}openNotebook(m){return E(this,null,function*(){return yield this.siyuanRequest("/api/notebook/openNotebook",{notebook:m})})}readDir(m){return E(this,null,function*(){return yield this.siyuanRequest("/api/file/readDir",{path:m})})}putFile(m,D){const O=new FormData;return O.append("path",m),O.append("isDir","false"),O.append("modTime",Math.floor(Date.now()/1e3).toString()),O.append("file",D),new Promise((P,M)=>{(0,r.fetchPost)("/api/file/putFile",O,b=>{b.code===0?P(b):M(b)})})}saveTextData(m,D){return E(this,null,function*(){return new Promise(O=>{const P=`/temp/convert/pandoc/${m}`,M=new File([new Blob([D])],P.split("/").pop()),b=new FormData;b.append("path",P),b.append("file",M),b.append("isDir","false"),(0,r.fetchPost)("/api/file/putFile",b,F=>{O(F)})})})}getFile(m,D){return E(this,null,function*(){const O=yield fetch(`${f}/api/file/getFile`,{method:"POST",headers:{Authorization:`Token ${g}`},body:JSON.stringify({path:m})});if(O.status===200){if(D==="text")return yield O.text();if(D==="json")return(yield O.json()).data}return null})}removeFile(m){return E(this,null,function*(){const D={path:m};return yield this.siyuanRequest("/api/file/removeFile",D)})}createDocWithMd(m,D,O){return E(this,null,function*(){const P={notebook:m,path:D,markdown:O};return yield this.siyuanRequest("/api/filetree/createDocWithMd",P)})}}},750:(e,_,s)=>{s.d(_,{X:()=>f});var c=s(514),r=s(250),h=(g,d,p)=>new Promise((C,m)=>{var D=M=>{try{P(p.next(M))}catch(b){m(b)}},O=M=>{try{P(p.throw(M))}catch(b){m(b)}},P=M=>M.done?C(M.value):Promise.resolve(M.value).then(D,O);P((p=p.apply(g,d)).next())});class E{constructor(){this.settings=structuredClone(r.he)}setPlugin(d){this.plugin=d}get(d){var p;return(p=this.settings)==null?void 0:p[d]}set(d,p){if(!(d in this.settings)){(0,c.vU)(`"${d}" is not a setting`);return}this.settings[d]=p}reset(){return h(this,null,function*(){this.settings=structuredClone(r.he),this.save()})}load(){return h(this,null,function*(){let d=yield this.plugin.loadData(r._r);if(d==null||d==null||d=="")(0,c.fF)("\u6CA1\u6709\u914D\u7F6E\u6587\u4EF6\uFF0C\u4F7F\u7528\u9ED8\u8BA4\u914D\u7F6E"),this.save();else{(0,c.fF)(`\u8BFB\u5165\u914D\u7F6E\u6587\u4EF6: ${r._r}`),typeof d=="string"&&(d=JSON.parse(d));try{for(let p in d)p!=="version"&&p in r.he&&this.set(p,d[p])}catch(p){(0,c.vU)(`Setting load error: ${p}`)}this.save()}})}save(){return h(this,null,function*(){let d=JSON.stringify(this.settings);(0,c.fF)("\u5199\u5165\u914D\u7F6E\u6587\u4EF6:",d),this.plugin.saveData(r._r,d)})}}const f=new E},250:(e,_,s)=>{s.d(_,{LN:()=>P,Uy:()=>p,Vf:()=>r,YX:()=>g,_r:()=>m,gJ:()=>C,he:()=>O,ro:()=>D,zX:()=>E});var c=s(34),r=(M=>(M[M.image=0]="image",M[M.live2d=1]="live2d",M))(r||{});const h=`/data/public/${c.u2}/assets`,E=`${h}/images`.toString(),f=`${h}/live2d`.toString();let g="",d=window.siyuan.config.system.workspaceDir;window.siyuan.config.system.os==="windows"?(d=d.replaceAll("\\","/"),g=`${d}${h}`):g=`${d}${h}`;const p=198,C=[".png",".jpeg",".jpg",".jiff",".jfif"],m="bg-cover-setting.json",D="https://cdn.jsdelivr.net/gh/HowcanoeWang/siyuan-plugin-background-cover/static/FyBE0bUakAELfeF.jpg",O={autoRefresh:!0,bgObj:void 0,opacity:.5,blur:0,activate:!0,prevTheme:"",fileidx:{},version:c.i8,inDev:!1,themeAdapt:!0},P={iconLogo:`<symbol id="iconLogo" viewBox="0 0 32 32">
    <path d="M26 28h-20v-4l6-10 8.219 10 5.781-4v8z"></path>
    <path d="M26 15c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3c1.657 0 3 1.343 3 3z"></path>
    <path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
    </symbol>`}},208:(e,_,s)=>{s.d(_,{R:()=>c,y:()=>r});const c=["daylight","midnight","pink-room","Zhihu","siyuan-themes-vscodelite","z-acrylic","sy-dark-purple","Dark+","Tsundoku","toy","P-Book"],r={Savor:{toolbar:["rgba(237, 236, 233, ${opacity})","rgba(65, 70, 72, ${opacity})"],dockBottom:["rgba(255, 255, 255, 0)","rgba(255, 255, 255, 0)"],status:["rgba(255, 255, 255, 0)","rgba(255, 255, 255, 0)"]},"Rem Craft":{layouts:["rgb(247, 248, 250)","rgb(30, 34, 39)"],toolbar:["rgb(247, 248, 250)","rgb(30, 34, 39)"],dockLeft:["rgb(247, 248, 250)","rgb(30, 34, 39)"],dockRight:["rgb(247, 248, 250)","rgb(30, 34, 39)"],dockBottom:["rgb(247, 248, 250)","rgb(30, 34, 39)"],status:["rgba(255, 255, 255, 0)","rgba(255, 255, 255, 0)"]},"mini-vlook":{status:["rgba(255, 255, 255, 0)","rgba(255, 255, 255, 0)"]},"Light-Blue":{layouts:["rgba(255, 255, 255, ${0.7/opacity})",""],toolbar:["rgba(255, 255, 255, ${0.7})",""],dockLeft:["rgba(255, 255, 255, ${0.7})",""],dockRight:["rgba(255, 255, 255, ${0.7})",""],dockBottom:["rgba(255, 255, 255, ${0.7})",""],status:["rgba(255, 255, 255, ${0.7})",""]},"Dark-Blue":{layouts:["","rgba(30, 34, 39, ${0.7/opacity})"],toolbar:["","rgba(30, 34, 39, ${0.7})"],dockLeft:["","rgba(30, 34, 39, ${0.7})"],dockRight:["","rgba(30, 34, 39, ${0.7})"],dockBottom:["","rgba(30, 34, 39, ${0.7})"],status:["","rgba(30, 34, 39, ${0.7})"]},Odyssey:{layouts:["rgba(220, 228, 220, ${0.7/opacity})",""],toolbar:["rgba(220, 228, 220, ${0.7})",""],dockLeft:["rgba(220, 228, 220, ${0.7})",""],dockRight:["rgba(220, 228, 220, ${0.7})",""],dockBottom:["rgba(220, 228, 220, ${0.7})",""],status:["rgba(220, 228, 220, ${0.7})",""]},StarDust:{toolbar:["","rgb(29, 70, 94)"],dockLeft:["","rgb(29, 70, 94)"],dockRight:["","rgb(29, 70, 94)"],dockBottom:["","rgb(29, 70, 94)"],layouts:["","rgb(29, 70, 94)"],status:["","rgb(29, 70, 94)"]}}},514:(e,_,s)=>{s.d(_,{CL:()=>m,Kz:()=>p,NA:()=>C,OS:()=>D,Pu:()=>O,fF:()=>f,um:()=>E,vU:()=>g});var c=s(713),r=s(750),h=(i,l,t)=>new Promise((n,a)=>{var o=R=>{try{L(t.next(R))}catch(U){a(U)}},u=R=>{try{L(t.throw(R))}catch(U){a(U)}},L=R=>R.done?n(R.value):Promise.resolve(R.value).then(o,u);L((t=t.apply(i,l)).next())});function E(...i){console.log(`[BgCover Plugin][INFO] ${i}`)}function f(...i){r.X.get("inDev")&&console.log("[BgCover Plugin][DEBUG]",...i)}function g(...i){console.error(`[BgCover][ERROR] ${i}`)}function d(...i){console.warn(`[BgCover][WARN] ${i}`)}class p{merge(l,t){return[...new Set([...l,...t])]}}class C{addAlpha(l,t){return l.replace(")",`, ${t})`).replace("rgb","rgba")}removeAlpha(l){let t=l.split(",");return console.log(t),t[0].replace("rgba","rgb")+t[1]+t[2]+")"}editAlpha(l,t){return l.replace(/[\d\.]+\)$/g,`${t})`)}getAlpha(l){return l.slice(0,4)!=="rgba"?null:parseFloat(l.split(",")[3])}hex2rgba(l,t=-1){l=l.replace("#","");var n=parseInt(l.length==3?l.slice(0,1).repeat(2):l.slice(0,2),16),a=parseInt(l.length==3?l.slice(1,2).repeat(2):l.slice(2,4),16),o=parseInt(l.length==3?l.slice(2,3).repeat(2):l.slice(4,6),16);return t>0?"rgba("+n+", "+a+", "+o+", "+t+")":"rgb("+n+", "+a+", "+o+")"}changeColorOpacity(l,t){let n="",a=getComputedStyle(document.querySelector(":root"));if(l.slice(0,1)==="#")n=this.hex2rgba(l,t);else if(l.slice(0,4)==="var("){let o=l.slice(4,-1),u=a.getPropertyValue(o);n=this.changeColorOpacity(u,t)}else l.slice(0,4)==="rgb("?n=this.addAlpha(l,t):l.slice(0,4)==="rgba"?n=this.editAlpha(l,t):console.log(`Unable to parse the color string [${l}}], not 'var(--xxx)', 'rgb(xxx)', 'rgba(xxx)', '#hex'`);return n}getImageSize(l){return new Promise((t,n)=>{const a=new Image;a.src=l,a.onload=()=>{const{naturalWidth:o,naturalHeight:u}=a;t({width:o,height:u})},a.onerror=()=>{n(new Error("\u65E0\u6CD5\u52A0\u8F7D\u56FE\u50CF"))}})}getFullSide(l,t,n,a){const o=l/t,u=n/a;let L="";return o>u?L="X":L="Y",f(`container W:H = [${l} / ${t} = ${o}], image W:H = [${n} / ${a} = ${u}], fullsize = ${L}`),L}}function m(){const i=window.siyuan.config.appearance.mode;let l="";return i===0?l=window.siyuan.config.appearance.themeLight:l=window.siyuan.config.appearance.themeDark,[i,l]}class D{constructor(){this.ka=new c.w}rmtree(l){return h(this,null,function*(){let t=yield this.listdir(l);for(let n in t){let a=t[n];if(a.isDir)this.rmtree(`${l}/${a.name}/`);else{let o=`${l}/${a.name}`;yield this.ka.removeFile(o)}}l.slice(-1)==="/"?yield this.ka.removeFile(l):yield this.ka.removeFile(l+"/")})}listdir(l){return h(this,null,function*(){var t;let n=yield this.ka.readDir(l);return(n!==null||n!==void 0)&&(f("out.data",n.data),t=n.data),t})}splitext(l){let t=l.substring(l.lastIndexOf(".")+1,l.length)||l;return[l.substring(0,l.lastIndexOf("."))||l,t]}}function O(i){var l=P(b(F(M(i),8*i.length)));return l.toLowerCase()}function P(i){for(var l,t="0123456789ABCDEF",n="",a=0;a<i.length;a++)l=i.charCodeAt(a),n+=t.charAt(l>>>4&15)+t.charAt(15&l);return n}function M(i){for(var l=Array(i.length>>2),t=0;t<l.length;t++)l[t]=0;for(t=0;t<8*i.length;t+=8)l[t>>5]|=(255&i.charCodeAt(t/8))<<t%32;return l}function b(i){for(var l="",t=0;t<32*i.length;t+=8)l+=String.fromCharCode(i[t>>5]>>>t%32&255);return l}function F(i,l){i[l>>5]|=128<<l%32,i[14+(l+64>>>9<<4)]=l;for(var t=1732584193,n=-271733879,a=-1732584194,o=271733878,u=0;u<i.length;u+=16){var L=t,R=n,U=a,K=o;n=B(n=B(n=B(n=B(n=v(n=v(n=v(n=v(n=I(n=I(n=I(n=I(n=y(n=y(n=y(n=y(n,a=y(a,o=y(o,t=y(t,n,a,o,i[u+0],7,-680876936),n,a,i[u+1],12,-389564586),t,n,i[u+2],17,606105819),o,t,i[u+3],22,-1044525330),a=y(a,o=y(o,t=y(t,n,a,o,i[u+4],7,-176418897),n,a,i[u+5],12,1200080426),t,n,i[u+6],17,-1473231341),o,t,i[u+7],22,-45705983),a=y(a,o=y(o,t=y(t,n,a,o,i[u+8],7,1770035416),n,a,i[u+9],12,-1958414417),t,n,i[u+10],17,-42063),o,t,i[u+11],22,-1990404162),a=y(a,o=y(o,t=y(t,n,a,o,i[u+12],7,1804603682),n,a,i[u+13],12,-40341101),t,n,i[u+14],17,-1502002290),o,t,i[u+15],22,1236535329),a=I(a,o=I(o,t=I(t,n,a,o,i[u+1],5,-165796510),n,a,i[u+6],9,-1069501632),t,n,i[u+11],14,643717713),o,t,i[u+0],20,-373897302),a=I(a,o=I(o,t=I(t,n,a,o,i[u+5],5,-701558691),n,a,i[u+10],9,38016083),t,n,i[u+15],14,-660478335),o,t,i[u+4],20,-405537848),a=I(a,o=I(o,t=I(t,n,a,o,i[u+9],5,568446438),n,a,i[u+14],9,-1019803690),t,n,i[u+3],14,-187363961),o,t,i[u+8],20,1163531501),a=I(a,o=I(o,t=I(t,n,a,o,i[u+13],5,-1444681467),n,a,i[u+2],9,-51403784),t,n,i[u+7],14,1735328473),o,t,i[u+12],20,-1926607734),a=v(a,o=v(o,t=v(t,n,a,o,i[u+5],4,-378558),n,a,i[u+8],11,-2022574463),t,n,i[u+11],16,1839030562),o,t,i[u+14],23,-35309556),a=v(a,o=v(o,t=v(t,n,a,o,i[u+1],4,-1530992060),n,a,i[u+4],11,1272893353),t,n,i[u+7],16,-155497632),o,t,i[u+10],23,-1094730640),a=v(a,o=v(o,t=v(t,n,a,o,i[u+13],4,681279174),n,a,i[u+0],11,-358537222),t,n,i[u+3],16,-722521979),o,t,i[u+6],23,76029189),a=v(a,o=v(o,t=v(t,n,a,o,i[u+9],4,-640364487),n,a,i[u+12],11,-421815835),t,n,i[u+15],16,530742520),o,t,i[u+2],23,-995338651),a=B(a,o=B(o,t=B(t,n,a,o,i[u+0],6,-198630844),n,a,i[u+7],10,1126891415),t,n,i[u+14],15,-1416354905),o,t,i[u+5],21,-57434055),a=B(a,o=B(o,t=B(t,n,a,o,i[u+12],6,1700485571),n,a,i[u+3],10,-1894986606),t,n,i[u+10],15,-1051523),o,t,i[u+1],21,-2054922799),a=B(a,o=B(o,t=B(t,n,a,o,i[u+8],6,1873313359),n,a,i[u+15],10,-30611744),t,n,i[u+6],15,-1560198380),o,t,i[u+13],21,1309151649),a=B(a,o=B(o,t=B(t,n,a,o,i[u+4],6,-145523070),n,a,i[u+11],10,-1120210379),t,n,i[u+2],15,718787259),o,t,i[u+9],21,-343485551),t=T(t,L),n=T(n,R),a=T(a,U),o=T(o,K)}return Array(t,n,a,o)}function A(i,l,t,n,a,o){return T(W(T(T(l,i),T(n,o)),a),t)}function y(i,l,t,n,a,o,u){return A(l&t|~l&n,i,l,a,o,u)}function I(i,l,t,n,a,o,u){return A(l&n|t&~n,i,l,a,o,u)}function v(i,l,t,n,a,o,u){return A(l^t^n,i,l,a,o,u)}function B(i,l,t,n,a,o,u){return A(t^(l|~n),i,l,a,o,u)}function T(i,l){var t=(65535&i)+(65535&l);return(i>>16)+(l>>16)+(t>>16)<<16|65535&t}function W(i,l){return i<<l|i>>>32-l}},992:e=>{e.exports=require("siyuan")},34:e=>{e.exports=JSON.parse('{"u2":"siyuan-plugin-background-cover","i8":"0.3.0"}')}},__webpack_module_cache__={};function __webpack_require__(e){var _=__webpack_module_cache__[e];if(_!==void 0)return _.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](s,s.exports,__webpack_require__),s.exports}__webpack_require__.n=e=>{var _=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(_,{a:_}),_},__webpack_require__.d=(e,_)=>{for(var s in _)__webpack_require__.o(_,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:_[s]})},__webpack_require__.o=(e,_)=>Object.prototype.hasOwnProperty.call(e,_),__webpack_require__.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>SwitchBgCover});var siyuan__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(992),siyuan__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(siyuan__WEBPACK_IMPORTED_MODULE_0__),_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(713),_configs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(750),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(514),_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(250),_themeAdapt__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(208),_plugin_json__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(34),__async=(e,_,s)=>new Promise((c,r)=>{var h=g=>{try{f(s.next(g))}catch(d){r(d)}},E=g=>{try{f(s.throw(g))}catch(d){r(d)}},f=g=>g.done?c(g.value):Promise.resolve(g.value).then(h,E);f((s=s.apply(e,_)).next())}),__forAwait=(e,_,s)=>(_=e[Symbol.asyncIterator],s=(c,r)=>(r=e[c])&&(_[c]=h=>new Promise((E,f,g)=>(h=r.call(e,h),g=h.done,Promise.resolve(h.value).then(d=>E({value:d,done:g}),f)))),_?_.call(e):(e=e[Symbol.iterator](),_={},s("next"),s("return"),_));let os=new _utils__WEBPACK_IMPORTED_MODULE_3__.OS,ka=new _api__WEBPACK_IMPORTED_MODULE_1__.w,cv2=new _utils__WEBPACK_IMPORTED_MODULE_3__.NA,np=new _utils__WEBPACK_IMPORTED_MODULE_3__.Kz;class SwitchBgCover extends siyuan__WEBPACK_IMPORTED_MODULE_0__.Plugin{constructor(){super(...arguments),this.htmlThemeNode=document.getElementsByTagName("html")[0],this.bgLayer=document.createElement("canvas")}onload(){return __async(this,null,function*(){const e=(0,siyuan__WEBPACK_IMPORTED_MODULE_0__.getFrontend)();this.isMobile=e==="mobile"||e==="browser-mobile",this.addIcons(_constants__WEBPACK_IMPORTED_MODULE_4__.LN.iconLogo),_configs__WEBPACK_IMPORTED_MODULE_2__.X.setPlugin(this),yield _configs__WEBPACK_IMPORTED_MODULE_2__.X.load();const _=this.addTopBar({icon:"iconLogo",title:this.i18n.addTopBarIcon,position:"right",callback:()=>{if(this.isMobile)this.showMobileTodo();else{let c=_.getBoundingClientRect();c.width===0&&(c=document.querySelector("#barMore").getBoundingClientRect()),c.width===0&&(c=document.querySelector("#barPlugins").getBoundingClientRect()),this.addMenu(c)}}});this.addCommand({langKey:"selectPictureManualLabel",hotkey:"\u21E7\u2318F6",callback:()=>{this.selectPictureByHand()}}),this.addCommand({langKey:"selectPictureRandomLabel",hotkey:"\u21E7\u2318F7",callback:()=>{this.selectPictureRandom(!0)}}),this.addCommand({langKey:"openBackgroundLabel",hotkey:"\u21E7\u2318F4",callback:()=>{this.pluginOnOff()}}),new MutationObserver(yield this.themeOnChange.bind(this)).observe(this.htmlThemeNode,{attributes:!0}),(0,_utils__WEBPACK_IMPORTED_MODULE_3__.um)(this.i18n.helloPlugin)})}onLayoutReady(){return __async(this,null,function*(){this.createBgLayer();let e=document.getElementById("layouts").parentElement;e.id="dockPanel",yield this.checkCacheDirctory();const[_,s]=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.CL)();_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("prevTheme",s),yield this.applySettings(),(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(`frontend: ${(0,siyuan__WEBPACK_IMPORTED_MODULE_0__.getFrontend)()}; backend: ${(0,siyuan__WEBPACK_IMPORTED_MODULE_0__.getBackend)()}`)})}onunload(){(0,_utils__WEBPACK_IMPORTED_MODULE_3__.um)(`${this.i18n.byePlugin}`),_configs__WEBPACK_IMPORTED_MODULE_2__.X.save();let e=document.getElementById("dockPanel");e.id=null}createBgLayer(){this.bgLayer.id="bglayer",this.bgLayer.className="bglayer",document.body.appendChild(this.bgLayer)}checkCacheDirctory(){return __async(this,null,function*(){if(window.siyuan.config.system.kernelVersion>="2.9.3"){let E=`/data/plugins/${_plugin_json__WEBPACK_IMPORTED_MODULE_6__.u2}/assets`,f=yield os.listdir(E);f!==null&&f.length>0&&((0,siyuan__WEBPACK_IMPORTED_MODULE_0__.showMessage)(this.i18n.cacheDirectoryMove,7e3,"info"),yield os.rmtree(E))}let e=yield os.listdir(_constants__WEBPACK_IMPORTED_MODULE_4__.zX),_={},s=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("fileidx"),c=[],r=[],h=[];s==null&&(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("The settings.fileidx is empty {}");for(let E in e){let f=e[E];if(!f.isDir)if((0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(`[Func][checkCacheDirectory] Check ${f.name} in cached dir`),f.name.slice(0,5)==="hash-"){const[g,d]=os.splitext(f.name.split("-")[1]);if((0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(g,s,r),g in s){let p=s[g];if(p.offx===void 0||p.width===void 0||p.width===0){const C=yield cv2.getImageSize(p.path);let m={name:p.name,path:p.path,hash:p.hash,mode:p.mode,offx:50,offy:50,height:C.height,width:C.width};_[g]=m,(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("settings.fileidx\u4E3A\u65E7\u7248\u914D\u7F6E\uFF0C\u5DF2\u66F4\u65B0",m)}else _[g]=p}else r.push(f.name),ka.removeFile(`${_constants__WEBPACK_IMPORTED_MODULE_4__.zX}/${f.name}`)}else c.push(f.name),ka.removeFile(`${_constants__WEBPACK_IMPORTED_MODULE_4__.zX}/${f.name}`)}for(let E in s)E in _||h.push(s[E].name);if(_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("fileidx",_),yield _configs__WEBPACK_IMPORTED_MODULE_2__.X.save(),c.length!==0){let E=`${this.i18n.cacheImgWrongName}<br>[${c}]<br>${this.i18n.doNotOperateCacheFolder}`;(0,siyuan__WEBPACK_IMPORTED_MODULE_0__.showMessage)(E,7e3,"info"),(0,_utils__WEBPACK_IMPORTED_MODULE_3__.um)(E)}if(r.length!==0){let E=`${this.i18n.cacheImgExtra}<br>[${r}]<br>${this.i18n.doNotOperateCacheFolder}`;(0,siyuan__WEBPACK_IMPORTED_MODULE_0__.showMessage)(E,7e3,"info"),(0,_utils__WEBPACK_IMPORTED_MODULE_3__.um)(E)}if(h.length!==0){let E=`${this.i18n.cacheImgMissing}<br>[${h}]<br>${this.i18n.doNotOperateCacheFolder}`;(0,siyuan__WEBPACK_IMPORTED_MODULE_0__.showMessage)(E,7e3,"info"),(0,_utils__WEBPACK_IMPORTED_MODULE_3__.um)(E)}})}pluginOnOff(){return __async(this,null,function*(){_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("activate",!_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("activate")),_configs__WEBPACK_IMPORTED_MODULE_2__.X.save(),this.applySettings()})}useDefaultLiaoLiaoBg(){(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("[Func][applySettings] \u6CA1\u6709\u7F13\u5B58\u4EFB\u4F55\u56FE\u7247\uFF0C\u4F7F\u7528\u9ED8\u8BA4\u7684\u4E86\u4E86\u59B9\u56FE\u7247ULR\u6765\u5F53\u4F5C\u80CC\u666F\u56FE"),this.changeBackgroundContent(_constants__WEBPACK_IMPORTED_MODULE_4__.ro,_constants__WEBPACK_IMPORTED_MODULE_4__.Vf.image),_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("bgObj",void 0)}clearCacheFolder(e){return __async(this,null,function*(){if(e==_constants__WEBPACK_IMPORTED_MODULE_4__.Vf.image){let s=yield os.listdir(_constants__WEBPACK_IMPORTED_MODULE_4__.zX),c=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("fileidx");for(let E in s){let f=s[E];if(f.isDir)os.rmtree(`${_constants__WEBPACK_IMPORTED_MODULE_4__.zX}/${f.name}/`);else{let g=`${_constants__WEBPACK_IMPORTED_MODULE_4__.zX}/${f.name}`;yield ka.removeFile(g);const[d,p]=os.splitext(f.name.split("-")[1]);delete c[d]}}_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("fileidx",c);let r=document.getElementById("cacheImgList");r.innerHTML=null;let h=document.getElementById("displayCanvas");h.innerHTML=null}else e==_constants__WEBPACK_IMPORTED_MODULE_4__.Vf.live2d;this.getCacheImgNum()===0&&this.useDefaultLiaoLiaoBg(),yield _configs__WEBPACK_IMPORTED_MODULE_2__.X.save()})}generateCacheImgList(){function e(h){let E=document.getElementById("displayCanvas");E.innerHTML=`<img style="max-height: 100%" src="${h.path}">`}function _(h){this.changeBackgroundContent(h.path,h.mode),_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("bgObj",h),_configs__WEBPACK_IMPORTED_MODULE_2__.X.save()}function s(h){(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("Remove the background"),document.getElementById("cacheImgList").querySelectorAll(`[data-hash="${h.hash}"]`)[0].remove();let g=document.getElementById("displayCanvas");g.innerHTML=null,this.selectPictureRandom();let d=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("fileidx");delete d[h.hash],_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("fileidx",d),(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(`[Func][_rmBg] \u79FB\u9664\u4E0B\u5217\u8DEF\u5F84\u7684\u56FE\u7247\uFF1A${_constants__WEBPACK_IMPORTED_MODULE_4__.zX}/${h.name}`),ka.removeFile(`data/${h.path}`),this.getCacheImgNum()===0&&this.useDefaultLiaoLiaoBg(),_configs__WEBPACK_IMPORTED_MODULE_2__.X.save()}let c=[],r=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("fileidx");for(const h in r){let E=r[h],g=new DOMParser().parseFromString(`
            <li data-hash="${E.hash}" class="b3-list-item b3-list-item--hide-action">
                <span class="b3-list-item__text">
                    ${E.name}
                </span>
                <span data-type="open" class="b3-tooltips b3-tooltips__w b3-list-item__action" aria-label="${this.i18n.setAsBg}">
                    <svg><use xlink:href="#iconHideDock"></use></svg>
                </span>
                <span data-type="clear" class="b3-tooltips b3-tooltips__w b3-list-item__action" aria-label="${this.i18n.delete}">
                    <svg><use xlink:href="#iconTrashcan"></use></svg>
                </span>
            </li>
            `,"text/html").body.firstChild,d=g.querySelectorAll("span")[1],p=g.querySelectorAll("span")[2];d.addEventListener("click",_.bind(this,E)),p.addEventListener("click",s.bind(this,E)),g.addEventListener("mouseenter",e.bind(this,E)),c.push(g)}return c}selectPictureByHand(){return __async(this,null,function*(){const e=new siyuan__WEBPACK_IMPORTED_MODULE_0__.Dialog({title:this.i18n.selectPictureManagerTitle,width:this.isMobile?"92vw":"520px",height:"92vh",content:`
            <div class="fn__flex-column" style="height: 100%">
                <div class="layout-tab-bar fn__flex">

                    <!-- tab 1 title -->
                    <div class="item item--full item--focus" data-type="remove">
                        <span class="fn__flex-1"></span>
                        <span class="item__text">${this.i18n.selectPictureManagerTab1}</span>
                        <span class="fn__flex-1"></span>
                    </div>

                    <!-- tab 2 title -->
                    <!--div class="item item--full" data-type="missing">
                        <span class="fn__flex-1"></span>
                        <span class="item__text">${this.i18n.selectPictureManagerTab2}</span>
                        <span class="fn__flex-1"></span>
                    </div-->
                </div>
                <div class="fn__flex-1">

                    <!-- tab 1 -->

                    <div class="config-assets" data-type="remove" data-init="true">
                        <div class="fn__hr--b"></div>

                        <label class="fn__flex" style="justify-content: flex-end;">
                            <button id="removeAllImgs" class="b3-button b3-button--outline fn__flex-center fn__size200">
                                <svg class="svg"><use xlink:href="#iconTrashcan"></use></svg>
                                ${this.i18n.deleteAll}
                            </button>
                            <div class="fn__space"></div>
                        </label>

                        <div class="fn__hr"></div>

                        <ul id="cacheImgList" class="b3-list b3-list--background config-assets__list">

                            <li data-path="20230609230328-7vp057x.png" class="b3-list-item b3-list-item--hide-action">
                                <span class="b3-list-item__text">
                                    20230609230328-7vp057x.png
                                </span>
                                <span data-type="open" class="b3-tooltips b3-tooltips__w b3-list-item__action" aria-label="${this.i18n.setAsBg}">
                                    <svg><use xlink:href="#iconHideDock"></use></svg>
                                </span>
                                <span data-type="clear" class="b3-tooltips b3-tooltips__w b3-list-item__action" aria-label="${this.i18n.delete}">
                                    <svg><use xlink:href="#iconTrashcan"></use></svg>
                                </span>
                            </li>
                            
                        </ul>

                        <!-- after rendering -->
                        <!--div class="config-assets__preview" data-path="assets/xxxx.png">
                            <img style="max-height: 100%" src="assets/xxxx.png">
                        </div-->

                        <!-- default empty -->
                        <div id="displayCanvas" class="config-assets__preview"></div>
                    </div>

                    <!-- tab 2, class add fn__none to cancle display -->

                    <!--div class="fn__none config-assets" data-type="missing">
                        <div class="fn__hr"></div>
                        <ul class="b3-list b3-list--background config-assets__list">
                            <li class="fn__loading"><img src="/stage/loading-pure.svg"></li>
                        </ul>
                        <div class="fn__hr"></div>
                    </div>
                </div>
            </div>
            `});let _=this.generateCacheImgList();const s=document.getElementById("cacheImgList");s.innerHTML="";for(const r of _)s.appendChild(r);(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("[Func][selectPictureByHand]",_,s),document.getElementById("removeAllImgs").addEventListener("click",this.clearCacheFolder.bind(this,_constants__WEBPACK_IMPORTED_MODULE_4__.Vf.image))})}selectPictureRandom(e=!1){return __async(this,null,function*(){const _=this.getCacheImgNum();if(_===0)this.useDefaultLiaoLiaoBg(),(0,siyuan__WEBPACK_IMPORTED_MODULE_0__.showMessage)(`${this.i18n.noCachedImg4random}`,3e3,"info");else if(_===1){if(e&&(0,siyuan__WEBPACK_IMPORTED_MODULE_0__.showMessage)(`${this.i18n.selectPictureRandomNotice}`,3e3,"info"),document.getElementById("bglayer").style.getPropertyValue("background-image")===""){let c=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj");this.changeBackgroundContent(c.path,c.mode)}}else{let s=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("fileidx"),c=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj").hash,r="";for(;;){let h=Math.floor(Math.random()*_);if(r=Object.keys(s)[h],(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(`[Func][selectPictureRandom] \u968F\u673A\u62BD\u4E00\u5F20\uFF0C\u4E4B\u524D\uFF1A${c}\uFF0C\u968F\u673A\u5230\uFF1A${r}`),r!==c){(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(`[Func][selectPictureRandom] \u5DF2\u62BD\u5230\u4E0D\u540C\u7684\u80CC\u666F\u56FE${r}\uFF0C\u8FDB\u884C\u66FF\u6362`);break}}(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("[Func][selectPictureRandom] \u8DF3\u51FA\u62BD\u5361\u6B7B\u5FAA\u73AF,\u524D\u666F\u56FE\u4E3A\uFF1A",s[r]),this.changeBackgroundContent(s[r].path,s[r].mode),_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("bgObj",s[r])}yield _configs__WEBPACK_IMPORTED_MODULE_2__.X.save(),this.updateSettingPanelElementStatus()})}imgIsInCache(e,_=!0){let s=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("fileidx");var c=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.Pu)(`${e.name}${e.size}${e.lastModified}`.slice(0,15));if(s!==void 0&&c in s){if(_){const r=new siyuan__WEBPACK_IMPORTED_MODULE_0__.Dialog({title:`${this.i18n.inDevTitle}`,content:`<div class="b3-dialog__content">${this.i18n.imageFileExist}</div>`,width:this.isMobile?"92vw":"520px"})}else(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(`[Func][imgIsInCache] \u5F53\u524D\u56FE\u7247${e.name}\u5DF2\u5B58\u5728`);return"exists"}else return c}uploadOneImage(e){return __async(this,null,function*(){let _=e.size/1024/1024;(0,siyuan__WEBPACK_IMPORTED_MODULE_0__.showMessage)(`${e.name}-${_.toFixed(2)}MB<br>${this.i18n.addSingleImageUploadNotice}`,3e3,"info");let s=this.imgIsInCache(e),c=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("fileidx");if(c==null&&(c={}),s!=="exists"){const[r,h]=os.splitext(e.name),E=`hash-${s}.${h}`,f=yield ka.putFile(`${_constants__WEBPACK_IMPORTED_MODULE_4__.zX}/${E}`,e);if(f.code===0){const g=`${_constants__WEBPACK_IMPORTED_MODULE_4__.zX.slice(5)}/${E}`,d=yield cv2.getImageSize(g);let p={name:e.name,hash:s,mode:_constants__WEBPACK_IMPORTED_MODULE_4__.Vf.image,path:g,offx:50,offy:50,width:d.width,height:d.height};return c[p.hash]=p,_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("bgObj",p),_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("fileidx",c),(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(`[func][addSingleLocalImageFile]: fileidx ${c}`),p}else return(0,_utils__WEBPACK_IMPORTED_MODULE_3__.vU)(`fail to upload file ${e.name} with error code ${f}`),null}})}batchUploadImages(e,_=!1){return __async(this,null,function*(){let s;if((0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("[Func][batchUploadImages] fileArray",e),e.length===0)(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("[Func][batchUploadImages] fileArray\u4E3A\u7A7A\uFF0C\u4E0D\u5B58\u5728\u9700\u8981\u4E0A\u4F20\u7684\u56FE\u7247");else{for(let c in e){let r=e[c];s=yield this.uploadOneImage(r),(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("[Func][batchUploadImages] \u5728\u4E0A\u4F20\u7684\u5FAA\u73AF\u5185",s)}yield _configs__WEBPACK_IMPORTED_MODULE_2__.X.save(),_&&((0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("[Func][batchUploadImages] \u5728\u5E94\u7528\u8BBE\u7F6E\u7684\u5224\u65AD\u5185",s),this.changeBackgroundContent(s.path,s.mode),this.updateSettingPanelElementStatus())}})}addSingleLocalImageFile(){return __async(this,null,function*(){if(this.getCacheImgNum()>=_constants__WEBPACK_IMPORTED_MODULE_4__.Uy)(0,siyuan__WEBPACK_IMPORTED_MODULE_0__.showMessage)(this.i18n.addSingleImageExceed1+_constants__WEBPACK_IMPORTED_MODULE_4__.Uy+this.i18n.addSingleImageExceed2,7e3,"error");else{const _={types:[{description:"Images",accept:{"image/*":_constants__WEBPACK_IMPORTED_MODULE_4__.gJ}}],excludeAcceptAllOption:!0,multiple:!1};let c=yield(yield window.showOpenFilePicker(_))[0].getFile(),r=yield this.uploadOneImage(c);r!==null&&(yield _configs__WEBPACK_IMPORTED_MODULE_2__.X.save(),this.changeBackgroundContent(r.path,r.mode),this.updateSettingPanelElementStatus())}})}addDirectory(){return __async(this,null,function*(){const e=this.getCacheImgNum(),s=yield(yield window.showDirectoryPicker()).values();let c=[];try{for(var r=__forAwait(s),h,E,f;h=!(E=yield r.next()).done;h=!1){const g=E.value;if(g.kind==="file"){const d=yield g.getFile(),p=d.name,[C,m]=os.splitext(p);if((0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(`[Func][addDirectory] \u5F53\u524D\u56FE\u7247${p}\u540E\u7F00\u4E3A${m}, \u5B58\u5728\u4E8E\u5141\u8BB8\u7684\u56FE\u7247\u540E\u7F00(${_constants__WEBPACK_IMPORTED_MODULE_4__.gJ})\u4E2D\uFF1A${_constants__WEBPACK_IMPORTED_MODULE_4__.gJ.includes(`.${m}`)}`),_constants__WEBPACK_IMPORTED_MODULE_4__.gJ.includes(`.${m}`)){let D=this.imgIsInCache(d,!1);D!=="exists"?c.push(d):(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(`[Func][addDirectory] \u5F53\u524D\u56FE\u7247${p}md5\u4E3A${D}, \u5B58\u5728\u4E8E\u7F13\u5B58\u4E2D`)}(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("[Func][addDirectory] fileContainer",c)}if(c.length>=_constants__WEBPACK_IMPORTED_MODULE_4__.Uy-e){(0,siyuan__WEBPACK_IMPORTED_MODULE_0__.showMessage)(this.i18n.addDirectoryLabelError1+_constants__WEBPACK_IMPORTED_MODULE_4__.Uy+this.i18n.addDirectoryLabelError2,7e3,"error");break}}}catch(g){f=[g]}finally{try{h&&(E=r.return)&&(yield E.call(r))}finally{if(f)throw f[0]}}c.length>=30?(0,siyuan__WEBPACK_IMPORTED_MODULE_0__.confirm)(this.i18n.addDirectoryLabelConfirmTitle,`${this.i18n.addDirectoryLabelConfirm1} ${c.length} ${this.i18n.addDirectoryLabelConfirm2}`,()=>__async(this,null,function*(){yield this.batchUploadImages(c,!0)})):yield this.batchUploadImages(c,!0)})}themeOnChange(){return __async(this,null,function*(){const[e,_]=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.CL)();let s=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("prevTheme");(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(`Theme changed! from ${s} to ${e} | ${_}`),s!==_&&(_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("prevTheme",_),yield _configs__WEBPACK_IMPORTED_MODULE_2__.X.save(),window.location.reload())})}changeBackgroundContent(e,_){_===_constants__WEBPACK_IMPORTED_MODULE_4__.Vf.image?((0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(`[Func][changeBackgroundContent] \u66FF\u6362\u5F53\u524D\u80CC\u666F\u56FE\u7247\u4E3A${e}`),this.bgLayer.style.setProperty("background-image",`url('${e}')`)):_==_constants__WEBPACK_IMPORTED_MODULE_4__.Vf.live2d?this.showIndev():(0,siyuan__WEBPACK_IMPORTED_MODULE_0__.showMessage)(`[${this.i18n.addTopBarIcon} Plugin][Error] Background type [${_}] is not supported, `,7e3,"error")}changeOpacity(alpha,themeAdapt){let opacity=.99-.25*alpha;const[themeMode,themeName]=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.CL)();_themeAdapt__WEBPACK_IMPORTED_MODULE_5__.R.includes(themeName)&&(themeAdapt=!1);let operateElement;operateElement={opacity:{operateOpacityElement:["toolbar","dockPanel","dockBottom","status"],zIndexValue:["2","1","2","3"],operateCssElement:[]},css:{operateOpacityElement:["layouts"],zIndexValue:["1"],operateCssElement:["toolbar","dockLeft","dockRight","dockBottom","status"]}};let themeAdaptObject,themeAdaptElement=[];if(themeName in _themeAdapt__WEBPACK_IMPORTED_MODULE_5__.y&&(themeAdaptObject=_themeAdapt__WEBPACK_IMPORTED_MODULE_5__.y[themeName],themeAdaptElement=Object.keys(themeAdaptObject),operateElement.css.operateCssElement=np.merge(operateElement.css.operateCssElement,themeAdaptElement)),_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("activate")){let addOpacityElement,zIndexValue,addCssElement,rmOpacityElement,rmCssElement;themeAdapt?(addOpacityElement=operateElement.css.operateOpacityElement,zIndexValue=operateElement.css.zIndexValue,addCssElement=operateElement.css.operateCssElement,rmOpacityElement=operateElement.opacity.operateOpacityElement,rmCssElement=operateElement.opacity.operateCssElement):(addOpacityElement=operateElement.opacity.operateOpacityElement,zIndexValue=operateElement.opacity.zIndexValue,addCssElement=operateElement.opacity.operateCssElement,rmOpacityElement=operateElement.css.operateOpacityElement,rmCssElement=operateElement.css.operateCssElement);for(let e in addOpacityElement){var changeItem=document.getElementById(addOpacityElement[e]);changeItem.style.setProperty("opacity",opacity.toString()),changeItem.style.setProperty("z-index",zIndexValue[e])}for(let e in rmOpacityElement){var changeItem=document.getElementById(rmOpacityElement[e]);changeItem.style.removeProperty("opacity"),changeItem.style.removeProperty("z-index")}if(addCssElement.length>0)for(let eid in addCssElement){const elementid=addCssElement[eid];var changeItem=document.getElementById(elementid),originalColor,adaptColor;(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(`[Func][changeOpacity] \u4FEE\u6539\u5143\u7D20ID\u4E3A${elementid}\u7684\u5143\u7D20alpha\u503C`),themeAdaptElement.includes(elementid)?(originalColor=themeAdaptObject[elementid][themeMode],adaptColor=eval("`"+originalColor+"`")):(originalColor=getComputedStyle(changeItem,null).getPropertyValue("background-color"),adaptColor=cv2.changeColorOpacity(originalColor,opacity)),(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(`[Func][changeOpacity] ${elementid} originalColor: ${originalColor}, adaptColor: ${adaptColor}`),changeItem.style.setProperty("background-color",adaptColor,"important"),changeItem.style.setProperty("background-blend-mode","lighten")}if(rmCssElement.length>0)for(let e in rmCssElement){const _=rmCssElement[e];var changeItem=document.getElementById(_);changeItem.style.removeProperty("background-color"),changeItem.style.removeProperty("background-blend-mode")}}else{let e=np.merge(operateElement.opacity.operateOpacityElement,operateElement.css.operateOpacityElement);(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("[Func][changeOpacity] \u79FB\u9664\u4E0B\u5217\u5143\u7D20\u7684opacity\u548Cz-index\u503C:",e);for(let s in e){const c=e[s];var changeItem=document.getElementById(c);changeItem.style.removeProperty("opacity"),changeItem.style.removeProperty("z-index")}let _=np.merge(operateElement.opacity.operateCssElement,operateElement.css.operateCssElement);(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("[Func][changeOpacity] \u79FB\u9664\u4E0B\u5217\u5143\u7D20\u7684background-color\u548Cblend-mode\u503C:",_);for(let s in _){const c=_[s];var changeItem=document.getElementById(c);changeItem.style.removeProperty("background-color"),changeItem.style.removeProperty("background-blend-mode")}}}changeBlur(e){this.bgLayer.style.setProperty("filter",`blur(${e}px)`)}changeBgPosition(e,_){e==null||e==null?((0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("[Func][changeBgPosition] xy\u672A\u5B9A\u4E49\uFF0C\u4E0D\u8FDB\u884C\u6539\u53D8"),this.bgLayer.style.setProperty("background-position","center")):((0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(`[Func][changeBgPosition] \u4FEE\u6539background-position\u4E3A${e}% ${_}%`),this.bgLayer.style.setProperty("background-position",`${e}% ${_}%`))}applySettings(){return __async(this,null,function*(){_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("activate")?this.bgLayer.style.removeProperty("display"):this.bgLayer.style.setProperty("display","none");const e=this.getCacheImgNum();if((0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(`[Func][applySettings] cacheImgNum= ${e}`),e===0)this.useDefaultLiaoLiaoBg();else if(_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj")===void 0)(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("[Func][applySettings] \u7F13\u5B58\u4E2D\u67091\u5F20\u4EE5\u4E0A\u7684\u56FE\u7247\uFF0C\u4F46\u662F\u8BBE\u7F6E\u7684bjObj\u5374\u662Fundefined\uFF0C\u968F\u673A\u62BD\u4E00\u5F20"),yield this.selectPictureRandom();else{(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("[Func][applySettings] \u7F13\u5B58\u4E2D\u67091\u5F20\u4EE5\u4E0A\u7684\u56FE\u7247\uFF0CbjObj\u4E5F\u6709\u5185\u5BB9\u4E14\u56FE\u7247\u5B58\u5728");let _=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj"),s=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("fileidx");_.hash in s&&!_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("autoRefresh")?((0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("[Func][applySettings] \u6CA1\u6709\u5F00\u542F\u542F\u52A8\u81EA\u52A8\u66F4\u6362\u56FE\u7247\uFF0C\u5219\u76F4\u63A5\u663E\u793A\u5F53\u524D\u56FE\u7247"),this.changeBackgroundContent(_.path,_.mode)):((0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)("[Func][applySettings] \u7528\u6237\u9009\u62E9\u968F\u673A\u56FE\u7247\uFF0C\u5219\u968F\u673A\u8C03\u4E00\u5F20\u4F5C\u4E3AbjObj"),yield this.selectPictureRandom())}this.changeOpacity(_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("opacity"),_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("themeAdapt")),this.changeBlur(_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("blur")),_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj")===void 0?this.changeBgPosition(null,null):this.changeBgPosition(_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj").offx,_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj").offy),this.updateSettingPanelElementStatus()})}updateSettingPanelElementStatus(){let e=document.getElementById("crtImgName");if(e!=null){let s=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj");_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj")===void 0?e.textContent=_constants__WEBPACK_IMPORTED_MODULE_4__.ro.toString():e.textContent=s.name}this.updateOffsetSwitch();let _=document.getElementById("cacheImgNumElement");if(_!=null){const s=this.getCacheImgNum();_.textContent=`[ ${s} ]`}this._updateCheckedElement("onoffInput",_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("activate")),this._updateCheckedElement("autoRefreshInput",_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("autoRefresh")),this._updateSliderElement("opacityInput",_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("opacity")),this._updateSliderElement("blurInput",_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("blur")),this.updateThemeAdaptSwitch(),this._updateCheckedElement("devModeInput",_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("inDev"))}_updateSliderElement(e,_,s=!0){let c=document.getElementById(e);c==null||(c.value=_,s&&c.parentElement.setAttribute("aria-label",_))}_updateCheckedElement(e,_){let s=document.getElementById(e);s==null||(s.checked=_)}updateThemeAdaptSwitch(){const e=document.getElementById("themeAdaptInput"),_=document.getElementById("themeAdaptDes");if(e!=null){const[s,c]=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.CL)();_themeAdapt__WEBPACK_IMPORTED_MODULE_5__.R.includes(c)?(e.disabled=!0,e.checked=!1,_.textContent=this.i18n.themeNoAdaptTitle):(e.disabled=!1,e.checked=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("themeAdapt"),_.textContent=this.i18n.themeAdaptDes)}}updateOffsetSwitch(){let e=document.getElementById("cx"),_=document.getElementById("cy");if(e!=null){let s=document.getElementById("bglayer");if(_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("activate")){const c=parseInt(getComputedStyle(s).height),r=parseInt(getComputedStyle(s).width);let h;_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj")===void 0?(h=cv2.getFullSide(r,c,2458,1383),e.value="50",_.value="50"):h=cv2.getFullSide(r,c,_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj").width,_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj").height),h==="X"?(e.disabled=!0,_.disabled=!1,e.style.setProperty("opacity","0.1"),_.style.removeProperty("opacity")):(_.disabled=!0,e.disabled=!1,_.style.setProperty("opacity","0.1"),e.style.removeProperty("opacity"))}else _.disabled=!0,e.disabled=!0,_.style.setProperty("opacity","0.1"),e.style.setProperty("opacity","0.1")}}getCacheImgNum(){let e,_=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("fileidx");return _===null||_==null?e=0:e=Object.keys(_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("fileidx")).length,e}openSetting(){const e=this.getCacheImgNum(),_=new siyuan__WEBPACK_IMPORTED_MODULE_0__.Dialog({title:`${this.i18n.addTopBarIcon}(v${_plugin_json__WEBPACK_IMPORTED_MODULE_6__.i8}) ${this.i18n.settingLabel}`,width:this.isMobile?"92vw":"max(520px, 50vw)",content:`
            <!--
            // info panel part
            -->
            <label class="fn__flex b3-label">
                <div class="fn__flex-1">
                    ${this.i18n.imgPathLabel}
                    <div class="b3-label__text">
                        <code id="crtImgName" class="fn__code">${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj")===void 0?_constants__WEBPACK_IMPORTED_MODULE_4__.ro:_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj").name}</code>
                    </div>
                </div>
                <div class="fn__flex-center">  
                    <div>
                        <label for="cx">X</label> 
                        <input id="cx" class="b3-slider fn__size50"  max="100" min="0" step="5" type="range" value=${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj")===void 0?"50":_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj").offx}>
                    </div>
                    <div>
                        <label for="cy">Y</label> 
                        <input id="cy" class="b3-slider fn__size50"  max="100" min="0" step="5" type="range" value=${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj")===void 0?"50":_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj").offy}>
                    </div>
                </div>
            </label>
            <label class="fn__flex b3-label">
                <div class="fn__flex-1">
                    <div class="fn__flex">
                        ${this.i18n.cacheDirectoryLabel}
                        <span class="fn__space"></span>
                        <span style="color: var(--b3-theme-on-surface)">${this.i18n.cacheDirectoryDes}</span>
                        <span id="cacheImgNumElement" class="selected" style="color: rgb(255,0,0)">
                            [ ${e} ]
                        </span>
                    </div>
                    <div class="b3-label__text">
                        <a href="file:///${_constants__WEBPACK_IMPORTED_MODULE_4__.YX}/" style="word-break: break-all">${_constants__WEBPACK_IMPORTED_MODULE_4__.YX}</a>
                    </div>
                </div>
                <span class="fn__space"></span>
                <button id="cacheManagerBtn" class="b3-button b3-button--outline fn__flex-center fn__size100" id="appearanceRefresh">
                    <svg><use xlink:href="#iconDatabase"></use></svg>
                    ${this.i18n.cacheManager}
                </button>
            </label>

            <!--
            // onoff switch part
            -->

            <label class="fn__flex b3-label">
                <div class="fn__flex-1">
                    ${this.i18n.openBackgroundLabel}
                    <div class="b3-label__text">
                        ${this.i18n.openBackgroundLabelDes}
                    </div>
                </div>
                <span class="fn__flex-center" />
                <input
                    id="onoffInput"
                    class="b3-switch fn__flex-center"
                    type="checkbox"
                    value="${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("activate")}"
                />
            </label>
            <label class="fn__flex b3-label">
                <div class="fn__flex-1">
                    ${this.i18n.autoRefreshLabel}
                    <div class="b3-label__text">
                        ${this.i18n.autoRefreshDes}
                    </div>
                </div>
                <span class="fn__flex-center" />
                <input
                    id="autoRefreshInput"
                    class="b3-switch fn__flex-center"
                    type="checkbox"
                    value="${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("autoRefresh")}"
                />
            </label>

            <!--
            // slider part Input[4] - Input [5]
            -->

            <label class="fn__flex b3-label config__item">
                <div class="fn__flex-1">
                    ${this.i18n.opacityLabel}
                    <div class="b3-label__text">
                        ${this.i18n.opacityDes}
                    </div>
                </div>
                <div class="b3-tooltips b3-tooltips__n fn__flex-center" aria-label="${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("opacity")}">   
                    <input id="opacityInput" class="b3-slider fn__size200" max="1" min="0.1" step="0.05" type="range" value="${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("opacity")}">
                </div>
            </label>
            <label class="fn__flex b3-label config__item">
                <div class="fn__flex-1">
                    ${this.i18n.blurLabel}
                    <div class="b3-label__text">
                        ${this.i18n.blurDes}
                    </div>
                </div>
                <div class="b3-tooltips b3-tooltips__n fn__flex-center" aria-label="${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("blur")}">   
                    <input id="blurInput" class="b3-slider fn__size200" max="10" min="0" step="1" type="range" value="${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("blur")}">
                </div>
            </label>

            <!--
            // reset panel part, Button[0]
            -->

            <label class="b3-label config__item fn__flex">
                <div class="fn__flex-1">
                ${this.i18n.resetConfigLabel}
                    <div class="b3-label__text">
                        ${this.i18n.resetConfigDes}<span class="selected" style="color:rgb(255,0,0)">${this.i18n.resetConfigDes2}
                        </span>
                    </div>
                </div>
                <span class="fn__space"></span>
                <button id="resetBtn" class="b3-button b3-button--outline fn__flex-center fn__size100" id="appearanceRefresh">
                    <svg><use xlink:href="#iconRefresh"></use></svg>
                    ${this.i18n.reset}
                </button>
            </label>



            <!--
            // debug panel part
            -->

            <label class="fn__flex b3-label config__item">
                <div class="fn__flex-1">
                    ${this.i18n.themeAdaptLabel}
                    <div id="themeAdaptDes" class="b3-label__text">
                        ${this.i18n.themeAdaptDes}
                    </div>
                </div>
                <span class="fn__flex-center" />
                <input
                    id="themeAdaptInput"
                    class="b3-switch fn__flex-center"
                    type="checkbox"
                    value="${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("themeAdapt")}"
                />
            </label>
            <label class="fn__flex b3-label config__item">
                <div class="fn__flex-1">
                    ${this.i18n.inDevModeLabel}
                    <div class="b3-label__text">
                        ${this.i18n.inDevModeDes}
                    </div>
                </div>
                <span class="fn__flex-center" />
                <input
                    id="devModeInput"
                    class="b3-switch fn__flex-center"
                    type="checkbox"
                    value="${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("inDev")}"
                />
            </label>
            `}),s=document.getElementById("cx"),c=document.getElementById("cy");this.updateOffsetSwitch(),window.addEventListener("resize",this.updateOffsetSwitch);let r=[s,c];for(let D=0;D<2;D++)r[D].addEventListener("input",()=>{(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fF)(r,s.value,c.value),this.changeBgPosition(s.value,c.value)}),r[D].addEventListener("change",()=>{let O=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("bgObj");if(O!==void 0){O.offx=s.value,O.offy=c.value,_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("bgObj",O);let P=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("fileidx");P[O.hash]=O,_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("fileidx",P),_configs__WEBPACK_IMPORTED_MODULE_2__.X.save()}});document.getElementById("cacheManagerBtn").addEventListener("click",()=>__async(this,null,function*(){_.destroy(),this.selectPictureByHand()}));const E=document.getElementById("onoffInput");E.checked=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("activate"),E.addEventListener("click",()=>{_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("activate",!_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("activate")),E.value=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("activate"),_configs__WEBPACK_IMPORTED_MODULE_2__.X.save(),this.applySettings()});const f=document.getElementById("autoRefreshInput");f.checked=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("autoRefresh"),f.addEventListener("click",()=>{_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("autoRefresh",!_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("autoRefresh")),f.value=`${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("autoRefresh")}`,_configs__WEBPACK_IMPORTED_MODULE_2__.X.save()});const g=document.getElementById("opacityInput");g.addEventListener("change",()=>{_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("opacity",parseFloat(g.value)),_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("activate")&&this.changeOpacity(_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("opacity"),_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("themeAdapt")),_configs__WEBPACK_IMPORTED_MODULE_2__.X.save()}),g.addEventListener("input",()=>{g.parentElement.setAttribute("aria-label",g.value)});const d=document.getElementById("blurInput");d.addEventListener("change",()=>{_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("blur",parseFloat(d.value)),_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("activate")&&this.changeBlur(_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("blur")),_configs__WEBPACK_IMPORTED_MODULE_2__.X.save()}),d.addEventListener("input",()=>{d.parentElement.setAttribute("aria-label",d.value)}),document.getElementById("resetBtn").addEventListener("click",()=>__async(this,null,function*(){os.rmtree(_constants__WEBPACK_IMPORTED_MODULE_4__.zX),_configs__WEBPACK_IMPORTED_MODULE_2__.X.reset(),yield _configs__WEBPACK_IMPORTED_MODULE_2__.X.save(),yield this.applySettings()}));const C=document.getElementById("themeAdaptInput");this.updateThemeAdaptSwitch(),C.addEventListener("click",()=>{_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("themeAdapt",!_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("themeAdapt")),C.value=`${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("themeAdapt")}`,this.changeOpacity(_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("opacity"),_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("themeAdapt")),_configs__WEBPACK_IMPORTED_MODULE_2__.X.save()});const m=document.getElementById("devModeInput");m.checked=_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("inDev"),m.addEventListener("click",()=>{_configs__WEBPACK_IMPORTED_MODULE_2__.X.set("inDev",!_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("inDev")),m.value=`${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("inDev")}`,_configs__WEBPACK_IMPORTED_MODULE_2__.X.save()})}showMobileTodo(){(0,siyuan__WEBPACK_IMPORTED_MODULE_0__.showMessage)(`${this.i18n.mobileNotSupported}`,1e3,"info")}showIndev(e=""){const _=new siyuan__WEBPACK_IMPORTED_MODULE_0__.Dialog({title:`${this.i18n.inDevTitle}`,content:`<div class="b3-dialog__content">${this.i18n.inDev}<span>${e}</span></div>`,width:this.isMobile?"92vw":"520px"})}bugReportFunction(){const e=new siyuan__WEBPACK_IMPORTED_MODULE_0__.Dialog({title:`${this.i18n.bugReportLabel}`,content:`
            <div class="b3-dialog__content">${this.i18n.bugReportConfirmText}</div>
            <div class="b3-dialog__action">
                <button class="b3-button b3-button--cancel">${this.i18n.cancel}</button><div class="fn__space"></div>
                <button class="b3-button b3-button--text">${this.i18n.confirm}</button>
            </div>
            <div class="b3-dialog__action">
            `,width:this.isMobile?"92vw":"520px"}),_=e.element.querySelectorAll(".b3-button");_[0].addEventListener("click",()=>{e.destroy()}),_[1].addEventListener("click",()=>{window.open("https://github.com/HowcanoeWang/siyuan-plugin-background-cover/issues","_blank"),e.destroy()})}addMenu(e){const _=new siyuan__WEBPACK_IMPORTED_MODULE_0__.Menu("topBarSample",()=>{});_.addItem({icon:"iconIndent",label:`${this.i18n.selectPictureLabel}`,type:"submenu",submenu:[{icon:"iconHand",label:`${this.i18n.selectPictureManualLabel}`,accelerator:this.commands[0].customHotkey,click:()=>{this.selectPictureByHand()}},{icon:"iconMark",label:`${this.i18n.selectPictureRandomLabel}`,accelerator:this.commands[1].customHotkey,click:()=>{this.selectPictureRandom(!0)}}]}),_.addItem({icon:"iconAdd",label:`${this.i18n.addImageLabel}`,type:"submenu",submenu:[{icon:"iconImage",label:`${this.i18n.addSingleImageLabel}`,click:()=>{this.addSingleLocalImageFile()}},{icon:"iconFolder",label:`${this.i18n.addDirectoryLabel}`,click:()=>{this.addDirectory()}}]}),_.addItem({id:"pluginOnOffMenu",icon:`${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("activate")?"iconClose":"iconSelect"}`,label:`${_configs__WEBPACK_IMPORTED_MODULE_2__.X.get("activate")?this.i18n.closeBackgroundLabel:this.i18n.openBackgroundLabel}`,accelerator:this.commands[2].customHotkey,click:()=>{this.pluginOnOff()}}),_.addSeparator(),_.addItem({icon:"iconGithub",label:`${this.i18n.bugReportLabel}`,click:()=>{this.bugReportFunction()}}),_.addItem({icon:"iconSettings",label:`${this.i18n.settingLabel}`,click:()=>{this.openSetting()}}),this.isMobile?_.fullscreen():_.open({x:e.right,y:e.bottom,isLeft:!0})}}})(),module.exports=__webpack_exports__})();
