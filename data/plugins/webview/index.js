"use strict";var ci=Object.defineProperty;var fi=(e,t,o)=>t in e?ci(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var Z=(e,t,o)=>(fi(e,typeof t!="symbol"?t+"":t,o),o);const me=require("siyuan"),it=mo(),Ve=hi();gi();const pn=mi();function pi(){return!!globalThis.require}function di(){return!!globalThis.process}function mo(){return di()&&pi()}function hi(){switch(me.getFrontend()){case"desktop":case"desktop-window":case"browser-desktop":return!0;case"mobile":case"browser-mobile":return!1;default:return!1}}function mi(){switch(me.getFrontend()){case"mobile":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"browser-desktop":return!1;default:return!1}}function gi(){switch(me.getFrontend()){case"browser-desktop":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"mobile":return!1;default:return!1}}class _i{constructor(t,o=!0){this.label=t,this.collapsed=o}stdout(t,...o){const n=`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${t.name.toUpperCase()}\x1B[0m>`;this.collapsed?globalThis.console.groupCollapsed(n):globalThis.console.group(n),t(...o),globalThis.console.trace(),globalThis.console.groupEnd()}dir(...t){this.stdout(globalThis.console.dir,...t)}table(...t){this.stdout(globalThis.console.table,...t)}debug(...t){this.stdout(globalThis.console.debug,...t)}info(...t){this.stdout(globalThis.console.info,...t)}log(...t){this.stdout(globalThis.console.log,...t)}warn(...t){this.stdout(globalThis.console.warn,...t)}error(...t){this.stdout(globalThis.console.error,...t)}}function dn(e,t){return e.button===t.button&&e.type===t.type&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey&&e.shiftKey===t.shiftKey}function bi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wi=function(t){return ki(t)&&!yi(t)};function ki(e){return!!e&&typeof e=="object"}function yi(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||vi(e)}var $i=typeof Symbol=="function"&&Symbol.for,Si=$i?Symbol.for("react.element"):60103;function vi(e){return e.$$typeof===Si}function Ei(e){return Array.isArray(e)?[]:{}}function Qe(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Ie(Ei(e),e,t):e}function Ti(e,t,o){return e.concat(t).map(function(n){return Qe(n,o)})}function Oi(e,t){if(!t.customMerge)return Ie;var o=t.customMerge(e);return typeof o=="function"?o:Ie}function Bi(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function hn(e){return Object.keys(e).concat(Bi(e))}function go(e,t){try{return t in e}catch{return!1}}function Ni(e,t){return go(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function Ai(e,t,o){var n={};return o.isMergeableObject(e)&&hn(e).forEach(function(i){n[i]=Qe(e[i],o)}),hn(t).forEach(function(i){Ni(e,i)||(go(e,i)&&o.isMergeableObject(t[i])?n[i]=Oi(i,o)(e[i],t[i],o):n[i]=Qe(t[i],o))}),n}function Ie(e,t,o){o=o||{},o.arrayMerge=o.arrayMerge||Ti,o.isMergeableObject=o.isMergeableObject||wi,o.cloneUnlessOtherwiseSpecified=Qe;var n=Array.isArray(t),i=Array.isArray(e),s=n===i;return s?n?o.arrayMerge(e,t,o):Ai(e,t,o):Qe(t,o)}Ie.all=function(t,o){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return Ie(n,i,o)},{})};var Ci=Ie,Ri=Ci;const Mi=bi(Ri);function ft(...e){return Mi.all(e)}function mn(e){const t=e.getBoundingClientRect(),o=globalThis.mozInnerScreenX??globalThis.screenX,n=globalThis.mozInnerscreenY??globalThis.screenY;return{x:o+t.x,y:n+t.y,centerX:o+t.x+Math.round(t.width/2),centerY:n+t.y+Math.round(t.height/2),left:o+t.left,right:o+t.right,top:n+t.top,bottom:n+t.bottom}}const We={id:/^\d{14}\-[0-9a-z]{7}$/,url:/^siyuan:\/\/blocks\/(\d{14}\-[0-9a-z]{7})/};function Di(e){const t=e.composedPath();for(let o=0;o<t.length;++o){const n=t[o].dataset;if(n)switch(!0){case(n.nodeId&&We.id.test(n.nodeId)):return n.nodeId;case(n.id&&We.id.test(n.id)):return n.id;case(n.oid&&We.id.test(n.oid)):return n.oid;case(n.rootId&&We.id.test(n.rootId)):return n.rootId}}}var ke=(e=>(e[e.window=0]="window",e[e.app=1]="app",e[e.desktop=2]="desktop",e[e.mobile=3]="mobile",e))(ke||{}),Pt=(e=>(e.window="/stage/build/app/window.html",e.app="/stage/build/app",e.desktop="/stage/build/desktop",e.mobile="/stage/build/mobile",e))(Pt||{});function Tt(e){switch(e){case ke.window:return"/stage/build/app/window.html";case ke.app:return"/stage/build/app";case ke.desktop:return"/stage/build/desktop";case ke.mobile:return"/stage/build/mobile"}}function ze(e,t,o=globalThis.origin){const n=new URL(o);return n.pathname=e,t!=null&&t.id&&n.searchParams.set("id",t.id),(t==null?void 0:t.focus)!==void 0&&n.searchParams.set("focus",t.focus?"1":"0"),t!=null&&t.url&&n.searchParams.set("url",t.url),n}function gn(e){return We.url.test(e.href)?{id:We.url.exec(e.href)[1],focus:e.searchParams.get("focus")==="1"}:null}function Pi(e){switch(e.startsWith("/")&&(e=e.substring(1)),!0){case e.startsWith("stage/"):case e.startsWith("appearance/"):case e.startsWith("export/"):case e.startsWith("history/"):case e.startsWith("assets/"):case e.startsWith("emojies/"):case e.startsWith("plugins/"):case e.startsWith("plugins/"):case e.startsWith("snippets/"):case e.startsWith("templates/"):case e.startsWith("widgets/"):return!0;default:return!1}}var Li=Object.defineProperty,Fi=(e,t,o)=>t in e?Li(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,gt=(e,t,o)=>(Fi(e,typeof t!="symbol"?t+"":t,o),o);function _o(e,t){return function(){return e.apply(t,arguments)}}const{toString:Wi}=Object.prototype,{getPrototypeOf:zt}=Object,_t=(e=>t=>{const o=Wi.call(t);return e[o]||(e[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),Se=e=>(e=e.toLowerCase(),t=>_t(t)===e),bt=e=>t=>typeof t===e,{isArray:Ue}=Array,Ze=bt("undefined");function ji(e){return e!==null&&!Ze(e)&&e.constructor!==null&&!Ze(e.constructor)&&ge(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const bo=Se("ArrayBuffer");function qi(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&bo(e.buffer),t}const Ii=bt("string"),ge=bt("function"),wo=bt("number"),wt=e=>e!==null&&typeof e=="object",Ki=e=>e===!0||e===!1,rt=e=>{if(_t(e)!=="object")return!1;const t=zt(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ui=Se("Date"),Hi=Se("File"),Vi=Se("Blob"),zi=Se("FileList"),Gi=e=>wt(e)&&ge(e.pipe),Yi=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ge(e.append)&&((t=_t(e))==="formdata"||t==="object"&&ge(e.toString)&&e.toString()==="[object FormData]"))},Ji=Se("URLSearchParams"),Xi=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function et(e,t,{allOwnKeys:o=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),Ue(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const s=o?Object.getOwnPropertyNames(e):Object.keys(e),r=s.length;let l;for(n=0;n<r;n++)l=s[n],t.call(null,e[l],l,e)}}function ko(e,t){t=t.toLowerCase();const o=Object.keys(e);let n=o.length,i;for(;n-- >0;)if(i=o[n],t===i.toLowerCase())return i;return null}const yo=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),$o=e=>!Ze(e)&&e!==yo;function Lt(){const{caseless:e}=$o(this)&&this||{},t={},o=(n,i)=>{const s=e&&ko(t,i)||i;rt(t[s])&&rt(n)?t[s]=Lt(t[s],n):rt(n)?t[s]=Lt({},n):Ue(n)?t[s]=n.slice():t[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&et(arguments[n],o);return t}const Qi=(e,t,o,{allOwnKeys:n}={})=>(et(t,(i,s)=>{o&&ge(i)?e[s]=_o(i,o):e[s]=i},{allOwnKeys:n}),e),Zi=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),xi=(e,t,o,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),o&&Object.assign(e.prototype,o)},es=(e,t,o,n)=>{let i,s,r;const l={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)r=i[s],(!n||n(r,e,t))&&!l[r]&&(t[r]=e[r],l[r]=!0);e=o!==!1&&zt(e)}while(e&&(!o||o(e,t))&&e!==Object.prototype);return t},ts=(e,t,o)=>{e=String(e),(o===void 0||o>e.length)&&(o=e.length),o-=t.length;const n=e.indexOf(t,o);return n!==-1&&n===o},ns=e=>{if(!e)return null;if(Ue(e))return e;let t=e.length;if(!wo(t))return null;const o=new Array(t);for(;t-- >0;)o[t]=e[t];return o},os=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&zt(Uint8Array)),is=(e,t)=>{const o=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=o.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},ss=(e,t)=>{let o;const n=[];for(;(o=e.exec(t))!==null;)n.push(o);return n},rs=Se("HTMLFormElement"),as=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,o,n){return o.toUpperCase()+n}),_n=(({hasOwnProperty:e})=>(t,o)=>e.call(t,o))(Object.prototype),ls=Se("RegExp"),So=(e,t)=>{const o=Object.getOwnPropertyDescriptors(e),n={};et(o,(i,s)=>{t(i,s,e)!==!1&&(n[s]=i)}),Object.defineProperties(e,n)},us=e=>{So(e,(t,o)=>{if(ge(e)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const n=e[o];if(ge(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},cs=(e,t)=>{const o={},n=i=>{i.forEach(s=>{o[s]=!0})};return Ue(e)?n(e):n(String(e).split(t)),o},fs=()=>{},ps=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Ot="abcdefghijklmnopqrstuvwxyz",bn="0123456789",vo={DIGIT:bn,ALPHA:Ot,ALPHA_DIGIT:Ot+Ot.toUpperCase()+bn},ds=(e=16,t=vo.ALPHA_DIGIT)=>{let o="";const{length:n}=t;for(;e--;)o+=t[Math.random()*n|0];return o};function hs(e){return!!(e&&ge(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const ms=e=>{const t=new Array(10),o=(n,i)=>{if(wt(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const s=Ue(n)?[]:{};return et(n,(r,l)=>{const a=o(r,i+1);!Ze(a)&&(s[l]=a)}),t[i]=void 0,s}}return n};return o(e,0)},gs=Se("AsyncFunction"),_s=e=>e&&(wt(e)||ge(e))&&ge(e.then)&&ge(e.catch),w={isArray:Ue,isArrayBuffer:bo,isBuffer:ji,isFormData:Yi,isArrayBufferView:qi,isString:Ii,isNumber:wo,isBoolean:Ki,isObject:wt,isPlainObject:rt,isUndefined:Ze,isDate:Ui,isFile:Hi,isBlob:Vi,isRegExp:ls,isFunction:ge,isStream:Gi,isURLSearchParams:Ji,isTypedArray:os,isFileList:zi,forEach:et,merge:Lt,extend:Qi,trim:Xi,stripBOM:Zi,inherits:xi,toFlatObject:es,kindOf:_t,kindOfTest:Se,endsWith:ts,toArray:ns,forEachEntry:is,matchAll:ss,isHTMLForm:rs,hasOwnProperty:_n,hasOwnProp:_n,reduceDescriptors:So,freezeMethods:us,toObjectSet:cs,toCamelCase:as,noop:fs,toFiniteNumber:ps,findKey:ko,global:yo,isContextDefined:$o,ALPHABET:vo,generateString:ds,isSpecCompliantForm:hs,toJSONObject:ms,isAsyncFn:gs,isThenable:_s};function U(e,t,o,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),o&&(this.config=o),n&&(this.request=n),i&&(this.response=i)}w.inherits(U,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:w.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Eo=U.prototype,To={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{To[e]={value:e}});Object.defineProperties(U,To);Object.defineProperty(Eo,"isAxiosError",{value:!0});U.from=(e,t,o,n,i,s)=>{const r=Object.create(Eo);return w.toFlatObject(e,r,function(l){return l!==Error.prototype},l=>l!=="isAxiosError"),U.call(r,e.message,t,o,n,i),r.cause=e,r.name=e.name,s&&Object.assign(r,s),r};const bs=null;function Ft(e){return w.isPlainObject(e)||w.isArray(e)}function Oo(e){return w.endsWith(e,"[]")?e.slice(0,-2):e}function wn(e,t,o){return e?e.concat(t).map(function(n,i){return n=Oo(n),!o&&i?"["+n+"]":n}).join(o?".":""):t}function ws(e){return w.isArray(e)&&!e.some(Ft)}const ks=w.toFlatObject(w,{},null,function(e){return/^is[A-Z]/.test(e)});function kt(e,t,o){if(!w.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,o=w.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,f){return!w.isUndefined(f[p])});const n=o.metaTokens,i=o.visitor||u,s=o.dots,r=o.indexes,l=(o.Blob||typeof Blob<"u"&&Blob)&&w.isSpecCompliantForm(t);if(!w.isFunction(i))throw new TypeError("visitor must be a function");function a(p){if(p===null)return"";if(w.isDate(p))return p.toISOString();if(!l&&w.isBlob(p))throw new U("Blob is not supported. Use a Buffer instead.");return w.isArrayBuffer(p)||w.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,f,c){let m=p;if(p&&!c&&typeof p=="object"){if(w.endsWith(f,"{}"))f=n?f:f.slice(0,-2),p=JSON.stringify(p);else if(w.isArray(p)&&ws(p)||(w.isFileList(p)||w.endsWith(f,"[]"))&&(m=w.toArray(p)))return f=Oo(f),m.forEach(function($,H){!(w.isUndefined($)||$===null)&&t.append(r===!0?wn([f],H,s):r===null?f:f+"[]",a($))}),!1}return Ft(p)?!0:(t.append(wn(c,f,s),a(p)),!1)}const d=[],h=Object.assign(ks,{defaultVisitor:u,convertValue:a,isVisitable:Ft});function g(p,f){if(!w.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+f.join("."));d.push(p),w.forEach(p,function(c,m){(!(w.isUndefined(c)||c===null)&&i.call(t,c,w.isString(m)?m.trim():m,f,h))===!0&&g(c,f?f.concat(m):[m])}),d.pop()}}if(!w.isObject(e))throw new TypeError("data must be an object");return g(e),t}function kn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function Gt(e,t){this._pairs=[],e&&kt(e,this,t)}const Bo=Gt.prototype;Bo.append=function(e,t){this._pairs.push([e,t])};Bo.toString=function(e){const t=e?function(o){return e.call(this,o,kn)}:kn;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function ys(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function No(e,t,o){if(!t)return e;const n=o&&o.encode||ys,i=o&&o.serialize;let s;if(i?s=i(t,o):s=w.isURLSearchParams(t)?t.toString():new Gt(t,o).toString(n),s){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class $s{constructor(){this.handlers=[]}use(t,o,n){return this.handlers.push({fulfilled:t,rejected:o,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){w.forEach(this.handlers,function(o){o!==null&&t(o)})}}const yn=$s,Ao={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ss=typeof URLSearchParams<"u"?URLSearchParams:Gt,vs=typeof FormData<"u"?FormData:null,Es=typeof Blob<"u"?Blob:null,Ts=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Os=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ye={isBrowser:!0,classes:{URLSearchParams:Ss,FormData:vs,Blob:Es},isStandardBrowserEnv:Ts,isStandardBrowserWebWorkerEnv:Os,protocols:["http","https","file","blob","url","data"]};function Bs(e,t){return kt(e,new ye.classes.URLSearchParams,Object.assign({visitor:function(o,n,i,s){return ye.isNode&&w.isBuffer(o)?(this.append(n,o.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function Ns(e){return w.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function As(e){const t={},o=Object.keys(e);let n;const i=o.length;let s;for(n=0;n<i;n++)s=o[n],t[s]=e[s];return t}function Co(e){function t(o,n,i,s){let r=o[s++];const l=Number.isFinite(+r),a=s>=o.length;return r=!r&&w.isArray(i)?i.length:r,a?(w.hasOwnProp(i,r)?i[r]=[i[r],n]:i[r]=n,!l):((!i[r]||!w.isObject(i[r]))&&(i[r]=[]),t(o,n,i[r],s)&&w.isArray(i[r])&&(i[r]=As(i[r])),!l)}if(w.isFormData(e)&&w.isFunction(e.entries)){const o={};return w.forEachEntry(e,(n,i)=>{t(Ns(n),i,o,0)}),o}return null}const Cs={"Content-Type":void 0};function Rs(e,t,o){if(w.isString(e))try{return(t||JSON.parse)(e),w.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(o||JSON.stringify)(e)}const yt={transitional:Ao,adapter:["xhr","http"],transformRequest:[function(e,t){const o=t.getContentType()||"",n=o.indexOf("application/json")>-1,i=w.isObject(e);if(i&&w.isHTMLForm(e)&&(e=new FormData(e)),w.isFormData(e))return n&&n?JSON.stringify(Co(e)):e;if(w.isArrayBuffer(e)||w.isBuffer(e)||w.isStream(e)||w.isFile(e)||w.isBlob(e))return e;if(w.isArrayBufferView(e))return e.buffer;if(w.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return Bs(e,this.formSerializer).toString();if((s=w.isFileList(e))||o.indexOf("multipart/form-data")>-1){const r=this.env&&this.env.FormData;return kt(s?{"files[]":e}:e,r&&new r,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),Rs(e)):e}],transformResponse:[function(e){const t=this.transitional||yt.transitional,o=t&&t.forcedJSONParsing,n=this.responseType==="json";if(e&&w.isString(e)&&(o&&!this.responseType||n)){const i=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(s){if(i)throw s.name==="SyntaxError"?U.from(s,U.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ye.classes.FormData,Blob:ye.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};w.forEach(["delete","get","head"],function(e){yt.headers[e]={}});w.forEach(["post","put","patch"],function(e){yt.headers[e]=w.merge(Cs)});const Yt=yt,Ms=w.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ds=e=>{const t={};let o,n,i;return e&&e.split(`
`).forEach(function(s){i=s.indexOf(":"),o=s.substring(0,i).trim().toLowerCase(),n=s.substring(i+1).trim(),!(!o||t[o]&&Ms[o])&&(o==="set-cookie"?t[o]?t[o].push(n):t[o]=[n]:t[o]=t[o]?t[o]+", "+n:n)}),t},$n=Symbol("internals");function Ge(e){return e&&String(e).trim().toLowerCase()}function at(e){return e===!1||e==null?e:w.isArray(e)?e.map(at):String(e)}function Ps(e){const t=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=o.exec(e);)t[n[1]]=n[2];return t}const Ls=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Bt(e,t,o,n,i){if(w.isFunction(n))return n.call(this,t,o);if(i&&(t=o),!!w.isString(t)){if(w.isString(n))return t.indexOf(n)!==-1;if(w.isRegExp(n))return n.test(t)}}function Fs(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,o,n)=>o.toUpperCase()+n)}function Ws(e,t){const o=w.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+o,{value:function(i,s,r){return this[n].call(this,t,i,s,r)},configurable:!0})})}let $t=class{constructor(e){e&&this.set(e)}set(e,t,o){const n=this;function i(r,l,a){const u=Ge(l);if(!u)throw new Error("header name must be a non-empty string");const d=w.findKey(n,u);(!d||n[d]===void 0||a===!0||a===void 0&&n[d]!==!1)&&(n[d||l]=at(r))}const s=(r,l)=>w.forEach(r,(a,u)=>i(a,u,l));return w.isPlainObject(e)||e instanceof this.constructor?s(e,t):w.isString(e)&&(e=e.trim())&&!Ls(e)?s(Ds(e),t):e!=null&&i(t,e,o),this}get(e,t){if(e=Ge(e),e){const o=w.findKey(this,e);if(o){const n=this[o];if(!t)return n;if(t===!0)return Ps(n);if(w.isFunction(t))return t.call(this,n,o);if(w.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ge(e),e){const o=w.findKey(this,e);return!!(o&&this[o]!==void 0&&(!t||Bt(this,this[o],o,t)))}return!1}delete(e,t){const o=this;let n=!1;function i(s){if(s=Ge(s),s){const r=w.findKey(o,s);r&&(!t||Bt(o,o[r],r,t))&&(delete o[r],n=!0)}}return w.isArray(e)?e.forEach(i):i(e),n}clear(e){const t=Object.keys(this);let o=t.length,n=!1;for(;o--;){const i=t[o];(!e||Bt(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){const t=this,o={};return w.forEach(this,(n,i)=>{const s=w.findKey(o,i);if(s){t[s]=at(n),delete t[i];return}const r=e?Fs(i):String(i).trim();r!==i&&delete t[i],t[r]=at(n),o[r]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return w.forEach(this,(o,n)=>{o!=null&&o!==!1&&(t[n]=e&&w.isArray(o)?o.join(", "):o)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const o=new this(e);return t.forEach(n=>o.set(n)),o}static accessor(e){const t=(this[$n]=this[$n]={accessors:{}}).accessors,o=this.prototype;function n(i){const s=Ge(i);t[s]||(Ws(o,i),t[s]=!0)}return w.isArray(e)?e.forEach(n):n(e),this}};$t.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);w.freezeMethods($t.prototype);w.freezeMethods($t);const Be=$t;function Nt(e,t){const o=this||Yt,n=t||o,i=Be.from(n.headers);let s=n.data;return w.forEach(e,function(r){s=r.call(o,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function Ro(e){return!!(e&&e.__CANCEL__)}function tt(e,t,o){U.call(this,e??"canceled",U.ERR_CANCELED,t,o),this.name="CanceledError"}w.inherits(tt,U,{__CANCEL__:!0});function js(e,t,o){const n=o.config.validateStatus;!o.status||!n||n(o.status)?e(o):t(new U("Request failed with status code "+o.status,[U.ERR_BAD_REQUEST,U.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}const qs=ye.isStandardBrowserEnv?function(){return{write:function(e,t,o,n,i,s){const r=[];r.push(e+"="+encodeURIComponent(t)),w.isNumber(o)&&r.push("expires="+new Date(o).toGMTString()),w.isString(n)&&r.push("path="+n),w.isString(i)&&r.push("domain="+i),s===!0&&r.push("secure"),document.cookie=r.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Is(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ks(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Mo(e,t){return e&&!Is(t)?Ks(e,t):t}const Us=ye.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let o;function n(i){let s=i;return e&&(t.setAttribute("href",s),s=t.href),t.setAttribute("href",s),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return o=n(window.location.href),function(i){const s=w.isString(i)?n(i):i;return s.protocol===o.protocol&&s.host===o.host}}():function(){return function(){return!0}}();function Hs(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Vs(e,t){e=e||10;const o=new Array(e),n=new Array(e);let i=0,s=0,r;return t=t!==void 0?t:1e3,function(l){const a=Date.now(),u=n[s];r||(r=a),o[i]=l,n[i]=a;let d=s,h=0;for(;d!==i;)h+=o[d++],d=d%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),a-r<t)return;const g=u&&a-u;return g?Math.round(h*1e3/g):void 0}}function Sn(e,t){let o=0;const n=Vs(50,250);return i=>{const s=i.loaded,r=i.lengthComputable?i.total:void 0,l=s-o,a=n(l),u=s<=r;o=s;const d={loaded:s,total:r,progress:r?s/r:void 0,bytes:l,rate:a||void 0,estimated:a&&r&&u?(r-s)/a:void 0,event:i};d[t?"download":"upload"]=!0,e(d)}}const zs=typeof XMLHttpRequest<"u",Gs=zs&&function(e){return new Promise(function(t,o){let n=e.data;const i=Be.from(e.headers).normalize(),s=e.responseType;let r;function l(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}w.isFormData(n)&&(ye.isStandardBrowserEnv||ye.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.setContentType("multipart/form-data;",!1));let a=new XMLHttpRequest;if(e.auth){const g=e.auth.username||"",p=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(g+":"+p))}const u=Mo(e.baseURL,e.url);a.open(e.method.toUpperCase(),No(u,e.params,e.paramsSerializer),!0),a.timeout=e.timeout;function d(){if(!a)return;const g=Be.from("getAllResponseHeaders"in a&&a.getAllResponseHeaders()),p={data:!s||s==="text"||s==="json"?a.responseText:a.response,status:a.status,statusText:a.statusText,headers:g,config:e,request:a};js(function(f){t(f),l()},function(f){o(f),l()},p),a=null}if("onloadend"in a?a.onloadend=d:a.onreadystatechange=function(){!a||a.readyState!==4||a.status===0&&!(a.responseURL&&a.responseURL.indexOf("file:")===0)||setTimeout(d)},a.onabort=function(){a&&(o(new U("Request aborted",U.ECONNABORTED,e,a)),a=null)},a.onerror=function(){o(new U("Network Error",U.ERR_NETWORK,e,a)),a=null},a.ontimeout=function(){let g=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const p=e.transitional||Ao;e.timeoutErrorMessage&&(g=e.timeoutErrorMessage),o(new U(g,p.clarifyTimeoutError?U.ETIMEDOUT:U.ECONNABORTED,e,a)),a=null},ye.isStandardBrowserEnv){const g=(e.withCredentials||Us(u))&&e.xsrfCookieName&&qs.read(e.xsrfCookieName);g&&i.set(e.xsrfHeaderName,g)}n===void 0&&i.setContentType(null),"setRequestHeader"in a&&w.forEach(i.toJSON(),function(g,p){a.setRequestHeader(p,g)}),w.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),s&&s!=="json"&&(a.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&a.addEventListener("progress",Sn(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&a.upload&&a.upload.addEventListener("progress",Sn(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=g=>{a&&(o(!g||g.type?new tt(null,e,a):g),a.abort(),a=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));const h=Hs(u);if(h&&ye.protocols.indexOf(h)===-1){o(new U("Unsupported protocol "+h+":",U.ERR_BAD_REQUEST,e));return}a.send(n||null)})},lt={http:bs,xhr:Gs};w.forEach(lt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ys={getAdapter:e=>{e=w.isArray(e)?e:[e];const{length:t}=e;let o,n;for(let i=0;i<t&&(o=e[i],!(n=w.isString(o)?lt[o.toLowerCase()]:o));i++);if(!n)throw n===!1?new U(`Adapter ${o} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(w.hasOwnProp(lt,o)?`Adapter '${o}' is not available in the build`:`Unknown adapter '${o}'`);if(!w.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:lt};function At(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tt(null,e)}function vn(e){return At(e),e.headers=Be.from(e.headers),e.data=Nt.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ys.getAdapter(e.adapter||Yt.adapter)(e).then(function(t){return At(e),t.data=Nt.call(e,e.transformResponse,t),t.headers=Be.from(t.headers),t},function(t){return Ro(t)||(At(e),t&&t.response&&(t.response.data=Nt.call(e,e.transformResponse,t.response),t.response.headers=Be.from(t.response.headers))),Promise.reject(t)})}const En=e=>e instanceof Be?e.toJSON():e;function Ke(e,t){t=t||{};const o={};function n(u,d,h){return w.isPlainObject(u)&&w.isPlainObject(d)?w.merge.call({caseless:h},u,d):w.isPlainObject(d)?w.merge({},d):w.isArray(d)?d.slice():d}function i(u,d,h){if(w.isUndefined(d)){if(!w.isUndefined(u))return n(void 0,u,h)}else return n(u,d,h)}function s(u,d){if(!w.isUndefined(d))return n(void 0,d)}function r(u,d){if(w.isUndefined(d)){if(!w.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function l(u,d,h){if(h in t)return n(u,d);if(h in e)return n(void 0,u)}const a={url:s,method:s,data:s,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:l,headers:(u,d)=>i(En(u),En(d),!0)};return w.forEach(Object.keys(Object.assign({},e,t)),function(u){const d=a[u]||i,h=d(e[u],t[u],u);w.isUndefined(h)&&d!==l||(o[u]=h)}),o}const Do="1.4.0",Jt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Jt[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const Tn={};Jt.transitional=function(e,t,o){function n(i,s){return"[Axios v"+Do+"] Transitional option '"+i+"'"+s+(o?". "+o:"")}return(i,s,r)=>{if(e===!1)throw new U(n(s," has been removed"+(t?" in "+t:"")),U.ERR_DEPRECATED);return t&&!Tn[s]&&(Tn[s]=!0,console.warn(n(s," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,s,r):!0}};function Js(e,t,o){if(typeof e!="object")throw new U("options must be an object",U.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const s=n[i],r=t[s];if(r){const l=e[s],a=l===void 0||r(l,s,e);if(a!==!0)throw new U("option "+s+" must be "+a,U.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new U("Unknown option "+s,U.ERR_BAD_OPTION)}}const Wt={assertOptions:Js,validators:Jt},Ne=Wt.validators;let pt=class{constructor(e){this.defaults=e,this.interceptors={request:new yn,response:new yn}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ke(this.defaults,t);const{transitional:o,paramsSerializer:n,headers:i}=t;o!==void 0&&Wt.assertOptions(o,{silentJSONParsing:Ne.transitional(Ne.boolean),forcedJSONParsing:Ne.transitional(Ne.boolean),clarifyTimeoutError:Ne.transitional(Ne.boolean)},!1),n!=null&&(w.isFunction(n)?t.paramsSerializer={serialize:n}:Wt.assertOptions(n,{encode:Ne.function,serialize:Ne.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s;s=i&&w.merge(i.common,i[t.method]),s&&w.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),t.headers=Be.concat(s,i);const r=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(t)===!1||(l=l&&p.synchronous,r.unshift(p.fulfilled,p.rejected))});const a=[];this.interceptors.response.forEach(function(p){a.push(p.fulfilled,p.rejected)});let u,d=0,h;if(!l){const p=[vn.bind(this),void 0];for(p.unshift.apply(p,r),p.push.apply(p,a),h=p.length,u=Promise.resolve(t);d<h;)u=u.then(p[d++],p[d++]);return u}h=r.length;let g=t;for(d=0;d<h;){const p=r[d++],f=r[d++];try{g=p(g)}catch(c){f.call(this,c);break}}try{u=vn.call(this,g)}catch(p){return Promise.reject(p)}for(d=0,h=a.length;d<h;)u=u.then(a[d++],a[d++]);return u}getUri(e){e=Ke(this.defaults,e);const t=Mo(e.baseURL,e.url);return No(t,e.params,e.paramsSerializer)}};w.forEach(["delete","get","head","options"],function(e){pt.prototype[e]=function(t,o){return this.request(Ke(o||{},{method:e,url:t,data:(o||{}).data}))}});w.forEach(["post","put","patch"],function(e){function t(o){return function(n,i,s){return this.request(Ke(s||{},{method:e,headers:o?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}pt.prototype[e]=t(),pt.prototype[e+"Form"]=t(!0)});const ut=pt;let Xs=class Po{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(i){o=i});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const r=new Promise(l=>{n.subscribe(l),s=l}).then(i);return r.cancel=function(){n.unsubscribe(s)},r},t(function(i,s,r){n.reason||(n.reason=new tt(i,s,r),o(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const o=this._listeners.indexOf(t);o!==-1&&this._listeners.splice(o,1)}static source(){let t;return{token:new Po(function(o){t=o}),cancel:t}}};const Qs=Xs;function Zs(e){return function(t){return e.apply(null,t)}}function xs(e){return w.isObject(e)&&e.isAxiosError===!0}const jt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jt).forEach(([e,t])=>{jt[t]=e});const er=jt;function Lo(e){const t=new ut(e),o=_o(ut.prototype.request,t);return w.extend(o,ut.prototype,t,{allOwnKeys:!0}),w.extend(o,t,null,{allOwnKeys:!0}),o.create=function(n){return Lo(Ke(e,n))},o}const te=Lo(Yt);te.Axios=ut;te.CanceledError=tt;te.CancelToken=Qs;te.isCancel=Ro;te.VERSION=Do;te.toFormData=kt;te.AxiosError=U;te.Cancel=te.CanceledError;te.all=function(e){return Promise.all(e)};te.spread=Zs;te.isAxiosError=xs;te.mergeConfig=Ke;te.AxiosHeaders=Be;te.formToJSON=e=>Co(w.isHTMLForm(e)?new FormData(e):e);te.HttpStatusCode=er;te.default=te;const Fo=te,{Axios:Rl,AxiosError:Ml,CanceledError:Dl,isCancel:Pl,CancelToken:Ll,VERSION:Fl,all:Wl,Cancel:jl,isAxiosError:ql,spread:Il,toFormData:Kl,AxiosHeaders:Ul,HttpStatusCode:tr,formToJSON:Hl,mergeConfig:Vl}=Fo,Ct={SCHEMA_DIR_RELATIVE_PATH:"./../schemas/",SCHEMA_FILENAME_PAYLOAD:"payload.schema.json",SCHEMA_FILENAME_RESPONSE:"response.schema.json",SIYUAN_DEFAULT_BASE_URL:"http://localhost:6806/",SIYUAN_DEFAULT_TOKEN:"",REQUEST_TIMEOUT:6e4};class nr extends Error{constructor(t){super(t.statusText),gt(this,"status"),this.response=t,this.status=t.status}}class or extends Error{constructor(t,o){super(t.msg),gt(this,"code"),this.body=t,this.response=o,this.code=t.code}}var On,Bn;const y=class{constructor(e={}){gt(this,"_axios",Fo.create({baseURL:((On=globalThis.document)==null?void 0:On.baseURI)??((Bn=globalThis.location)==null?void 0:Bn.origin)??Ct.SIYUAN_DEFAULT_BASE_URL,timeout:Ct.REQUEST_TIMEOUT,headers:{Authorization:`Token ${Ct.SIYUAN_DEFAULT_TOKEN}`}})),this.updateOptions(e)}updateOptions(e){for(const[t,o]of Object.entries(e))switch(t){case"token":this._axios.defaults.headers.Authorization=`Token ${e.token}`;break;default:this._axios.defaults[t]=o;break}}async getBookmarkLabels(e){return await this._request(y.api.attr.getBookmarkLabels.pathname,y.api.attr.getBookmarkLabels.method,void 0,e)}async getBlockBreadcrumb(e,t){return await this._request(y.api.block.getBlockBreadcrumb.pathname,y.api.block.getBlockBreadcrumb.method,e,t)}async getDocInfo(e,t){return await this._request(y.api.block.getDocInfo.pathname,y.api.block.getDocInfo.method,e,t)}async listDocsByPath(e,t){return await this._request(y.api.filetree.listDocsByPath.pathname,y.api.filetree.listDocsByPath.method,e,t)}async searchDocs(e,t){return await this._request(y.api.filetree.searchDocs.pathname,y.api.filetree.searchDocs.method,e,t)}async fullTextSearchBlock(e,t){return await this._request(y.api.search.fullTextSearchBlock.pathname,y.api.search.fullTextSearchBlock.method,e,t)}async getRecentDocs(e){return await this._request(y.api.storage.getRecentDocs.pathname,y.api.storage.getRecentDocs.method,void 0,e)}async getConf(e){return await this._request(y.api.system.getConf.pathname,y.api.system.getConf.method,void 0,e)}async upload(e,t){const o=new FormData;return o.append("assetsDirPath",e.assetsDirPath??"/assets/"),e.files.forEach(n=>o.append("file[]",n)),await this._request(y.api.asset.upload.pathname,y.api.asset.upload.method,o,t)}async getBlockAttrs(e,t){return await this._request(y.api.attr.getBlockAttrs.pathname,y.api.attr.getBlockAttrs.method,e,t)}async setBlockAttrs(e,t){return await this._request(y.api.attr.setBlockAttrs.pathname,y.api.attr.setBlockAttrs.method,e,t)}async appendBlock(e,t){return await this._request(y.api.block.appendBlock.pathname,y.api.block.appendBlock.method,e,t)}async deleteBlock(e,t){return await this._request(y.api.block.deleteBlock.pathname,y.api.block.deleteBlock.method,e,t)}async getBlockKramdown(e,t){return await this._request(y.api.block.getBlockKramdown.pathname,y.api.block.getBlockKramdown.method,e,t)}async getChildBlocks(e,t){return await this._request(y.api.block.getChildBlocks.pathname,y.api.block.getChildBlocks.method,e,t)}async insertBlock(e,t){return await this._request(y.api.block.insertBlock.pathname,y.api.block.insertBlock.method,e,t)}async moveBlock(e,t){return await this._request(y.api.block.moveBlock.pathname,y.api.block.moveBlock.method,e,t)}async prependBlock(e,t){return await this._request(y.api.block.prependBlock.pathname,y.api.block.prependBlock.method,e,t)}async transferBlockRef(e,t){return await this._request(y.api.block.transferBlockRef.pathname,y.api.block.transferBlockRef.method,e,t)}async updateBlock(e,t){return await this._request(y.api.block.updateBlock.pathname,y.api.block.updateBlock.method,e,t)}async pandoc(e,t){return await this._request(y.api.convert.pandoc.pathname,y.api.convert.pandoc.method,e,t)}async exportMdContent(e,t){return await this._request(y.api.export.exportMdContent.pathname,y.api.export.exportMdContent.method,e,t)}async getFile(e,t){return await this._request(y.api.file.getFile.pathname,y.api.file.getFile.method,e,t,!1)}async putFile(e,t){e.file!==void 0&&!(e.file instanceof File)&&(e.file=new File([e.file],e.path.split("/").pop()));const o=new FormData;for(const[n,i]of Object.entries(e))e.hasOwnProperty(n)&&(i instanceof Blob?o.append(n,i):o.append(n,String(i)));return await this._request(y.api.file.putFile.pathname,y.api.file.putFile.method,o,t)}async readDir(e,t){return await this._request(y.api.file.readDir.pathname,y.api.file.readDir.method,e,t)}async removeFile(e,t){return await this._request(y.api.file.removeFile.pathname,y.api.file.removeFile.method,e,t)}async renameFile(e,t){return await this._request(y.api.file.renameFile.pathname,y.api.file.renameFile.method,e,t)}async createDocWithMd(e,t){return await this._request(y.api.filetree.createDocWithMd.pathname,y.api.filetree.createDocWithMd.method,e,t)}async getHPathByID(e,t){return await this._request(y.api.filetree.getHPathByID.pathname,y.api.filetree.getHPathByID.method,e,t)}async getHPathByPath(e,t){return await this._request(y.api.filetree.getHPathByPath.pathname,y.api.filetree.getHPathByPath.method,e,t)}async moveDocs(e,t){return await this._request(y.api.filetree.moveDocs.pathname,y.api.filetree.moveDocs.method,e,t)}async removeDoc(e,t){return await this._request(y.api.filetree.removeDoc.pathname,y.api.filetree.removeDoc.method,e,t)}async renameDoc(e,t){return await this._request(y.api.filetree.renameDoc.pathname,y.api.filetree.renameDoc.method,e,t)}async closeNotebook(e,t){return await this._request(y.api.notebook.closeNotebook.pathname,y.api.notebook.closeNotebook.method,e,t)}async createNotebook(e,t){return await this._request(y.api.notebook.createNotebook.pathname,y.api.notebook.createNotebook.method,e,t)}async getNotebookConf(e,t){return await this._request(y.api.notebook.getNotebookConf.pathname,y.api.notebook.getNotebookConf.method,e,t)}async lsNotebooks(e){return await this._request(y.api.notebook.lsNotebooks.pathname,y.api.notebook.lsNotebooks.method,void 0,e)}async openNotebook(e,t){return await this._request(y.api.notebook.openNotebook.pathname,y.api.notebook.openNotebook.method,e,t)}async removeNotebook(e,t){return await this._request(y.api.notebook.removeNotebook.pathname,y.api.notebook.removeNotebook.method,e,t)}async renameNotebook(e,t){return await this._request(y.api.notebook.renameNotebook.pathname,y.api.notebook.renameNotebook.method,e,t)}async setNotebookConf(e,t){return await this._request(y.api.notebook.setNotebookConf.pathname,y.api.notebook.setNotebookConf.method,e,t)}async pushErrMsg(e,t){return await this._request(y.api.notification.pushErrMsg.pathname,y.api.notification.pushErrMsg.method,e,t)}async pushMsg(e,t){return await this._request(y.api.notification.pushMsg.pathname,y.api.notification.pushMsg.method,e,t)}async sql(e,t){return await this._request(y.api.query.sql.pathname,y.api.query.sql.method,e,t)}async bootProgress(e){return await this._request(y.api.system.bootProgress.pathname,y.api.system.bootProgress.method,void 0,e)}async currentTime(e){return await this._request(y.api.system.currentTime.pathname,y.api.system.currentTime.method,void 0,e)}async version(e){return await this._request(y.api.system.version.pathname,y.api.system.version.method,void 0,e)}async render(e,t){return await this._request(y.api.template.render.pathname,y.api.template.render.method,e,t)}async renderSprig(e,t){return await this._request(y.api.template.renderSprig.pathname,y.api.template.renderSprig.method,e,t)}async _request(e,t,o,n,i=!0){try{const s=await this._axios.request({url:e,method:t,data:o,...n});if(s.status===tr.Ok)return i&&typeof s.data=="object"?this._parseResponse(s):s.data;throw new nr(s)}catch(s){throw s}}_parseResponse(e){if(e.data.code===0)return e.data;throw new or(e.data,e)}};let ir=y;gt(ir,"api",{search:{fullTextSearchBlock:{pathname:"/api/search/fullTextSearchBlock",method:"POST"}},storage:{getRecentDocs:{pathname:"/api/storage/getRecentDocs",method:"POST"}},asset:{upload:{pathname:"/api/asset/upload",method:"POST"}},attr:{getBlockAttrs:{pathname:"/api/attr/getBlockAttrs",method:"POST"},setBlockAttrs:{pathname:"/api/attr/setBlockAttrs",method:"POST"},getBookmarkLabels:{pathname:"/api/attr/getBookmarkLabels",method:"POST"}},block:{appendBlock:{pathname:"/api/block/appendBlock",method:"POST"},deleteBlock:{pathname:"/api/block/deleteBlock",method:"POST"},getBlockKramdown:{pathname:"/api/block/getBlockKramdown",method:"POST"},getChildBlocks:{pathname:"/api/block/getChildBlocks",method:"POST"},insertBlock:{pathname:"/api/block/insertBlock",method:"POST"},moveBlock:{pathname:"/api/block/moveBlock",method:"POST"},prependBlock:{pathname:"/api/block/prependBlock",method:"POST"},transferBlockRef:{pathname:"/api/block/transferBlockRef",method:"POST"},updateBlock:{pathname:"/api/block/updateBlock",method:"POST"},getBlockBreadcrumb:{pathname:"/api/block/getBlockBreadcrumb",method:"POST"},getDocInfo:{pathname:"/api/block/getDocInfo",method:"POST"}},convert:{pandoc:{pathname:"/api/convert/pandoc",method:"POST"}},export:{exportMdContent:{pathname:"/api/export/exportMdContent",method:"POST"}},file:{getFile:{pathname:"/api/file/getFile",method:"POST"},putFile:{pathname:"/api/file/putFile",method:"POST"},readDir:{pathname:"/api/file/readDir",method:"POST"},removeFile:{pathname:"/api/file/removeFile",method:"POST"},renameFile:{pathname:"/api/file/renameFile",method:"POST"}},filetree:{createDocWithMd:{pathname:"/api/filetree/createDocWithMd",method:"POST"},getHPathByID:{pathname:"/api/filetree/getHPathByID",method:"POST"},getHPathByPath:{pathname:"/api/filetree/getHPathByPath",method:"POST"},moveDocs:{pathname:"/api/filetree/moveDocs",method:"POST"},removeDoc:{pathname:"/api/filetree/removeDoc",method:"POST"},renameDoc:{pathname:"/api/filetree/renameDoc",method:"POST"},listDocsByPath:{pathname:"/api/filetree/listDocsByPath",method:"POST"},searchDocs:{pathname:"/api/filetree/searchDocs",method:"POST"}},notebook:{closeNotebook:{pathname:"/api/notebook/closeNotebook",method:"POST"},createNotebook:{pathname:"/api/notebook/createNotebook",method:"POST"},lsNotebooks:{pathname:"/api/notebook/lsNotebooks",method:"POST"},getNotebookConf:{pathname:"/api/notebook/getNotebookConf",method:"POST"},openNotebook:{pathname:"/api/notebook/openNotebook",method:"POST"},removeNotebook:{pathname:"/api/notebook/removeNotebook",method:"POST"},renameNotebook:{pathname:"/api/notebook/renameNotebook",method:"POST"},setNotebookConf:{pathname:"/api/notebook/setNotebookConf",method:"POST"}},notification:{pushErrMsg:{pathname:"/api/notification/pushErrMsg",method:"POST"},pushMsg:{pathname:"/api/notification/pushMsg",method:"POST"}},query:{sql:{pathname:"/api/query/sql",method:"POST"}},system:{bootProgress:{pathname:"/api/system/bootProgress",method:"POST"},currentTime:{pathname:"/api/system/currentTime",method:"POST"},version:{pathname:"/api/system/version",method:"POST"},getConf:{pathname:"/api/system/getConf",method:"POST"}},template:{render:{pathname:"/api/template/render",method:"POST"},renderSprig:{pathname:"/api/template/renderSprig",method:"POST"}}});var Wo=(e=>(e.NodeNotebook="NodeNotebook",e.NodeFolder="NodeFolder",e.NodeDocument="NodeDocument",e.NodeSuperBlock="NodeSuperBlock",e.NodeBlockquote="NodeBlockquote",e.NodeList="NodeList",e.NodeListItem="NodeListItem",e.NodeHeading="NodeHeading",e.NodeParagraph="NodeParagraph",e.NodeMathBlock="NodeMathBlock",e.NodeTable="NodeTable",e.NodeCodeBlock="NodeCodeBlock",e.NodeHTMLBlock="NodeHTMLBlock",e.NodeThematicBreak="NodeThematicBreak",e.NodeAudio="NodeAudio",e.NodeVideo="NodeVideo",e.NodeIFrame="NodeIFrame",e.NodeWidget="NodeWidget",e.NodeBlockQueryEmbed="NodeBlockQueryEmbed",e))(Wo||{}),jo=(e=>(e.d="d",e.s="s",e.b="b",e.l="l",e.i="i",e.h="h",e.p="p",e.m="m",e.t="t",e.c="c",e.html="html",e.query_embed="query_embed",e.tb="tb",e.audio="audio",e.video="video",e.iframe="iframe",e.widget="widget",e))(jo||{}),qo=(e=>(e.d="d",e.s="s",e.b="b",e.l="l",e.i="i",e))(qo||{}),Io=(e=>(e.h="h",e.p="p",e.m="m",e.t="t",e.c="c",e.html="html",e.query_embed="query_embed",e.tb="tb",e.audio="audio",e.video="video",e.iframe="iframe",e.widget="widget",e))(Io||{}),Ko=(e=>(e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e.u="u",e.o="o",e.t="t",e.none="",e))(Ko||{}),Uo=(e=>(e.u="u",e.o="o",e.t="t",e))(Uo||{}),Ho=(e=>(e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e))(Ho||{}),Vo=(e=>(e[e.keyword=0]="keyword",e[e.querySyntax=1]="querySyntax",e[e.sql=2]="sql",e[e.regex=3]="regex",e))(Vo||{}),zo=(e=>(e[e.noGroupBy=0]="noGroupBy",e[e.group=1]="group",e))(zo||{}),Go=(e=>(e[e.type=0]="type",e[e.createdASC=1]="createdASC",e[e.createdDESC=2]="createdDESC",e[e.modifiedASC=3]="modifiedASC",e[e.modifiedDESC=4]="modifiedDESC",e[e.sortByContent=5]="sortByContent",e[e.sortByRankAsc=6]="sortByRankAsc",e[e.sortByRankDesc=7]="sortByRankDesc",e))(Go||{}),Yo=(e=>(e[e.SortModeNameASC=0]="SortModeNameASC",e[e.SortModeNameDESC=1]="SortModeNameDESC",e[e.SortModeUpdatedASC=2]="SortModeUpdatedASC",e[e.SortModeUpdatedDESC=3]="SortModeUpdatedDESC",e[e.SortModeAlphanumASC=4]="SortModeAlphanumASC",e[e.SortModeAlphanumDESC=5]="SortModeAlphanumDESC",e[e.SortModeCustom=6]="SortModeCustom",e[e.SortModeRefCountASC=7]="SortModeRefCountASC",e[e.SortModeRefCountDESC=8]="SortModeRefCountDESC",e[e.SortModeCreatedASC=9]="SortModeCreatedASC",e[e.SortModeCreatedDESC=10]="SortModeCreatedDESC",e[e.SortModeSizeASC=11]="SortModeSizeASC",e[e.SortModeSizeDESC=12]="SortModeSizeDESC",e[e.SortModeSubDocCountASC=13]="SortModeSubDocCountASC",e[e.SortModeSubDocCountDESC=14]="SortModeSubDocCountDESC",e))(Yo||{});const sr=Object.freeze(Object.defineProperty({__proto__:null,BlockSubType:Ko,BlockType:jo,Container:qo,GroupBy:zo,Leaf:Io,Method:Vo,NodeHeadingSubType:Ho,NodeListSubType:Uo,NodeType:Wo,OrderBy:Go,SortMode:Yo},Symbol.toStringTag,{value:"Module"}));function rr(e){const{protyle:t,data:o,blockElements:n}=e;if(o){const i={element:t.wysiwyg.element,id:o.id,type:sr.NodeType.NodeDocument};return{...i,isDocumentBlock:!0,isMultiBlock:!1,blocks:[i]}}else if(n&&n.length>0){const i=[];return n.forEach(s=>{i.push({element:s,id:s.dataset.nodeId,type:s.dataset.type,subtype:s.dataset.subtype})}),{...i[0],isDocumentBlock:!1,isMultiBlock:i.length>1,blocks:i}}return null}function Rt(e){const t=e.getBoundingClientRect();return{screenX:Math.round(globalThis.screenX+t.x),screenY:Math.round(globalThis.screenY+t.y)}}function Y(){}const Xt=e=>e;function ar(e,t){for(const o in t)e[o]=t[o];return e}function Jo(e){return e()}function Nn(){return Object.create(null)}function se(e){e.forEach(Jo)}function St(e){return typeof e=="function"}function pe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let st;function An(e,t){return e===t?!0:(st||(st=document.createElement("a")),st.href=t,e===st.href)}function lr(e){return Object.keys(e).length===0}function le(e,t,o,n){if(e){const i=Xo(e,t,o,n);return e[0](i)}}function Xo(e,t,o,n){return e[1]&&n?ar(o.ctx.slice(),e[1](n(t))):o.ctx}function ue(e,t,o,n){if(e[2]&&n){const i=e[2](n(o));if(t.dirty===void 0)return i;if(typeof i=="object"){const s=[],r=Math.max(t.dirty.length,i.length);for(let l=0;l<r;l+=1)s[l]=t.dirty[l]|i[l];return s}return t.dirty|i}return t.dirty}function ce(e,t,o,n,i,s){if(i){const r=Xo(t,o,n,s);e.p(r,i)}}function fe(e){if(e.ctx.length>32){const t=[],o=e.ctx.length/32;for(let n=0;n<o;n++)t[n]=-1;return t}return-1}function ur(e){const t={};for(const o in e)t[o]=!0;return t}const Qo=typeof window<"u";let Zo=Qo?()=>window.performance.now():()=>Date.now(),Qt=Qo?e=>requestAnimationFrame(e):Y;const je=new Set;function xo(e){je.forEach(t=>{t.c(e)||(je.delete(t),t.f())}),je.size!==0&&Qt(xo)}function ei(e){let t;return je.size===0&&Qt(xo),{promise:new Promise(o=>{je.add(t={c:e,f:o})}),abort(){je.delete(t)}}}function A(e,t){e.appendChild(t)}function ti(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function cr(e){const t=R("style");return t.textContent="/* empty */",fr(ti(e),t),t.sheet}function fr(e,t){return A(e.head||e,t),t.sheet}function B(e,t,o){e.insertBefore(t,o||null)}function T(e){e.parentNode&&e.parentNode.removeChild(e)}function R(e){return document.createElement(e)}function qt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function _e(e){return document.createTextNode(e)}function L(){return _e(" ")}function ve(){return _e("")}function J(e,t,o,n){return e.addEventListener(t,o,n),()=>e.removeEventListener(t,o,n)}function k(e,t,o){o==null?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}function Cn(e,t,o){e.setAttributeNS("http://www.w3.org/1999/xlink",t,o)}function It(e){return e===""?null:+e}function pr(e){return Array.from(e.childNodes)}function De(e,t){t=""+t,e.data!==t&&(e.data=t)}function re(e,t){e.value=t??""}function Oe(e,t,o,n){o==null?e.style.removeProperty(t):e.style.setProperty(t,o,n?"important":"")}function Rn(e,t,o){for(let n=0;n<e.options.length;n+=1){const i=e.options[n];if(i.__value===t){i.selected=!0;return}}(!o||t!==void 0)&&(e.selectedIndex=-1)}function dr(e){const t=e.querySelector(":checked");return t&&t.__value}function C(e,t,o){e.classList.toggle(t,!!o)}function ni(e,t,{bubbles:o=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:o,cancelable:n})}class nt{constructor(t=!1){Z(this,"is_svg",!1);Z(this,"e");Z(this,"n");Z(this,"t");Z(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,o,n=null){this.e||(this.is_svg?this.e=qt(o.nodeName):this.e=R(o.nodeType===11?"TEMPLATE":o.nodeName),this.t=o.tagName!=="TEMPLATE"?o:o.content,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let o=0;o<this.n.length;o+=1)B(this.t,this.n[o],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(T)}}const dt=new Map;let ht=0;function hr(e){let t=5381,o=e.length;for(;o--;)t=(t<<5)-t^e.charCodeAt(o);return t>>>0}function mr(e,t){const o={stylesheet:cr(t),rules:{}};return dt.set(e,o),o}function oi(e,t,o,n,i,s,r,l=0){const a=16.666/n;let u=`{
`;for(let m=0;m<=1;m+=a){const $=t+(o-t)*s(m);u+=m*100+`%{${r($,1-$)}}
`}const d=u+`100% {${r(o,1-o)}}
}`,h=`__svelte_${hr(d)}_${l}`,g=ti(e),{stylesheet:p,rules:f}=dt.get(g)||mr(g,e);f[h]||(f[h]=!0,p.insertRule(`@keyframes ${h} ${d}`,p.cssRules.length));const c=e.style.animation||"";return e.style.animation=`${c?`${c}, `:""}${h} ${n}ms linear ${i}ms 1 both`,ht+=1,h}function Kt(e,t){const o=(e.style.animation||"").split(", "),n=o.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),i=o.length-n.length;i&&(e.style.animation=n.join(", "),ht-=i,ht||gr())}function gr(){Qt(()=>{ht||(dt.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&T(t)}),dt.clear())})}let xe;function Je(e){xe=e}function ii(){if(!xe)throw new Error("Function called outside component initialization");return xe}function _r(e){ii().$$.on_mount.push(e)}function vt(){const e=ii();return(t,o,{cancelable:n=!1}={})=>{const i=e.$$.callbacks[t];if(i){const s=ni(t,o,{cancelable:n});return i.slice().forEach(r=>{r.call(e,s)}),!s.defaultPrevented}return!0}}function br(e,t){const o=e.$$.callbacks[t.type];o&&o.slice().forEach(n=>n.call(this,t))}const Fe=[],Ut=[];let qe=[];const Mn=[],wr=Promise.resolve();let Ht=!1;function kr(){Ht||(Ht=!0,wr.then(si))}function Me(e){qe.push(e)}const Mt=new Set;let Le=0;function si(){if(Le!==0)return;const e=xe;do{try{for(;Le<Fe.length;){const t=Fe[Le];Le++,Je(t),yr(t.$$)}}catch(t){throw Fe.length=0,Le=0,t}for(Je(null),Fe.length=0,Le=0;Ut.length;)Ut.pop()();for(let t=0;t<qe.length;t+=1){const o=qe[t];Mt.has(o)||(Mt.add(o),o())}qe.length=0}while(Fe.length);for(;Mn.length;)Mn.pop()();Ht=!1,Mt.clear(),Je(e)}function yr(e){if(e.fragment!==null){e.update(),se(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Me)}}function $r(e){const t=[],o=[];qe.forEach(n=>e.indexOf(n)===-1?t.push(n):o.push(n)),o.forEach(n=>n()),qe=t}let Ye;function ri(){return Ye||(Ye=Promise.resolve(),Ye.then(()=>{Ye=null})),Ye}function mt(e,t,o){e.dispatchEvent(ni(`${t?"intro":"outro"}${o}`))}const ct=new Set;let Ae;function oe(){Ae={r:0,c:[],p:Ae}}function ie(){Ae.r||se(Ae.c),Ae=Ae.p}function _(e,t){e&&e.i&&(ct.delete(e),e.i(t))}function b(e,t,o,n){if(e&&e.o){if(ct.has(e))return;ct.add(e),Ae.c.push(()=>{ct.delete(e),n&&(o&&e.d(1),n())}),e.o(t)}else n&&n()}const ai={duration:0};function Sr(e,t,o){const n={direction:"in"};let i=t(e,o,n),s=!1,r,l,a=0;function u(){r&&Kt(e,r)}function d(){const{delay:g=0,duration:p=300,easing:f=Xt,tick:c=Y,css:m}=i||ai;m&&(r=oi(e,0,1,p,g,f,m,a++)),c(0,1);const $=Zo()+g,H=$+p;l&&l.abort(),s=!0,Me(()=>mt(e,!0,"start")),l=ei(K=>{if(s){if(K>=H)return c(1,0),mt(e,!0,"end"),u(),s=!1;if(K>=$){const j=f((K-$)/p);c(j,1-j)}}return s})}let h=!1;return{start(){h||(h=!0,Kt(e),St(i)?(i=i(n),ri().then(d)):d())},invalidate(){h=!1},end(){s&&(u(),s=!1)}}}function vr(e,t,o){const n={direction:"out"};let i=t(e,o,n),s=!0,r;const l=Ae;l.r+=1;let a;function u(){const{delay:d=0,duration:h=300,easing:g=Xt,tick:p=Y,css:f}=i||ai;f&&(r=oi(e,1,0,h,d,g,f));const c=Zo()+d,m=c+h;Me(()=>mt(e,!1,"start")),"inert"in e&&(a=e.inert,e.inert=!0),ei($=>{if(s){if($>=m)return p(0,1),mt(e,!1,"end"),--l.r||se(l.c),!1;if($>=c){const H=g(($-c)/h);p(1-H,H)}}return s})}return St(i)?ri().then(()=>{i=i(n),u()}):u(),{end(d){d&&"inert"in e&&(e.inert=a),d&&i.tick&&i.tick(1,0),s&&(r&&Kt(e,r),s=!1)}}}function $e(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Er(e,t){e.d(1),t.delete(e.key)}function Et(e,t){b(e,1,1,()=>{t.delete(e.key)})}function ot(e,t,o,n,i,s,r,l,a,u,d,h){let g=e.length,p=s.length,f=g;const c={};for(;f--;)c[e[f].key]=f;const m=[],$=new Map,H=new Map,K=[];for(f=p;f--;){const q=h(i,s,f),X=o(q);let N=r.get(X);N?n&&K.push(()=>N.p(q,t)):(N=u(X,q),N.c()),$.set(X,m[f]=N),X in c&&H.set(X,Math.abs(f-c[X]))}const j=new Set,ee=new Set;function F(q){_(q,1),q.m(l,d),r.set(q.key,q),d=q.first,p--}for(;g&&p;){const q=m[p-1],X=e[g-1],N=q.key,V=X.key;q===X?(d=q.first,g--,p--):$.has(V)?!r.has(N)||j.has(N)?F(q):ee.has(V)?g--:H.get(N)>H.get(V)?(ee.add(N),F(q)):(j.add(V),g--):(a(X,r),g--)}for(;g--;){const q=e[g];$.has(q.key)||a(q,r)}for(;p;)F(m[p-1]);return se(K),m}function E(e){e&&e.c()}function S(e,t,o){const{fragment:n,after_update:i}=e.$$;n&&n.m(t,o),Me(()=>{const s=e.$$.on_mount.map(Jo).filter(St);e.$$.on_destroy?e.$$.on_destroy.push(...s):se(s),e.$$.on_mount=[]}),i.forEach(Me)}function v(e,t){const o=e.$$;o.fragment!==null&&($r(o.after_update),se(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function Tr(e,t){e.$$.dirty[0]===-1&&(Fe.push(e),kr(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function de(e,t,o,n,i,s,r,l=[-1]){const a=xe;Je(e);const u=e.$$={fragment:null,ctx:[],props:s,update:Y,not_equal:i,bound:Nn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Nn(),dirty:l,skip_bound:!1,root:t.target||a.$$.root};r&&r(u.root);let d=!1;if(u.ctx=o?o(e,t.props||{},(h,g,...p)=>{const f=p.length?p[0]:g;return u.ctx&&i(u.ctx[h],u.ctx[h]=f)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](f),d&&Tr(e,h)),g}):[],u.update(),d=!0,se(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const h=pr(t.target);u.fragment&&u.fragment.l(h),h.forEach(T)}else u.fragment&&u.fragment.c();t.intro&&_(e.$$.fragment),S(e,t.target,t.anchor),si()}Je(a)}class he{constructor(){Z(this,"$$");Z(this,"$$set")}$destroy(){v(this,1),this.$destroy=Y}$on(t,o){if(!St(o))return Y;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(o),()=>{const i=n.indexOf(o);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!lr(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Or="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Or);function Br(e){let t,o;return{c(){t=qt("svg"),o=qt("use"),Cn(o,"xlink:href",e[0]),k(t,"style",e[2]),k(t,"class",e[1])},m(n,i){B(n,t,i),A(t,o)},p(n,[i]){i&1&&Cn(o,"xlink:href",n[0]),i&4&&k(t,"style",n[2]),i&2&&k(t,"class",n[1])},i:Y,o:Y,d(n){n&&T(t)}}}function Nr(e,t,o){let{icon:n}=t,{className:i=void 0}=t,{style:s=void 0}=t;return e.$$set=r=>{"icon"in r&&o(0,n=r.icon),"className"in r&&o(1,i=r.className),"style"in r&&o(2,s=r.style)},[n,i,s]}class Ee extends he{constructor(t){super(),de(this,t,Nr,Br,pe,{icon:0,className:1,style:2})}}const Ar=e=>({focus:e&1}),Dn=e=>({focus:e[0]});function Pn(e,t,o){const n=e.slice();return n[13]=t[o],n}function Ln(e){let t,o,n,i,s,r,l;return o=new Ee({props:{icon:"#iconSearch",className:"b3-form__icon-icon"}}),{c(){t=R("div"),E(o.$$.fragment),n=L(),i=R("input"),k(i,"placeholder",e[4]),k(i,"class","b3-text-field fn__block b3-form__icon-input"),k(t,"class","b3-form__icon")},m(a,u){B(a,t,u),S(o,t,null),A(t,n),A(t,i),re(i,e[1]),s=!0,r||(l=[J(i,"input",e[9]),J(i,"change",e[5])],r=!0)},p(a,u){(!s||u&16)&&k(i,"placeholder",a[4]),u&2&&i.value!==a[1]&&re(i,a[1])},i(a){s||(_(o.$$.fragment,a),s=!0)},o(a){b(o.$$.fragment,a),s=!1},d(a){a&&T(t),v(o),r=!1,se(l)}}}function Fn(e,t){let o,n,i,s,r=t[13].text+"",l,a,u,d,h;n=new Ee({props:{icon:t[13].icon,className:"b3-list-item__graphic"}});function g(){return t[10](t[13])}function p(){return t[11](t[13])}return{key:e,first:null,c(){o=R("li"),E(n.$$.fragment),i=L(),s=R("span"),l=L(),k(s,"class","b3-list-item__text svelte-15drd7h"),k(o,"role","button"),k(o,"data-name",a=t[13].name),k(o,"class","b3-list-item"),C(o,"b3-list-item--focus",t[13].key===t[0]),this.first=o},m(f,c){B(f,o,c),S(n,o,null),A(o,i),A(o,s),s.innerHTML=r,A(o,l),u=!0,d||(h=[J(o,"click",g),J(o,"keyup",p)],d=!0)},p(f,c){t=f;const m={};c&4&&(m.icon=t[13].icon),n.$set(m),(!u||c&4)&&r!==(r=t[13].text+"")&&(s.innerHTML=r),(!u||c&4&&a!==(a=t[13].name))&&k(o,"data-name",a),(!u||c&5)&&C(o,"b3-list-item--focus",t[13].key===t[0])},i(f){u||(_(n.$$.fragment,f),u=!0)},o(f){b(n.$$.fragment,f),u=!1},d(f){f&&T(o),v(n),d=!1,se(h)}}}function Cr(e){let t;return{c(){t=_e("Container")},m(o,n){B(o,t,n)},d(o){o&&T(t)}}}function Rr(e){let t,o,n,i=[],s=new Map,r,l,a,u=e[3]&&Ln(e),d=$e(e[2]);const h=c=>c[13].key;for(let c=0;c<d.length;c+=1){let m=Pn(e,d,c),$=h(m);s.set($,i[c]=Fn($,m))}const g=e[8].default,p=le(g,e,e[7],Dn),f=p||Cr();return{c(){t=R("div"),o=R("ul"),u&&u.c(),n=L();for(let c=0;c<i.length;c+=1)i[c].c();r=L(),l=R("div"),f&&f.c(),k(o,"class","b3-tab-bar b3-list b3-list--background"),k(l,"class","config__tab-wrap"),k(t,"class","fn__flex-1 fn__flex config__panel")},m(c,m){B(c,t,m),A(t,o),u&&u.m(o,null),A(o,n);for(let $=0;$<i.length;$+=1)i[$]&&i[$].m(o,null);A(t,r),A(t,l),f&&f.m(l,null),a=!0},p(c,[m]){c[3]?u?(u.p(c,m),m&8&&_(u,1)):(u=Ln(c),u.c(),_(u,1),u.m(o,n)):u&&(oe(),b(u,1,1,()=>{u=null}),ie()),m&69&&(d=$e(c[2]),oe(),i=ot(i,m,h,1,c,d,s,o,Et,Fn,null,Pn),ie()),p&&p.p&&(!a||m&129)&&ce(p,g,c,c[7],a?ue(g,c[7],m,Ar):fe(c[7]),Dn)},i(c){if(!a){_(u);for(let m=0;m<d.length;m+=1)_(i[m]);_(f,c),a=!0}},o(c){b(u);for(let m=0;m<i.length;m+=1)b(i[m]);b(f,c),a=!1},d(c){c&&T(t),u&&u.d();for(let m=0;m<i.length;m+=1)i[m].d();f&&f.d(c)}}}function Mr(e,t,o){let{$$slots:n={},$$scope:i}=t,{panels:s}=t,{focus:r}=t,{searchEnable:l=!1}=t,{searchPlaceholder:a=""}=t,{searchValue:u=""}=t;const d=vt();function h(){d("search-changed",{value:u})}function g(m){d("changed",{key:m}),o(0,r=m)}function p(){u=this.value,o(1,u)}const f=m=>g(m.key),c=m=>g(m.key);return e.$$set=m=>{"panels"in m&&o(2,s=m.panels),"focus"in m&&o(0,r=m.focus),"searchEnable"in m&&o(3,l=m.searchEnable),"searchPlaceholder"in m&&o(4,a=m.searchPlaceholder),"searchValue"in m&&o(1,u=m.searchValue),"$$scope"in m&&o(7,i=m.$$scope)},[r,u,s,l,a,h,g,i,n,p,f,c]}class Dr extends he{constructor(t){super(),de(this,t,Mr,Rr,pe,{panels:2,focus:0,searchEnable:3,searchPlaceholder:4,searchValue:1})}}function Pr(e){let t,o;const n=e[4].default,i=le(n,e,e[3],null);return{c(){t=R("div"),i&&i.c(),k(t,"data-name",e[2]),k(t,"class","config__tab-container"),C(t,"fn__none",!e[0]),C(t,"config__tab-container--top",e[1])},m(s,r){B(s,t,r),i&&i.m(t,null),o=!0},p(s,[r]){i&&i.p&&(!o||r&8)&&ce(i,n,s,s[3],o?ue(n,s[3],r,null):fe(s[3]),null),(!o||r&4)&&k(t,"data-name",s[2]),(!o||r&1)&&C(t,"fn__none",!s[0]),(!o||r&2)&&C(t,"config__tab-container--top",s[1])},i(s){o||(_(i,s),o=!0)},o(s){b(i,s),o=!1},d(s){s&&T(t),i&&i.d(s)}}}function Lr(e,t,o){let{$$slots:n={},$$scope:i}=t,{display:s=!0}=t,{top:r=!0}=t,{name:l=""}=t;return e.$$set=a=>{"display"in a&&o(0,s=a.display),"top"in a&&o(1,r=a.top),"name"in a&&o(2,l=a.name),"$$scope"in a&&o(3,i=a.$$scope)},[s,r,l,i,n]}class Dt extends he{constructor(t){super(),de(this,t,Lr,Pr,pe,{display:0,top:1,name:2})}}const Fr=e=>({}),Wn=e=>({}),Wr=e=>({}),jn=e=>({});function qn(e){let t,o;const n=e[6].icon,i=le(n,e,e[5],jn);return{c(){t=R("span"),i&&i.c(),k(t,"class","item__icon")},m(s,r){B(s,t,r),i&&i.m(t,null),o=!0},p(s,r){i&&i.p&&(!o||r&32)&&ce(i,n,s,s[5],o?ue(n,s[5],r,Wr):fe(s[5]),jn)},i(s){o||(_(i,s),o=!0)},o(s){b(i,s),o=!1},d(s){s&&T(t),i&&i.d(s)}}}function jr(e){let t;return{c(){t=_e("text")},m(o,n){B(o,t,n)},d(o){o&&T(t)}}}function qr(e){let t,o,n,i,s,r,l,a,u,d,h=e[3].icon&&qn(e);const g=e[6].text,p=le(g,e,e[5],Wn),f=p||jr();return{c(){t=R("div"),o=R("span"),n=L(),h&&h.c(),i=L(),s=R("span"),f&&f.c(),r=L(),l=R("span"),k(o,"class","fn__flex-1"),k(s,"class","item__text"),k(l,"class","fn__flex-1"),k(t,"role","button"),k(t,"data-type",e[0]),k(t,"class","item item--full"),C(t,"item--focus",e[1])},m(c,m){B(c,t,m),A(t,o),A(t,n),h&&h.m(t,null),A(t,i),A(t,s),f&&f.m(s,null),A(t,r),A(t,l),a=!0,u||(d=J(t,"click",e[2]),u=!0)},p(c,[m]){c[3].icon?h?(h.p(c,m),m&8&&_(h,1)):(h=qn(c),h.c(),_(h,1),h.m(t,i)):h&&(oe(),b(h,1,1,()=>{h=null}),ie()),p&&p.p&&(!a||m&32)&&ce(p,g,c,c[5],a?ue(g,c[5],m,Fr):fe(c[5]),Wn),(!a||m&1)&&k(t,"data-type",c[0]),(!a||m&2)&&C(t,"item--focus",c[1])},i(c){a||(_(h),_(f,c),a=!0)},o(c){b(h),b(f,c),a=!1},d(c){c&&T(t),h&&h.d(),f&&f.d(c),u=!1,d()}}}function Ir(e,t,o){let{$$slots:n={},$$scope:i}=t;const s=ur(n);let{key:r}=t,{name:l=""}=t,{focus:a=!1}=t;const u=vt();function d(){a||u("changed",{key:r})}return e.$$set=h=>{"key"in h&&o(4,r=h.key),"name"in h&&o(0,l=h.name),"focus"in h&&o(1,a=h.focus),"$$scope"in h&&o(5,i=h.$$scope)},[l,a,d,s,r,i,n]}class Kr extends he{constructor(t){super(),de(this,t,Ir,qr,pe,{key:4,name:0,focus:1})}}const Ur=e=>({focus:e&1}),In=e=>({focus:e[0]});function Kn(e,t,o){const n=e.slice();return n[5]=t[o],n}function Hr(e){let t,o=e[5].icon+"",n;return{c(){t=new nt(!1),n=ve(),t.a=n},m(i,s){t.m(o,i,s),B(i,n,s)},p(i,s){s&2&&o!==(o=i[5].icon+"")&&t.p(o)},i:Y,o:Y,d(i){i&&(T(n),t.d())}}}function Vr(e){let t,o;return t=new Ee({props:{icon:e[5].icon}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i&2&&(s.icon=n[5].icon),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function zr(e){let t,o,n,i,s,r;const l=[Vr,Hr],a=[];function u(d,h){return h&2&&(o=null),o==null&&(o=!!d[5].icon.startsWith("#")),o?0:1}return n=u(e,-1),i=a[n]=l[n](e),{c(){t=R("span"),i.c(),s=L(),k(t,"slot","icon")},m(d,h){B(d,t,h),a[n].m(t,null),A(t,s),r=!0},p(d,h){let g=n;n=u(d,h),n===g?a[n].p(d,h):(oe(),b(a[g],1,1,()=>{a[g]=null}),ie(),i=a[n],i?i.p(d,h):(i=a[n]=l[n](d),i.c()),_(i,1),i.m(t,s))},i(d){r||(_(i),r=!0)},o(d){b(i),r=!1},d(d){d&&T(t),a[n].d()}}}function Gr(e){let t,o,n=e[5].text+"",i;return{c(){t=R("span"),o=new nt(!1),i=L(),o.a=i,k(t,"slot","text")},m(s,r){B(s,t,r),o.m(n,t),A(t,i)},p(s,r){r&2&&n!==(n=s[5].text+"")&&o.p(n)},d(s){s&&T(t)}}}function Un(e,t){let o,n,i;return n=new Kr({props:{key:t[5].key,name:t[5].name,focus:t[5].key===t[0],$$slots:{text:[Gr],icon:[zr]},$$scope:{ctx:t}}}),n.$on("changed",t[2]),{key:e,first:null,c(){o=ve(),E(n.$$.fragment),this.first=o},m(s,r){B(s,o,r),S(n,s,r),i=!0},p(s,r){t=s;const l={};r&2&&(l.key=t[5].key),r&2&&(l.name=t[5].name),r&3&&(l.focus=t[5].key===t[0]),r&18&&(l.$$scope={dirty:r,ctx:t}),n.$set(l)},i(s){i||(_(n.$$.fragment,s),i=!0)},o(s){b(n.$$.fragment,s),i=!1},d(s){s&&T(o),v(n,s)}}}function Yr(e){let t;return{c(){t=_e("Container")},m(o,n){B(o,t,n)},d(o){o&&T(t)}}}function Jr(e){let t,o,n=[],i=new Map,s,r,l,a=$e(e[1]);const u=p=>p[5].key;for(let p=0;p<a.length;p+=1){let f=Kn(e,a,p),c=u(f);i.set(c,n[p]=Un(c,f))}const d=e[3].default,h=le(d,e,e[4],In),g=h||Yr();return{c(){t=R("div"),o=R("div");for(let p=0;p<n.length;p+=1)n[p].c();s=L(),r=R("div"),g&&g.c(),k(o,"class","layout-tab-bar fn__flex"),k(r,"class","fn__flex-1"),k(t,"class","fn__flex-column"),Oe(t,"height","100%")},m(p,f){B(p,t,f),A(t,o);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(o,null);A(t,s),A(t,r),g&&g.m(r,null),l=!0},p(p,[f]){f&7&&(a=$e(p[1]),oe(),n=ot(n,f,u,1,p,a,i,o,Et,Un,null,Kn),ie()),h&&h.p&&(!l||f&17)&&ce(h,d,p,p[4],l?ue(d,p[4],f,Ur):fe(p[4]),In)},i(p){if(!l){for(let f=0;f<a.length;f+=1)_(n[f]);_(g,p),l=!0}},o(p){for(let f=0;f<n.length;f+=1)b(n[f]);b(g,p),l=!1},d(p){p&&T(t);for(let f=0;f<n.length;f+=1)n[f].d();g&&g.d(p)}}}function Xr(e,t,o){let{$$slots:n={},$$scope:i}=t,{tabs:s}=t,{focus:r}=t;function l(a){o(0,r=a.detail.key)}return e.$$set=a=>{"tabs"in a&&o(1,s=a.tabs),"focus"in a&&o(0,r=a.focus),"$$scope"in a&&o(4,i=a.$$scope)},[r,s,l,n,i]}class li extends he{constructor(t){super(),de(this,t,Xr,Jr,pe,{tabs:1,focus:0})}}const Qr=e=>({}),Hn=e=>({}),Zr=e=>({}),Vn=e=>({}),xr=e=>({}),zn=e=>({}),ea=e=>({}),Gn=e=>({});function ta(e){let t,o;return{c(){t=new nt(!1),o=ve(),t.a=o},m(n,i){t.m(e[0],n,i),B(n,o,i)},p(n,i){i&1&&t.p(n[0])},d(n){n&&(T(o),t.d())}}}function na(e){let t,o;return{c(){t=new nt(!1),o=ve(),t.a=o},m(n,i){t.m(e[1],n,i),B(n,o,i)},p(n,i){i&2&&t.p(n[1])},d(n){n&&(T(o),t.d())}}}function Yn(e){let t,o,n;const i=e[4].input,s=le(i,e,e[3],Vn);return{c(){t=R("div"),o=L(),s&&s.c(),k(t,"class","fn__hr")},m(r,l){B(r,t,l),B(r,o,l),s&&s.m(r,l),n=!0},p(r,l){s&&s.p&&(!n||l&8)&&ce(s,i,r,r[3],n?ue(i,r[3],l,Zr):fe(r[3]),Vn)},i(r){n||(_(s,r),n=!0)},o(r){b(s,r),n=!1},d(r){r&&(T(t),T(o)),s&&s.d(r)}}}function Jn(e){let t,o,n;const i=e[4].input,s=le(i,e,e[3],Hn);return{c(){t=R("span"),o=L(),s&&s.c(),k(t,"class","fn__space")},m(r,l){B(r,t,l),B(r,o,l),s&&s.m(r,l),n=!0},p(r,l){s&&s.p&&(!n||l&8)&&ce(s,i,r,r[3],n?ue(i,r[3],l,Qr):fe(r[3]),Hn)},i(r){n||(_(s,r),n=!0)},o(r){b(s,r),n=!1},d(r){r&&(T(t),T(o)),s&&s.d(r)}}}function oa(e){let t,o,n,i,s,r,l;const a=e[4].title,u=le(a,e,e[3],Gn),d=u||ta(e),h=e[4].text,g=le(h,e,e[3],zn),p=g||na(e);let f=e[2]&&Yn(e),c=!e[2]&&Jn(e);return{c(){t=R("label"),o=R("div"),d&&d.c(),n=L(),i=R("div"),p&&p.c(),s=L(),f&&f.c(),r=L(),c&&c.c(),k(i,"class","b3-label__text"),k(o,"class","fn__flex-1 svelte-2m76cy"),C(o,"visible",e[2]),k(t,"class","fn__flex b3-label")},m(m,$){B(m,t,$),A(t,o),d&&d.m(o,null),A(o,n),A(o,i),p&&p.m(i,null),A(o,s),f&&f.m(o,null),A(t,r),c&&c.m(t,null),l=!0},p(m,[$]){u?u.p&&(!l||$&8)&&ce(u,a,m,m[3],l?ue(a,m[3],$,ea):fe(m[3]),Gn):d&&d.p&&(!l||$&1)&&d.p(m,l?$:-1),g?g.p&&(!l||$&8)&&ce(g,h,m,m[3],l?ue(h,m[3],$,xr):fe(m[3]),zn):p&&p.p&&(!l||$&2)&&p.p(m,l?$:-1),m[2]?f?(f.p(m,$),$&4&&_(f,1)):(f=Yn(m),f.c(),_(f,1),f.m(o,null)):f&&(oe(),b(f,1,1,()=>{f=null}),ie()),(!l||$&4)&&C(o,"visible",m[2]),m[2]?c&&(oe(),b(c,1,1,()=>{c=null}),ie()):c?(c.p(m,$),$&4&&_(c,1)):(c=Jn(m),c.c(),_(c,1),c.m(t,null))},i(m){l||(_(d,m),_(p,m),_(f),_(c),l=!0)},o(m){b(d,m),b(p,m),b(f),b(c),l=!1},d(m){m&&T(t),d&&d.d(m),p&&p.d(m),f&&f.d(),c&&c.d()}}}function ia(e,t,o){let{$$slots:n={},$$scope:i}=t,{title:s=""}=t,{text:r=""}=t,{block:l=!1}=t;return e.$$set=a=>{"title"in a&&o(0,s=a.title),"text"in a&&o(1,r=a.text),"block"in a&&o(2,l=a.block),"$$scope"in a&&o(3,i=a.$$scope)},[s,r,l,i,n]}class ne extends he{constructor(t){super(),de(this,t,ia,oa,pe,{title:0,text:1,block:2})}}var I=(e=>(e[e.checkbox=0]="checkbox",e[e.text=1]="text",e[e.number=2]="number",e[e.slider=3]="slider",e[e.button=4]="button",e[e.select=5]="select",e[e.textarea=6]="textarea",e))(I||{});function Xn(e,t,o){const n=e.slice();return n[19]=t[o],n}function sa(e){let t,o,n;return{c(){t=R("textarea"),t.disabled=e[2],k(t,"class","b3-text-field"),k(t,"placeholder",e[5]),C(t,"fn__block",e[3]),C(t,"fn__size200",!e[3]&&e[4]),Oe(t,"height",e[8]>0?`${e[8]}px`:void 0)},m(i,s){B(i,t,s),re(t,e[0]),o||(n=[J(t,"input",e[17]),J(t,"change",e[10])],o=!0)},p(i,s){s&4&&(t.disabled=i[2]),s&32&&k(t,"placeholder",i[5]),s&65&&re(t,i[0]),s&8&&C(t,"fn__block",i[3]),s&24&&C(t,"fn__size200",!i[3]&&i[4]),s&256&&Oe(t,"height",i[8]>0?`${i[8]}px`:void 0)},d(i){i&&T(t),o=!1,se(n)}}}function ra(e){let t,o=[],n=new Map,i,s,r=$e(e[6]);const l=a=>a[19].key;for(let a=0;a<r.length;a+=1){let u=Xn(e,r,a),d=l(u);n.set(d,o[a]=Qn(d,u))}return{c(){t=R("select");for(let a=0;a<o.length;a+=1)o[a].c();t.disabled=e[2],k(t,"class","b3-select"),e[0]===void 0&&Me(()=>e[16].call(t)),C(t,"fn__block",e[3]),C(t,"fn__size200",!e[3]&&e[4]),C(t,"fn__flex-center",!e[3])},m(a,u){B(a,t,u);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(t,null);Rn(t,e[0],!0),i||(s=[J(t,"change",e[16]),J(t,"change",e[10])],i=!0)},p(a,u){u&64&&(r=$e(a[6]),o=ot(o,u,l,1,a,r,n,t,Er,Qn,null,Xn)),u&4&&(t.disabled=a[2]),u&65&&Rn(t,a[0]),u&8&&C(t,"fn__block",a[3]),u&24&&C(t,"fn__size200",!a[3]&&a[4]),u&8&&C(t,"fn__flex-center",!a[3])},d(a){a&&T(t);for(let u=0;u<o.length;u+=1)o[u].d();i=!1,se(s)}}}function aa(e){let t,o,n,i;return{c(){t=R("button"),o=_e(e[0]),t.disabled=e[2],k(t,"class","b3-button b3-button--outline"),C(t,"fn__block",e[3]),C(t,"fn__size200",!e[3]&&e[4]),C(t,"fn__flex-center",!e[3])},m(s,r){B(s,t,r),A(t,o),n||(i=J(t,"click",e[9]),n=!0)},p(s,r){r&1&&De(o,s[0]),r&4&&(t.disabled=s[2]),r&8&&C(t,"fn__block",s[3]),r&24&&C(t,"fn__size200",!s[3]&&s[4]),r&8&&C(t,"fn__flex-center",!s[3])},d(s){s&&T(t),n=!1,i()}}}function la(e){let t,o,n,i,s,r;return{c(){t=R("input"),t.disabled=e[2],k(t,"class","b3-slider svelte-edt8og"),k(t,"type","range"),k(t,"min",o=e[7].min),k(t,"max",n=e[7].max),k(t,"step",i=e[7].step),C(t,"fn__block",e[3]),C(t,"fn__size200",!e[3]&&e[4])},m(l,a){B(l,t,a),re(t,e[0]),s||(r=[J(t,"change",e[15]),J(t,"input",e[15]),J(t,"change",e[10])],s=!0)},p(l,a){a&4&&(t.disabled=l[2]),a&128&&o!==(o=l[7].min)&&k(t,"min",o),a&128&&n!==(n=l[7].max)&&k(t,"max",n),a&128&&i!==(i=l[7].step)&&k(t,"step",i),a&65&&re(t,l[0]),a&8&&C(t,"fn__block",l[3]),a&24&&C(t,"fn__size200",!l[3]&&l[4])},d(l){l&&T(t),s=!1,se(r)}}}function ua(e){let t,o,n,i,s,r;return{c(){t=R("input"),t.disabled=e[2],k(t,"class","b3-text-field"),k(t,"type","number"),k(t,"placeholder",e[5]),k(t,"min",o=e[7].min),k(t,"max",n=e[7].max),k(t,"step",i=e[7].step),C(t,"fn__block",e[3]),C(t,"fn__size200",!e[3]&&e[4]),C(t,"fn__flex-center",!e[3])},m(l,a){B(l,t,a),re(t,e[0]),s||(r=[J(t,"input",e[14]),J(t,"change",e[10])],s=!0)},p(l,a){a&4&&(t.disabled=l[2]),a&32&&k(t,"placeholder",l[5]),a&128&&o!==(o=l[7].min)&&k(t,"min",o),a&128&&n!==(n=l[7].max)&&k(t,"max",n),a&128&&i!==(i=l[7].step)&&k(t,"step",i),a&65&&It(t.value)!==l[0]&&re(t,l[0]),a&8&&C(t,"fn__block",l[3]),a&24&&C(t,"fn__size200",!l[3]&&l[4]),a&8&&C(t,"fn__flex-center",!l[3])},d(l){l&&T(t),s=!1,se(r)}}}function ca(e){let t,o,n;return{c(){t=R("input"),t.disabled=e[2],k(t,"class","b3-text-field"),k(t,"placeholder",e[5]),C(t,"fn__block",e[3]),C(t,"fn__size200",!e[3]&&e[4]),C(t,"fn__flex-center",!e[3])},m(i,s){B(i,t,s),re(t,e[0]),o||(n=[J(t,"input",e[13]),J(t,"change",e[10])],o=!0)},p(i,s){s&4&&(t.disabled=i[2]),s&32&&k(t,"placeholder",i[5]),s&65&&t.value!==i[0]&&re(t,i[0]),s&8&&C(t,"fn__block",i[3]),s&24&&C(t,"fn__size200",!i[3]&&i[4]),s&8&&C(t,"fn__flex-center",!i[3])},d(i){i&&T(t),o=!1,se(n)}}}function fa(e){let t,o,n;return{c(){t=R("input"),t.disabled=e[2],k(t,"class","b3-switch svelte-edt8og"),k(t,"type","checkbox"),C(t,"fn__block",e[3]),C(t,"fn__flex-center",!e[3])},m(i,s){B(i,t,s),t.checked=e[0],o||(n=[J(t,"change",e[12]),J(t,"change",e[10])],o=!0)},p(i,s){s&4&&(t.disabled=i[2]),s&65&&(t.checked=i[0]),s&8&&C(t,"fn__block",i[3]),s&8&&C(t,"fn__flex-center",!i[3])},d(i){i&&T(t),o=!1,se(n)}}}function Qn(e,t){let o,n=t[19].text+"",i,s;return{key:e,first:null,c(){o=R("option"),i=_e(n),o.__value=s=t[19].key,re(o,o.__value),this.first=o},m(r,l){B(r,o,l),A(o,i)},p(r,l){t=r,l&64&&n!==(n=t[19].text+"")&&De(i,n),l&64&&s!==(s=t[19].key)&&(o.__value=s,re(o,o.__value))},d(r){r&&T(o)}}}function pa(e){let t;function o(s,r){if(s[1]===I.checkbox)return fa;if(s[1]===I.text)return ca;if(s[1]===I.number)return ua;if(s[1]===I.slider)return la;if(s[1]===I.button)return aa;if(s[1]===I.select)return ra;if(s[1]===I.textarea)return sa}let n=o(e),i=n&&n(e);return{c(){i&&i.c(),t=ve()},m(s,r){i&&i.m(s,r),B(s,t,r)},p(s,[r]){n===(n=o(s))&&i?i.p(s,r):(i&&i.d(1),i=n&&n(s),i&&(i.c(),i.m(t.parentNode,t)))},i:Y,o:Y,d(s){s&&T(t),i&&i.d(s)}}}function da(e,t,o){let{type:n}=t,{settingKey:i}=t,{settingValue:s}=t,{disabled:r=!1}=t,{block:l=!1}=t,{normal:a=!0}=t,{placeholder:u=""}=t,{options:d=[]}=t,{limits:h={min:0,max:100,step:1}}=t,{height:g=0}=t;const p=vt();function f(F){p("clicked",{event:F})}function c(F){p("changed",{key:i,value:s,event:F})}function m(){s=this.checked,o(0,s),o(6,d)}function $(){s=this.value,o(0,s),o(6,d)}function H(){s=It(this.value),o(0,s),o(6,d)}function K(){s=It(this.value),o(0,s),o(6,d)}function j(){s=dr(this),o(0,s),o(6,d)}function ee(){s=this.value,o(0,s),o(6,d)}return e.$$set=F=>{"type"in F&&o(1,n=F.type),"settingKey"in F&&o(11,i=F.settingKey),"settingValue"in F&&o(0,s=F.settingValue),"disabled"in F&&o(2,r=F.disabled),"block"in F&&o(3,l=F.block),"normal"in F&&o(4,a=F.normal),"placeholder"in F&&o(5,u=F.placeholder),"options"in F&&o(6,d=F.options),"limits"in F&&o(7,h=F.limits),"height"in F&&o(8,g=F.height)},[s,n,r,l,a,u,d,h,g,f,c,i,m,$,H,K,j,ee]}class G extends he{constructor(t){super(),de(this,t,da,pa,pe,{type:1,settingKey:11,settingValue:0,disabled:2,block:3,normal:4,placeholder:5,options:6,limits:7,height:8})}}function ha(e){let t,o,n,i,s;const r=e[2].default,l=le(r,e,e[1],null);return{c(){t=R("div"),o=new nt(!1),n=L(),i=R("div"),l&&l.c(),o.a=n,k(i,"class","config-query"),k(t,"class","b3-label")},m(a,u){B(a,t,u),o.m(e[0],t),A(t,n),A(t,i),l&&l.m(i,null),s=!0},p(a,[u]){(!s||u&1)&&o.p(a[0]),l&&l.p&&(!s||u&2)&&ce(l,r,a,a[1],s?ue(r,a[1],u,null):fe(a[1]),null)},i(a){s||(_(l,a),s=!0)},o(a){b(l,a),s=!1},d(a){a&&T(t),l&&l.d(a)}}}function ma(e,t,o){let{$$slots:n={},$$scope:i}=t,{title:s}=t;return e.$$set=r=>{"title"in r&&o(0,s=r.title),"$$scope"in r&&o(1,i=r.$$scope)},[s,i,n]}class Zt extends he{constructor(t){super(),de(this,t,ma,ha,pe,{title:0})}}const ga=e=>({}),Zn=e=>({}),_a=e=>({}),xn=e=>({}),ba=e=>({}),eo=e=>({});function wa(e){let t,o,n,i,s,r,l,a,u;const d=e[3].icon,h=le(d,e,e[2],eo),g=e[3].title,p=le(g,e,e[2],xn),f=e[3].input,c=le(f,e,e[2],Zn);return{c(){t=R("label"),h&&h.c(),o=L(),n=R("span"),i=L(),s=R("div"),p&&p.c(),r=L(),l=R("span"),a=L(),c&&c.c(),k(n,"class","fn__space"),k(s,"class","fn__flex-1"),k(l,"class","fn__space"),Oe(t,"min-width",e[0]),Oe(t,"margin-right",e[1]),k(t,"class","fn__flex svelte-1l7osn9")},m(m,$){B(m,t,$),h&&h.m(t,null),A(t,o),A(t,n),A(t,i),A(t,s),p&&p.m(s,null),A(t,r),A(t,l),A(t,a),c&&c.m(t,null),u=!0},p(m,[$]){h&&h.p&&(!u||$&4)&&ce(h,d,m,m[2],u?ue(d,m[2],$,ba):fe(m[2]),eo),p&&p.p&&(!u||$&4)&&ce(p,g,m,m[2],u?ue(g,m[2],$,_a):fe(m[2]),xn),c&&c.p&&(!u||$&4)&&ce(c,f,m,m[2],u?ue(f,m[2],$,ga):fe(m[2]),Zn),(!u||$&1)&&Oe(t,"min-width",m[0]),(!u||$&2)&&Oe(t,"margin-right",m[1])},i(m){u||(_(h,m),_(p,m),_(c,m),u=!0)},o(m){b(h,m),b(p,m),b(c,m),u=!1},d(m){m&&T(t),h&&h.d(m),p&&p.d(m),c&&c.d(m)}}}function ka(e,t,o){let{$$slots:n={},$$scope:i}=t,{minWidth:s="24em"}=t,{marginRight:r="2em"}=t;return e.$$set=l=>{"minWidth"in l&&o(0,s=l.minWidth),"marginRight"in l&&o(1,r=l.marginRight),"$$scope"in l&&o(2,i=l.$$scope)},[s,r,i,n]}class Ce extends he{constructor(t){super(),de(this,t,ka,wa,pe,{minWidth:0,marginRight:1})}}var we=(e=>(e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e))(we||{}),x=(e=>(e.click="click",e.dblclick="dblclick",e.mousedown="mousedown",e.mouseup="mouseup",e.mouseenter="mouseenter",e.mouseleave="mouseleave",e.mousewheel="mousewheel",e.mouseover="mouseover",e.mousemove="mousemove",e.mouseout="mouseout",e))(x||{});function to(e){let t,o;return t=new Ce({props:{minWidth:e[2],marginRight:e[3],$$slots:{input:[Sa],title:[$a],default:[ya]},$$scope:{ctx:e}}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4195329&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function ya(e){let t,o;return t=new Ee({props:{icon:"#iconKeymap",className:"svg"}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function $a(e){let t;return{c(){t=R("kbd"),t.textContent="Ctrl",k(t,"slot","title")},m(o,n){B(o,t,n)},p:Y,d(o){o&&T(t)}}}function Sa(e){let t,o;return t=new G({props:{slot:"input",normal:!1,disabled:e[10],type:I.checkbox,settingKey:"ctrlKey",settingValue:e[0].ctrlKey}}),t.$on("changed",e[20]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i&1024&&(s.disabled=n[10]),i&1&&(s.settingValue=n[0].ctrlKey),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function no(e){let t,o;return t=new Ce({props:{minWidth:e[2],marginRight:e[3],$$slots:{input:[Ta],title:[Ea],default:[va]},$$scope:{ctx:e}}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4196353&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function va(e){let t,o;return t=new Ee({props:{icon:"#iconKeymap",className:"svg"}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function Ea(e){let t;return{c(){t=R("kbd"),t.textContent="Shift",k(t,"slot","title")},m(o,n){B(o,t,n)},p:Y,d(o){o&&T(t)}}}function Ta(e){let t,o;return t=new G({props:{slot:"input",normal:!1,disabled:e[11],type:I.checkbox,settingKey:"shiftKey",settingValue:e[0].shiftKey}}),t.$on("changed",e[20]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i&2048&&(s.disabled=n[11]),i&1&&(s.settingValue=n[0].shiftKey),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function oo(e){let t,o;return t=new Ce({props:{minWidth:e[2],marginRight:e[3],$$slots:{input:[Na],title:[Ba],default:[Oa]},$$scope:{ctx:e}}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4198401&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function Oa(e){let t,o;return t=new Ee({props:{icon:"#iconKeymap",className:"svg"}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function Ba(e){let t;return{c(){t=R("kbd"),t.textContent="Alt",k(t,"slot","title")},m(o,n){B(o,t,n)},p:Y,d(o){o&&T(t)}}}function Na(e){let t,o;return t=new G({props:{slot:"input",normal:!1,disabled:e[12],type:I.checkbox,settingKey:"altKey",settingValue:e[0].altKey}}),t.$on("changed",e[20]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i&4096&&(s.disabled=n[12]),i&1&&(s.settingValue=n[0].altKey),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function io(e){let t,o;return t=new Ce({props:{minWidth:e[2],marginRight:e[3],$$slots:{input:[Ra],title:[Ca],default:[Aa]},$$scope:{ctx:e}}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4202497&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function Aa(e){let t,o;return t=new Ee({props:{icon:"#iconKeymap",className:"svg"}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function Ca(e){let t;return{c(){t=R("kbd"),t.textContent="Meta",k(t,"slot","title")},m(o,n){B(o,t,n)},p:Y,d(o){o&&T(t)}}}function Ra(e){let t,o;return t=new G({props:{slot:"input",normal:!1,disabled:e[13],type:I.checkbox,settingKey:"metaKey",settingValue:e[0].metaKey}}),t.$on("changed",e[20]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i&8192&&(s.disabled=n[13]),i&1&&(s.settingValue=n[0].metaKey),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function so(e){let t,o;return t=new Ce({props:{minWidth:e[2],marginRight:e[3],$$slots:{input:[Pa],title:[Da],default:[Ma]},$$scope:{ctx:e}}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4538369&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function Ma(e){let t,o;return t=new Ee({props:{icon:"#iconSelectText",className:"svg"}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function Da(e){let t,o;return{c(){t=R("span"),o=_e(e[16]),k(t,"slot","title")},m(n,i){B(n,t,i),A(t,o)},p(n,i){i&65536&&De(o,n[16])},d(n){n&&T(t)}}}function Pa(e){let t,o;return t=new G({props:{slot:"input",normal:!1,disabled:e[14],type:I.select,settingKey:"button",settingValue:e[0].button,options:e[18]}}),t.$on("changed",e[20]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i&16384&&(s.disabled=n[14]),i&1&&(s.settingValue=n[0].button),i&262144&&(s.options=n[18]),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function ro(e){let t,o;return t=new Ce({props:{minWidth:e[2],marginRight:e[3],$$slots:{input:[Wa],title:[Fa],default:[La]},$$scope:{ctx:e}}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4882433&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function La(e){let t,o;return t=new Ee({props:{icon:"#iconSelectText",className:"svg"}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function Fa(e){let t,o;return{c(){t=R("span"),o=_e(e[17]),k(t,"slot","title")},m(n,i){B(n,t,i),A(t,o)},p(n,i){i&131072&&De(o,n[17])},d(n){n&&T(t)}}}function Wa(e){let t,o;return t=new G({props:{slot:"input",normal:!1,disabled:e[15],type:I.select,settingKey:"type",settingValue:e[0].type,options:e[19]}}),t.$on("changed",e[20]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i&32768&&(s.disabled=n[15]),i&1&&(s.settingValue=n[0].type),i&524288&&(s.options=n[19]),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function ja(e){let t,o,n,i,s,r,l,a=e[4]&&to(e),u=e[5]&&no(e),d=e[6]&&oo(e),h=e[7]&&io(e),g=e[8]&&so(e),p=e[9]&&ro(e);return{c(){a&&a.c(),t=L(),u&&u.c(),o=L(),d&&d.c(),n=L(),h&&h.c(),i=L(),g&&g.c(),s=L(),p&&p.c(),r=ve()},m(f,c){a&&a.m(f,c),B(f,t,c),u&&u.m(f,c),B(f,o,c),d&&d.m(f,c),B(f,n,c),h&&h.m(f,c),B(f,i,c),g&&g.m(f,c),B(f,s,c),p&&p.m(f,c),B(f,r,c),l=!0},p(f,c){f[4]?a?(a.p(f,c),c&16&&_(a,1)):(a=to(f),a.c(),_(a,1),a.m(t.parentNode,t)):a&&(oe(),b(a,1,1,()=>{a=null}),ie()),f[5]?u?(u.p(f,c),c&32&&_(u,1)):(u=no(f),u.c(),_(u,1),u.m(o.parentNode,o)):u&&(oe(),b(u,1,1,()=>{u=null}),ie()),f[6]?d?(d.p(f,c),c&64&&_(d,1)):(d=oo(f),d.c(),_(d,1),d.m(n.parentNode,n)):d&&(oe(),b(d,1,1,()=>{d=null}),ie()),f[7]?h?(h.p(f,c),c&128&&_(h,1)):(h=io(f),h.c(),_(h,1),h.m(i.parentNode,i)):h&&(oe(),b(h,1,1,()=>{h=null}),ie()),f[8]?g?(g.p(f,c),c&256&&_(g,1)):(g=so(f),g.c(),_(g,1),g.m(s.parentNode,s)):g&&(oe(),b(g,1,1,()=>{g=null}),ie()),f[9]?p?(p.p(f,c),c&512&&_(p,1)):(p=ro(f),p.c(),_(p,1),p.m(r.parentNode,r)):p&&(oe(),b(p,1,1,()=>{p=null}),ie())},i(f){l||(_(a),_(u),_(d),_(h),_(g),_(p),l=!0)},o(f){b(a),b(u),b(d),b(h),b(g),b(p),l=!1},d(f){f&&(T(t),T(o),T(n),T(i),T(s),T(r)),a&&a.d(f),u&&u.d(f),d&&d.d(f),h&&h.d(f),g&&g.d(f),p&&p.d(f)}}}function qa(e){let t,o;return t=new Zt({props:{title:e[1],$$slots:{default:[ja]},$$scope:{ctx:e}}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,[i]){const s={};i&2&&(s.title=n[1]),i&5242877&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function Ia(e,t,o){let{title:n}=t,{shortcut:i}=t,{minWidth:s=void 0}=t,{marginRight:r=void 0}=t,{displayCtrlKey:l=!0}=t,{displayShiftKey:a=!0}=t,{displayAltKey:u=!0}=t,{displayMetaKey:d=!0}=t,{displayMouseButton:h=!0}=t,{displayMouseEvent:g=!0}=t,{disabledCtrlKey:p=!1}=t,{disabledShiftKey:f=!1}=t,{disabledAltKey:c=!1}=t,{disabledMetaKey:m=!1}=t,{disabledMouseButton:$=!1}=t,{disabledMouseEvent:H=!1}=t,{mouseButtonTitle:K="Mouse Button"}=t,{mouseEventTitle:j="Mouse Event"}=t,{mouseButtonOptions:ee=[{key:we.Left,text:"Left"},{key:we.Middle,text:"Middle"},{key:we.Right,text:"Right"},{key:we.Back,text:"Back"},{key:we.Forward,text:"Forward"}]}=t,{mouseEventOptions:F=[{key:x.click,text:x.click},{key:x.dblclick,text:x.dblclick},{key:x.mousedown,text:x.mousedown},{key:x.mouseup,text:x.mouseup},{key:x.mouseenter,text:x.mouseenter},{key:x.mouseleave,text:x.mouseleave},{key:x.mousewheel,text:x.mousewheel},{key:x.mouseover,text:x.mouseover},{key:x.mousemove,text:x.mousemove},{key:x.mouseout,text:x.mouseout}]}=t;const q=vt();function X(N){i.hasOwnProperty(N.detail.key)&&o(0,i[N.detail.key]=N.detail.value,i),q("changed",{shortcut:i})}return e.$$set=N=>{"title"in N&&o(1,n=N.title),"shortcut"in N&&o(0,i=N.shortcut),"minWidth"in N&&o(2,s=N.minWidth),"marginRight"in N&&o(3,r=N.marginRight),"displayCtrlKey"in N&&o(4,l=N.displayCtrlKey),"displayShiftKey"in N&&o(5,a=N.displayShiftKey),"displayAltKey"in N&&o(6,u=N.displayAltKey),"displayMetaKey"in N&&o(7,d=N.displayMetaKey),"displayMouseButton"in N&&o(8,h=N.displayMouseButton),"displayMouseEvent"in N&&o(9,g=N.displayMouseEvent),"disabledCtrlKey"in N&&o(10,p=N.disabledCtrlKey),"disabledShiftKey"in N&&o(11,f=N.disabledShiftKey),"disabledAltKey"in N&&o(12,c=N.disabledAltKey),"disabledMetaKey"in N&&o(13,m=N.disabledMetaKey),"disabledMouseButton"in N&&o(14,$=N.disabledMouseButton),"disabledMouseEvent"in N&&o(15,H=N.disabledMouseEvent),"mouseButtonTitle"in N&&o(16,K=N.mouseButtonTitle),"mouseEventTitle"in N&&o(17,j=N.mouseEventTitle),"mouseButtonOptions"in N&&o(18,ee=N.mouseButtonOptions),"mouseEventOptions"in N&&o(19,F=N.mouseEventOptions)},[i,n,s,r,l,a,u,d,h,g,p,f,c,m,$,H,K,j,ee,F,X]}class ui extends he{constructor(t){super(),de(this,t,Ia,qa,pe,{title:1,shortcut:0,minWidth:2,marginRight:3,displayCtrlKey:4,displayShiftKey:5,displayAltKey:6,displayMetaKey:7,displayMouseButton:8,displayMouseEvent:9,disabledCtrlKey:10,disabledShiftKey:11,disabledAltKey:12,disabledMetaKey:13,disabledMouseButton:14,disabledMouseEvent:15,mouseButtonTitle:16,mouseEventTitle:17,mouseButtonOptions:18,mouseEventOptions:19})}}function Ka(e,t=!0){const o=[{role:"about"},...e?[{type:"separator"},{role:"help"},{type:"separator"},{role:"services"},{type:"separator"},{role:"hide"},{role:"hideOthers"},{role:"unhide"}]:[],{type:"separator"},{role:"quit"}],n=[...e?[{role:"recentDocuments"},{role:"clearRecentDocuments"},{type:"separator"}]:[],{role:"close"}],i=[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteAndMatchStyle"},{role:"delete"},{type:"separator"},{role:"selectAll"},{type:"separator"},{role:"toggleSpellChecker"},...e?[{type:"separator"},{role:"showSubstitutions"},{role:"toggleTextReplacement"},{type:"separator"},{role:"toggleSmartQuotes"},{role:"toggleSmartDashes"},{type:"separator"},{role:"startSpeaking"},{role:"stopSpeaking"}]:[]],s=[{role:"reload"},{role:"forceReload"},{type:"separator"},{role:"resetZoom"},{role:"zoomIn",accelerator:"CmdOrCtrl+="},{role:"zoomOut"},...e?[{role:"zoom"},{type:"separator"},{role:"front"}]:[{type:"separator"},{label:"Toggle On Top",click:(a,u,d)=>{u&&u.setAlwaysOnTop(!u.isAlwaysOnTop())},type:"checkbox",checked:t,accelerator:"CmdOrCtrl+Shift+Space"}],{role:"togglefullscreen"},{type:"separator"},{role:"toggleDevTools"}],r=[...e?[{role:"window"},{type:"separator"},{role:"toggleTabBar"},{role:"selectNextTab"},{role:"selectPreviousTab"},{role:"mergeAllWindows"},{role:"moveTabToNewWindow"},{type:"separator"}]:[],{role:"minimize"},{role:"close"}],l=[{role:"appMenu",submenu:o},{role:"fileMenu",submenu:n},{role:"editMenu",submenu:i},{role:"viewMenu",submenu:s},{role:"windowMenu",submenu:r}];return e&&l.push({role:"shareMenu"}),l}var ae=(e=>(e[e.AlwaysShow=0]="AlwaysShow",e[e.AutoHide=1]="AutoHide",e[e.Disabled=2]="Disabled",e))(ae||{});function Ua(e,t,o,n,i){o.webPreferences=ft(o.webPreferences||{},n);const s=ft(t,o);if(mo())try{const{BrowserWindow:r,Menu:l}=globalThis.require("@electron/remote"),a=new r(s);if(s.enableMenuBar){const u=l.buildFromTemplate(Ka(globalThis.process.platform==="darwin",s.alwaysOnTop));a.setMenu(u)}else a.removeMenu();return s.enableElectron&&globalThis.require("@electron/remote").require("@electron/remote/main").enable(a.webContents),a.loadURL(e.href,{userAgent:i.useragent}),a}catch(r){i.logger.warn(r)}return globalThis.open(e.href,e.href,["popup = true",`width = ${s.width}`,`height = ${s.height}`,`left = ${s.x}`,`top = ${s.y}`].join(","))}function ao(e,t,o){const n=e.slice();return n[30]=t[o][0],n[31]=t[o][1],n[32]=t,n[33]=o,n}function lo(e,t,o){const n=e.slice();return n[30]=t[o][0],n[31]=t[o][1],n[34]=t,n[35]=o,n}function Ha(e){let t,o;return t=new G({props:{slot:"input",type:I.text,block:!0,placeholder:globalThis.navigator.userAgent,settingKey:"Text",settingValue:e[0].general.useragent}}),t.$on("changed",e[7]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].general.useragent),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function Va(e){let t,o;return t=new G({props:{slot:"input",type:I.text,settingKey:"text",settingValue:e[0].general.background}}),t.$on("changed",e[8]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].general.background),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function za(e){let t,o;return t=new G({props:{slot:"input",type:I.button,settingKey:"Reset",settingValue:e[2].settings.generalSettings.reset.text}}),t.$on("clicked",e[4]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function Ga(e){let t,o,n,i,s,r;return t=new ne({props:{title:e[2].settings.generalSettings.useragent.title,text:e[2].settings.generalSettings.useragent.description,block:!0,$$slots:{input:[Ha]},$$scope:{ctx:e}}}),n=new ne({props:{title:e[2].settings.background.title,text:e[2].settings.background.description,$$slots:{input:[Va]},$$scope:{ctx:e}}}),s=new ne({props:{title:e[2].settings.generalSettings.reset.title,text:e[2].settings.generalSettings.reset.description,$$slots:{input:[za]},$$scope:{ctx:e}}}),{c(){E(t.$$.fragment),o=L(),E(n.$$.fragment),i=L(),E(s.$$.fragment)},m(l,a){S(t,l,a),B(l,o,a),S(n,l,a),B(l,i,a),S(s,l,a),r=!0},p(l,a){const u={};a[0]&1|a[1]&32&&(u.$$scope={dirty:a,ctx:l}),t.$set(u);const d={};a[0]&1|a[1]&32&&(d.$$scope={dirty:a,ctx:l}),n.$set(d);const h={};a[1]&32&&(h.$$scope={dirty:a,ctx:l}),s.$set(h)},i(l){r||(_(t.$$.fragment,l),_(n.$$.fragment,l),_(s.$$.fragment,l),r=!0)},o(l){b(t.$$.fragment,l),b(n.$$.fragment,l),b(s.$$.fragment,l),r=!1},d(l){l&&(T(o),T(i)),v(t,l),v(n,l),v(s,l)}}}function Ya(e){let t,o;return t=new G({props:{slot:"input",type:I.checkbox,settingKey:"Checkbox",settingValue:e[0].tab.enable}}),t.$on("changed",e[9]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].tab.enable),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function Ja(e){let t,o;return t=new G({props:{slot:"input",type:I.checkbox,settingKey:"Checkbox",settingValue:e[0].tab.open.targets.hyperlink.editor}}),t.$on("changed",e[10]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].tab.open.targets.hyperlink.editor),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function Xa(e){let t,o;return t=new G({props:{slot:"input",type:I.checkbox,settingKey:"Checkbox",settingValue:e[0].tab.open.targets.hyperlink.other}}),t.$on("changed",e[11]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].tab.open.targets.hyperlink.other),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function Qa(e){let t,o=e[31].prefix+"",n;return{c(){t=R("code"),n=_e(o),k(t,"slot","title"),k(t,"class","fn__code")},m(i,s){B(i,t,s),A(t,n)},p(i,s){s[0]&1&&o!==(o=i[31].prefix+"")&&De(n,o)},d(i){i&&T(t)}}}function Za(e){let t,o;function n(...i){return e[12](e[31],e[34],e[35],...i)}return t=new G({props:{slot:"input",type:I.checkbox,settingKey:"Checkbox",settingValue:e[31].enable}}),t.$on("changed",n),{c(){E(t.$$.fragment)},m(i,s){S(t,i,s),o=!0},p(i,s){e=i;const r={};s[0]&1&&(r.settingValue=e[31].enable),t.$set(r)},i(i){o||(_(t.$$.fragment,i),o=!0)},o(i){b(t.$$.fragment,i),o=!1},d(i){v(t,i)}}}function uo(e,t){let o,n,i;return n=new Ce({props:{minWidth:"8em",$$slots:{input:[Za],title:[Qa]},$$scope:{ctx:t}}}),{key:e,first:null,c(){o=ve(),E(n.$$.fragment),this.first=o},m(s,r){B(s,o,r),S(n,s,r),i=!0},p(s,r){t=s;const l={};r[0]&1|r[1]&32&&(l.$$scope={dirty:r,ctx:t}),n.$set(l)},i(s){i||(_(n.$$.fragment,s),i=!0)},o(s){b(n.$$.fragment,s),i=!1},d(s){s&&T(o),v(n,s)}}}function xa(e){let t=[],o=new Map,n,i,s=$e(Object.entries(e[0].tab.open.protocols));const r=l=>l[30];for(let l=0;l<s.length;l+=1){let a=lo(e,s,l),u=r(a);o.set(u,t[l]=uo(u,a))}return{c(){for(let l=0;l<t.length;l+=1)t[l].c();n=ve()},m(l,a){for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(l,a);B(l,n,a),i=!0},p(l,a){a[0]&9&&(s=$e(Object.entries(l[0].tab.open.protocols)),oe(),t=ot(t,a,r,1,l,s,o,n.parentNode,Et,uo,n,lo),ie())},i(l){if(!i){for(let a=0;a<s.length;a+=1)_(t[a]);i=!0}},o(l){for(let a=0;a<t.length;a+=1)b(t[a]);i=!1},d(l){l&&T(n);for(let a=0;a<t.length;a+=1)t[a].d(l)}}}function el(e){let t,o,n,i,s,r,l,a,u,d,h,g,p;return o=new ne({props:{title:e[2].settings.open.enable.tab.title,text:e[2].settings.open.enable.tab.description,$$slots:{input:[Ya]},$$scope:{ctx:e}}}),i=new ne({props:{title:e[2].settings.open.editorHyperlink.title,text:e[2].settings.open.editorHyperlink.description,$$slots:{input:[Ja]},$$scope:{ctx:e}}}),r=new ne({props:{title:e[2].settings.open.otherHyperlink.title,text:e[2].settings.open.otherHyperlink.description,$$slots:{input:[Xa]},$$scope:{ctx:e}}}),u=new Zt({props:{title:e[2].settings.protocols.title,$$slots:{default:[xa]},$$scope:{ctx:e}}}),g=new ui({props:{minWidth:"16em",title:e[2].settings.open.shortcut.title,shortcut:e[0].tab.open.mouse,displayMouseEvent:!1,disabledMouseButton:!0,mouseButtonTitle:e[2].settings.mouse.button,mouseButtonOptions:[{key:we.Left,text:e[2].settings.mouse.left}]}}),g.$on("changed",e[3]),{c(){t=R("div"),E(o.$$.fragment),n=L(),E(i.$$.fragment),s=L(),E(r.$$.fragment),l=L(),a=R("div"),E(u.$$.fragment),d=L(),h=R("div"),E(g.$$.fragment),k(t,"data-type",e[6].tab[0].name),C(t,"fn__none",e[6].tab[0].key!==e[29]),k(a,"data-type",e[6].tab[1].name),C(a,"fn__none",e[6].tab[1].key!==e[29]),k(h,"data-type",e[6].tab[2].name),C(h,"fn__none",e[6].tab[2].key!==e[29])},m(f,c){B(f,t,c),S(o,t,null),A(t,n),S(i,t,null),A(t,s),S(r,t,null),B(f,l,c),B(f,a,c),S(u,a,null),B(f,d,c),B(f,h,c),S(g,h,null),p=!0},p(f,c){const m={};c[0]&1|c[1]&32&&(m.$$scope={dirty:c,ctx:f}),o.$set(m);const $={};c[0]&1|c[1]&32&&($.$$scope={dirty:c,ctx:f}),i.$set($);const H={};c[0]&1|c[1]&32&&(H.$$scope={dirty:c,ctx:f}),r.$set(H),(!p||c[0]&536870976)&&C(t,"fn__none",f[6].tab[0].key!==f[29]);const K={};c[0]&1|c[1]&32&&(K.$$scope={dirty:c,ctx:f}),u.$set(K),(!p||c[0]&536870976)&&C(a,"fn__none",f[6].tab[1].key!==f[29]);const j={};c[0]&1&&(j.shortcut=f[0].tab.open.mouse),g.$set(j),(!p||c[0]&536870976)&&C(h,"fn__none",f[6].tab[2].key!==f[29])},i(f){p||(_(o.$$.fragment,f),_(i.$$.fragment,f),_(r.$$.fragment,f),_(u.$$.fragment,f),_(g.$$.fragment,f),p=!0)},o(f){b(o.$$.fragment,f),b(i.$$.fragment,f),b(r.$$.fragment,f),b(u.$$.fragment,f),b(g.$$.fragment,f),p=!1},d(f){f&&(T(t),T(l),T(a),T(d),T(h)),v(o),v(i),v(r),v(u),v(g)}}}function tl(e){let t,o;return t=new li({props:{focus:$l,tabs:e[6].tab,$$slots:{default:[el,({focus:n})=>({29:n}),({focus:n})=>[n?536870912:0]]},$$scope:{ctx:e}}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&536870913|i[1]&32&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function nl(e){let t,o;return t=new G({props:{slot:"input",type:I.checkbox,settingKey:"enable",settingValue:e[0].window.enable}}),t.$on("changed",e[13]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.enable),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function ol(e){let t,o;return t=new G({props:{slot:"input",type:I.checkbox,settingKey:"editorHyperlink",settingValue:e[0].window.open.targets.hyperlink.editor}}),t.$on("changed",e[14]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.open.targets.hyperlink.editor),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function il(e){let t,o;return t=new G({props:{slot:"input",type:I.checkbox,settingKey:"otherHyperlink",settingValue:e[0].window.open.targets.hyperlink.other}}),t.$on("changed",e[15]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.open.targets.hyperlink.other),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function sl(e){let t,o;return t=new G({props:{slot:"input",type:I.number,settingKey:"width",settingValue:e[0].window.params.width,limits:{min:320,max:15360,step:40}}}),t.$on("changed",e[16]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.params.width),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function rl(e){let t,o;return t=new G({props:{slot:"input",type:I.number,settingKey:"height",settingValue:e[0].window.params.height,limits:{min:240,max:8640,step:40}}}),t.$on("changed",e[17]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.params.height),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function al(e){let t,o;return t=new G({props:{slot:"input",type:I.checkbox,settingKey:"top",settingValue:e[0].window.params.alwaysOnTop}}),t.$on("changed",e[18]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.params.alwaysOnTop),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function ll(e){let t,o;return t=new G({props:{slot:"input",type:I.select,settingKey:"menuBar",settingValue:e[0].window.params.enableMenuBar?e[0].window.params.autoHideMenuBar?ae.AutoHide:ae.AlwaysShow:ae.Disabled,options:[{key:ae.AutoHide,text:e[2].settings.window.menuBar.options.autoHide},{key:ae.AlwaysShow,text:e[2].settings.window.menuBar.options.alwaysShow},{key:ae.Disabled,text:e[2].settings.window.menuBar.options.disabled}]}}),t.$on("changed",e[19]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.params.enableMenuBar?n[0].window.params.autoHideMenuBar?ae.AutoHide:ae.AlwaysShow:ae.Disabled),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function ul(e){let t,o=e[31].prefix+"",n;return{c(){t=R("code"),n=_e(o),k(t,"slot","title"),k(t,"class","fn__code")},m(i,s){B(i,t,s),A(t,n)},p(i,s){s[0]&1&&o!==(o=i[31].prefix+"")&&De(n,o)},d(i){i&&T(t)}}}function cl(e){let t,o;function n(...i){return e[20](e[31],e[32],e[33],...i)}return t=new G({props:{slot:"input",type:I.checkbox,settingKey:"Checkbox",settingValue:e[31].enable}}),t.$on("changed",n),{c(){E(t.$$.fragment)},m(i,s){S(t,i,s),o=!0},p(i,s){e=i;const r={};s[0]&1&&(r.settingValue=e[31].enable),t.$set(r)},i(i){o||(_(t.$$.fragment,i),o=!0)},o(i){b(t.$$.fragment,i),o=!1},d(i){v(t,i)}}}function co(e,t){let o,n,i;return n=new Ce({props:{minWidth:"8em",$$slots:{input:[cl],title:[ul]},$$scope:{ctx:t}}}),{key:e,first:null,c(){o=ve(),E(n.$$.fragment),this.first=o},m(s,r){B(s,o,r),S(n,s,r),i=!0},p(s,r){t=s;const l={};r[0]&1|r[1]&32&&(l.$$scope={dirty:r,ctx:t}),n.$set(l)},i(s){i||(_(n.$$.fragment,s),i=!0)},o(s){b(n.$$.fragment,s),i=!1},d(s){s&&T(o),v(n,s)}}}function fl(e){let t=[],o=new Map,n,i,s=$e(Object.entries(e[0].window.open.protocols));const r=l=>l[30];for(let l=0;l<s.length;l+=1){let a=ao(e,s,l),u=r(a);o.set(u,t[l]=co(u,a))}return{c(){for(let l=0;l<t.length;l+=1)t[l].c();n=ve()},m(l,a){for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(l,a);B(l,n,a),i=!0},p(l,a){a[0]&9&&(s=$e(Object.entries(l[0].window.open.protocols)),oe(),t=ot(t,a,r,1,l,s,o,n.parentNode,Et,co,n,ao),ie())},i(l){if(!i){for(let a=0;a<s.length;a+=1)_(t[a]);i=!0}},o(l){for(let a=0;a<t.length;a+=1)b(t[a]);i=!1},d(l){l&&T(n);for(let a=0;a<t.length;a+=1)t[a].d(l)}}}function pl(e){let t,o;return t=new G({props:{slot:"input",type:I.checkbox,settingKey:"enable",settingValue:e[0].window.siyuan.enable}}),t.$on("changed",e[21]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.siyuan.enable),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function dl(e){let t,o;return t=new G({props:{slot:"input",type:I.button,settingKey:"open-desktop-window",settingValue:e[2].settings.siyuan.open.desktop.text}}),t.$on("clicked",e[22]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function hl(e){let t,o;return t=new G({props:{slot:"input",type:I.button,settingKey:"open-mobile-window",settingValue:e[2].settings.siyuan.open.mobile.text}}),t.$on("clicked",e[23]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function ml(e){let t,o;return t=new G({props:{slot:"input",type:I.checkbox,settingKey:"focus",settingValue:e[0].window.siyuan.focus}}),t.$on("changed",e[24]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.siyuan.focus),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function gl(e){let t,o;return t=new G({props:{slot:"input",type:I.select,settingKey:"menuBar",settingValue:e[0].window.siyuan.editorType,options:[{key:ke.mobile,text:e[2].settings.siyuan.editorType.options.mobile},{key:ke.desktop,text:e[2].settings.siyuan.editorType.options.desktop}]}}),t.$on("changed",e[25]),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.siyuan.editorType),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function _l(e){let t,o,n,i,s,r,l,a,u,d,h,g,p,f,c,m,$,H,K,j,ee,F,q,X,N,V,D,z,W,be,M,Q;return o=new ne({props:{title:e[2].settings.open.enable.window.title,text:e[2].settings.open.enable.window.description,$$slots:{input:[nl]},$$scope:{ctx:e}}}),i=new ne({props:{title:e[2].settings.open.editorHyperlink.title,text:e[2].settings.open.editorHyperlink.description,$$slots:{input:[ol]},$$scope:{ctx:e}}}),r=new ne({props:{title:e[2].settings.open.otherHyperlink.title,text:e[2].settings.open.otherHyperlink.description,$$slots:{input:[il]},$$scope:{ctx:e}}}),a=new ne({props:{title:e[2].settings.window.width.title,text:e[2].settings.window.width.description,$$slots:{input:[sl]},$$scope:{ctx:e}}}),d=new ne({props:{title:e[2].settings.window.height.title,text:e[2].settings.window.height.description,$$slots:{input:[rl]},$$scope:{ctx:e}}}),g=new ne({props:{title:e[2].settings.window.top.title,text:e[2].settings.window.top.description,$$slots:{input:[al]},$$scope:{ctx:e}}}),f=new ne({props:{title:e[2].settings.window.menuBar.title,text:e[2].settings.window.menuBar.description,$$slots:{input:[ll]},$$scope:{ctx:e}}}),$=new Zt({props:{title:e[2].settings.protocols.title,$$slots:{default:[fl]},$$scope:{ctx:e}}}),j=new ui({props:{minWidth:"16em",title:e[2].settings.open.shortcut.title,shortcut:e[0].window.open.mouse,displayMouseEvent:!1,disabledMouseButton:!0,mouseButtonTitle:e[2].settings.mouse.button,mouseButtonOptions:[{key:we.Middle,text:e[2].settings.mouse.middle}]}}),j.$on("changed",e[3]),q=new ne({props:{title:e[2].settings.siyuan.enable.title,text:e[2].settings.siyuan.enable.description,$$slots:{input:[pl]},$$scope:{ctx:e}}}),N=new ne({props:{title:e[2].settings.siyuan.open.desktop.title,text:e[2].settings.siyuan.open.desktop.description,$$slots:{input:[dl]},$$scope:{ctx:e}}}),D=new ne({props:{title:e[2].settings.siyuan.open.mobile.title,text:e[2].settings.siyuan.open.mobile.description,$$slots:{input:[hl]},$$scope:{ctx:e}}}),W=new ne({props:{title:e[2].settings.siyuan.focus.title,text:e[2].settings.siyuan.focus.description,$$slots:{input:[ml]},$$scope:{ctx:e}}}),M=new ne({props:{title:e[2].settings.siyuan.editorType.title,text:e[2].settings.siyuan.editorType.description,$$slots:{input:[gl]},$$scope:{ctx:e}}}),{c(){t=R("div"),E(o.$$.fragment),n=L(),E(i.$$.fragment),s=L(),E(r.$$.fragment),l=L(),E(a.$$.fragment),u=L(),E(d.$$.fragment),h=L(),E(g.$$.fragment),p=L(),E(f.$$.fragment),c=L(),m=R("div"),E($.$$.fragment),H=L(),K=R("div"),E(j.$$.fragment),ee=L(),F=R("div"),E(q.$$.fragment),X=L(),E(N.$$.fragment),V=L(),E(D.$$.fragment),z=L(),E(W.$$.fragment),be=L(),E(M.$$.fragment),k(t,"data-type",e[6].window[0].name),C(t,"fn__none",e[6].window[0].key!==e[29]),k(m,"data-type",e[6].window[1].name),C(m,"fn__none",e[6].window[1].key!==e[29]),k(K,"data-type",e[6].window[2].name),C(K,"fn__none",e[6].window[2].key!==e[29]),k(F,"data-type",e[6].window[3].name),C(F,"fn__none",e[6].window[3].key!==e[29])},m(O,P){B(O,t,P),S(o,t,null),A(t,n),S(i,t,null),A(t,s),S(r,t,null),A(t,l),S(a,t,null),A(t,u),S(d,t,null),A(t,h),S(g,t,null),A(t,p),S(f,t,null),B(O,c,P),B(O,m,P),S($,m,null),B(O,H,P),B(O,K,P),S(j,K,null),B(O,ee,P),B(O,F,P),S(q,F,null),A(F,X),S(N,F,null),A(F,V),S(D,F,null),A(F,z),S(W,F,null),A(F,be),S(M,F,null),Q=!0},p(O,P){const Pe={};P[0]&1|P[1]&32&&(Pe.$$scope={dirty:P,ctx:O}),o.$set(Pe);const He={};P[0]&1|P[1]&32&&(He.$$scope={dirty:P,ctx:O}),i.$set(He);const xt={};P[0]&1|P[1]&32&&(xt.$$scope={dirty:P,ctx:O}),r.$set(xt);const en={};P[0]&1|P[1]&32&&(en.$$scope={dirty:P,ctx:O}),a.$set(en);const tn={};P[0]&1|P[1]&32&&(tn.$$scope={dirty:P,ctx:O}),d.$set(tn);const nn={};P[0]&1|P[1]&32&&(nn.$$scope={dirty:P,ctx:O}),g.$set(nn);const on={};P[0]&1|P[1]&32&&(on.$$scope={dirty:P,ctx:O}),f.$set(on),(!Q||P[0]&536870976)&&C(t,"fn__none",O[6].window[0].key!==O[29]);const sn={};P[0]&1|P[1]&32&&(sn.$$scope={dirty:P,ctx:O}),$.$set(sn),(!Q||P[0]&536870976)&&C(m,"fn__none",O[6].window[1].key!==O[29]);const rn={};P[0]&1&&(rn.shortcut=O[0].window.open.mouse),j.$set(rn),(!Q||P[0]&536870976)&&C(K,"fn__none",O[6].window[2].key!==O[29]);const an={};P[0]&1|P[1]&32&&(an.$$scope={dirty:P,ctx:O}),q.$set(an);const ln={};P[0]&2|P[1]&32&&(ln.$$scope={dirty:P,ctx:O}),N.$set(ln);const un={};P[0]&2|P[1]&32&&(un.$$scope={dirty:P,ctx:O}),D.$set(un);const cn={};P[0]&1|P[1]&32&&(cn.$$scope={dirty:P,ctx:O}),W.$set(cn);const fn={};P[0]&1|P[1]&32&&(fn.$$scope={dirty:P,ctx:O}),M.$set(fn),(!Q||P[0]&536870976)&&C(F,"fn__none",O[6].window[3].key!==O[29])},i(O){Q||(_(o.$$.fragment,O),_(i.$$.fragment,O),_(r.$$.fragment,O),_(a.$$.fragment,O),_(d.$$.fragment,O),_(g.$$.fragment,O),_(f.$$.fragment,O),_($.$$.fragment,O),_(j.$$.fragment,O),_(q.$$.fragment,O),_(N.$$.fragment,O),_(D.$$.fragment,O),_(W.$$.fragment,O),_(M.$$.fragment,O),Q=!0)},o(O){b(o.$$.fragment,O),b(i.$$.fragment,O),b(r.$$.fragment,O),b(a.$$.fragment,O),b(d.$$.fragment,O),b(g.$$.fragment,O),b(f.$$.fragment,O),b($.$$.fragment,O),b(j.$$.fragment,O),b(q.$$.fragment,O),b(N.$$.fragment,O),b(D.$$.fragment,O),b(W.$$.fragment,O),b(M.$$.fragment,O),Q=!1},d(O){O&&(T(t),T(c),T(m),T(H),T(K),T(ee),T(F)),v(o),v(i),v(r),v(a),v(d),v(g),v(f),v($),v(j),v(q),v(N),v(D),v(W),v(M)}}}function bl(e){let t,o;return t=new li({props:{focus:Sl,tabs:e[6].window,$$slots:{default:[_l,({focus:n})=>({29:n}),({focus:n})=>[n?536870912:0]]},$$scope:{ctx:e}}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&536870915|i[1]&32&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}function wl(e){let t,o,n,i,s,r;return t=new Dt({props:{display:e[5][0].key===e[28],$$slots:{default:[Ga]},$$scope:{ctx:e}}}),n=new Dt({props:{display:e[5][1].key===e[28],$$slots:{default:[tl]},$$scope:{ctx:e}}}),s=new Dt({props:{display:e[5][2].key===e[28],$$slots:{default:[bl]},$$scope:{ctx:e}}}),{c(){E(t.$$.fragment),o=L(),E(n.$$.fragment),i=L(),E(s.$$.fragment)},m(l,a){S(t,l,a),B(l,o,a),S(n,l,a),B(l,i,a),S(s,l,a),r=!0},p(l,a){const u={};a[0]&268435456&&(u.display=l[5][0].key===l[28]),a[0]&1|a[1]&32&&(u.$$scope={dirty:a,ctx:l}),t.$set(u);const d={};a[0]&268435456&&(d.display=l[5][1].key===l[28]),a[0]&1|a[1]&32&&(d.$$scope={dirty:a,ctx:l}),n.$set(d);const h={};a[0]&268435456&&(h.display=l[5][2].key===l[28]),a[0]&3|a[1]&32&&(h.$$scope={dirty:a,ctx:l}),s.$set(h)},i(l){r||(_(t.$$.fragment,l),_(n.$$.fragment,l),_(s.$$.fragment,l),r=!0)},o(l){b(t.$$.fragment,l),b(n.$$.fragment,l),b(s.$$.fragment,l),r=!1},d(l){l&&(T(o),T(i)),v(t,l),v(n,l),v(s,l)}}}function kl(e){let t,o;return t=new Dr({props:{panels:e[5],focus:yl,$$slots:{default:[wl,({focus:n})=>({28:n}),({focus:n})=>[n?268435456:0]]},$$scope:{ctx:e}}}),{c(){E(t.$$.fragment)},m(n,i){S(t,n,i),o=!0},p(n,i){const s={};i[0]&268435459|i[1]&32&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){v(t,n)}}}let yl=0,$l=0,Sl=0;function vl(e,t,o){let{config:n}=t,{plugin:i}=t;const s=i.i18n;function r(){i.updateConfig(n)}function l(){i.siyuan.confirm(s.settings.generalSettings.reset.title,s.settings.generalSettings.reset.description,async()=>{await i.resetConfig(),globalThis.location.reload()})}const a=[{key:0,text:s.settings.generalSettings.title,name:s.settings.generalSettings.title,icon:"#iconSettings"},{key:1,text:s.settings.openTab,name:s.settings.openTab,icon:"#iconBoth"},{key:2,text:s.settings.openWindow,name:s.settings.openWindow,icon:"#iconOpenWindow"}],u={tab:[{key:0,text:s.settings.general,name:s.settings.general,icon:"⚙"},{key:1,text:s.settings.protocol,name:s.settings.protocol,icon:"🌐"},{key:2,text:s.settings.shortcut,name:s.settings.shortcut,icon:"⌨"}],window:[{key:0,text:s.settings.general,name:s.settings.general,icon:"⚙"},{key:1,text:s.settings.protocol,name:s.settings.protocol,icon:"🌐"},{key:2,text:s.settings.shortcut,name:s.settings.shortcut,icon:"⌨"},{key:3,text:s.settings.siyuan.title,name:s.settings.siyuan.title,icon:"📝"}]},d=W=>{o(0,n.general.useragent=W.detail.value,n),r()},h=W=>{o(0,n.general.background=W.detail.value,n),r()},g=W=>{o(0,n.tab.enable=W.detail.value,n),r()},p=W=>{o(0,n.tab.open.targets.hyperlink.editor=W.detail.value,n),r()},f=W=>{o(0,n.tab.open.targets.hyperlink.other=W.detail.value,n),r()},c=(W,be,M,Q)=>{o(0,be[M][1].enable=Q.detail.value,n),r()},m=W=>{o(0,n.window.enable=W.detail.value,n),r()},$=W=>{o(0,n.window.open.targets.hyperlink.editor=W.detail.value,n),r()},H=W=>{o(0,n.window.open.targets.hyperlink.other=W.detail.value,n),r()},K=W=>{o(0,n.window.params.width=W.detail.value,n),r()},j=W=>{o(0,n.window.params.height=W.detail.value,n),r()},ee=W=>{o(0,n.window.params.alwaysOnTop=W.detail.value,n),r()},F=W=>{switch(W.detail.value){case ae.AutoHide:o(0,n.window.params.enableMenuBar=!0,n),o(0,n.window.params.autoHideMenuBar=!0,n);break;case ae.AlwaysShow:o(0,n.window.params.enableMenuBar=!0,n),o(0,n.window.params.autoHideMenuBar=!1,n);break;case ae.Disabled:o(0,n.window.params.enableMenuBar=!1,n);break}r()},q=(W,be,M,Q)=>{o(0,be[M][1].enable=Q.detail.value,n),r()},X=W=>{o(0,n.window.siyuan.enable=W.detail.value,n),r()},N=W=>i.openSiyuanDesktopWindow(W.detail.event),V=W=>i.openSiyuanMobileWindow(W.detail.event),D=W=>{o(0,n.window.siyuan.focus=W.detail.value,n),r()},z=W=>{o(0,n.window.siyuan.editorType=W.detail.value,n),r()};return e.$$set=W=>{"config"in W&&o(0,n=W.config),"plugin"in W&&o(1,i=W.plugin)},[n,i,s,r,l,a,u,d,h,g,p,f,c,m,$,H,K,j,ee,F,q,X,N,V,D,z]}class El extends he{constructor(t){super(),de(this,t,vl,kl,pe,{config:0,plugin:1},null,[-1,-1])}}function fo(e,{delay:t=0,duration:o=400,easing:n=Xt}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:o,easing:n,css:s=>`opacity: ${s*i}`}}var Te=(e=>(e.n="b3-tooltips__n",e.ne="b3-tooltips__ne",e.e="b3-tooltips__e",e.se="b3-tooltips__se",e.s="b3-tooltips__s",e.sw="b3-tooltips__sw",e.w="b3-tooltips__w",e.nw="b3-tooltips__nw",e))(Te||{});function Tl(e){let t,o,n,i,s,r;return o=new Ee({props:{icon:e[0]}}),{c(){t=R("button"),E(o.$$.fragment),k(t,"aria-label",e[1]),k(t,"class",n="block__icon block__icon--show fn__flex-center b3-tooltips "+e[4]),C(t,"toolbar__item--active",e[2]),C(t,"toolbar__item--disabled",e[3])},m(l,a){B(l,t,a),S(o,t,null),i=!0,s||(r=J(t,"click",e[5]),s=!0)},p(l,[a]){const u={};a&1&&(u.icon=l[0]),o.$set(u),(!i||a&2)&&k(t,"aria-label",l[1]),(!i||a&16&&n!==(n="block__icon block__icon--show fn__flex-center b3-tooltips "+l[4]))&&k(t,"class",n),(!i||a&20)&&C(t,"toolbar__item--active",l[2]),(!i||a&24)&&C(t,"toolbar__item--disabled",l[3])},i(l){i||(_(o.$$.fragment,l),i=!0)},o(l){b(o.$$.fragment,l),i=!1},d(l){l&&T(t),v(o),s=!1,r()}}}function Ol(e,t,o){let{icon:n}=t,{ariaLabel:i=void 0}=t,{active:s=!1}=t,{disabled:r=!1}=t,{tooltipsDirection:l=Te.s}=t;function a(u){br.call(this,e,u)}return e.$$set=u=>{"icon"in u&&o(0,n=u.icon),"ariaLabel"in u&&o(1,i=u.ariaLabel),"active"in u&&o(2,s=u.active),"disabled"in u&&o(3,r=u.disabled),"tooltipsDirection"in u&&o(4,l=u.tooltipsDirection)},[n,i,s,r,l,a]}class Re extends he{constructor(t){super(),de(this,t,Ol,Tl,pe,{icon:0,ariaLabel:1,active:2,disabled:3,tooltipsDirection:4})}}function po(e){let t,o,n,i,s,r;return{c(){t=R("div"),o=R("span"),n=_e(e[12]),k(t,"class","webview-status tooltip svelte-x3hvqm")},m(l,a){B(l,t,a),A(t,o),A(o,n),r=!0},p(l,a){(!r||a&4096)&&De(n,l[12])},i(l){r||(l&&Me(()=>{r&&(s&&s.end(1),i=Sr(t,fo,{delay:0,duration:125}),i.start())}),r=!0)},o(l){i&&i.invalidate(),l&&(s=vr(t,fo,{delay:500,duration:250})),r=!1},d(l){l&&T(t),l&&s&&s.end()}}}function Bl(e){let t,o,n,i,s,r,l,a,u,d,h,g,p,f,c,m,$,H,K,j,ee,F,q,X,N;n=new Re({props:{icon:"#iconLeft",ariaLabel:e[13].webview.goForwardOnePage,disabled:!e[4],tooltipsDirection:Te.se}}),n.$on("click",e[14]),s=new Re({props:{icon:"#iconRight",ariaLabel:e[13].webview.goBackOnePage,disabled:!e[5],tooltipsDirection:Te.se}}),s.$on("click",e[15]),l=new Re({props:{icon:e[6]?"#iconClose":"#iconRefresh",ariaLabel:e[6]?e[13].webview.stopLoadingThisPage:e[13].webview.reloadCurrentPage,tooltipsDirection:Te.se}}),l.$on("click",e[16]),h=new Re({props:{icon:"#iconLanguage",ariaLabel:e[13].webview.openWithDefaultProgram,tooltipsDirection:Te.sw}}),h.$on("click",e[18]),p=new Re({props:{icon:"#iconOpenWindow",ariaLabel:e[13].webview.openWithNewWindow,tooltipsDirection:Te.sw}}),p.$on("click",e[19]),c=new Re({props:{icon:e[3]?"#iconFullscreenExit":"#iconFullscreen",ariaLabel:e[3]?e[13].webview.exitFullscreen:e[13].webview.enterFullscreen,active:e[3],tooltipsDirection:Te.sw}}),c.$on("click",e[20]),$=new Re({props:{icon:"#iconBug",ariaLabel:e[8]?e[13].webview.closeDevTools:e[13].webview.openDevTools,active:e[8],tooltipsDirection:Te.sw}}),$.$on("click",e[21]);let V=e[11]&&po(e);return{c(){t=R("div"),o=R("div"),E(n.$$.fragment),i=L(),E(s.$$.fragment),r=L(),E(l.$$.fragment),a=L(),u=R("input"),d=L(),E(h.$$.fragment),g=L(),E(p.$$.fragment),f=L(),E(c.$$.fragment),m=L(),E($.$$.fragment),H=L(),K=R("div"),j=R("webview"),F=L(),V&&V.c(),k(u,"class","b3-text-field fn__flex-1 address-field svelte-x3hvqm"),k(u,"type","url"),k(o,"class","protyle-breadcrumb svelte-x3hvqm"),An(j.src,ee=e[0])||k(j,"src",ee),k(j,"useragent",e[1]),k(j,"class","fn__flex-1 svelte-x3hvqm"),k(j,"allowpopups",""),C(j,"pointer-events-disable",e[10]),Oe(j,"background",e[2]),k(K,"class","protyle-preview svelte-x3hvqm"),k(t,"class","fn__flex fn__flex-1 fn__flex-column content svelte-x3hvqm"),C(t,"fullscreen",e[3])},m(D,z){B(D,t,z),A(t,o),S(n,o,null),A(o,i),S(s,o,null),A(o,r),S(l,o,null),A(o,a),A(o,u),re(u,e[7]),A(o,d),S(h,o,null),A(o,g),S(p,o,null),A(o,f),S(c,o,null),A(o,m),S($,o,null),A(t,H),A(t,K),A(K,j),e[25](j),A(t,F),V&&V.m(t,null),q=!0,X||(N=[J(u,"change",e[17]),J(u,"input",e[24]),J(K,"mouseenter",e[26]),J(K,"mouseleave",e[27])],X=!0)},p(D,[z]){const W={};z&16&&(W.disabled=!D[4]),n.$set(W);const be={};z&32&&(be.disabled=!D[5]),s.$set(be);const M={};z&64&&(M.icon=D[6]?"#iconClose":"#iconRefresh"),z&64&&(M.ariaLabel=D[6]?D[13].webview.stopLoadingThisPage:D[13].webview.reloadCurrentPage),l.$set(M),z&128&&u.value!==D[7]&&re(u,D[7]);const Q={};z&8&&(Q.icon=D[3]?"#iconFullscreenExit":"#iconFullscreen"),z&8&&(Q.ariaLabel=D[3]?D[13].webview.exitFullscreen:D[13].webview.enterFullscreen),z&8&&(Q.active=D[3]),c.$set(Q);const O={};z&256&&(O.ariaLabel=D[8]?D[13].webview.closeDevTools:D[13].webview.openDevTools),z&256&&(O.active=D[8]),$.$set(O),(!q||z&1&&!An(j.src,ee=D[0]))&&k(j,"src",ee),(!q||z&2)&&k(j,"useragent",D[1]),(!q||z&1024)&&C(j,"pointer-events-disable",D[10]),z&4&&Oe(j,"background",D[2]),D[11]?V?(V.p(D,z),z&2048&&_(V,1)):(V=po(D),V.c(),_(V,1),V.m(t,null)):V&&(oe(),b(V,1,1,()=>{V=null}),ie()),(!q||z&8)&&C(t,"fullscreen",D[3])},i(D){q||(_(n.$$.fragment,D),_(s.$$.fragment,D),_(l.$$.fragment,D),_(h.$$.fragment,D),_(p.$$.fragment,D),_(c.$$.fragment,D),_($.$$.fragment,D),_(V),q=!0)},o(D){b(n.$$.fragment,D),b(s.$$.fragment,D),b(l.$$.fragment,D),b(h.$$.fragment,D),b(p.$$.fragment,D),b(c.$$.fragment,D),b($.$$.fragment,D),b(V),q=!1},d(D){D&&T(t),v(n),v(s),v(l),v(h),v(p),v(c),v($),e[25](null),V&&V.d(),X=!1,se(N)}}}function Nl(e,t,o){let{src:n}=t,{tab:i}=t,{plugin:s}=t,{useragent:r=s.useragent}=t,{background:l=s.background}=t;const a=s.i18n;let u=!1,d=!1,h=!1,g=!1,p=decodeURI(n),f=!1,c,m=!1,$=!1,H="";function K(){d&&(c==null||c.goBack())}function j(){d&&(c==null||c.goBack())}function ee(){g?c==null||c.stop():c==null||c.reload()}function F(M){if(p)try{const Q=new URL(p);c.loadURL(Q.href)}catch{try{const O=new URL(`http://${p}`);c.loadURL(O.href.replace(/^http:/,""))}catch{s.siyuan.showMessage(`${s.name}:
URL <code class="fn__code">${p}</code> ${a.message.nonStandardURL}
`,void 0,"error")}}}function q(){global.open(i.data.href,"_blank")}function X(M){s.openWindow(i.data.href,{x:M.screenX,y:M.screenY,title:i.data.title})}function N(){o(3,u=!u)}function V(){c&&(c.isDevToolsOpened()?(c.closeDevTools(),o(8,f=!1)):(c.openDevTools(),o(8,f=!0)))}_r(()=>{c.addEventListener("load-commit",M=>{M.isMainFrame&&(o(7,p=decodeURI(M.url)),o(22,i.data.href=M.url,i)),o(4,d=c.canGoBack()),o(5,h=c.canGoForward())}),c.addEventListener("page-title-updated",M=>{o(22,i.data.title=M.title,i),i.tab.updateTitle(M.title),o(22,i.tab.headElement.ariaLabel=M.title,i)}),c.addEventListener("page-favicon-updated",M=>{var O;const Q=M.favicons;if((O=i.tab.headElement.querySelector(".item__graphic"))==null||O.remove(),Q.length>0){const P=Q[0],Pe=i.tab.headElement.querySelector(".item__icon");if(i.tab.docIcon!==P||!Pe){o(22,i.tab.docIcon=P,i);const He=`<img src="${P}" />`;Pe?Pe.innerHTML=He:i.tab.headElement.insertAdjacentHTML("afterbegin",`<span class="item__icon">${He}</span>`)}}else i.tab.setDocIcon("🌐".codePointAt(0).toString(16),!0)}),c.addEventListener("did-start-loading",M=>{o(6,g=!0)}),c.addEventListener("did-stop-loading",M=>{o(6,g=!1)}),c.addEventListener("devtools-open-url",M=>{s.openWebviewTab(M.url)}),c.addEventListener("update-target-url",M=>{M.url?(o(12,H=M.url),$||o(11,$=!0)):o(11,$=!1)}),c.addEventListener("context-menu",M=>{s.logger.debug(M),M.params.linkURL&&s.openWebviewTab(M.params.linkURL,M.params.titleText||M.params.linkText||M.params.altText)})});function D(){p=this.value,o(7,p)}function z(M){Ut[M?"unshift":"push"](()=>{c=M,o(9,c)})}const W=M=>o(10,m=M.button!==0),be=()=>o(10,m=!0);return e.$$set=M=>{"src"in M&&o(0,n=M.src),"tab"in M&&o(22,i=M.tab),"plugin"in M&&o(23,s=M.plugin),"useragent"in M&&o(1,r=M.useragent),"background"in M&&o(2,l=M.background)},[n,r,l,u,d,h,g,p,f,c,m,$,H,a,K,j,ee,F,q,X,N,V,i,s,D,z,W,be]}class Al extends he{constructor(t){super(),de(this,t,Nl,Bl,pe,{src:0,tab:22,plugin:23,useragent:1,background:2})}}const ho={general:{useragent:"",background:"transparent"},tab:{enable:!0,open:{mouse:{type:"click",button:we.Left,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},targets:{hyperlink:{editor:{enable:!0},other:{enable:!0}}},protocols:{https:{enable:!0,prefix:"https://"},http:{enable:!0,prefix:"http://"},file:{enable:!0,prefix:"file://"},ftps:{enable:!0,prefix:"ftps://"},ftp:{enable:!0,prefix:"ftp://"},"//":{enable:!0,prefix:"//"}}}},window:{enable:!0,open:{mouse:{type:"mousedown",button:we.Middle,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},targets:{hyperlink:{editor:{enable:!0},other:{enable:!1}}},protocols:{siyuan:{enable:!0,prefix:"siyuan://"},https:{enable:!0,prefix:"https://"},http:{enable:!0,prefix:"http://"},file:{enable:!0,prefix:"file://"},ftps:{enable:!0,prefix:"ftps://"},ftp:{enable:!0,prefix:"ftp://"},"//":{enable:!0,prefix:"//"}}},params:{width:800,height:600,frame:!0,alwaysOnTop:!0,autoHideMenuBar:!0,enableMenuBar:!0},siyuan:{enable:!0,focus:!1,editorType:ke.mobile}}},Xe=class Xe extends me.Plugin{constructor(o){super(o);Z(this,"siyuan",me);Z(this,"logger");Z(this,"TOP_BAR_MENU_ID");Z(this,"SETTINGS_DIALOG_ID");Z(this,"webview_tab");Z(this,"tab_bar_item");Z(this,"config");Z(this,"blockRefMenuEventListener",o=>{const n=o.detail.element,i=n.dataset.id,s=[];s.push({icon:"iconOpenWindow",label:this.i18n.menu.openEditor.label,click:()=>this.openSiyuanWindowByID(n,i,!1)}),s.push({icon:"iconFocus",label:this.i18n.menu.openFocusedEditor.label,click:()=>this.openSiyuanWindowByID(n,i,!0)}),o.detail.menu.addItem({icon:"iconLanguage",label:this.i18n.displayName,submenu:s})});Z(this,"linkMenuEventListener",o=>{const n=[],i=o.detail.element,s=this.parseHyperlinkMeta(i,this.config.tab.open.targets);switch(!0){case s.href.startsWith("siyuan:"):{const r=new URL(s.href),l=gn(r);n.push({icon:"iconFile",label:this.i18n.menu.openTabBackground.label,click:()=>{me.openTab({app:this.app,doc:{id:l.id,action:["cb-get-focus","cb-get-hl"],zoomIn:l.focus},keepCursor:!0,removeCurrentTab:!1})}}),n.push({icon:"iconLayoutRight",label:this.i18n.menu.openTabRight.label,click:()=>{me.openTab({app:this.app,doc:{id:l.id,action:["cb-get-focus","cb-get-hl"],zoomIn:l.focus},position:"right",keepCursor:!1,removeCurrentTab:!1})}}),n.push({icon:"iconLayoutBottom",label:this.i18n.menu.openTabBottom.label,click:()=>{me.openTab({app:this.app,doc:{id:l.id,action:["cb-get-focus","cb-get-hl"],zoomIn:l.focus},position:"bottom",keepCursor:!1,removeCurrentTab:!1})}}),n.push({icon:"iconOpenWindow",label:this.i18n.menu.openByNewWindow.label,click:()=>this.openSiyuanWindowByID(i,l.id,l.focus)});break}case Pi(s.href):{const r=s.href.startsWith("/")?`${globalThis.location.origin}${s.href}`:`${globalThis.document.baseURI}${s.href}`;it&&Ve&&(n.push({icon:"iconFile",label:this.i18n.menu.openTabBackground.label,click:()=>this.openWebviewTab(r,s.title,void 0,{keepCursor:!0})}),n.push({icon:"iconLayoutRight",label:this.i18n.menu.openTabRight.label,click:()=>this.openWebviewTab(r,s.title,void 0,{position:"right"})}),n.push({icon:"iconLayoutBottom",label:this.i18n.menu.openTabBottom.label,click:()=>this.openWebviewTab(r,s.title,void 0,{position:"bottom"})})),n.push({icon:"iconOpenWindow",label:this.i18n.menu.openByNewWindow.label,click:()=>this.openWebpageWindow(r,s.title,Rt(i))});break}default:{it&&Ve&&(n.push({icon:"iconFile",label:this.i18n.menu.openTabBackground.label,click:()=>this.openWebviewTab(s.href,s.title,void 0,{keepCursor:!0})}),n.push({icon:"iconLayoutRight",label:this.i18n.menu.openTabRight.label,click:()=>this.openWebviewTab(s.href,s.title,void 0,{position:"right"})}),n.push({icon:"iconLayoutBottom",label:this.i18n.menu.openTabBottom.label,click:()=>this.openWebviewTab(s.href,s.title,void 0,{position:"bottom"})})),n.push({icon:"iconOpenWindow",label:this.i18n.menu.openByNewWindow.label,click:()=>this.openWebpageWindow(s.href,s.title,Rt(i))});break}}o.detail.menu.addItem({icon:"iconLanguage",label:this.i18n.displayName,submenu:n})});Z(this,"blockMenuEventListener",o=>{const n=o.detail,i=rr(o.detail);if(i){const s=[];s.push({icon:"iconOpenWindow",label:this.i18n.menu.openEditor.label,click:r=>this.openSiyuanWindowByID(r,i.id,!1)}),!i.isDocumentBlock&&!i.isMultiBlock&&s.push({icon:"iconFocus",label:this.i18n.menu.openFocusedEditor.label,click:r=>this.openSiyuanWindowByID(r,i.id,!0)}),n.menu.addItem({icon:"iconLanguage",label:this.i18n.displayName,submenu:s})}});Z(this,"openTabEventListener",o=>{try{if(!this.config.tab.enable||!dn(o,this.config.tab.open.mouse))return;const n=this.parseHyperlinkMeta(o.target,this.config.tab.open.targets);if(n.valid&&(this.logger.info(n.href),this.isUrlSchemeAvailable(n.href,this.config.tab.open.protocols)))try{o.preventDefault(),o.stopPropagation(),this.openWebviewTab(n.href,n.title)}catch(i){this.logger.warn(i)}}catch(n){this.logger.warn(n)}});Z(this,"openWindowEventListener",o=>{try{if(!this.config.window.enable||!dn(o,this.config.window.open.mouse))return;const n=this.parseHyperlinkMeta(o.target,this.config.window.open.targets);if(n.valid){if(this.logger.info(n.href),n.enabled&&this.isUrlSchemeAvailable(n.href,this.config.window.open.protocols))if(o.preventDefault(),o.stopPropagation(),n.href.startsWith("siyuan://")){if(this.config.window.siyuan.enable){const i=ze(Tt(this.config.window.siyuan.editorType),gn(new URL(n.href)));this.openSiyuanWindow(i,o)}}else this.openWindow(n.href,{x:o.screenX,y:o.screenY,title:n.title||this.name})}else if(this.config.window.siyuan.enable){const i=Di(o);if(i){o.preventDefault(),o.stopPropagation();const s=ze(Tt(this.config.window.siyuan.editorType),{id:i,focus:this.config.window.siyuan.focus});this.openSiyuanWindow(s,o)}}}catch(n){this.logger.warn(n)}});this.logger=new _i(this.name),this.TOP_BAR_MENU_ID=`${this.name}-top-bar-menu`,this.SETTINGS_DIALOG_ID=`${this.name}-settings-dialog`;const n=this;this.webview_tab=this.addTab({type:"-webview-tag",init(){const i=this;new Al({target:i.element,props:{src:i.data.href,tab:i,plugin:n}})}})}onload(){this.loadData(Xe.GLOBAL_CONFIG_NAME).then(o=>{this.config=ft(ho,o||{})}).catch(o=>this.logger.error(o)).finally(()=>{it&&Ve&&globalThis.addEventListener(this.config.tab.open.mouse.type,this.openTabEventListener,!0),globalThis.addEventListener(this.config.window.open.mouse.type,this.openWindowEventListener,!0),this.eventBus.on("click-editortitleicon",this.blockMenuEventListener),this.eventBus.on("click-blockicon",this.blockMenuEventListener),this.eventBus.on("open-menu-blockref",this.blockRefMenuEventListener),this.eventBus.on("open-menu-link",this.linkMenuEventListener),this.addCommand({langKey:"openDesktopWindow",langText:this.i18n.menu.openDesktopWindow.label,hotkey:"⇧⌘N",customHotkey:"",callback:()=>{this.openSiyuanDesktopWindow()}}),this.addCommand({langKey:"openMobildWindow",langText:this.i18n.menu.openMobildWindow.label,hotkey:"",customHotkey:"",callback:()=>{this.openSiyuanMobileWindow()}})})}onLayoutReady(){Ve&&(new me.Menu(this.TOP_BAR_MENU_ID),this.tab_bar_item=this.addTopBar({icon:"iconOpenWindow",title:this.i18n.displayName,position:"right",callback:o=>{const n=new me.Menu(this.TOP_BAR_MENU_ID);n.addItem({icon:"iconSiYuan",label:this.i18n.menu.openDesktopWindow.label,click:s=>{const r=mn(s);this.openSiyuanDesktopWindow({screenX:r.centerX,screenY:r.centerY})}}),n.addItem({icon:"iconSiYuan",label:this.i18n.menu.openMobildWindow.label,click:s=>{const r=mn(s);this.openSiyuanMobileWindow({screenX:r.centerX,screenY:r.centerY})}});const i={x:0,y:0,isLeft:!0};if(o.target.classList.contains("fn__none")){const s=document.getElementById("barPlugins");if(s){const r=s.getBoundingClientRect();i.x=r.x+r.width/2,i.y=r.y+r.height/2}}else{const s=this.tab_bar_item.getBoundingClientRect();i.x=s.x+s.width/2,i.y=s.y+s.height/2}n.open(i)}}))}onunload(){it&&Ve&&globalThis.removeEventListener(this.config.tab.open.mouse.type,this.openTabEventListener,!0),globalThis.removeEventListener(this.config.window.open.mouse.type,this.openWindowEventListener,!0),this.eventBus.off("click-blockicon",this.blockMenuEventListener),this.eventBus.off("click-editortitleicon",this.blockMenuEventListener),this.eventBus.off("open-menu-blockref",this.blockRefMenuEventListener),this.eventBus.off("open-menu-link",this.linkMenuEventListener)}openSetting(){const o=this,n=new me.Dialog({title:`${this.i18n.displayName} <code class="fn__code">${this.name}</code>`,content:`<div id="${o.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:pn?"92vw":"720px",height:pn?void 0:"640px"});new El({target:n.element.querySelector(`#${o.SETTINGS_DIALOG_ID}`),props:{config:this.config,plugin:this}})}async resetConfig(){return this.updateConfig(ft(ho))}async updateConfig(o){return o&&o!==this.config&&(this.config=o),this.saveData(Xe.GLOBAL_CONFIG_NAME,this.config)}get useragent(){return this.config.general.useragent||global.navigator.userAgent}get background(){return this.config.general.background}openWebviewTab(o,n,i="iconLanguage",s={}){me.openTab({app:this.app,custom:{icon:i,title:n||this.name,fn:this.webview_tab,data:{href:o,title:n||this.name}},keepCursor:!1,removeCurrentTab:!1,...s})}openWindow(o,n={x:0,y:0,title:null},i={defaultFontSize:globalThis.siyuan.config.editor.fontSize,defaultFontFamily:{standard:globalThis.siyuan.config.editor.fontFamily}}){try{const s=new URL(o);return Ua(s,{backgroundColor:this.background,...this.config.window.params},n,i,this)}catch(s){this.logger.warn(s)}}openWebpageWindow(o,n,i){const s={x:(i==null?void 0:i.screenX)??0,y:(i==null?void 0:i.screenY)??0,title:n,alwaysOnTop:!1,autoHideMenuBar:!0,webPreferences:{nodeIntegration:!1,webviewTag:!1,contextIsolation:!1},enableMenuBar:!0,enableElectron:!1};return this.openWindow(o,s)}openSiyuanDesktopWindow(o,n){const i={x:(o==null?void 0:o.screenX)??0,y:(o==null?void 0:o.screenY)??0,title:"desktop",alwaysOnTop:!1,autoHideMenuBar:!1,webPreferences:{nodeIntegration:!0,webviewTag:!0,contextIsolation:!1},enableMenuBar:!0,enableElectron:!0};this.openWindow(n||ze(Pt.desktop).href,i)}openSiyuanMobileWindow(o,n){const i={x:(o==null?void 0:o.screenX)??0,y:(o==null?void 0:o.screenY)??0,title:"mobile",alwaysOnTop:!0,autoHideMenuBar:!1,webPreferences:{nodeIntegration:!0,webviewTag:!0,contextIsolation:!1},enableMenuBar:!0,enableElectron:!0};this.openWindow(n||ze(Pt.mobile).href,i)}openSiyuanWindow(o,n){switch(this.config.window.siyuan.editorType){case ke.desktop:this.openSiyuanDesktopWindow(n,o.href);break;case ke.mobile:this.openSiyuanMobileWindow(n,o.href);break}}openSiyuanWindowByID(o,n,i){const s=ze(Tt(this.config.window.siyuan.editorType),{id:n,focus:i});this.openSiyuanWindowByURL(o,s)}openSiyuanWindowByURL(o,n){this.openSiyuanWindow(n,Rt(o))}isUrlSchemeAvailable(o,n){for(const i in n){const s=n[i];if(s.enable&&o.startsWith(s.prefix))return!0}return!1}parseHyperlinkMeta(o,n){const i={valid:!1,enabled:!1,href:void 0,title:void 0};switch(o.localName){case"a":i.valid=!0,i.enabled=n.hyperlink.other.enable,i.href=o.href,i.title=o.title||o.innerText;break;case"span":/\ba\b/.test(o.dataset.type)&&(i.valid=!0,i.enabled=n.hyperlink.editor.enable,i.href=o.dataset.href,i.title=o.dataset.title||o.innerText);break}return i}};Z(Xe,"GLOBAL_CONFIG_NAME","global-config");let Vt=Xe;module.exports=Vt;
