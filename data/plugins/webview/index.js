"use strict";var Ss=Object.defineProperty;var As=(t,e,n)=>e in t?Ss(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var le=(t,e,n)=>(As(t,typeof e!="symbol"?e+"":e,n),n);const qe=require("siyuan");var $s=Object.defineProperty,Rs=(t,e,n)=>e in t?$s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ft=(t,e,n)=>(Rs(t,typeof e!="symbol"?e+"":e,n),n);const vs=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Cs=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Ls=/^\s*["[{]|^\s*-?\d[\d.]{0,14}\s*$/;function Os(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Ns(t);return}return e}function Ns(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Is(t,e={}){if(typeof t!="string")return t;const n=t.trim();if(t[0]==='"'&&t[t.length-1]==='"')return n.slice(1,-1);if(n.length<=9){const i=n.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!Ls.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(vs.test(t)||Cs.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Os)}return JSON.parse(t)}catch(i){if(e.strict)throw i;return t}}const Ms=/#/g,Fs=/&/g,Ps=/=/g,di=/\+/g,Ds=/%5e/gi,Us=/%60/gi,Ws=/%7c/gi,js=/%20/gi;function qs(t){return encodeURI(""+t).replace(Ws,"|")}function ti(t){return qs(typeof t=="string"?t:JSON.stringify(t)).replace(di,"%2B").replace(js,"+").replace(Ms,"%23").replace(Fs,"%26").replace(Us,"`").replace(Ds,"^")}function Hn(t){return ti(t).replace(Ps,"%3D")}function yr(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function Hs(t){return yr(t.replace(di," "))}function Ks(t){return yr(t.replace(di," "))}function xs(t=""){const e={};t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const i=n.match(/([^=]+)=?(.*)/)||[];if(i.length<2)continue;const o=Hs(i[1]);if(o==="__proto__"||o==="constructor")continue;const r=Ks(i[2]||"");e[o]===void 0?e[o]=r:Array.isArray(e[o])?e[o].push(r):e[o]=[e[o],r]}return e}function Vs(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${Hn(t)}=${ti(n)}`).join("&"):`${Hn(t)}=${ti(e)}`:Hn(t)}function zs(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>Vs(e,t[e])).filter(Boolean).join("&")}const Gs=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Ys=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Js=/^([/\\]\s*){2,}[^/\\]/;function wr(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?Gs.test(t):Ys.test(t)||(e.acceptRelative?Js.test(t):!1)}const Xs=/\/$|\/\?/;function ni(t="",e=!1){return e?Xs.test(t):t.endsWith("/")}function Qs(t="",e=!1){if(!e)return(ni(t)?t.slice(0,-1):t)||"/";if(!ni(t,!0))return t||"/";const[n,...i]=t.split("?");return(n.slice(0,-1)||"/")+(i.length>0?`?${i.join("?")}`:"")}function Zs(t="",e=!1){if(!e)return t.endsWith("/")?t:t+"/";if(ni(t,!0))return t||"/";const[n,...i]=t.split("?");return n+"/"+(i.length>0?`?${i.join("?")}`:"")}function ea(t,e){if(na(e)||wr(t))return t;const n=Qs(e);return t.startsWith(n)?t:ra(n,t)}function ta(t,e){const n=kr(t),i={...xs(n.search),...e};return n.search=zs(i),sa(n)}function na(t){return!t||t==="/"}function ia(t){return t&&t!=="/"}const oa=/^\.?\//;function ra(t,...e){let n=t||"";for(const i of e.filter(o=>ia(o)))if(n){const o=i.replace(oa,"");n=Zs(n)+o}else n=i;return n}function kr(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/);if(n){const[,m,_=""]=n;return{protocol:m,pathname:_,href:m+_,auth:"",host:"",search:"",hash:""}}if(!wr(t,{acceptRelative:!0}))return e?kr(e+t):Ri(t);const[,i="",o,r=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,a="",s=""]=r.match(/([^#/?]*)(.*)?/)||[],{pathname:u,search:f,hash:p}=Ri(s.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:i,auth:o?o.slice(0,Math.max(0,o.length-1)):"",host:a,pathname:u,search:f,hash:p}}function Ri(t=""){const[e="",n="",i=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:i}}function sa(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",i=t.hash||"",o=t.auth?t.auth+"@":"",r=t.host||"";return(t.protocol?t.protocol+"//":"")+o+r+e+n+i}class aa extends Error{constructor(e,n){super(e,n),this.name="FetchError",n!=null&&n.cause&&!this.cause&&(this.cause=n.cause)}}function la(t){var e,n,i,o,r;const a=((e=t.error)==null?void 0:e.message)||((n=t.error)==null?void 0:n.toString())||"",s=((i=t.request)==null?void 0:i.method)||((o=t.options)==null?void 0:o.method)||"GET",u=((r=t.request)==null?void 0:r.url)||String(t.request)||"/",f=`[${s}] ${JSON.stringify(u)}`,p=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",m=`${f}: ${p}${a?` ${a}`:""}`,_=new aa(m,t.error?{cause:t.error}:void 0);for(const b of["request","options","response"])Object.defineProperty(_,b,{get(){return t[b]}});for(const[b,g]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(_,b,{get(){return t.response&&t.response[g]}});return _}const ua=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function vi(t="GET"){return ua.has(t.toUpperCase())}function ca(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const fa=new Set(["image/svg","application/xml","application/xhtml","application/html"]),pa=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function ha(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return pa.test(e)?"json":fa.has(e)||e.startsWith("text/")?"text":"blob"}function da(t,e,n=globalThis.Headers){const i={...e,...t};if(e!=null&&e.params&&t!=null&&t.params&&(i.params={...e==null?void 0:e.params,...t==null?void 0:t.params}),e!=null&&e.query&&t!=null&&t.query&&(i.query={...e==null?void 0:e.query,...t==null?void 0:t.query}),e!=null&&e.headers&&t!=null&&t.headers){i.headers=new n((e==null?void 0:e.headers)||{});for(const[o,r]of new n((t==null?void 0:t.headers)||{}))i.headers.set(o,r)}return i}const ma=new Set([408,409,425,429,500,502,503,504]),ga=new Set([101,204,205,304]);function Tr(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:i=globalThis.AbortController}=t;async function o(s){const u=s.error&&s.error.name==="AbortError"&&!s.options.timeout||!1;if(s.options.retry!==!1&&!u){let p;typeof s.options.retry=="number"?p=s.options.retry:p=vi(s.options.method)?0:1;const m=s.response&&s.response.status||500;if(p>0&&(Array.isArray(s.options.retryStatusCodes)?s.options.retryStatusCodes.includes(m):ma.has(m))){const _=s.options.retryDelay||0;return _>0&&await new Promise(b=>setTimeout(b,_)),r(s.request,{...s.options,retry:p-1,timeout:s.options.timeout})}}const f=la(s);throw Error.captureStackTrace&&Error.captureStackTrace(f,r),f}const r=async function(s,u={}){var f;const p={request:s,options:da(u,t.defaults,n),response:void 0,error:void 0};if(p.options.method=(f=p.options.method)==null?void 0:f.toUpperCase(),p.options.onRequest&&await p.options.onRequest(p),typeof p.request=="string"&&(p.options.baseURL&&(p.request=ea(p.request,p.options.baseURL)),(p.options.query||p.options.params)&&(p.request=ta(p.request,{...p.options.params,...p.options.query}))),p.options.body&&vi(p.options.method)&&(ca(p.options.body)?(p.options.body=typeof p.options.body=="string"?p.options.body:JSON.stringify(p.options.body),p.options.headers=new n(p.options.headers||{}),p.options.headers.has("content-type")||p.options.headers.set("content-type","application/json"),p.options.headers.has("accept")||p.options.headers.set("accept","application/json")):("pipeTo"in p.options.body&&typeof p.options.body.pipeTo=="function"||typeof p.options.body.pipe=="function")&&("duplex"in p.options||(p.options.duplex="half"))),!p.options.signal&&p.options.timeout){const m=new i;setTimeout(()=>m.abort(),p.options.timeout),p.options.signal=m.signal}try{p.response=await e(p.request,p.options)}catch(m){return p.error=m,p.options.onRequestError&&await p.options.onRequestError(p),await o(p)}if(p.response.body&&!ga.has(p.response.status)&&p.options.method!=="HEAD"){const m=(p.options.parseResponse?"json":p.options.responseType)||ha(p.response.headers.get("content-type")||"");switch(m){case"json":{const _=await p.response.text(),b=p.options.parseResponse||Is;p.response._data=b(_);break}case"stream":{p.response._data=p.response.body;break}default:p.response._data=await p.response[m]()}}return p.options.onResponse&&await p.options.onResponse(p),!p.options.ignoreResponseError&&p.response.status>=400&&p.response.status<600?(p.options.onResponseError&&await p.options.onResponseError(p),await o(p)):p.response},a=async function(s,u){return(await r(s,u))._data};return a.raw=r,a.native=(...s)=>e(...s),a.create=(s={})=>Tr({...t,defaults:{...t.defaults,...s}}),a}const mi=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),ba=mi.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),_a=mi.Headers,ya=mi.AbortController,wa=Tr({fetch:ba,Headers:_a,AbortController:ya});class ka extends Error{constructor(e){super(e.statusText),ft(this,"status"),this.response=e,this.status=e.status}}class Ci extends Error{constructor(e,n){super(e.msg),ft(this,"code"),this.body=e,this.response=n,this.code=e.code}}function rt(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Li(t,e){for(var n="",i=0,o=-1,r=0,a,s=0;s<=t.length;++s){if(s<t.length)a=t.charCodeAt(s);else{if(a===47)break;a=47}if(a===47){if(!(o===s-1||r===1))if(o!==s-1&&r===2){if(n.length<2||i!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var u=n.lastIndexOf("/");if(u!==n.length-1){u===-1?(n="",i=0):(n=n.slice(0,u),i=n.length-1-n.lastIndexOf("/")),o=s,r=0;continue}}else if(n.length===2||n.length===1){n="",i=0,o=s,r=0;continue}}e&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+t.slice(o+1,s):n=t.slice(o+1,s),i=s-o-1;o=s,r=0}else a===46&&r!==-1?++r:r=-1}return n}function Ta(t,e){var n=e.dir||e.root,i=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+i:n+t+i:i}var xt={resolve:function(){for(var t="",e=!1,n,i=arguments.length-1;i>=-1&&!e;i--){var o;i>=0?o=arguments[i]:(n===void 0&&(n=process.cwd()),o=n),rt(o),o.length!==0&&(t=o+"/"+t,e=o.charCodeAt(0)===47)}return t=Li(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(rt(t),t.length===0)return".";var e=t.charCodeAt(0)===47,n=t.charCodeAt(t.length-1)===47;return t=Li(t,!e),t.length===0&&!e&&(t="."),t.length>0&&n&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return rt(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var n=arguments[e];rt(n),n.length>0&&(t===void 0?t=n:t+="/"+n)}return t===void 0?".":xt.normalize(t)},relative:function(t,e){if(rt(t),rt(e),t===e||(t=xt.resolve(t),e=xt.resolve(e),t===e))return"";for(var n=1;n<t.length&&t.charCodeAt(n)===47;++n);for(var i=t.length,o=i-n,r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var a=e.length,s=a-r,u=o<s?o:s,f=-1,p=0;p<=u;++p){if(p===u){if(s>u){if(e.charCodeAt(r+p)===47)return e.slice(r+p+1);if(p===0)return e.slice(r+p)}else o>u&&(t.charCodeAt(n+p)===47?f=p:p===0&&(f=0));break}var m=t.charCodeAt(n+p),_=e.charCodeAt(r+p);if(m!==_)break;m===47&&(f=p)}var b="";for(p=n+f+1;p<=i;++p)(p===i||t.charCodeAt(p)===47)&&(b.length===0?b+="..":b+="/..");return b.length>0?b+e.slice(r+f):(r+=f,e.charCodeAt(r)===47&&++r,e.slice(r))},_makeLong:function(t){return t},dirname:function(t){if(rt(t),t.length===0)return".";for(var e=t.charCodeAt(0),n=e===47,i=-1,o=!0,r=t.length-1;r>=1;--r)if(e=t.charCodeAt(r),e===47){if(!o){i=r;break}}else o=!1;return i===-1?n?"/":".":n&&i===1?"//":t.slice(0,i)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');rt(t);var n=0,i=-1,o=!0,r;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var a=e.length-1,s=-1;for(r=t.length-1;r>=0;--r){var u=t.charCodeAt(r);if(u===47){if(!o){n=r+1;break}}else s===-1&&(o=!1,s=r+1),a>=0&&(u===e.charCodeAt(a)?--a===-1&&(i=r):(a=-1,i=s))}return n===i?i=s:i===-1&&(i=t.length),t.slice(n,i)}else{for(r=t.length-1;r>=0;--r)if(t.charCodeAt(r)===47){if(!o){n=r+1;break}}else i===-1&&(o=!1,i=r+1);return i===-1?"":t.slice(n,i)}},extname:function(t){rt(t);for(var e=-1,n=0,i=-1,o=!0,r=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(s===47){if(!o){n=a+1;break}continue}i===-1&&(o=!1,i=a+1),s===46?e===-1?e=a:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||i===-1||r===0||r===1&&e===i-1&&e===n+1?"":t.slice(e,i)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return Ta("/",t)},parse:function(t){rt(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var n=t.charCodeAt(0),i=n===47,o;i?(e.root="/",o=1):o=0;for(var r=-1,a=0,s=-1,u=!0,f=t.length-1,p=0;f>=o;--f){if(n=t.charCodeAt(f),n===47){if(!u){a=f+1;break}continue}s===-1&&(u=!1,s=f+1),n===46?r===-1?r=f:p!==1&&(p=1):r!==-1&&(p=-1)}return r===-1||s===-1||p===0||p===1&&r===s-1&&r===a+1?s!==-1&&(a===0&&i?e.base=e.name=t.slice(1,s):e.base=e.name=t.slice(a,s)):(a===0&&i?(e.name=t.slice(1,r),e.base=t.slice(1,s)):(e.name=t.slice(a,r),e.base=t.slice(a,s)),e.ext=t.slice(r,s)),a>0?e.dir=t.slice(0,a-1):i&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};xt.posix=xt;function Er(t,e){return function(){return t.apply(e,arguments)}}const{toString:Ea}=Object.prototype,{getPrototypeOf:gi}=Object,In=(t=>e=>{const n=Ea.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),lt=t=>(t=t.toLowerCase(),e=>In(e)===t),Mn=t=>e=>typeof e===t,{isArray:Wt}=Array,zt=Mn("undefined");function Ba(t){return t!==null&&!zt(t)&&t.constructor!==null&&!zt(t.constructor)&&Ye(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Br=lt("ArrayBuffer");function Sa(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Br(t.buffer),e}const Aa=Mn("string"),Ye=Mn("function"),Sr=Mn("number"),Fn=t=>t!==null&&typeof t=="object",$a=t=>t===!0||t===!1,En=t=>{if(In(t)!=="object")return!1;const e=gi(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ra=lt("Date"),va=lt("File"),Ca=lt("Blob"),La=lt("FileList"),Oa=t=>Fn(t)&&Ye(t.pipe),Na=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ye(t.append)&&((e=In(t))==="formdata"||e==="object"&&Ye(t.toString)&&t.toString()==="[object FormData]"))},Ia=lt("URLSearchParams"),Ma=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xt(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,o;if(typeof t!="object"&&(t=[t]),Wt(t))for(i=0,o=t.length;i<o;i++)e.call(null,t[i],i,t);else{const r=n?Object.getOwnPropertyNames(t):Object.keys(t),a=r.length;let s;for(i=0;i<a;i++)s=r[i],e.call(null,t[s],s,t)}}function Ar(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,o;for(;i-- >0;)if(o=n[i],e===o.toLowerCase())return o;return null}const $r=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Rr=t=>!zt(t)&&t!==$r;function ii(){const{caseless:t}=Rr(this)&&this||{},e={},n=(i,o)=>{const r=t&&Ar(e,o)||o;En(e[r])&&En(i)?e[r]=ii(e[r],i):En(i)?e[r]=ii({},i):Wt(i)?e[r]=i.slice():e[r]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Xt(arguments[i],n);return e}const Fa=(t,e,n,{allOwnKeys:i}={})=>(Xt(e,(o,r)=>{n&&Ye(o)?t[r]=Er(o,n):t[r]=o},{allOwnKeys:i}),t),Pa=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Da=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Ua=(t,e,n,i)=>{let o,r,a;const s={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),r=o.length;r-- >0;)a=o[r],(!i||i(a,t,e))&&!s[a]&&(e[a]=t[a],s[a]=!0);t=n!==!1&&gi(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Wa=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},ja=t=>{if(!t)return null;if(Wt(t))return t;let e=t.length;if(!Sr(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},qa=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&gi(Uint8Array)),Ha=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=n.next())&&!i.done;){const o=i.value;e.call(t,o[0],o[1])}},Ka=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},xa=lt("HTMLFormElement"),Va=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,i){return n.toUpperCase()+i}),Oi=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),za=lt("RegExp"),vr=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Xt(n,(o,r)=>{let a;(a=e(o,r,t))!==!1&&(i[r]=a||o)}),Object.defineProperties(t,i)},Ga=t=>{vr(t,(e,n)=>{if(Ye(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(Ye(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Ya=(t,e)=>{const n={},i=o=>{o.forEach(r=>{n[r]=!0})};return Wt(t)?i(t):i(String(t).split(e)),n},Ja=()=>{},Xa=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Kn="abcdefghijklmnopqrstuvwxyz",Ni="0123456789",Cr={DIGIT:Ni,ALPHA:Kn,ALPHA_DIGIT:Kn+Kn.toUpperCase()+Ni},Qa=(t=16,e=Cr.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function Za(t){return!!(t&&Ye(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const el=t=>{const e=new Array(10),n=(i,o)=>{if(Fn(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[o]=i;const r=Wt(i)?[]:{};return Xt(i,(a,s)=>{const u=n(a,o+1);!zt(u)&&(r[s]=u)}),e[o]=void 0,r}}return i};return n(t,0)},tl=lt("AsyncFunction"),nl=t=>t&&(Fn(t)||Ye(t))&&Ye(t.then)&&Ye(t.catch),v={isArray:Wt,isArrayBuffer:Br,isBuffer:Ba,isFormData:Na,isArrayBufferView:Sa,isString:Aa,isNumber:Sr,isBoolean:$a,isObject:Fn,isPlainObject:En,isUndefined:zt,isDate:Ra,isFile:va,isBlob:Ca,isRegExp:za,isFunction:Ye,isStream:Oa,isURLSearchParams:Ia,isTypedArray:qa,isFileList:La,forEach:Xt,merge:ii,extend:Fa,trim:Ma,stripBOM:Pa,inherits:Da,toFlatObject:Ua,kindOf:In,kindOfTest:lt,endsWith:Wa,toArray:ja,forEachEntry:Ha,matchAll:Ka,isHTMLForm:xa,hasOwnProperty:Oi,hasOwnProp:Oi,reduceDescriptors:vr,freezeMethods:Ga,toObjectSet:Ya,toCamelCase:Va,noop:Ja,toFiniteNumber:Xa,findKey:Ar,global:$r,isContextDefined:Rr,ALPHABET:Cr,generateString:Qa,isSpecCompliantForm:Za,toJSONObject:el,isAsyncFn:tl,isThenable:nl};function ie(t,e,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o)}v.inherits(ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:v.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Lr=ie.prototype,Or={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Or[t]={value:t}});Object.defineProperties(ie,Or);Object.defineProperty(Lr,"isAxiosError",{value:!0});ie.from=(t,e,n,i,o,r)=>{const a=Object.create(Lr);return v.toFlatObject(t,a,function(s){return s!==Error.prototype},s=>s!=="isAxiosError"),ie.call(a,t.message,e,n,i,o),a.cause=t,a.name=t.name,r&&Object.assign(a,r),a};const il=null;function oi(t){return v.isPlainObject(t)||v.isArray(t)}function Nr(t){return v.endsWith(t,"[]")?t.slice(0,-2):t}function Ii(t,e,n){return t?t.concat(e).map(function(i,o){return i=Nr(i),!n&&o?"["+i+"]":i}).join(n?".":""):e}function ol(t){return v.isArray(t)&&!t.some(oi)}const rl=v.toFlatObject(v,{},null,function(t){return/^is[A-Z]/.test(t)});function Pn(t,e,n){if(!v.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=v.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,g){return!v.isUndefined(g[b])});const i=n.metaTokens,o=n.visitor||f,r=n.dots,a=n.indexes,s=(n.Blob||typeof Blob<"u"&&Blob)&&v.isSpecCompliantForm(e);if(!v.isFunction(o))throw new TypeError("visitor must be a function");function u(b){if(b===null)return"";if(v.isDate(b))return b.toISOString();if(!s&&v.isBlob(b))throw new ie("Blob is not supported. Use a Buffer instead.");return v.isArrayBuffer(b)||v.isTypedArray(b)?s&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function f(b,g,y){let k=b;if(b&&!y&&typeof b=="object"){if(v.endsWith(g,"{}"))g=i?g:g.slice(0,-2),b=JSON.stringify(b);else if(v.isArray(b)&&ol(b)||(v.isFileList(b)||v.endsWith(g,"[]"))&&(k=v.toArray(b)))return g=Nr(g),k.forEach(function(W,S){!(v.isUndefined(W)||W===null)&&e.append(a===!0?Ii([g],S,r):a===null?g:g+"[]",u(W))}),!1}return oi(b)?!0:(e.append(Ii(y,g,r),u(b)),!1)}const p=[],m=Object.assign(rl,{defaultVisitor:f,convertValue:u,isVisitable:oi});function _(b,g){if(!v.isUndefined(b)){if(p.indexOf(b)!==-1)throw Error("Circular reference detected in "+g.join("."));p.push(b),v.forEach(b,function(y,k){(!(v.isUndefined(y)||y===null)&&o.call(e,y,v.isString(k)?k.trim():k,g,m))===!0&&_(y,g?g.concat(k):[k])}),p.pop()}}if(!v.isObject(t))throw new TypeError("data must be an object");return _(t),e}function Mi(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function bi(t,e){this._pairs=[],t&&Pn(t,this,e)}const Ir=bi.prototype;Ir.append=function(t,e){this._pairs.push([t,e])};Ir.toString=function(t){const e=t?function(n){return t.call(this,n,Mi)}:Mi;return this._pairs.map(function(n){return e(n[0])+"="+e(n[1])},"").join("&")};function sl(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Mr(t,e,n){if(!e)return t;const i=n&&n.encode||sl,o=n&&n.serialize;let r;if(o?r=o(e,n):r=v.isURLSearchParams(e)?e.toString():new bi(e,n).toString(i),r){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class al{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){v.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Fi=al,Fr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ll=typeof URLSearchParams<"u"?URLSearchParams:bi,ul=typeof FormData<"u"?FormData:null,cl=typeof Blob<"u"?Blob:null,fl=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),pl=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),tt={isBrowser:!0,classes:{URLSearchParams:ll,FormData:ul,Blob:cl},isStandardBrowserEnv:fl,isStandardBrowserWebWorkerEnv:pl,protocols:["http","https","file","blob","url","data"]};function hl(t,e){return Pn(t,new tt.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,r){return tt.isNode&&v.isBuffer(n)?(this.append(i,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function dl(t){return v.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ml(t){const e={},n=Object.keys(t);let i;const o=n.length;let r;for(i=0;i<o;i++)r=n[i],e[r]=t[r];return e}function Pr(t){function e(n,i,o,r){let a=n[r++];const s=Number.isFinite(+a),u=r>=n.length;return a=!a&&v.isArray(o)?o.length:a,u?(v.hasOwnProp(o,a)?o[a]=[o[a],i]:o[a]=i,!s):((!o[a]||!v.isObject(o[a]))&&(o[a]=[]),e(n,i,o[a],r)&&v.isArray(o[a])&&(o[a]=ml(o[a])),!s)}if(v.isFormData(t)&&v.isFunction(t.entries)){const n={};return v.forEachEntry(t,(i,o)=>{e(dl(i),o,n,0)}),n}return null}function gl(t,e,n){if(v.isString(t))try{return(e||JSON.parse)(t),v.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const _i={transitional:Fr,adapter:tt.isNode?"http":"xhr",transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,o=v.isObject(t);if(o&&v.isHTMLForm(t)&&(t=new FormData(t)),v.isFormData(t))return i&&i?JSON.stringify(Pr(t)):t;if(v.isArrayBuffer(t)||v.isBuffer(t)||v.isStream(t)||v.isFile(t)||v.isBlob(t))return t;if(v.isArrayBufferView(t))return t.buffer;if(v.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let r;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return hl(t,this.formSerializer).toString();if((r=v.isFileList(t))||n.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Pn(r?{"files[]":t}:t,a&&new a,this.formSerializer)}}return o||i?(e.setContentType("application/json",!1),gl(t)):t}],transformResponse:[function(t){const e=this.transitional||_i.transitional,n=e&&e.forcedJSONParsing,i=this.responseType==="json";if(t&&v.isString(t)&&(n&&!this.responseType||i)){const o=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(r){if(o)throw r.name==="SyntaxError"?ie.from(r,ie.ERR_BAD_RESPONSE,this,null,this.response):r}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:tt.classes.FormData,Blob:tt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};v.forEach(["delete","get","head","post","put","patch"],t=>{_i.headers[t]={}});const yi=_i,bl=v.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_l=t=>{const e={};let n,i,o;return t&&t.split(`
`).forEach(function(r){o=r.indexOf(":"),n=r.substring(0,o).trim().toLowerCase(),i=r.substring(o+1).trim(),!(!n||e[n]&&bl[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},Pi=Symbol("internals");function qt(t){return t&&String(t).trim().toLowerCase()}function Bn(t){return t===!1||t==null?t:v.isArray(t)?t.map(Bn):String(t)}function yl(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const wl=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function xn(t,e,n,i,o){if(v.isFunction(i))return i.call(this,e,n);if(o&&(e=n),!!v.isString(e)){if(v.isString(i))return e.indexOf(i)!==-1;if(v.isRegExp(i))return i.test(e)}}function kl(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function Tl(t,e){const n=v.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(o,r,a){return this[i].call(this,e,o,r,a)},configurable:!0})})}let Dn=class{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function o(a,s,u){const f=qt(s);if(!f)throw new Error("header name must be a non-empty string");const p=v.findKey(i,f);(!p||i[p]===void 0||u===!0||u===void 0&&i[p]!==!1)&&(i[p||s]=Bn(a))}const r=(a,s)=>v.forEach(a,(u,f)=>o(u,f,s));return v.isPlainObject(t)||t instanceof this.constructor?r(t,e):v.isString(t)&&(t=t.trim())&&!wl(t)?r(_l(t),e):t!=null&&o(e,t,n),this}get(t,e){if(t=qt(t),t){const n=v.findKey(this,t);if(n){const i=this[n];if(!e)return i;if(e===!0)return yl(i);if(v.isFunction(e))return e.call(this,i,n);if(v.isRegExp(e))return e.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=qt(t),t){const n=v.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||xn(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let i=!1;function o(r){if(r=qt(r),r){const a=v.findKey(n,r);a&&(!e||xn(n,n[a],a,e))&&(delete n[a],i=!0)}}return v.isArray(t)?t.forEach(o):o(t),i}clear(t){const e=Object.keys(this);let n=e.length,i=!1;for(;n--;){const o=e[n];(!t||xn(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const e=this,n={};return v.forEach(this,(i,o)=>{const r=v.findKey(n,o);if(r){e[r]=Bn(i),delete e[o];return}const a=t?kl(o):String(o).trim();a!==o&&delete e[o],e[a]=Bn(i),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return v.forEach(this,(n,i)=>{n!=null&&n!==!1&&(e[i]=t&&v.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(i=>n.set(i)),n}static accessor(t){const e=(this[Pi]=this[Pi]={accessors:{}}).accessors,n=this.prototype;function i(o){const r=qt(o);e[r]||(Tl(n,o),e[r]=!0)}return v.isArray(t)?t.forEach(i):i(t),this}};Dn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);v.reduceDescriptors(Dn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});v.freezeMethods(Dn);const pt=Dn;function Vn(t,e){const n=this||yi,i=e||n,o=pt.from(i.headers);let r=i.data;return v.forEach(t,function(a){r=a.call(n,r,o.normalize(),e?e.status:void 0)}),o.normalize(),r}function Dr(t){return!!(t&&t.__CANCEL__)}function Qt(t,e,n){ie.call(this,t??"canceled",ie.ERR_CANCELED,e,n),this.name="CanceledError"}v.inherits(Qt,ie,{__CANCEL__:!0});function El(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new ie("Request failed with status code "+n.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const Bl=tt.isStandardBrowserEnv?function(){return{write:function(t,e,n,i,o,r){const a=[];a.push(t+"="+encodeURIComponent(e)),v.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),v.isString(i)&&a.push("path="+i),v.isString(o)&&a.push("domain="+o),r===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Sl(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Al(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Ur(t,e){return t&&!Sl(e)?Al(t,e):e}const $l=tt.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function i(o){let r=o;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=i(window.location.href),function(o){const r=v.isString(o)?i(o):o;return r.protocol===n.protocol&&r.host===n.host}}():function(){return function(){return!0}}();function Rl(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function vl(t,e){t=t||10;const n=new Array(t),i=new Array(t);let o=0,r=0,a;return e=e!==void 0?e:1e3,function(s){const u=Date.now(),f=i[r];a||(a=u),n[o]=s,i[o]=u;let p=r,m=0;for(;p!==o;)m+=n[p++],p=p%t;if(o=(o+1)%t,o===r&&(r=(r+1)%t),u-a<e)return;const _=f&&u-f;return _?Math.round(m*1e3/_):void 0}}function Di(t,e){let n=0;const i=vl(50,250);return o=>{const r=o.loaded,a=o.lengthComputable?o.total:void 0,s=r-n,u=i(s),f=r<=a;n=r;const p={loaded:r,total:a,progress:a?r/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&f?(a-r)/u:void 0,event:o};p[e?"download":"upload"]=!0,t(p)}}const Cl=typeof XMLHttpRequest<"u",Ll=Cl&&function(t){return new Promise(function(e,n){let i=t.data;const o=pt.from(t.headers).normalize(),r=t.responseType;let a;function s(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}v.isFormData(i)&&(tt.isStandardBrowserEnv||tt.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.setContentType("multipart/form-data;",!1));let u=new XMLHttpRequest;if(t.auth){const _=t.auth.username||"",b=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(_+":"+b))}const f=Ur(t.baseURL,t.url);u.open(t.method.toUpperCase(),Mr(f,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function p(){if(!u)return;const _=pt.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),b={data:!r||r==="text"||r==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:_,config:t,request:u};El(function(g){e(g),s()},function(g){n(g),s()},b),u=null}if("onloadend"in u?u.onloadend=p:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(p)},u.onabort=function(){u&&(n(new ie("Request aborted",ie.ECONNABORTED,t,u)),u=null)},u.onerror=function(){n(new ie("Network Error",ie.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let _=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const b=t.transitional||Fr;t.timeoutErrorMessage&&(_=t.timeoutErrorMessage),n(new ie(_,b.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,t,u)),u=null},tt.isStandardBrowserEnv){const _=(t.withCredentials||$l(f))&&t.xsrfCookieName&&Bl.read(t.xsrfCookieName);_&&o.set(t.xsrfHeaderName,_)}i===void 0&&o.setContentType(null),"setRequestHeader"in u&&v.forEach(o.toJSON(),function(_,b){u.setRequestHeader(b,_)}),v.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),r&&r!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",Di(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",Di(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=_=>{u&&(n(!_||_.type?new Qt(null,t,u):_),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const m=Rl(f);if(m&&tt.protocols.indexOf(m)===-1){n(new ie("Unsupported protocol "+m+":",ie.ERR_BAD_REQUEST,t));return}u.send(i||null)})},Sn={http:il,xhr:Ll};v.forEach(Sn,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Wr={getAdapter:t=>{t=v.isArray(t)?t:[t];const{length:e}=t;let n,i;for(let o=0;o<e&&(n=t[o],!(i=v.isString(n)?Sn[n.toLowerCase()]:n));o++);if(!i)throw i===!1?new ie(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(v.hasOwnProp(Sn,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!v.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:Sn};function zn(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Qt(null,t)}function Ui(t){return zn(t),t.headers=pt.from(t.headers),t.data=Vn.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Wr.getAdapter(t.adapter||yi.adapter)(t).then(function(e){return zn(t),e.data=Vn.call(t,t.transformResponse,e),e.headers=pt.from(e.headers),e},function(e){return Dr(e)||(zn(t),e&&e.response&&(e.response.data=Vn.call(t,t.transformResponse,e.response),e.response.headers=pt.from(e.response.headers))),Promise.reject(e)})}const Wi=t=>t instanceof pt?t.toJSON():t;function Dt(t,e){e=e||{};const n={};function i(f,p,m){return v.isPlainObject(f)&&v.isPlainObject(p)?v.merge.call({caseless:m},f,p):v.isPlainObject(p)?v.merge({},p):v.isArray(p)?p.slice():p}function o(f,p,m){if(v.isUndefined(p)){if(!v.isUndefined(f))return i(void 0,f,m)}else return i(f,p,m)}function r(f,p){if(!v.isUndefined(p))return i(void 0,p)}function a(f,p){if(v.isUndefined(p)){if(!v.isUndefined(f))return i(void 0,f)}else return i(void 0,p)}function s(f,p,m){if(m in e)return i(f,p);if(m in t)return i(void 0,f)}const u={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(f,p)=>o(Wi(f),Wi(p),!0)};return v.forEach(Object.keys(Object.assign({},t,e)),function(f){const p=u[f]||o,m=p(t[f],e[f],f);v.isUndefined(m)&&p!==s||(n[f]=m)}),n}const jr="1.5.0",wi={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{wi[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const ji={};wi.transitional=function(t,e,n){function i(o,r){return"[Axios v"+jr+"] Transitional option '"+o+"'"+r+(n?". "+n:"")}return(o,r,a)=>{if(t===!1)throw new ie(i(r," has been removed"+(e?" in "+e:"")),ie.ERR_DEPRECATED);return e&&!ji[r]&&(ji[r]=!0,console.warn(i(r," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(o,r,a):!0}};function Ol(t,e,n){if(typeof t!="object")throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let o=i.length;for(;o-- >0;){const r=i[o],a=e[r];if(a){const s=t[r],u=s===void 0||a(s,r,t);if(u!==!0)throw new ie("option "+r+" must be "+u,ie.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ie("Unknown option "+r,ie.ERR_BAD_OPTION)}}const ri={assertOptions:Ol,validators:wi},yt=ri.validators;let Rn=class{constructor(t){this.defaults=t,this.interceptors={request:new Fi,response:new Fi}}request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Dt(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:o}=e;n!==void 0&&ri.assertOptions(n,{silentJSONParsing:yt.transitional(yt.boolean),forcedJSONParsing:yt.transitional(yt.boolean),clarifyTimeoutError:yt.transitional(yt.boolean)},!1),i!=null&&(v.isFunction(i)?e.paramsSerializer={serialize:i}:ri.assertOptions(i,{encode:yt.function,serialize:yt.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let r=o&&v.merge(o.common,o[e.method]);o&&v.forEach(["delete","get","head","post","put","patch","common"],b=>{delete o[b]}),e.headers=pt.concat(r,o);const a=[];let s=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(e)===!1||(s=s&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const u=[];this.interceptors.response.forEach(function(b){u.push(b.fulfilled,b.rejected)});let f,p=0,m;if(!s){const b=[Ui.bind(this),void 0];for(b.unshift.apply(b,a),b.push.apply(b,u),m=b.length,f=Promise.resolve(e);p<m;)f=f.then(b[p++],b[p++]);return f}m=a.length;let _=e;for(p=0;p<m;){const b=a[p++],g=a[p++];try{_=b(_)}catch(y){g.call(this,y);break}}try{f=Ui.call(this,_)}catch(b){return Promise.reject(b)}for(p=0,m=u.length;p<m;)f=f.then(u[p++],u[p++]);return f}getUri(t){t=Dt(this.defaults,t);const e=Ur(t.baseURL,t.url);return Mr(e,t.params,t.paramsSerializer)}};v.forEach(["delete","get","head","options"],function(t){Rn.prototype[t]=function(e,n){return this.request(Dt(n||{},{method:t,url:e,data:(n||{}).data}))}});v.forEach(["post","put","patch"],function(t){function e(n){return function(i,o,r){return this.request(Dt(r||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Rn.prototype[t]=e(),Rn.prototype[t+"Form"]=e(!0)});const An=Rn;let Nl=class qr{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const i=this;this.promise.then(o=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](o);i._listeners=null}),this.promise.then=o=>{let r;const a=new Promise(s=>{i.subscribe(s),r=s}).then(o);return a.cancel=function(){i.unsubscribe(r)},a},e(function(o,r,a){i.reason||(i.reason=new Qt(o,r,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new qr(function(n){e=n}),cancel:e}}};const Il=Nl;function Ml(t){return function(e){return t.apply(null,e)}}function Fl(t){return v.isObject(t)&&t.isAxiosError===!0}const si={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(si).forEach(([t,e])=>{si[e]=t});const Pl=si;function Hr(t){const e=new An(t),n=Er(An.prototype.request,e);return v.extend(n,An.prototype,e,{allOwnKeys:!0}),v.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return Hr(Dt(t,i))},n}const we=Hr(yi);we.Axios=An;we.CanceledError=Qt;we.CancelToken=Il;we.isCancel=Dr;we.VERSION=jr;we.toFormData=Pn;we.AxiosError=ie;we.Cancel=we.CanceledError;we.all=function(t){return Promise.all(t)};we.spread=Ml;we.isAxiosError=Fl;we.mergeConfig=Dt;we.AxiosHeaders=pt;we.formToJSON=t=>Pr(v.isHTMLForm(t)?new FormData(t):t);we.getAdapter=Wr.getAdapter;we.HttpStatusCode=Pl;we.default=we;const Kr=we,{Axios:Zp,AxiosError:eh,CanceledError:th,isCancel:nh,CancelToken:ih,VERSION:oh,all:rh,Cancel:sh,isAxiosError:ah,spread:lh,toFormData:uh,AxiosHeaders:ch,HttpStatusCode:tn,formToJSON:fh,getAdapter:ph,mergeConfig:hh}=Kr;var Ot=null;typeof WebSocket<"u"?Ot=WebSocket:typeof MozWebSocket<"u"?Ot=MozWebSocket:typeof global<"u"?Ot=global.WebSocket||global.MozWebSocket:typeof window<"u"?Ot=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Ot=self.WebSocket||self.MozWebSocket);const Dl=Ot,Gn={SCHEMA_DIR_RELATIVE_PATH:"./../schemas/",SCHEMA_FILENAME_PAYLOAD:"payload.schema.json",SCHEMA_FILENAME_RESPONSE:"response.schema.json",SIYUAN_DEFAULT_BASE_URL:"http://localhost:6806/",SIYUAN_DEFAULT_TOKEN:"",REQUEST_TIMEOUT:6e4};var qi,Hi,Ki,xi,Vi;const ai=class A{constructor(e={},n="xhr"){ft(this,"_type","xhr"),ft(this,"_baseURL",((Hi=(qi=globalThis.top)==null?void 0:qi.document)==null?void 0:Hi.baseURI)??((xi=(Ki=globalThis.parent)==null?void 0:Ki.document)==null?void 0:xi.baseURI)??((Vi=globalThis.location)==null?void 0:Vi.origin)??Gn.SIYUAN_DEFAULT_BASE_URL),ft(this,"_token",Gn.SIYUAN_DEFAULT_TOKEN),ft(this,"_axios",Kr.create({baseURL:this._baseURL,timeout:Gn.REQUEST_TIMEOUT,headers:{Authorization:`Token ${this._token}`}})),ft(this,"_fetch",wa.create({baseURL:this._baseURL,headers:{Authorization:`Token ${this._token}`}})),this._setClientType(n),this._updateOptions(e,n)}_setClientType(e){this._type=e}_updateOptions(e,n=this._type){switch(this._token=e.token??this._token,this._baseURL=e.baseURL??this._baseURL,n){case"fetch":const i=e;if(i.token){const o="Authorization",r=`Token ${e.token}`;Array.isArray(i.headers)?i.headers.push([o,r]):i.headers instanceof Headers?i.headers.set(o,r):typeof i.headers=="object"?i.headers[o]=r:i.headers={[o]:r},delete e.token}this._fetch=this._fetch.create(i);break;case"xhr":default:for(const[o,r]of Object.entries(e))switch(o){case"token":this._axios.defaults.headers.Authorization=`Token ${this._token}`;break;default:this._axios.defaults[o]=r;break}break}this._baseURL=e.baseURL??this._baseURL}broadcast(e,n,i){const o=(i==null?void 0:i.baseURL)??this._baseURL,r=(i==null?void 0:i.token)??this._token,a=new URLSearchParams(e);a.set("token",r);const s=new URL(o);return s.protocol=s.protocol.replace(/^http/,"ws"),s.pathname=s.pathname.endsWith("/")?`${s.pathname}${A.ws.broadcast.pathname.substring(1)}`:`${s.pathname}${A.ws.broadcast.pathname}`,s.search=a.toString(),new Dl(s,n)}async getConf(e){return await this._request(A.api.system.getConf.pathname,A.api.system.getConf.method,void 0,e)}async upload(e,n){const i=new FormData;return i.append("assetsDirPath",e.assetsDirPath??"/assets/"),e.files.forEach(o=>i.append("file[]",o)),await this._request(A.api.asset.upload.pathname,A.api.asset.upload.method,i,n)}async getBlockAttrs(e,n){return await this._request(A.api.attr.getBlockAttrs.pathname,A.api.attr.getBlockAttrs.method,e,n)}async getBookmarkLabels(e){return await this._request(A.api.attr.getBookmarkLabels.pathname,A.api.attr.getBookmarkLabels.method,void 0,e)}async setBlockAttrs(e,n){return await this._request(A.api.attr.setBlockAttrs.pathname,A.api.attr.setBlockAttrs.method,e,n)}async appendBlock(e,n){return await this._request(A.api.block.appendBlock.pathname,A.api.block.appendBlock.method,e,n)}async deleteBlock(e,n){return await this._request(A.api.block.deleteBlock.pathname,A.api.block.deleteBlock.method,e,n)}async getBlockBreadcrumb(e,n){return await this._request(A.api.block.getBlockBreadcrumb.pathname,A.api.block.getBlockBreadcrumb.method,e,n)}async getBlockDOM(e,n){return await this._request(A.api.block.getBlockDOM.pathname,A.api.block.getBlockDOM.method,e,n)}async getBlockInfo(e,n){return await this._request(A.api.block.getBlockInfo.pathname,A.api.block.getBlockInfo.method,e,n)}async getBlockKramdown(e,n){return await this._request(A.api.block.getBlockKramdown.pathname,A.api.block.getBlockKramdown.method,e,n)}async getChildBlocks(e,n){return await this._request(A.api.block.getChildBlocks.pathname,A.api.block.getChildBlocks.method,e,n)}async getDocInfo(e,n){return await this._request(A.api.block.getDocInfo.pathname,A.api.block.getDocInfo.method,e,n)}async insertBlock(e,n){return await this._request(A.api.block.insertBlock.pathname,A.api.block.insertBlock.method,e,n)}async moveBlock(e,n){return await this._request(A.api.block.moveBlock.pathname,A.api.block.moveBlock.method,e,n)}async prependBlock(e,n){return await this._request(A.api.block.prependBlock.pathname,A.api.block.prependBlock.method,e,n)}async transferBlockRef(e,n){return await this._request(A.api.block.transferBlockRef.pathname,A.api.block.transferBlockRef.method,e,n)}async updateBlock(e,n){return await this._request(A.api.block.updateBlock.pathname,A.api.block.updateBlock.method,e,n)}async channels(e){return await this._request(A.api.broadcast.channels.pathname,A.api.broadcast.channels.method,void 0,e)}async getChannelInfo(e,n){return await this._request(A.api.broadcast.getChannelInfo.pathname,A.api.broadcast.getChannelInfo.method,e,n)}async postMessage(e,n){return await this._request(A.api.broadcast.postMessage.pathname,A.api.broadcast.postMessage.method,e,n)}async pandoc(e,n){return await this._request(A.api.convert.pandoc.pathname,A.api.convert.pandoc.method,e,n)}async exportResources(e,n){return await this._request(A.api.export.exportResources.pathname,A.api.export.exportResources.method,e,n)}async exportMdContent(e,n){return await this._request(A.api.export.exportMdContent.pathname,A.api.export.exportMdContent.method,e,n)}async getFile(e,n="text",i){return await this._request(A.api.file.getFile.pathname,A.api.file.getFile.method,e,i,!1,n)}async putFile(e,n){e.file!==void 0&&!(e.file instanceof File)&&(e.file=new File([e.file],e.path.split("/").pop()));const i=new FormData;for(const[o,r]of Object.entries(e))e.hasOwnProperty(o)&&(r instanceof Blob?i.append(o,r):i.append(o,String(r)));return await this._request(A.api.file.putFile.pathname,A.api.file.putFile.method,i,n)}async readDir(e,n){return await this._request(A.api.file.readDir.pathname,A.api.file.readDir.method,e,n)}async removeFile(e,n){return await this._request(A.api.file.removeFile.pathname,A.api.file.removeFile.method,e,n)}async renameFile(e,n){return await this._request(A.api.file.renameFile.pathname,A.api.file.renameFile.method,e,n)}async createDocWithMd(e,n){return await this._request(A.api.filetree.createDocWithMd.pathname,A.api.filetree.createDocWithMd.method,e,n)}async getDoc(e,n){return await this._request(A.api.filetree.getDoc.pathname,A.api.filetree.getDoc.method,e,n)}async getHPathByID(e,n){return await this._request(A.api.filetree.getHPathByID.pathname,A.api.filetree.getHPathByID.method,e,n)}async getHPathByPath(e,n){return await this._request(A.api.filetree.getHPathByPath.pathname,A.api.filetree.getHPathByPath.method,e,n)}async listDocsByPath(e,n){return await this._request(A.api.filetree.listDocsByPath.pathname,A.api.filetree.listDocsByPath.method,e,n)}async moveDocs(e,n){return await this._request(A.api.filetree.moveDocs.pathname,A.api.filetree.moveDocs.method,e,n)}async removeDoc(e,n){return await this._request(A.api.filetree.removeDoc.pathname,A.api.filetree.removeDoc.method,e,n)}async renameDoc(e,n){return await this._request(A.api.filetree.renameDoc.pathname,A.api.filetree.renameDoc.method,e,n)}async searchDocs(e,n){return await this._request(A.api.filetree.searchDocs.pathname,A.api.filetree.searchDocs.method,e,n)}async getDocHistoryContent(e,n){return await this._request(A.api.history.getDocHistoryContent.pathname,A.api.history.getDocHistoryContent.method,e,n)}async getHistoryItems(e,n){return await this._request(A.api.history.getHistoryItems.pathname,A.api.history.getHistoryItems.method,e,n)}async getShorthand(e,n){return await this._request(A.api.inbox.getShorthand.pathname,A.api.inbox.getShorthand.method,e,n)}async forwardProxy(e,n){return await this._request(A.api.network.forwardProxy.pathname,A.api.network.forwardProxy.method,e,n)}async closeNotebook(e,n){return await this._request(A.api.notebook.closeNotebook.pathname,A.api.notebook.closeNotebook.method,e,n)}async createNotebook(e,n){return await this._request(A.api.notebook.createNotebook.pathname,A.api.notebook.createNotebook.method,e,n)}async getNotebookConf(e,n){return await this._request(A.api.notebook.getNotebookConf.pathname,A.api.notebook.getNotebookConf.method,e,n)}async lsNotebooks(e){return await this._request(A.api.notebook.lsNotebooks.pathname,A.api.notebook.lsNotebooks.method,void 0,e)}async openNotebook(e,n){return await this._request(A.api.notebook.openNotebook.pathname,A.api.notebook.openNotebook.method,e,n)}async removeNotebook(e,n){return await this._request(A.api.notebook.removeNotebook.pathname,A.api.notebook.removeNotebook.method,e,n)}async renameNotebook(e,n){return await this._request(A.api.notebook.renameNotebook.pathname,A.api.notebook.renameNotebook.method,e,n)}async setNotebookConf(e,n){return await this._request(A.api.notebook.setNotebookConf.pathname,A.api.notebook.setNotebookConf.method,e,n)}async pushErrMsg(e,n){return await this._request(A.api.notification.pushErrMsg.pathname,A.api.notification.pushErrMsg.method,e,n)}async pushMsg(e,n){return await this._request(A.api.notification.pushMsg.pathname,A.api.notification.pushMsg.method,e,n)}async sql(e,n){return await this._request(A.api.query.sql.pathname,A.api.query.sql.method,e,n)}async openRepoSnapshotDoc(e,n){return await this._request(A.api.repo.openRepoSnapshotDoc.pathname,A.api.repo.openRepoSnapshotDoc.method,e,n)}async fullTextSearchBlock(e,n){return await this._request(A.api.search.fullTextSearchBlock.pathname,A.api.search.fullTextSearchBlock.method,e,n)}async getSnippet(e,n){return await this._request(A.api.snippet.getSnippet.pathname,A.api.snippet.getSnippet.method,e,n)}async setSnippet(e,n){return await this._request(A.api.snippet.setSnippet.pathname,A.api.snippet.setSnippet.method,e,n)}async getRecentDocs(e){return await this._request(A.api.storage.getRecentDocs.pathname,A.api.storage.getRecentDocs.method,void 0,e)}async bootProgress(e){return await this._request(A.api.system.bootProgress.pathname,A.api.system.bootProgress.method,void 0,e)}async currentTime(e){return await this._request(A.api.system.currentTime.pathname,A.api.system.currentTime.method,void 0,e)}async version(e){return await this._request(A.api.system.version.pathname,A.api.system.version.method,void 0,e)}async render(e,n){return await this._request(A.api.template.render.pathname,A.api.template.render.method,e,n)}async renderSprig(e,n){return await this._request(A.api.template.renderSprig.pathname,A.api.template.renderSprig.method,e,n)}async _request(e,n,i,o,r=!0,a="json"){try{switch((o==null?void 0:o.type)??this._type){case"fetch":{const s=o==null?void 0:o.options;a=(()=>{switch(a){case"arraybuffer":return"arrayBuffer";case"document":return"text";default:return a}})();const u=await this._fetch(e,{method:n,body:i,responseType:a,onResponse:async f=>{switch(f.response.status){case tn.Ok:break;case tn.Accepted:e===A.api.file.getFile.pathname&&this._parseFetchResponse(f.response._data);break;default:break}},...s});return r&&a==="json"&&typeof u=="object"?this._parseFetchResponse(u):u}case"xhr":default:{const s=o==null?void 0:o.options;a=(()=>{switch(a){case"arrayBuffer":return"arraybuffer";default:return a}})();const u=await this._axios.request({url:e,method:n,data:i,responseType:a,...s});switch(u.status){case tn.Ok:return r&&a==="json"&&typeof u.data=="object"?this._parseAxiosResponse(u):u.data;case tn.Accepted:return e===A.api.file.getFile.pathname?this._parseAxiosResponse(u):u.data;default:throw new ka(u)}}}}catch(s){throw s}}_parseFetchResponse(e){if(e.code===0)return e;throw new Ci(e)}_parseAxiosResponse(e){if(e.data.code===0)return e.data;throw new Ci(e.data,e)}};ft(ai,"ws",{broadcast:{pathname:"/ws/broadcast"}}),ft(ai,"api",{asset:{upload:{pathname:"/api/asset/upload",method:"POST"}},attr:{getBlockAttrs:{pathname:"/api/attr/getBlockAttrs",method:"POST"},getBookmarkLabels:{pathname:"/api/attr/getBookmarkLabels",method:"POST"},setBlockAttrs:{pathname:"/api/attr/setBlockAttrs",method:"POST"}},block:{appendBlock:{pathname:"/api/block/appendBlock",method:"POST"},deleteBlock:{pathname:"/api/block/deleteBlock",method:"POST"},getBlockBreadcrumb:{pathname:"/api/block/getBlockBreadcrumb",method:"POST"},getBlockDOM:{pathname:"/api/block/getBlockDOM",method:"POST"},getBlockInfo:{pathname:"/api/block/getBlockInfo",method:"POST"},getBlockKramdown:{pathname:"/api/block/getBlockKramdown",method:"POST"},getChildBlocks:{pathname:"/api/block/getChildBlocks",method:"POST"},getDocInfo:{pathname:"/api/block/getDocInfo",method:"POST"},insertBlock:{pathname:"/api/block/insertBlock",method:"POST"},moveBlock:{pathname:"/api/block/moveBlock",method:"POST"},prependBlock:{pathname:"/api/block/prependBlock",method:"POST"},transferBlockRef:{pathname:"/api/block/transferBlockRef",method:"POST"},updateBlock:{pathname:"/api/block/updateBlock",method:"POST"}},broadcast:{channels:{pathname:"/api/broadcast/channels",method:"GET"},getChannelInfo:{pathname:"/api/broadcast/getChannelInfo",method:"POST"},postMessage:{pathname:"/api/broadcast/postMessage",method:"POST"}},convert:{pandoc:{pathname:"/api/convert/pandoc",method:"POST"}},export:{exportMdContent:{pathname:"/api/export/exportMdContent",method:"POST"},exportResources:{pathname:"/api/export/exportResources",method:"POST"}},file:{getFile:{pathname:"/api/file/getFile",method:"POST"},putFile:{pathname:"/api/file/putFile",method:"POST"},readDir:{pathname:"/api/file/readDir",method:"POST"},removeFile:{pathname:"/api/file/removeFile",method:"POST"},renameFile:{pathname:"/api/file/renameFile",method:"POST"}},filetree:{createDocWithMd:{pathname:"/api/filetree/createDocWithMd",method:"POST"},getDoc:{pathname:"/api/filetree/getDoc",method:"POST"},getHPathByID:{pathname:"/api/filetree/getHPathByID",method:"POST"},getHPathByPath:{pathname:"/api/filetree/getHPathByPath",method:"POST"},listDocsByPath:{pathname:"/api/filetree/listDocsByPath",method:"POST"},moveDocs:{pathname:"/api/filetree/moveDocs",method:"POST"},removeDoc:{pathname:"/api/filetree/removeDoc",method:"POST"},renameDoc:{pathname:"/api/filetree/renameDoc",method:"POST"},searchDocs:{pathname:"/api/filetree/searchDocs",method:"POST"}},history:{getDocHistoryContent:{pathname:"/api/history/getDocHistoryContent",method:"POST"},getHistoryItems:{pathname:"/api/history/getHistoryItems",method:"POST"}},inbox:{getShorthand:{pathname:"/api/inbox/getShorthand",method:"POST"}},network:{forwardProxy:{pathname:"/api/network/forwardProxy",method:"POST"}},notebook:{closeNotebook:{pathname:"/api/notebook/closeNotebook",method:"POST"},createNotebook:{pathname:"/api/notebook/createNotebook",method:"POST"},getNotebookConf:{pathname:"/api/notebook/getNotebookConf",method:"POST"},lsNotebooks:{pathname:"/api/notebook/lsNotebooks",method:"POST"},openNotebook:{pathname:"/api/notebook/openNotebook",method:"POST"},removeNotebook:{pathname:"/api/notebook/removeNotebook",method:"POST"},renameNotebook:{pathname:"/api/notebook/renameNotebook",method:"POST"},setNotebookConf:{pathname:"/api/notebook/setNotebookConf",method:"POST"}},notification:{pushErrMsg:{pathname:"/api/notification/pushErrMsg",method:"POST"},pushMsg:{pathname:"/api/notification/pushMsg",method:"POST"}},query:{sql:{pathname:"/api/query/sql",method:"POST"}},repo:{openRepoSnapshotDoc:{pathname:"/api/repo/openRepoSnapshotDoc",method:"POST"}},search:{fullTextSearchBlock:{pathname:"/api/search/fullTextSearchBlock",method:"POST"}},snippet:{getSnippet:{pathname:"/api/snippet/getSnippet",method:"POST"},setSnippet:{pathname:"/api/snippet/setSnippet",method:"POST"}},storage:{getRecentDocs:{pathname:"/api/storage/getRecentDocs",method:"POST"}},system:{bootProgress:{pathname:"/api/system/bootProgress",method:"POST"},currentTime:{pathname:"/api/system/currentTime",method:"POST"},version:{pathname:"/api/system/version",method:"POST"},getConf:{pathname:"/api/system/getConf",method:"POST"}},template:{render:{pathname:"/api/template/render",method:"POST"},renderSprig:{pathname:"/api/template/renderSprig",method:"POST"}}});let Ul=ai;var xr=(t=>(t.NodeNotebook="NodeNotebook",t.NodeFolder="NodeFolder",t.NodeDocument="NodeDocument",t.NodeSuperBlock="NodeSuperBlock",t.NodeBlockquote="NodeBlockquote",t.NodeList="NodeList",t.NodeListItem="NodeListItem",t.NodeHeading="NodeHeading",t.NodeParagraph="NodeParagraph",t.NodeMathBlock="NodeMathBlock",t.NodeTable="NodeTable",t.NodeCodeBlock="NodeCodeBlock",t.NodeHTMLBlock="NodeHTMLBlock",t.NodeThematicBreak="NodeThematicBreak",t.NodeAudio="NodeAudio",t.NodeVideo="NodeVideo",t.NodeIFrame="NodeIFrame",t.NodeWidget="NodeWidget",t.NodeBlockQueryEmbed="NodeBlockQueryEmbed",t))(xr||{}),Vr=(t=>(t.d="d",t.s="s",t.b="b",t.l="l",t.i="i",t.h="h",t.p="p",t.m="m",t.t="t",t.c="c",t.html="html",t.query_embed="query_embed",t.tb="tb",t.audio="audio",t.video="video",t.iframe="iframe",t.widget="widget",t))(Vr||{}),zr=(t=>(t.d="d",t.s="s",t.b="b",t.l="l",t.i="i",t))(zr||{}),Gr=(t=>(t.h="h",t.p="p",t.m="m",t.t="t",t.c="c",t.html="html",t.query_embed="query_embed",t.tb="tb",t.audio="audio",t.video="video",t.iframe="iframe",t.widget="widget",t))(Gr||{}),Yr=(t=>(t.h1="h1",t.h2="h2",t.h3="h3",t.h4="h4",t.h5="h5",t.h6="h6",t.u="u",t.o="o",t.t="t",t.none="",t))(Yr||{}),Jr=(t=>(t.u="u",t.o="o",t.t="t",t))(Jr||{}),Xr=(t=>(t.h1="h1",t.h2="h2",t.h3="h3",t.h4="h4",t.h5="h5",t.h6="h6",t))(Xr||{}),Qr=(t=>(t[t.keyword=0]="keyword",t[t.querySyntax=1]="querySyntax",t[t.sql=2]="sql",t[t.regex=3]="regex",t))(Qr||{}),Zr=(t=>(t[t.noGroupBy=0]="noGroupBy",t[t.group=1]="group",t))(Zr||{}),es=(t=>(t[t.type=0]="type",t[t.createdASC=1]="createdASC",t[t.createdDESC=2]="createdDESC",t[t.modifiedASC=3]="modifiedASC",t[t.modifiedDESC=4]="modifiedDESC",t[t.sortByContent=5]="sortByContent",t[t.sortByRankAsc=6]="sortByRankAsc",t[t.sortByRankDesc=7]="sortByRankDesc",t))(es||{}),ts=(t=>(t[t.SortModeNameASC=0]="SortModeNameASC",t[t.SortModeNameDESC=1]="SortModeNameDESC",t[t.SortModeUpdatedASC=2]="SortModeUpdatedASC",t[t.SortModeUpdatedDESC=3]="SortModeUpdatedDESC",t[t.SortModeAlphanumASC=4]="SortModeAlphanumASC",t[t.SortModeAlphanumDESC=5]="SortModeAlphanumDESC",t[t.SortModeCustom=6]="SortModeCustom",t[t.SortModeRefCountASC=7]="SortModeRefCountASC",t[t.SortModeRefCountDESC=8]="SortModeRefCountDESC",t[t.SortModeCreatedASC=9]="SortModeCreatedASC",t[t.SortModeCreatedDESC=10]="SortModeCreatedDESC",t[t.SortModeSizeASC=11]="SortModeSizeASC",t[t.SortModeSizeDESC=12]="SortModeSizeDESC",t[t.SortModeSubDocCountASC=13]="SortModeSubDocCountASC",t[t.SortModeSubDocCountDESC=14]="SortModeSubDocCountDESC",t))(ts||{});const Nt=Object.freeze(Object.defineProperty({__proto__:null,BlockSubType:Yr,BlockType:Vr,Container:zr,GroupBy:Zr,Leaf:Gr,Method:Qr,NodeHeadingSubType:Xr,NodeListSubType:Jr,NodeType:xr,OrderBy:es,SortMode:ts},Symbol.toStringTag,{value:"Module"})),zi=ns(),Yn=ql();Kl();const Gi=Hl();function Wl(){return!!globalThis.require}function jl(){return!!globalThis.process}function ns(){return jl()&&Wl()}function ql(){switch(qe.getFrontend()){case"desktop":case"desktop-window":case"browser-desktop":return!0;case"mobile":case"browser-mobile":return!1;default:return!1}}function Hl(){switch(qe.getFrontend()){case"mobile":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"browser-desktop":return!1;default:return!1}}function Kl(){switch(qe.getFrontend()){case"browser-desktop":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"mobile":return!1;default:return!1}}class xl{constructor(e,n=!0){this.label=e,this.collapsed=n}stdout(e,n,...i){const o=`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${e.name.toUpperCase()}\x1B[0m>`;if(this.collapsed?globalThis.console.groupCollapsed(o):globalThis.console.group(o),n)for(const r of i)Array.isArray(r)?e(...r):e(r);else e(...i);globalThis.console.trace(),globalThis.console.groupEnd()}dir(...e){this.stdout(globalThis.console.dir,!1,...e)}dirs(...e){this.stdout(globalThis.console.dir,!0,...e)}table(...e){this.stdout(globalThis.console.table,!1,...e)}tables(...e){this.stdout(globalThis.console.table,!0,...e)}debug(...e){this.stdout(globalThis.console.debug,!1,...e)}debugs(...e){this.stdout(globalThis.console.debug,!0,...e)}info(...e){this.stdout(globalThis.console.info,!1,...e)}infos(...e){this.stdout(globalThis.console.info,!0,...e)}log(...e){this.stdout(globalThis.console.log,!1,...e)}logs(...e){this.stdout(globalThis.console.log,!0,...e)}warn(...e){this.stdout(globalThis.console.warn,!1,...e)}warns(...e){this.stdout(globalThis.console.warn,!0,...e)}error(...e){this.stdout(globalThis.console.error,!1,...e)}errors(...e){this.stdout(globalThis.console.error,!0,...e)}}function Vl(t,e){switch(!0){case e instanceof Set:return e.has(t);case e instanceof Function:return e(t);default:return t===e}}function Yi(t,e){return Vl(t.button,e.button)&&t.type===e.type&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey&&t.shiftKey===e.shiftKey}var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yl=function(e){return Jl(e)&&!Xl(e)};function Jl(t){return!!t&&typeof t=="object"}function Xl(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||eu(t)}var Ql=typeof Symbol=="function"&&Symbol.for,Zl=Ql?Symbol.for("react.element"):60103;function eu(t){return t.$$typeof===Zl}function tu(t){return Array.isArray(t)?[]:{}}function Gt(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Ut(tu(t),t,e):t}function nu(t,e,n){return t.concat(e).map(function(i){return Gt(i,n)})}function iu(t,e){if(!e.customMerge)return Ut;var n=e.customMerge(t);return typeof n=="function"?n:Ut}function ou(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function Ji(t){return Object.keys(t).concat(ou(t))}function is(t,e){try{return e in t}catch{return!1}}function ru(t,e){return is(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function su(t,e,n){var i={};return n.isMergeableObject(t)&&Ji(t).forEach(function(o){i[o]=Gt(t[o],n)}),Ji(e).forEach(function(o){ru(t,o)||(is(t,o)&&n.isMergeableObject(e[o])?i[o]=iu(o,n)(t[o],e[o],n):i[o]=Gt(e[o],n))}),i}function Ut(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||nu,n.isMergeableObject=n.isMergeableObject||Yl,n.cloneUnlessOtherwiseSpecified=Gt;var i=Array.isArray(e),o=Array.isArray(t),r=i===o;return r?i?n.arrayMerge(t,e,n):su(t,e,n):Gt(e,n)}Ut.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(i,o){return Ut(i,o,n)},{})};var au=Ut,lu=au;const uu=Gl(lu);function vn(...t){return uu.all(t)}function cu(t){const e=globalThis.document.createElement("a");return e.href=t,new URL(e.href)}const et={id:/^\d{14}-[0-9a-z]{7}$/,url:/^siyuan:\/\/blocks\/(\d{14}-[0-9a-z]{7})/,snippet:/^\d{14}-[0-9a-z]{7}$/,created:/^\d{10}$/,history:/[\/\\]history[\/\\]\d{4}-\d{2}-\d{2}-\d{6}-(clean|update|delete|format|sync|replace)([\/\\]\d{14}-[0-9a-z]{7})+\.sy$/,snapshot:/^[0-9a-f]{40}$/,shorthand:/^\d{13}$/};function fu(t){const e=t.composedPath();for(let n=0;n<e.length;++n){const i=e[n].dataset;if(i)switch(!0){case(i.nodeId&&et.id.test(i.nodeId)):return i.nodeId;case(i.id&&et.id.test(i.id)):return i.id;case(i.oid&&et.id.test(i.oid)):return i.oid;case(i.avId&&et.id.test(i.avId)):return i.avId;case(i.colId&&et.id.test(i.colId)):return i.colId;case(i.rootId&&et.id.test(i.rootId)):return i.rootId}}}var Ge=(t=>(t[t.window=0]="window",t[t.app=1]="app",t[t.desktop=2]="desktop",t[t.mobile=3]="mobile",t))(Ge||{}),li=(t=>(t.window="/stage/build/app/window.html",t.app="/stage/build/app",t.desktop="/stage/build/desktop",t.mobile="/stage/build/mobile",t))(li||{});function Jn(t){switch(t){case Ge.window:return"/stage/build/app/window.html";case Ge.app:return"/stage/build/app";case Ge.desktop:return"/stage/build/desktop";case Ge.mobile:return"/stage/build/mobile"}}function Ht(t,e,n=globalThis.origin){const i=new URL(n);return i.pathname=t,e!=null&&e.id&&i.searchParams.set("id",e.id),(e==null?void 0:e.focus)!==void 0&&i.searchParams.set("focus",e.focus?"1":"0"),e!=null&&e.url&&i.searchParams.set("url",e.url),i}function Xi(t){return et.url.test(t.href)?{id:et.url.exec(t.href)[1],focus:t.searchParams.get("focus")==="1"}:null}function pu(t){return et.id.test(t.searchParams.get("id"))?{id:t.searchParams.get("id"),focus:t.searchParams.get("focus")==="1"}:null}function os(t,e=!0){switch(t.startsWith("/")&&(t=t.substring(1)),!0){case t.startsWith("stage/"):return!e;case t.startsWith("appearance/"):case t.startsWith("export/"):case t.startsWith("history/"):case t.startsWith("assets/"):case t.startsWith("emojies/"):case t.startsWith("plugins/"):case t.startsWith("public/"):case t.startsWith("snippets/"):case t.startsWith("templates/"):case t.startsWith("widgets/"):return!0;default:return!1}}function hu(t=globalThis.document.baseURI){return new URL(t).pathname}hu();function rs(t,e){return t.startsWith(e)?t.slice(e.length):t}const du=new Map([["stage","iconFolder"],["assets","iconImage"],["assets","iconImage"],["emojies","iconEmoji"],["plugins","iconPlugin"],["public","iconCloud"],["snippets","iconCode"],["templates","iconMarkdown"],["widgets","iconBoth"],["appearance","iconTheme"],["export","iconUpload"],["history","iconHistory"]]),mu=new Map([["NodeNotebook","iconFilesRoot"],["NodeFolder","iconFolder"],["d","iconFile"],["NodeDocument","iconFile"],["s","iconSuper"],["NodeSuperBlock","iconSuper"],["b","iconQuote"],["NodeBlockquote","iconQuote"],["l","iconList"],["NodeList","iconList"],["i","iconListItem"],["NodeListItem","iconListItem"],["h","iconHeadings"],["NodeHeading","iconHeadings"],["p","iconParagraph"],["NodeParagraph","iconParagraph"],["m","iconMath"],["NodeMathBlock","iconMath"],["t","iconTable"],["NodeTable","iconTable"],["c","iconCode"],["NodeCodeBlock","iconCode"],["html","iconHTML5"],["NodeHTMLBlock","iconHTML5"],["tb","#iconLine"],["NodeThematicBreak","#iconLine"],["audio","iconRecord"],["NodeAudio","iconRecord"],["video","iconVideo"],["NodeVideo","iconVideo"],["iframe","iconLanguage"],["NodeIFrame","iconLanguage"],["widget","iconBoth"],["NodeWidget","iconBoth"],["query_embed","iconSQL"],["NodeBlockQueryEmbed","iconSQL"],["h1","iconH1"],["h2","iconH2"],["h3","iconH3"],["h4","iconH4"],["h5","iconH5"],["h6","iconH6"],["u","iconList"],["o","iconOrderedList"],["t","iconCheck"]]);function gu(t){t.startsWith("/")&&(t=t.substring(1));const e=rs(t,"/").split("/")[0];return bu(e)}function bu(t){return du.get(t)??"iconHelp"}function _u(t){return mu.get(t)??"iconHelp"}function yu(t){const{protyle:e,data:n,blockElements:i}=t;if(n){const o={element:e.wysiwyg.element,id:n.id,type:Nt.NodeType.NodeDocument};return{...o,isDocumentBlock:!0,isMultiBlock:!1,blocks:[o],protyle:e,data:n}}else if(i&&i.length>0){const o=[];return i.forEach(r=>{o.push({element:r,id:r.dataset.nodeId,type:r.dataset.type,subtype:r.dataset.subtype})}),{...o[0],isDocumentBlock:!1,isMultiBlock:o.length>1,blocks:o,protyle:e}}return null}function It(t){return t=t.slice(t.findIndex(e=>e.type!=="separator"),t.findLastIndex(e=>e.type!=="separator")+1),t.length===0||(t=t.filter((e,n,i)=>{var o;return e.type!=="separator"?!0:((o=i[n-1])==null?void 0:o.type)!=="separator"})),t}const wu=`<symbol id="icon-webview-anchor"
    stroke="currentColor"
    fill="currentColor"
    stroke-width="0"
    viewBox="0 0 24 24">
    <path fill="none"
        stroke-width="2"
        d="M12,6 C13.1045695,6 14,5.1045695 14,4 C14,2.8954305 13.1045695,2 12,2 C10.8954305,2 10,2.8954305 10,4 C10,5.1045695 10.8954305,6 12,6 Z M20,17 C20.5522847,17 21,16.5522847 21,16 C21,15.4477153 20.5522847,15 20,15 C19.4477153,15 19,15.4477153 19,16 C19,16.5522847 19.4477153,17 20,17 Z M4,17 C4.55228475,17 5,16.5522847 5,16 C5,15.4477153 4.55228475,15 4,15 C3.44771525,15 3,15.4477153 3,16 C3,16.5522847 3.44771525,17 4,17 Z M12,6 L12,21 L12,21 M4,15.9733241 C6.19364176,19.3244414 8.86035276,21 12.000133,21 C15.1399132,21 17.8065356,19.3244414 20,15.9733241 M16,10 L8,10" />
</symbol>
`,ku=`<symbol id="icon-webview-browser"
    fill="currentColor"
    stroke-width="0"
    viewBox="0 0 256 256">
    <path d="M220,32H76A20,20,0,0,0,56,52V72H36A20,20,0,0,0,16,92V204a20,20,0,0,0,20,20H180a20,20,0,0,0,20-20V184h20a20,20,0,0,0,20-20V52A20,20,0,0,0,220,32ZM176,96v16H40V96Zm0,104H40V136H176Zm40-40H200V92a20,20,0,0,0-20-20H80V56H216Z"></path>
</symbol>
`,Tu=`<symbol id="icon-webview-chromium"
    stroke="currentColor"
    fill="currentColor"
    stroke-width="0"
    viewBox="0 0 16 16">
    <path d="M4.036 6.977l-2.29-3.966c1.466-1.835 3.722-3.012 6.254-3.012 2.929 0 5.489 1.574 6.883 3.922h-6.528c-0.117-0.010-0.236-0.016-0.356-0.016-1.904 0-3.509 1.307-3.964 3.071zM10.864 5.078h4.585c0.355 0.905 0.551 1.891 0.551 2.922 0 4.388-3.533 7.95-7.909 7.999l3.272-5.667c0.461-0.662 0.731-1.466 0.731-2.332 0-1.143-0.471-2.178-1.23-2.922zM5.094 8c0-1.603 1.304-2.906 2.906-2.906s2.906 1.304 2.906 2.906c0 1.602-1.304 2.906-2.906 2.906s-2.906-1.304-2.906-2.906zM9.097 11.944l-2.29 3.967c-3.852-0.576-6.806-3.899-6.806-7.911 0-1.425 0.373-2.763 1.026-3.922l3.266 5.657c0.654 1.392 2.070 2.359 3.707 2.359 0.38 0 0.747-0.052 1.097-0.149z"></path>
</symbol>
`,Eu=`<symbol id="icon-webview-click"
    fill="currentColor"
    stroke-width="0"
    viewBox="0 0 24 24">
    <path fill="none"
        d="M0 0h24v24H0z"></path>
    <path d="M11.71 17.99A5.993 5.993 0 016 12c0-3.31 2.69-6 6-6 3.22 0 5.84 2.53 5.99 5.71l-2.1-.63a3.999 3.999 0 10-4.81 4.81l.63 2.1zM22 12c0 .3-.01.6-.04.9l-1.97-.59c.01-.1.01-.21.01-.31 0-4.42-3.58-8-8-8s-8 3.58-8 8 3.58 8 8 8c.1 0 .21 0 .31-.01l.59 1.97c-.3.03-.6.04-.9.04-5.52 0-10-4.48-10-10S6.48 2 12 2s10 4.48 10 10zm-3.77 4.26L22 15l-10-3 3 10 1.26-3.77 4.27 4.27 1.98-1.98-4.28-4.26z"></path>
</symbol>
`,Bu=`<symbol id="icon-webview-select"
    stroke="currentColor"
    fill="none"
    stroke-width="2"
    viewBox="0 0 24 24"
    stroke-linecap="round"
    stroke-linejoin="round">
    <path d="M7 22a5 5 0 0 1-2-4" />
    <path d="M7 16.93c.96.43 1.96.74 2.99.91" />
    <path d="M3.34 14A6.8 6.8 0 0 1 2 10c0-4.42 4.48-8 10-8s10 3.58 10 8a7.19 7.19 0 0 1-.33 2" />
    <path d="M5 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z" />
    <path d="M14.33 22h-.09a.35.35 0 0 1-.24-.32v-10a.34.34 0 0 1 .33-.34c.08 0 .15.03.21.08l7.34 6a.33.33 0 0 1-.21.59h-4.49l-2.57 3.85a.35.35 0 0 1-.28.14v0z" />
</symbol>
`,Su=`<symbol id="icon-webview-title"
    fill="currentColor"
    stroke-width="0"
    viewBox="0 0 24 24">
    <path fill="none"
        d="M0 0h24v24H0V0z" />
    <path d="M5 4v3h5.5v12h3V7H19V4z" />
</symbol>
`;function oe(){}const ki=t=>t;function Un(t,e){for(const n in e)t[n]=e[n];return t}function ss(t){return t()}function Qi(){return Object.create(null)}function Ce(t){t.forEach(ss)}function Wn(t){return typeof t=="function"}function $e(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let nn;function Cn(t,e){return t===e?!0:(nn||(nn=document.createElement("a")),nn.href=e,t===nn.href)}function Au(t){return Object.keys(t).length===0}function Ee(t,e,n,i){if(t){const o=as(t,e,n,i);return t[0](o)}}function as(t,e,n,i){return t[1]&&i?Un(n.ctx.slice(),t[1](i(e))):n.ctx}function Be(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const r=[],a=Math.max(e.dirty.length,o.length);for(let s=0;s<a;s+=1)r[s]=e.dirty[s]|o[s];return r}return e.dirty|o}return e.dirty}function Se(t,e,n,i,o,r){if(o){const a=as(e,n,i,r);t.p(a,o)}}function Ae(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function $u(t){const e={};for(const n in t)e[n]=!0;return e}const ls=typeof window<"u";let us=ls?()=>window.performance.now():()=>Date.now(),Ti=ls?t=>requestAnimationFrame(t):oe;const Ft=new Set;function cs(t){Ft.forEach(e=>{e.c(t)||(Ft.delete(e),e.f())}),Ft.size!==0&&Ti(cs)}function fs(t){let e;return Ft.size===0&&Ti(cs),{promise:new Promise(n=>{Ft.add(e={c:t,f:n})}),abort(){Ft.delete(e)}}}function H(t,e){t.appendChild(e)}function ps(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ru(t){const e=K("style");return e.textContent="/* empty */",vu(ps(t),e),e.sheet}function vu(t,e){return H(t.head||t,e),e.sheet}function D(t,e,n){t.insertBefore(e,n||null)}function F(t){t.parentNode&&t.parentNode.removeChild(t)}function K(t){return document.createElement(t)}function ui(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Ke(t){return document.createTextNode(t)}function V(){return Ke(" ")}function ve(){return Ke("")}function ue(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Zi(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function $(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Cu=["width","height"];function Lu(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&Cu.indexOf(i)===-1?t[i]=e[i]:$(t,i,e[i])}function Ou(t,e){Object.keys(e).forEach(n=>{Nu(t,n,e[n])})}function Nu(t,e,n){e in t?t[e]=typeof t[e]=="boolean"&&n===""?!0:n:$(t,e,n)}function eo(t){return/-/.test(t)?Ou:Lu}function to(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function ci(t){return t===""?null:+t}function Iu(t){return Array.from(t.childNodes)}function Bt(t,e){e=""+e,t.data!==e&&(t.data=e)}function Pe(t,e){t.value=e??""}function nt(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function no(t,e,n){for(let i=0;i<t.options.length;i+=1){const o=t.options[i];if(o.__value===e){o.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Mu(t){const e=t.querySelector(":checked");return e&&e.__value}function j(t,e,n){t.classList.toggle(e,!!n)}function hs(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}class Zt{constructor(e=!1){le(this,"is_svg",!1);le(this,"e");le(this,"n");le(this,"t");le(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=ui(n.nodeName):this.e=K(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)D(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(F)}}const Ln=new Map;let On=0;function Fu(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Pu(t,e){const n={stylesheet:Ru(e),rules:{}};return Ln.set(t,n),n}function ds(t,e,n,i,o,r,a,s=0){const u=16.666/i;let f=`{
`;for(let k=0;k<=1;k+=u){const W=e+(n-e)*r(k);f+=k*100+`%{${a(W,1-W)}}
`}const p=f+`100% {${a(n,1-n)}}
}`,m=`__svelte_${Fu(p)}_${s}`,_=ps(t),{stylesheet:b,rules:g}=Ln.get(_)||Pu(_,t);g[m]||(g[m]=!0,b.insertRule(`@keyframes ${m} ${p}`,b.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${m} ${i}ms linear ${o}ms 1 both`,On+=1,m}function fi(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),o=n.length-i.length;o&&(t.style.animation=i.join(", "),On-=o,On||Du())}function Du(){Ti(()=>{On||(Ln.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&F(e)}),Ln.clear())})}let Yt;function Vt(t){Yt=t}function Ei(){if(!Yt)throw new Error("Function called outside component initialization");return Yt}function Uu(t){Ei().$$.on_mount.push(t)}function Wu(t){Ei().$$.on_destroy.push(t)}function jn(){const t=Ei();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const r=hs(e,n,{cancelable:i});return o.slice().forEach(a=>{a.call(t,r)}),!r.defaultPrevented}return!0}}function io(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const Mt=[],Jt=[];let Pt=[];const oo=[],ju=Promise.resolve();let pi=!1;function qu(){pi||(pi=!0,ju.then(ms))}function At(t){Pt.push(t)}const Xn=new Set;let Rt=0;function ms(){if(Rt!==0)return;const t=Yt;do{try{for(;Rt<Mt.length;){const e=Mt[Rt];Rt++,Vt(e),Hu(e.$$)}}catch(e){throw Mt.length=0,Rt=0,e}for(Vt(null),Mt.length=0,Rt=0;Jt.length;)Jt.pop()();for(let e=0;e<Pt.length;e+=1){const n=Pt[e];Xn.has(n)||(Xn.add(n),n())}Pt.length=0}while(Mt.length);for(;oo.length;)oo.pop()();pi=!1,Xn.clear(),Vt(t)}function Hu(t){if(t.fragment!==null){t.update(),Ce(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(At)}}function Ku(t){const e=[],n=[];Pt.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Pt=e}let Kt;function gs(){return Kt||(Kt=Promise.resolve(),Kt.then(()=>{Kt=null})),Kt}function Nn(t,e,n){t.dispatchEvent(hs(`${e?"intro":"outro"}${n}`))}const $n=new Set;let Et;function ge(){Et={r:0,c:[],p:Et}}function be(){Et.r||Ce(Et.c),Et=Et.p}function T(t,e){t&&t.i&&($n.delete(t),t.i(e))}function E(t,e,n,i){if(t&&t.o){if($n.has(t))return;$n.add(t),Et.c.push(()=>{$n.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const bs={duration:0};function xu(t,e,n){const i={direction:"in"};let o=e(t,n,i),r=!1,a,s,u=0;function f(){a&&fi(t,a)}function p(){const{delay:_=0,duration:b=300,easing:g=ki,tick:y=oe,css:k}=o||bs;k&&(a=ds(t,0,1,b,_,g,k,u++)),y(0,1);const W=us()+_,S=W+b;s&&s.abort(),r=!0,At(()=>Nn(t,!0,"start")),s=fs(ee=>{if(r){if(ee>=S)return y(1,0),Nn(t,!0,"end"),f(),r=!1;if(ee>=W){const C=g((ee-W)/b);y(C,1-C)}}return r})}let m=!1;return{start(){m||(m=!0,fi(t),Wn(o)?(o=o(i),gs().then(p)):p())},invalidate(){m=!1},end(){r&&(f(),r=!1)}}}function Vu(t,e,n){const i={direction:"out"};let o=e(t,n,i),r=!0,a;const s=Et;s.r+=1;let u;function f(){const{delay:p=0,duration:m=300,easing:_=ki,tick:b=oe,css:g}=o||bs;g&&(a=ds(t,1,0,m,p,_,g));const y=us()+p,k=y+m;At(()=>Nn(t,!1,"start")),"inert"in t&&(u=t.inert,t.inert=!0),fs(W=>{if(r){if(W>=k)return b(0,1),Nn(t,!1,"end"),--s.r||Ce(s.c),!1;if(W>=y){const S=_((W-y)/m);b(1-S,S)}}return r})}return Wn(o)?gs().then(()=>{o=o(i),f()}):f(),{end(p){p&&"inert"in t&&(t.inert=u),p&&o.tick&&o.tick(1,0),r&&(a&&fi(t,a),r=!1)}}}function De(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function zu(t,e){t.d(1),e.delete(t.key)}function jt(t,e){E(t,1,1,()=>{e.delete(t.key)})}function $t(t,e,n,i,o,r,a,s,u,f,p,m){let _=t.length,b=r.length,g=_;const y={};for(;g--;)y[t[g].key]=g;const k=[],W=new Map,S=new Map,ee=[];for(g=b;g--;){const ne=m(o,r,g),Q=n(ne);let q=a.get(Q);q?i&&ee.push(()=>q.p(ne,e)):(q=f(Q,ne),q.c()),W.set(Q,k[g]=q),Q in y&&S.set(Q,Math.abs(g-y[Q]))}const C=new Set,J=new Set;function z(ne){T(ne,1),ne.m(s,p),a.set(ne.key,ne),p=ne.first,b--}for(;_&&b;){const ne=k[b-1],Q=t[_-1],q=ne.key,Le=Q.key;ne===Q?(p=ne.first,_--,b--):W.has(Le)?!a.has(q)||C.has(q)?z(ne):J.has(Le)?_--:S.get(q)>S.get(Le)?(J.add(q),z(ne)):(C.add(Le),_--):(u(Q,a),_--)}for(;_--;){const ne=t[_];W.has(ne.key)||u(ne,a)}for(;b;)z(k[b-1]);return Ce(ee),k}function Bi(t,e){const n={},i={},o={$$scope:1};let r=t.length;for(;r--;){const a=t[r],s=e[r];if(s){for(const u in a)u in s||(i[u]=1);for(const u in s)o[u]||(n[u]=s[u],o[u]=1);t[r]=s}else for(const u in a)o[u]=1}for(const a in i)a in n||(n[a]=void 0);return n}function _s(t){return typeof t=="object"&&t!==null?t:{}}function P(t){t&&t.c()}function I(t,e,n){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),At(()=>{const r=t.$$.on_mount.map(ss).filter(Wn);t.$$.on_destroy?t.$$.on_destroy.push(...r):Ce(r),t.$$.on_mount=[]}),o.forEach(At)}function M(t,e){const n=t.$$;n.fragment!==null&&(Ku(n.after_update),Ce(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Gu(t,e){t.$$.dirty[0]===-1&&(Mt.push(t),qu(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Oe(t,e,n,i,o,r,a=null,s=[-1]){const u=Yt;Vt(t);const f=t.$$={fragment:null,ctx:[],props:r,update:oe,not_equal:o,bound:Qi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Qi(),dirty:s,skip_bound:!1,root:e.target||u.$$.root};a&&a(f.root);let p=!1;if(f.ctx=n?n(t,e.props||{},(m,_,...b)=>{const g=b.length?b[0]:_;return f.ctx&&o(f.ctx[m],f.ctx[m]=g)&&(!f.skip_bound&&f.bound[m]&&f.bound[m](g),p&&Gu(t,m)),_}):[],f.update(),p=!0,Ce(f.before_update),f.fragment=i?i(f.ctx):!1,e.target){if(e.hydrate){const m=Iu(e.target);f.fragment&&f.fragment.l(m),m.forEach(F)}else f.fragment&&f.fragment.c();e.intro&&T(t.$$.fragment),I(t,e.target,e.anchor),ms()}Vt(u)}class Ne{constructor(){le(this,"$$");le(this,"$$set")}$destroy(){M(this,1),this.$destroy=oe}$on(e,n){if(!Wn(n))return oe;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!Au(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Yu="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Yu);function Ju(t){let e,n;return{c(){e=ui("svg"),n=ui("use"),to(n,"xlink:href",t[0]),$(e,"style",t[3]),$(e,"data-id",t[1]),$(e,"class",t[2]),j(e,"popover__block",et.id.test(t[1]))},m(i,o){D(i,e,o),H(e,n)},p(i,[o]){o&1&&to(n,"xlink:href",i[0]),o&8&&$(e,"style",i[3]),o&2&&$(e,"data-id",i[1]),o&4&&$(e,"class",i[2]),o&6&&j(e,"popover__block",et.id.test(i[1]))},i:oe,o:oe,d(i){i&&F(e)}}}function Xu(t,e,n){let{icon:i}=e,{id:o=""}=e,{className:r=""}=e,{style:a=""}=e;return t.$$set=s=>{"icon"in s&&n(0,i=s.icon),"id"in s&&n(1,o=s.id),"className"in s&&n(2,r=s.className),"style"in s&&n(3,a=s.style)},[i,o,r,a]}class Je extends Ne{constructor(e){super(),Oe(this,e,Xu,Ju,$e,{icon:0,id:1,className:2,style:3})}}const Qu=t=>({focus:t&1}),ro=t=>({focus:t[0]});function so(t,e,n){const i=t.slice();return i[13]=e[n],i}function ao(t){let e,n,i,o,r,a,s;return n=new Je({props:{icon:"#iconSearch",className:"b3-form__icon-icon"}}),{c(){e=K("div"),P(n.$$.fragment),i=V(),o=K("input"),$(o,"placeholder",t[4]),$(o,"class","b3-text-field fn__block b3-form__icon-input"),$(e,"class","b3-form__icon")},m(u,f){D(u,e,f),I(n,e,null),H(e,i),H(e,o),Pe(o,t[1]),r=!0,a||(s=[ue(o,"input",t[9]),ue(o,"change",t[5])],a=!0)},p(u,f){(!r||f&16)&&$(o,"placeholder",u[4]),f&2&&o.value!==u[1]&&Pe(o,u[1])},i(u){r||(T(n.$$.fragment,u),r=!0)},o(u){E(n.$$.fragment,u),r=!1},d(u){u&&F(e),M(n),a=!1,Ce(s)}}}function lo(t,e){let n,i,o,r,a=e[13].text+"",s,u,f,p,m;i=new Je({props:{icon:e[13].icon,className:"b3-list-item__graphic"}});function _(){return e[10](e[13])}function b(){return e[11](e[13])}return{key:t,first:null,c(){n=K("li"),P(i.$$.fragment),o=V(),r=K("span"),s=V(),$(r,"class","b3-list-item__text svelte-15drd7h"),$(n,"role","button"),$(n,"data-name",u=e[13].name),$(n,"class","b3-list-item"),j(n,"b3-list-item--focus",e[13].key===e[0]),this.first=n},m(g,y){D(g,n,y),I(i,n,null),H(n,o),H(n,r),r.innerHTML=a,H(n,s),f=!0,p||(m=[ue(n,"click",_),ue(n,"keyup",b)],p=!0)},p(g,y){e=g;const k={};y&4&&(k.icon=e[13].icon),i.$set(k),(!f||y&4)&&a!==(a=e[13].text+"")&&(r.innerHTML=a),(!f||y&4&&u!==(u=e[13].name))&&$(n,"data-name",u),(!f||y&5)&&j(n,"b3-list-item--focus",e[13].key===e[0])},i(g){f||(T(i.$$.fragment,g),f=!0)},o(g){E(i.$$.fragment,g),f=!1},d(g){g&&F(n),M(i),p=!1,Ce(m)}}}function Zu(t){let e;return{c(){e=Ke("Container")},m(n,i){D(n,e,i)},d(n){n&&F(e)}}}function ec(t){let e,n,i,o=[],r=new Map,a,s,u,f=t[3]&&ao(t),p=De(t[2]);const m=y=>y[13].key;for(let y=0;y<p.length;y+=1){let k=so(t,p,y),W=m(k);r.set(W,o[y]=lo(W,k))}const _=t[8].default,b=Ee(_,t,t[7],ro),g=b||Zu();return{c(){e=K("div"),n=K("ul"),f&&f.c(),i=V();for(let y=0;y<o.length;y+=1)o[y].c();a=V(),s=K("div"),g&&g.c(),$(n,"class","b3-tab-bar b3-list b3-list--background"),$(s,"class","config__tab-wrap"),$(e,"class","fn__flex-1 fn__flex config__panel")},m(y,k){D(y,e,k),H(e,n),f&&f.m(n,null),H(n,i);for(let W=0;W<o.length;W+=1)o[W]&&o[W].m(n,null);H(e,a),H(e,s),g&&g.m(s,null),u=!0},p(y,[k]){y[3]?f?(f.p(y,k),k&8&&T(f,1)):(f=ao(y),f.c(),T(f,1),f.m(n,i)):f&&(ge(),E(f,1,1,()=>{f=null}),be()),k&69&&(p=De(y[2]),ge(),o=$t(o,k,m,1,y,p,r,n,jt,lo,null,so),be()),b&&b.p&&(!u||k&129)&&Se(b,_,y,y[7],u?Be(_,y[7],k,Qu):Ae(y[7]),ro)},i(y){if(!u){T(f);for(let k=0;k<p.length;k+=1)T(o[k]);T(g,y),u=!0}},o(y){E(f);for(let k=0;k<o.length;k+=1)E(o[k]);E(g,y),u=!1},d(y){y&&F(e),f&&f.d();for(let k=0;k<o.length;k+=1)o[k].d();g&&g.d(y)}}}function tc(t,e,n){let{$$slots:i={},$$scope:o}=e,{panels:r}=e,{focus:a}=e,{searchEnable:s=!1}=e,{searchPlaceholder:u=""}=e,{searchValue:f=""}=e;const p=jn();function m(){p("search-changed",{value:f})}function _(k){p("changed",{key:k}),n(0,a=k)}function b(){f=this.value,n(1,f)}const g=k=>_(k.key),y=k=>_(k.key);return t.$$set=k=>{"panels"in k&&n(2,r=k.panels),"focus"in k&&n(0,a=k.focus),"searchEnable"in k&&n(3,s=k.searchEnable),"searchPlaceholder"in k&&n(4,u=k.searchPlaceholder),"searchValue"in k&&n(1,f=k.searchValue),"$$scope"in k&&n(7,o=k.$$scope)},[a,f,r,s,u,m,_,o,i,b,g,y]}class nc extends Ne{constructor(e){super(),Oe(this,e,tc,ec,$e,{panels:2,focus:0,searchEnable:3,searchPlaceholder:4,searchValue:1})}}function ic(t){let e,n;const i=t[4].default,o=Ee(i,t,t[3],null);return{c(){e=K("div"),o&&o.c(),$(e,"data-name",t[2]),$(e,"class","config__tab-container"),j(e,"fn__none",!t[0]),j(e,"config__tab-container--top",t[1])},m(r,a){D(r,e,a),o&&o.m(e,null),n=!0},p(r,[a]){o&&o.p&&(!n||a&8)&&Se(o,i,r,r[3],n?Be(i,r[3],a,null):Ae(r[3]),null),(!n||a&4)&&$(e,"data-name",r[2]),(!n||a&1)&&j(e,"fn__none",!r[0]),(!n||a&2)&&j(e,"config__tab-container--top",r[1])},i(r){n||(T(o,r),n=!0)},o(r){E(o,r),n=!1},d(r){r&&F(e),o&&o.d(r)}}}function oc(t,e,n){let{$$slots:i={},$$scope:o}=e,{display:r=!0}=e,{top:a=!0}=e,{name:s=""}=e;return t.$$set=u=>{"display"in u&&n(0,r=u.display),"top"in u&&n(1,a=u.top),"name"in u&&n(2,s=u.name),"$$scope"in u&&n(3,o=u.$$scope)},[r,a,s,o,i]}class Qn extends Ne{constructor(e){super(),Oe(this,e,oc,ic,$e,{display:0,top:1,name:2})}}const rc=t=>({}),uo=t=>({}),sc=t=>({}),co=t=>({});function fo(t){let e,n;const i=t[7].icon,o=Ee(i,t,t[6],co);return{c(){e=K("span"),o&&o.c(),$(e,"class","item__icon")},m(r,a){D(r,e,a),o&&o.m(e,null),n=!0},p(r,a){o&&o.p&&(!n||a&64)&&Se(o,i,r,r[6],n?Be(i,r[6],a,sc):Ae(r[6]),co)},i(r){n||(T(o,r),n=!0)},o(r){E(o,r),n=!1},d(r){r&&F(e),o&&o.d(r)}}}function ac(t){let e;return{c(){e=Ke("text")},m(n,i){D(n,e,i)},d(n){n&&F(e)}}}function lc(t){let e,n,i,o,r,a,s,u,f,p,m=t[0]&&t[4].icon&&fo(t);const _=t[7].text,b=Ee(_,t,t[6],uo),g=b||ac();return{c(){e=K("div"),n=K("span"),i=V(),m&&m.c(),o=V(),r=K("span"),g&&g.c(),a=V(),s=K("span"),$(n,"class","fn__flex-1"),$(r,"class","item__text"),$(s,"class","fn__flex-1"),$(e,"role","button"),$(e,"data-type",t[1]),$(e,"class","item item--full"),j(e,"item--focus",t[2])},m(y,k){D(y,e,k),H(e,n),H(e,i),m&&m.m(e,null),H(e,o),H(e,r),g&&g.m(r,null),H(e,a),H(e,s),u=!0,f||(p=ue(e,"click",t[3]),f=!0)},p(y,[k]){y[0]&&y[4].icon?m?(m.p(y,k),k&17&&T(m,1)):(m=fo(y),m.c(),T(m,1),m.m(e,o)):m&&(ge(),E(m,1,1,()=>{m=null}),be()),b&&b.p&&(!u||k&64)&&Se(b,_,y,y[6],u?Be(_,y[6],k,rc):Ae(y[6]),uo),(!u||k&2)&&$(e,"data-type",y[1]),(!u||k&4)&&j(e,"item--focus",y[2])},i(y){u||(T(m),T(g,y),u=!0)},o(y){E(m),E(g,y),u=!1},d(y){y&&F(e),m&&m.d(),g&&g.d(y),f=!1,p()}}}function uc(t,e,n){let{$$slots:i={},$$scope:o}=e;const r=$u(i);let{key:a}=e,{icon:s}=e,{name:u=""}=e,{focus:f=!1}=e;const p=jn();function m(){f||p("changed",{key:a})}return t.$$set=_=>{"key"in _&&n(5,a=_.key),"icon"in _&&n(0,s=_.icon),"name"in _&&n(1,u=_.name),"focus"in _&&n(2,f=_.focus),"$$scope"in _&&n(6,o=_.$$scope)},[s,u,f,m,r,a,o,i]}let cc=class extends Ne{constructor(e){super(),Oe(this,e,uc,lc,$e,{key:5,icon:0,name:1,focus:2})}};const fc=t=>({focus:t&1}),po=t=>({focus:t[0]});function ho(t,e,n){const i=t.slice();return i[5]=e[n],i}function pc(t){let e,n=t[5].icon+"",i;return{c(){e=new Zt(!1),i=ve(),e.a=i},m(o,r){e.m(n,o,r),D(o,i,r)},p(o,r){r&2&&n!==(n=o[5].icon+"")&&e.p(n)},i:oe,o:oe,d(o){o&&(F(i),e.d())}}}function hc(t){let e,n;return e=new Je({props:{icon:t[5].icon}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&2&&(r.icon=i[5].icon),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function dc(t){let e,n,i,o,r,a;const s=[hc,pc],u=[];function f(p,m){var _;return m&2&&(n=null),n==null&&(n=!!((_=p[5].icon)!=null&&_.startsWith("#"))),n?0:p[5].icon?1:-1}return~(i=f(t,-1))&&(o=u[i]=s[i](t)),{c(){e=K("span"),o&&o.c(),r=V(),$(e,"slot","icon")},m(p,m){D(p,e,m),~i&&u[i].m(e,null),H(e,r),a=!0},p(p,m){let _=i;i=f(p,m),i===_?~i&&u[i].p(p,m):(o&&(ge(),E(u[_],1,1,()=>{u[_]=null}),be()),~i?(o=u[i],o?o.p(p,m):(o=u[i]=s[i](p),o.c()),T(o,1),o.m(e,r)):o=null)},i(p){a||(T(o),a=!0)},o(p){E(o),a=!1},d(p){p&&F(e),~i&&u[i].d()}}}function mc(t){let e,n,i=t[5].text+"",o;return{c(){e=K("span"),n=new Zt(!1),o=V(),n.a=o,$(e,"slot","text")},m(r,a){D(r,e,a),n.m(i,e),H(e,o)},p(r,a){a&2&&i!==(i=r[5].text+"")&&n.p(i)},d(r){r&&F(e)}}}function mo(t,e){let n,i,o;return i=new cc({props:{key:e[5].key,icon:!!e[5].icon,name:e[5].name,focus:e[5].key===e[0],$$slots:{text:[mc],icon:[dc]},$$scope:{ctx:e}}}),i.$on("changed",e[2]),{key:t,first:null,c(){n=ve(),P(i.$$.fragment),this.first=n},m(r,a){D(r,n,a),I(i,r,a),o=!0},p(r,a){e=r;const s={};a&2&&(s.key=e[5].key),a&2&&(s.icon=!!e[5].icon),a&2&&(s.name=e[5].name),a&3&&(s.focus=e[5].key===e[0]),a&18&&(s.$$scope={dirty:a,ctx:e}),i.$set(s)},i(r){o||(T(i.$$.fragment,r),o=!0)},o(r){E(i.$$.fragment,r),o=!1},d(r){r&&F(n),M(i,r)}}}function gc(t){let e;return{c(){e=Ke("Container")},m(n,i){D(n,e,i)},d(n){n&&F(e)}}}function bc(t){let e,n,i=[],o=new Map,r,a,s,u=De(t[1]);const f=b=>b[5].key;for(let b=0;b<u.length;b+=1){let g=ho(t,u,b),y=f(g);o.set(y,i[b]=mo(y,g))}const p=t[3].default,m=Ee(p,t,t[4],po),_=m||gc();return{c(){e=K("div"),n=K("div");for(let b=0;b<i.length;b+=1)i[b].c();r=V(),a=K("div"),_&&_.c(),$(n,"class","layout-tab-bar fn__flex"),$(a,"class","fn__flex-1"),$(e,"class","fn__flex-column"),nt(e,"height","100%")},m(b,g){D(b,e,g),H(e,n);for(let y=0;y<i.length;y+=1)i[y]&&i[y].m(n,null);H(e,r),H(e,a),_&&_.m(a,null),s=!0},p(b,[g]){g&7&&(u=De(b[1]),ge(),i=$t(i,g,f,1,b,u,o,n,jt,mo,null,ho),be()),m&&m.p&&(!s||g&17)&&Se(m,p,b,b[4],s?Be(p,b[4],g,fc):Ae(b[4]),po)},i(b){if(!s){for(let g=0;g<u.length;g+=1)T(i[g]);T(_,b),s=!0}},o(b){for(let g=0;g<i.length;g+=1)E(i[g]);E(_,b),s=!1},d(b){b&&F(e);for(let g=0;g<i.length;g+=1)i[g].d();_&&_.d(b)}}}function _c(t,e,n){let{$$slots:i={},$$scope:o}=e,{tabs:r}=e,{focus:a}=e;function s(u){n(0,a=u.detail.key)}return t.$$set=u=>{"tabs"in u&&n(1,r=u.tabs),"focus"in u&&n(0,a=u.focus),"$$scope"in u&&n(4,o=u.$$scope)},[a,r,s,i,o]}class ys extends Ne{constructor(e){super(),Oe(this,e,_c,bc,$e,{tabs:1,focus:0})}}const yc=t=>({}),go=t=>({}),wc=t=>({}),bo=t=>({}),kc=t=>({}),_o=t=>({}),Tc=t=>({}),yo=t=>({});function Ec(t){let e,n;return{c(){e=new Zt(!1),n=ve(),e.a=n},m(i,o){e.m(t[0],i,o),D(i,n,o)},p(i,o){o&1&&e.p(i[0])},d(i){i&&(F(n),e.d())}}}function Bc(t){let e,n;return{c(){e=new Zt(!1),n=ve(),e.a=n},m(i,o){e.m(t[1],i,o),D(i,n,o)},p(i,o){o&2&&e.p(i[1])},d(i){i&&(F(n),e.d())}}}function wo(t){let e,n,i;const o=t[4].input,r=Ee(o,t,t[3],bo);return{c(){e=K("div"),n=V(),r&&r.c(),$(e,"class","fn__hr")},m(a,s){D(a,e,s),D(a,n,s),r&&r.m(a,s),i=!0},p(a,s){r&&r.p&&(!i||s&8)&&Se(r,o,a,a[3],i?Be(o,a[3],s,wc):Ae(a[3]),bo)},i(a){i||(T(r,a),i=!0)},o(a){E(r,a),i=!1},d(a){a&&(F(e),F(n)),r&&r.d(a)}}}function ko(t){let e,n,i;const o=t[4].input,r=Ee(o,t,t[3],go);return{c(){e=K("span"),n=V(),r&&r.c(),$(e,"class","fn__space")},m(a,s){D(a,e,s),D(a,n,s),r&&r.m(a,s),i=!0},p(a,s){r&&r.p&&(!i||s&8)&&Se(r,o,a,a[3],i?Be(o,a[3],s,yc):Ae(a[3]),go)},i(a){i||(T(r,a),i=!0)},o(a){E(r,a),i=!1},d(a){a&&(F(e),F(n)),r&&r.d(a)}}}function Sc(t){let e,n,i,o,r,a,s;const u=t[4].title,f=Ee(u,t,t[3],yo),p=f||Ec(t),m=t[4].text,_=Ee(m,t,t[3],_o),b=_||Bc(t);let g=t[2]&&wo(t),y=!t[2]&&ko(t);return{c(){e=K("label"),n=K("div"),p&&p.c(),i=V(),o=K("div"),b&&b.c(),r=V(),g&&g.c(),a=V(),y&&y.c(),$(o,"class","b3-label__text"),$(n,"class","fn__flex-1 svelte-2m76cy"),j(n,"visible",t[2]),$(e,"class","fn__flex b3-label")},m(k,W){D(k,e,W),H(e,n),p&&p.m(n,null),H(n,i),H(n,o),b&&b.m(o,null),H(n,r),g&&g.m(n,null),H(e,a),y&&y.m(e,null),s=!0},p(k,[W]){f?f.p&&(!s||W&8)&&Se(f,u,k,k[3],s?Be(u,k[3],W,Tc):Ae(k[3]),yo):p&&p.p&&(!s||W&1)&&p.p(k,s?W:-1),_?_.p&&(!s||W&8)&&Se(_,m,k,k[3],s?Be(m,k[3],W,kc):Ae(k[3]),_o):b&&b.p&&(!s||W&2)&&b.p(k,s?W:-1),k[2]?g?(g.p(k,W),W&4&&T(g,1)):(g=wo(k),g.c(),T(g,1),g.m(n,null)):g&&(ge(),E(g,1,1,()=>{g=null}),be()),(!s||W&4)&&j(n,"visible",k[2]),k[2]?y&&(ge(),E(y,1,1,()=>{y=null}),be()):y?(y.p(k,W),W&4&&T(y,1)):(y=ko(k),y.c(),T(y,1),y.m(e,null))},i(k){s||(T(p,k),T(b,k),T(g),T(y),s=!0)},o(k){E(p,k),E(b,k),E(g),E(y),s=!1},d(k){k&&F(e),p&&p.d(k),b&&b.d(k),g&&g.d(),y&&y.d()}}}function Ac(t,e,n){let{$$slots:i={},$$scope:o}=e,{title:r=""}=e,{text:a=""}=e,{block:s=!1}=e;return t.$$set=u=>{"title"in u&&n(0,r=u.title),"text"in u&&n(1,a=u.text),"block"in u&&n(2,s=u.block),"$$scope"in u&&n(3,o=u.$$scope)},[r,a,s,o,i]}let Te=class extends Ne{constructor(e){super(),Oe(this,e,Ac,Sc,$e,{title:0,text:1,block:2})}};var te=(t=>(t[t.checkbox=0]="checkbox",t[t.text=1]="text",t[t.number=2]="number",t[t.slider=3]="slider",t[t.button=4]="button",t[t.select=5]="select",t[t.textarea=6]="textarea",t))(te||{});function To(t,e,n){const i=t.slice();return i[19]=e[n],i}function $c(t){let e,n,i;return{c(){e=K("textarea"),e.disabled=t[2],$(e,"class","b3-text-field"),$(e,"placeholder",t[5]),j(e,"fn__block",t[3]),j(e,"fn__size200",!t[3]&&t[4]),nt(e,"height",t[8]>0?`${t[8]}px`:void 0)},m(o,r){D(o,e,r),Pe(e,t[0]),n||(i=[ue(e,"input",t[17]),ue(e,"change",t[10])],n=!0)},p(o,r){r&4&&(e.disabled=o[2]),r&32&&$(e,"placeholder",o[5]),r&65&&Pe(e,o[0]),r&8&&j(e,"fn__block",o[3]),r&24&&j(e,"fn__size200",!o[3]&&o[4]),r&256&&nt(e,"height",o[8]>0?`${o[8]}px`:void 0)},d(o){o&&F(e),n=!1,Ce(i)}}}function Rc(t){let e,n=[],i=new Map,o,r,a=De(t[6]);const s=u=>u[19].key;for(let u=0;u<a.length;u+=1){let f=To(t,a,u),p=s(f);i.set(p,n[u]=Eo(p,f))}return{c(){e=K("select");for(let u=0;u<n.length;u+=1)n[u].c();e.disabled=t[2],$(e,"class","b3-select"),t[0]===void 0&&At(()=>t[16].call(e)),j(e,"fn__block",t[3]),j(e,"fn__size200",!t[3]&&t[4]),j(e,"fn__flex-center",!t[3])},m(u,f){D(u,e,f);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(e,null);no(e,t[0],!0),o||(r=[ue(e,"change",t[16]),ue(e,"change",t[10])],o=!0)},p(u,f){f&64&&(a=De(u[6]),n=$t(n,f,s,1,u,a,i,e,zu,Eo,null,To)),f&4&&(e.disabled=u[2]),f&65&&no(e,u[0]),f&8&&j(e,"fn__block",u[3]),f&24&&j(e,"fn__size200",!u[3]&&u[4]),f&8&&j(e,"fn__flex-center",!u[3])},d(u){u&&F(e);for(let f=0;f<n.length;f+=1)n[f].d();o=!1,Ce(r)}}}function vc(t){let e,n,i,o;return{c(){e=K("button"),n=Ke(t[0]),e.disabled=t[2],$(e,"class","b3-button b3-button--outline"),j(e,"fn__block",t[3]),j(e,"fn__size200",!t[3]&&t[4]),j(e,"fn__flex-center",!t[3])},m(r,a){D(r,e,a),H(e,n),i||(o=ue(e,"click",t[9]),i=!0)},p(r,a){a&1&&Bt(n,r[0]),a&4&&(e.disabled=r[2]),a&8&&j(e,"fn__block",r[3]),a&24&&j(e,"fn__size200",!r[3]&&r[4]),a&8&&j(e,"fn__flex-center",!r[3])},d(r){r&&F(e),i=!1,o()}}}function Cc(t){let e,n,i,o,r,a;return{c(){e=K("input"),e.disabled=t[2],$(e,"class","b3-slider svelte-edt8og"),$(e,"type","range"),$(e,"min",n=t[7].min),$(e,"max",i=t[7].max),$(e,"step",o=t[7].step),j(e,"fn__block",t[3]),j(e,"fn__size200",!t[3]&&t[4])},m(s,u){D(s,e,u),Pe(e,t[0]),r||(a=[ue(e,"change",t[15]),ue(e,"input",t[15]),ue(e,"change",t[10])],r=!0)},p(s,u){u&4&&(e.disabled=s[2]),u&128&&n!==(n=s[7].min)&&$(e,"min",n),u&128&&i!==(i=s[7].max)&&$(e,"max",i),u&128&&o!==(o=s[7].step)&&$(e,"step",o),u&65&&Pe(e,s[0]),u&8&&j(e,"fn__block",s[3]),u&24&&j(e,"fn__size200",!s[3]&&s[4])},d(s){s&&F(e),r=!1,Ce(a)}}}function Lc(t){let e,n,i,o,r,a;return{c(){e=K("input"),e.disabled=t[2],$(e,"class","b3-text-field"),$(e,"type","number"),$(e,"placeholder",t[5]),$(e,"min",n=t[7].min),$(e,"max",i=t[7].max),$(e,"step",o=t[7].step),j(e,"fn__block",t[3]),j(e,"fn__size200",!t[3]&&t[4]),j(e,"fn__flex-center",!t[3])},m(s,u){D(s,e,u),Pe(e,t[0]),r||(a=[ue(e,"input",t[14]),ue(e,"change",t[10])],r=!0)},p(s,u){u&4&&(e.disabled=s[2]),u&32&&$(e,"placeholder",s[5]),u&128&&n!==(n=s[7].min)&&$(e,"min",n),u&128&&i!==(i=s[7].max)&&$(e,"max",i),u&128&&o!==(o=s[7].step)&&$(e,"step",o),u&65&&ci(e.value)!==s[0]&&Pe(e,s[0]),u&8&&j(e,"fn__block",s[3]),u&24&&j(e,"fn__size200",!s[3]&&s[4]),u&8&&j(e,"fn__flex-center",!s[3])},d(s){s&&F(e),r=!1,Ce(a)}}}function Oc(t){let e,n,i;return{c(){e=K("input"),e.disabled=t[2],$(e,"class","b3-text-field"),$(e,"placeholder",t[5]),j(e,"fn__block",t[3]),j(e,"fn__size200",!t[3]&&t[4]),j(e,"fn__flex-center",!t[3])},m(o,r){D(o,e,r),Pe(e,t[0]),n||(i=[ue(e,"input",t[13]),ue(e,"change",t[10])],n=!0)},p(o,r){r&4&&(e.disabled=o[2]),r&32&&$(e,"placeholder",o[5]),r&65&&e.value!==o[0]&&Pe(e,o[0]),r&8&&j(e,"fn__block",o[3]),r&24&&j(e,"fn__size200",!o[3]&&o[4]),r&8&&j(e,"fn__flex-center",!o[3])},d(o){o&&F(e),n=!1,Ce(i)}}}function Nc(t){let e,n,i;return{c(){e=K("input"),e.disabled=t[2],$(e,"class","b3-switch svelte-edt8og"),$(e,"type","checkbox"),j(e,"fn__block",t[3]),j(e,"fn__flex-center",!t[3])},m(o,r){D(o,e,r),e.checked=t[0],n||(i=[ue(e,"change",t[12]),ue(e,"change",t[10])],n=!0)},p(o,r){r&4&&(e.disabled=o[2]),r&65&&(e.checked=o[0]),r&8&&j(e,"fn__block",o[3]),r&8&&j(e,"fn__flex-center",!o[3])},d(o){o&&F(e),n=!1,Ce(i)}}}function Eo(t,e){let n,i=e[19].text+"",o,r;return{key:t,first:null,c(){n=K("option"),o=Ke(i),n.__value=r=e[19].key,Pe(n,n.__value),this.first=n},m(a,s){D(a,n,s),H(n,o)},p(a,s){e=a,s&64&&i!==(i=e[19].text+"")&&Bt(o,i),s&64&&r!==(r=e[19].key)&&(n.__value=r,Pe(n,n.__value))},d(a){a&&F(n)}}}function Ic(t){let e;function n(r,a){if(r[1]===te.checkbox)return Nc;if(r[1]===te.text)return Oc;if(r[1]===te.number)return Lc;if(r[1]===te.slider)return Cc;if(r[1]===te.button)return vc;if(r[1]===te.select)return Rc;if(r[1]===te.textarea)return $c}let i=n(t),o=i&&i(t);return{c(){o&&o.c(),e=ve()},m(r,a){o&&o.m(r,a),D(r,e,a)},p(r,[a]){i===(i=n(r))&&o?o.p(r,a):(o&&o.d(1),o=i&&i(r),o&&(o.c(),o.m(e.parentNode,e)))},i:oe,o:oe,d(r){r&&F(e),o&&o.d(r)}}}function Mc(t,e,n){let{type:i}=e,{settingKey:o}=e,{settingValue:r}=e,{disabled:a=!1}=e,{block:s=!1}=e,{normal:u=!0}=e,{placeholder:f=""}=e,{options:p=[]}=e,{limits:m={min:0,max:100,step:1}}=e,{height:_=0}=e;const b=jn();function g(z){b("clicked",{event:z})}function y(z){b("changed",{key:o,value:r,event:z})}function k(){r=this.checked,n(0,r),n(6,p)}function W(){r=this.value,n(0,r),n(6,p)}function S(){r=ci(this.value),n(0,r),n(6,p)}function ee(){r=ci(this.value),n(0,r),n(6,p)}function C(){r=Mu(this),n(0,r),n(6,p)}function J(){r=this.value,n(0,r),n(6,p)}return t.$$set=z=>{"type"in z&&n(1,i=z.type),"settingKey"in z&&n(11,o=z.settingKey),"settingValue"in z&&n(0,r=z.settingValue),"disabled"in z&&n(2,a=z.disabled),"block"in z&&n(3,s=z.block),"normal"in z&&n(4,u=z.normal),"placeholder"in z&&n(5,f=z.placeholder),"options"in z&&n(6,p=z.options),"limits"in z&&n(7,m=z.limits),"height"in z&&n(8,_=z.height)},[r,i,a,s,u,f,p,m,_,g,y,o,k,W,S,ee,C,J]}class ae extends Ne{constructor(e){super(),Oe(this,e,Mc,Ic,$e,{type:1,settingKey:11,settingValue:0,disabled:2,block:3,normal:4,placeholder:5,options:6,limits:7,height:8})}}function Fc(t){let e,n,i,o,r;const a=t[2].default,s=Ee(a,t,t[1],null);return{c(){e=K("div"),n=new Zt(!1),i=V(),o=K("div"),s&&s.c(),n.a=i,$(o,"class","config-query"),$(e,"class","b3-label")},m(u,f){D(u,e,f),n.m(t[0],e),H(e,i),H(e,o),s&&s.m(o,null),r=!0},p(u,[f]){(!r||f&1)&&n.p(u[0]),s&&s.p&&(!r||f&2)&&Se(s,a,u,u[1],r?Be(a,u[1],f,null):Ae(u[1]),null)},i(u){r||(T(s,u),r=!0)},o(u){E(s,u),r=!1},d(u){u&&F(e),s&&s.d(u)}}}function Pc(t,e,n){let{$$slots:i={},$$scope:o}=e,{title:r}=e;return t.$$set=a=>{"title"in a&&n(0,r=a.title),"$$scope"in a&&n(1,o=a.$$scope)},[r,o,i]}class Si extends Ne{constructor(e){super(),Oe(this,e,Pc,Fc,$e,{title:0})}}const Dc=t=>({}),Bo=t=>({}),Uc=t=>({}),So=t=>({}),Wc=t=>({}),Ao=t=>({});function jc(t){let e,n,i,o,r,a,s,u,f;const p=t[3].icon,m=Ee(p,t,t[2],Ao),_=t[3].title,b=Ee(_,t,t[2],So),g=t[3].input,y=Ee(g,t,t[2],Bo);return{c(){e=K("label"),m&&m.c(),n=V(),i=K("span"),o=V(),r=K("div"),b&&b.c(),a=V(),s=K("span"),u=V(),y&&y.c(),$(i,"class","fn__space"),$(r,"class","fn__flex-1"),$(s,"class","fn__space"),nt(e,"min-width",t[0]),nt(e,"margin-right",t[1]),$(e,"class","fn__flex svelte-1l7osn9")},m(k,W){D(k,e,W),m&&m.m(e,null),H(e,n),H(e,i),H(e,o),H(e,r),b&&b.m(r,null),H(e,a),H(e,s),H(e,u),y&&y.m(e,null),f=!0},p(k,[W]){m&&m.p&&(!f||W&4)&&Se(m,p,k,k[2],f?Be(p,k[2],W,Wc):Ae(k[2]),Ao),b&&b.p&&(!f||W&4)&&Se(b,_,k,k[2],f?Be(_,k[2],W,Uc):Ae(k[2]),So),y&&y.p&&(!f||W&4)&&Se(y,g,k,k[2],f?Be(g,k[2],W,Dc):Ae(k[2]),Bo),(!f||W&1)&&nt(e,"min-width",k[0]),(!f||W&2)&&nt(e,"margin-right",k[1])},i(k){f||(T(m,k),T(b,k),T(y,k),f=!0)},o(k){E(m,k),E(b,k),E(y,k),f=!1},d(k){k&&F(e),m&&m.d(k),b&&b.d(k),y&&y.d(k)}}}function qc(t,e,n){let{$$slots:i={},$$scope:o}=e,{minWidth:r="24em"}=e,{marginRight:a="2em"}=e;return t.$$set=s=>{"minWidth"in s&&n(0,r=s.minWidth),"marginRight"in s&&n(1,a=s.marginRight),"$$scope"in s&&n(2,o=s.$$scope)},[r,a,o,i]}class St extends Ne{constructor(e){super(),Oe(this,e,qc,jc,$e,{minWidth:0,marginRight:1})}}var st=(t=>(t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t))(st||{}),me=(t=>(t.click="click",t.dblclick="dblclick",t.contextmenu="contextmenu",t.mousedown="mousedown",t.mouseup="mouseup",t.mouseenter="mouseenter",t.mouseleave="mouseleave",t.mousewheel="mousewheel",t.mouseover="mouseover",t.mousemove="mousemove",t.mouseout="mouseout",t))(me||{});function $o(t){let e,n;return e=new St({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[xc],title:[Kc],default:[Hc]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&4&&(r.minWidth=i[2]),o&8&&(r.marginRight=i[3]),o&4195329&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Hc(t){let e,n;return e=new Je({props:{icon:"#iconKeymap",className:"svg"}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p:oe,i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Kc(t){let e;return{c(){e=K("kbd"),e.textContent="Ctrl",$(e,"slot","title")},m(n,i){D(n,e,i)},p:oe,d(n){n&&F(e)}}}function xc(t){let e,n;return e=new ae({props:{slot:"input",normal:!1,disabled:t[10],type:te.checkbox,settingKey:"ctrlKey",settingValue:t[0].ctrlKey}}),e.$on("changed",t[20]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&1024&&(r.disabled=i[10]),o&1&&(r.settingValue=i[0].ctrlKey),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Ro(t){let e,n;return e=new St({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[Gc],title:[zc],default:[Vc]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&4&&(r.minWidth=i[2]),o&8&&(r.marginRight=i[3]),o&4196353&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Vc(t){let e,n;return e=new Je({props:{icon:"#iconKeymap",className:"svg"}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p:oe,i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function zc(t){let e;return{c(){e=K("kbd"),e.textContent="Shift",$(e,"slot","title")},m(n,i){D(n,e,i)},p:oe,d(n){n&&F(e)}}}function Gc(t){let e,n;return e=new ae({props:{slot:"input",normal:!1,disabled:t[11],type:te.checkbox,settingKey:"shiftKey",settingValue:t[0].shiftKey}}),e.$on("changed",t[20]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&2048&&(r.disabled=i[11]),o&1&&(r.settingValue=i[0].shiftKey),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function vo(t){let e,n;return e=new St({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[Xc],title:[Jc],default:[Yc]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&4&&(r.minWidth=i[2]),o&8&&(r.marginRight=i[3]),o&4198401&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Yc(t){let e,n;return e=new Je({props:{icon:"#iconKeymap",className:"svg"}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p:oe,i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Jc(t){let e;return{c(){e=K("kbd"),e.textContent="Alt",$(e,"slot","title")},m(n,i){D(n,e,i)},p:oe,d(n){n&&F(e)}}}function Xc(t){let e,n;return e=new ae({props:{slot:"input",normal:!1,disabled:t[12],type:te.checkbox,settingKey:"altKey",settingValue:t[0].altKey}}),e.$on("changed",t[20]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&4096&&(r.disabled=i[12]),o&1&&(r.settingValue=i[0].altKey),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Co(t){let e,n;return e=new St({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[ef],title:[Zc],default:[Qc]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&4&&(r.minWidth=i[2]),o&8&&(r.marginRight=i[3]),o&4202497&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Qc(t){let e,n;return e=new Je({props:{icon:"#iconKeymap",className:"svg"}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p:oe,i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Zc(t){let e;return{c(){e=K("kbd"),e.textContent="Meta",$(e,"slot","title")},m(n,i){D(n,e,i)},p:oe,d(n){n&&F(e)}}}function ef(t){let e,n;return e=new ae({props:{slot:"input",normal:!1,disabled:t[13],type:te.checkbox,settingKey:"metaKey",settingValue:t[0].metaKey}}),e.$on("changed",t[20]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&8192&&(r.disabled=i[13]),o&1&&(r.settingValue=i[0].metaKey),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Lo(t){let e,n;return e=new St({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[of],title:[nf],default:[tf]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&4&&(r.minWidth=i[2]),o&8&&(r.marginRight=i[3]),o&4538369&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function tf(t){let e,n;return e=new Je({props:{icon:"#iconSelectText",className:"svg"}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p:oe,i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function nf(t){let e,n;return{c(){e=K("span"),n=Ke(t[16]),$(e,"slot","title")},m(i,o){D(i,e,o),H(e,n)},p(i,o){o&65536&&Bt(n,i[16])},d(i){i&&F(e)}}}function of(t){let e,n;return e=new ae({props:{slot:"input",normal:!1,disabled:t[14],type:te.select,settingKey:"button",settingValue:t[0].button,options:t[18]}}),e.$on("changed",t[20]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&16384&&(r.disabled=i[14]),o&1&&(r.settingValue=i[0].button),o&262144&&(r.options=i[18]),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Oo(t){let e,n;return e=new St({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[af],title:[sf],default:[rf]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&4&&(r.minWidth=i[2]),o&8&&(r.marginRight=i[3]),o&4882433&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function rf(t){let e,n;return e=new Je({props:{icon:"#iconSelectText",className:"svg"}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p:oe,i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function sf(t){let e,n;return{c(){e=K("span"),n=Ke(t[17]),$(e,"slot","title")},m(i,o){D(i,e,o),H(e,n)},p(i,o){o&131072&&Bt(n,i[17])},d(i){i&&F(e)}}}function af(t){let e,n;return e=new ae({props:{slot:"input",normal:!1,disabled:t[15],type:te.select,settingKey:"type",settingValue:t[0].type,options:t[19]}}),e.$on("changed",t[20]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&32768&&(r.disabled=i[15]),o&1&&(r.settingValue=i[0].type),o&524288&&(r.options=i[19]),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function lf(t){let e,n,i,o,r,a,s,u=t[4]&&$o(t),f=t[5]&&Ro(t),p=t[6]&&vo(t),m=t[7]&&Co(t),_=t[8]&&Lo(t),b=t[9]&&Oo(t);return{c(){u&&u.c(),e=V(),f&&f.c(),n=V(),p&&p.c(),i=V(),m&&m.c(),o=V(),_&&_.c(),r=V(),b&&b.c(),a=ve()},m(g,y){u&&u.m(g,y),D(g,e,y),f&&f.m(g,y),D(g,n,y),p&&p.m(g,y),D(g,i,y),m&&m.m(g,y),D(g,o,y),_&&_.m(g,y),D(g,r,y),b&&b.m(g,y),D(g,a,y),s=!0},p(g,y){g[4]?u?(u.p(g,y),y&16&&T(u,1)):(u=$o(g),u.c(),T(u,1),u.m(e.parentNode,e)):u&&(ge(),E(u,1,1,()=>{u=null}),be()),g[5]?f?(f.p(g,y),y&32&&T(f,1)):(f=Ro(g),f.c(),T(f,1),f.m(n.parentNode,n)):f&&(ge(),E(f,1,1,()=>{f=null}),be()),g[6]?p?(p.p(g,y),y&64&&T(p,1)):(p=vo(g),p.c(),T(p,1),p.m(i.parentNode,i)):p&&(ge(),E(p,1,1,()=>{p=null}),be()),g[7]?m?(m.p(g,y),y&128&&T(m,1)):(m=Co(g),m.c(),T(m,1),m.m(o.parentNode,o)):m&&(ge(),E(m,1,1,()=>{m=null}),be()),g[8]?_?(_.p(g,y),y&256&&T(_,1)):(_=Lo(g),_.c(),T(_,1),_.m(r.parentNode,r)):_&&(ge(),E(_,1,1,()=>{_=null}),be()),g[9]?b?(b.p(g,y),y&512&&T(b,1)):(b=Oo(g),b.c(),T(b,1),b.m(a.parentNode,a)):b&&(ge(),E(b,1,1,()=>{b=null}),be())},i(g){s||(T(u),T(f),T(p),T(m),T(_),T(b),s=!0)},o(g){E(u),E(f),E(p),E(m),E(_),E(b),s=!1},d(g){g&&(F(e),F(n),F(i),F(o),F(r),F(a)),u&&u.d(g),f&&f.d(g),p&&p.d(g),m&&m.d(g),_&&_.d(g),b&&b.d(g)}}}function uf(t){let e,n;return e=new Si({props:{title:t[1],$$slots:{default:[lf]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,[o]){const r={};o&2&&(r.title=i[1]),o&5242877&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function cf(t,e,n){let{title:i}=e,{shortcut:o}=e,{minWidth:r=void 0}=e,{marginRight:a=void 0}=e,{displayCtrlKey:s=!0}=e,{displayShiftKey:u=!0}=e,{displayAltKey:f=!0}=e,{displayMetaKey:p=!0}=e,{displayMouseButton:m=!0}=e,{displayMouseEvent:_=!0}=e,{disabledCtrlKey:b=!1}=e,{disabledShiftKey:g=!1}=e,{disabledAltKey:y=!1}=e,{disabledMetaKey:k=!1}=e,{disabledMouseButton:W=!1}=e,{disabledMouseEvent:S=!1}=e,{mouseButtonTitle:ee="Mouse Button"}=e,{mouseEventTitle:C="Mouse Event"}=e,{mouseButtonOptions:J=[{key:st.Left,text:"Left"},{key:st.Middle,text:"Middle"},{key:st.Right,text:"Right"},{key:st.Back,text:"Back"},{key:st.Forward,text:"Forward"}]}=e,{mouseEventOptions:z=[{key:me.click,text:me.click},{key:me.dblclick,text:me.dblclick},{key:me.mousedown,text:me.mousedown},{key:me.mouseup,text:me.mouseup},{key:me.mouseenter,text:me.mouseenter},{key:me.mouseleave,text:me.mouseleave},{key:me.mousewheel,text:me.mousewheel},{key:me.mouseover,text:me.mouseover},{key:me.mousemove,text:me.mousemove},{key:me.mouseout,text:me.mouseout}]}=e;const ne=jn();function Q(q){o.hasOwnProperty(q.detail.key)&&n(0,o[q.detail.key]=q.detail.value,o),ne("changed",{shortcut:o})}return t.$$set=q=>{"title"in q&&n(1,i=q.title),"shortcut"in q&&n(0,o=q.shortcut),"minWidth"in q&&n(2,r=q.minWidth),"marginRight"in q&&n(3,a=q.marginRight),"displayCtrlKey"in q&&n(4,s=q.displayCtrlKey),"displayShiftKey"in q&&n(5,u=q.displayShiftKey),"displayAltKey"in q&&n(6,f=q.displayAltKey),"displayMetaKey"in q&&n(7,p=q.displayMetaKey),"displayMouseButton"in q&&n(8,m=q.displayMouseButton),"displayMouseEvent"in q&&n(9,_=q.displayMouseEvent),"disabledCtrlKey"in q&&n(10,b=q.disabledCtrlKey),"disabledShiftKey"in q&&n(11,g=q.disabledShiftKey),"disabledAltKey"in q&&n(12,y=q.disabledAltKey),"disabledMetaKey"in q&&n(13,k=q.disabledMetaKey),"disabledMouseButton"in q&&n(14,W=q.disabledMouseButton),"disabledMouseEvent"in q&&n(15,S=q.disabledMouseEvent),"mouseButtonTitle"in q&&n(16,ee=q.mouseButtonTitle),"mouseEventTitle"in q&&n(17,C=q.mouseEventTitle),"mouseButtonOptions"in q&&n(18,J=q.mouseButtonOptions),"mouseEventOptions"in q&&n(19,z=q.mouseEventOptions)},[o,i,r,a,s,u,f,p,m,_,b,g,y,k,W,S,ee,C,J,z,Q]}class ws extends Ne{constructor(e){super(),Oe(this,e,cf,uf,$e,{title:1,shortcut:0,minWidth:2,marginRight:3,displayCtrlKey:4,displayShiftKey:5,displayAltKey:6,displayMetaKey:7,displayMouseButton:8,displayMouseEvent:9,disabledCtrlKey:10,disabledShiftKey:11,disabledAltKey:12,disabledMetaKey:13,disabledMouseButton:14,disabledMouseEvent:15,mouseButtonTitle:16,mouseEventTitle:17,mouseButtonOptions:18,mouseEventOptions:19})}}function ff(t=!0,e=(n=>(n=globalThis.process)==null?void 0:n.platform)()==="darwin"){const i=[{role:"about"},...e?[{type:"separator"},{role:"help"},{type:"separator"},{role:"services"},{type:"separator"},{role:"hide"},{role:"hideOthers"},{role:"unhide"}]:[],{type:"separator"},{role:"quit"}],o=[...e?[{role:"recentDocuments"},{role:"clearRecentDocuments"},{type:"separator"}]:[],{role:"close"}],r=[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteAndMatchStyle"},{role:"delete"},{type:"separator"},{role:"selectAll"},{type:"separator"},{role:"toggleSpellChecker"},...e?[{type:"separator"},{role:"showSubstitutions"},{role:"toggleTextReplacement"},{type:"separator"},{role:"toggleSmartQuotes"},{role:"toggleSmartDashes"},{type:"separator"},{role:"startSpeaking"},{role:"stopSpeaking"}]:[]],a=[{role:"reload"},{role:"forceReload"},{type:"separator"},{role:"resetZoom"},{role:"zoomIn",accelerator:"CmdOrCtrl+="},{role:"zoomOut"},...e?[{role:"zoom"},{type:"separator"},{role:"front"}]:[{type:"separator"},{label:"Toggle On Top",click:(f,p,m)=>{p&&p.setAlwaysOnTop(!p.isAlwaysOnTop())},type:"checkbox",checked:t,accelerator:"CmdOrCtrl+Shift+Space"}],{role:"togglefullscreen"},{type:"separator"},{role:"toggleDevTools"}],s=[...e?[{role:"window"},{type:"separator"},{role:"toggleTabBar"},{role:"selectNextTab"},{role:"selectPreviousTab"},{role:"mergeAllWindows"},{role:"moveTabToNewWindow"},{type:"separator"}]:[],{role:"minimize"},{role:"close"}],u=[{role:"appMenu",submenu:i},{role:"fileMenu",submenu:o},{role:"editMenu",submenu:r},{role:"viewMenu",submenu:a},{role:"windowMenu",submenu:s}];return e&&u.push({role:"shareMenu"}),u}var He=(t=>(t[t.AlwaysShow=0]="AlwaysShow",t[t.AutoHide=1]="AutoHide",t[t.Disabled=2]="Disabled",t))(He||{});function pf(t,e,n,i,o){n.webPreferences=vn(n.webPreferences||{},i);const r=vn(e,n);if(ns())try{r.center&&(delete r.x,delete r.y);const{BrowserWindow:a,Menu:s}=globalThis.require("@electron/remote"),u=new a(r);if(r.enableMenuBar){const f=s.buildFromTemplate(ff(r.alwaysOnTop));u.setMenu(f)}else u.removeMenu();return r.enableElectron&&globalThis.require("@electron/remote").require("@electron/remote/main").enable(u.webContents),u.loadURL(t.href,{userAgent:o.useragent}),u}catch(a){o.logger.warn(a)}else return r.center&&(r.x=(globalThis.screen.width-r.width)/2,r.y=(globalThis.screen.height-r.height)/2),console.debug(globalThis.screen,r),globalThis.open(t.href,t.href,["popup = true",`width = ${r.width}`,`height = ${r.height}`,`left = ${r.x}`,`top = ${r.y}`].join(", "))}function No(t,e,n){const i=t.slice();return i[31]=e[n][0],i[32]=e[n][1],i[33]=e,i[34]=n,i}function Io(t,e,n){const i=t.slice();return i[31]=e[n][0],i[32]=e[n][1],i[35]=e,i[36]=n,i}function hf(t){let e,n;return e=new ae({props:{slot:"input",type:te.text,block:!0,placeholder:globalThis.navigator.userAgent,settingKey:"Text",settingValue:t[0].general.useragent}}),e.$on("changed",t[7]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].general.useragent),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function df(t){let e,n;return e=new ae({props:{slot:"input",type:te.text,settingKey:"text",settingValue:t[0].general.background}}),e.$on("changed",t[8]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].general.background),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function mf(t){let e,n;return e=new ae({props:{slot:"input",type:te.button,settingKey:"Reset",settingValue:t[2].settings.generalSettings.reset.text}}),e.$on("clicked",t[4]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p:oe,i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function gf(t){let e,n,i,o,r,a;return e=new Te({props:{title:t[2].settings.generalSettings.useragent.title,text:t[2].settings.generalSettings.useragent.description,block:!0,$$slots:{input:[hf]},$$scope:{ctx:t}}}),i=new Te({props:{title:t[2].settings.background.title,text:t[2].settings.background.description,$$slots:{input:[df]},$$scope:{ctx:t}}}),r=new Te({props:{title:t[2].settings.generalSettings.reset.title,text:t[2].settings.generalSettings.reset.description,$$slots:{input:[mf]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment),n=V(),P(i.$$.fragment),o=V(),P(r.$$.fragment)},m(s,u){I(e,s,u),D(s,n,u),I(i,s,u),D(s,o,u),I(r,s,u),a=!0},p(s,u){const f={};u[0]&1|u[1]&64&&(f.$$scope={dirty:u,ctx:s}),e.$set(f);const p={};u[0]&1|u[1]&64&&(p.$$scope={dirty:u,ctx:s}),i.$set(p);const m={};u[1]&64&&(m.$$scope={dirty:u,ctx:s}),r.$set(m)},i(s){a||(T(e.$$.fragment,s),T(i.$$.fragment,s),T(r.$$.fragment,s),a=!0)},o(s){E(e.$$.fragment,s),E(i.$$.fragment,s),E(r.$$.fragment,s),a=!1},d(s){s&&(F(n),F(o)),M(e,s),M(i,s),M(r,s)}}}function bf(t){let e,n;return e=new ae({props:{slot:"input",type:te.checkbox,settingKey:"Checkbox",settingValue:t[0].tab.enable}}),e.$on("changed",t[9]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].tab.enable),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function _f(t){let e,n;return e=new ae({props:{slot:"input",type:te.checkbox,settingKey:"Checkbox",settingValue:t[0].tab.open.targets.hyperlink.editor.enable}}),e.$on("changed",t[10]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].tab.open.targets.hyperlink.editor.enable),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function yf(t){let e,n;return e=new ae({props:{slot:"input",type:te.checkbox,settingKey:"Checkbox",settingValue:t[0].tab.open.targets.hyperlink.other.enable}}),e.$on("changed",t[11]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].tab.open.targets.hyperlink.other.enable),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function wf(t){let e,n=t[32].prefix+"",i;return{c(){e=K("code"),i=Ke(n),$(e,"slot","title"),$(e,"class","fn__code")},m(o,r){D(o,e,r),H(e,i)},p(o,r){r[0]&1&&n!==(n=o[32].prefix+"")&&Bt(i,n)},d(o){o&&F(e)}}}function kf(t){let e,n;function i(...o){return t[12](t[32],t[35],t[36],...o)}return e=new ae({props:{slot:"input",type:te.checkbox,settingKey:"Checkbox",settingValue:t[32].enable}}),e.$on("changed",i),{c(){P(e.$$.fragment)},m(o,r){I(e,o,r),n=!0},p(o,r){t=o;const a={};r[0]&1&&(a.settingValue=t[32].enable),e.$set(a)},i(o){n||(T(e.$$.fragment,o),n=!0)},o(o){E(e.$$.fragment,o),n=!1},d(o){M(e,o)}}}function Mo(t,e){let n,i,o;return i=new St({props:{minWidth:"8em",$$slots:{input:[kf],title:[wf]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=ve(),P(i.$$.fragment),this.first=n},m(r,a){D(r,n,a),I(i,r,a),o=!0},p(r,a){e=r;const s={};a[0]&1|a[1]&64&&(s.$$scope={dirty:a,ctx:e}),i.$set(s)},i(r){o||(T(i.$$.fragment,r),o=!0)},o(r){E(i.$$.fragment,r),o=!1},d(r){r&&F(n),M(i,r)}}}function Tf(t){let e=[],n=new Map,i,o,r=De(Object.entries(t[0].tab.open.protocols));const a=s=>s[31];for(let s=0;s<r.length;s+=1){let u=Io(t,r,s),f=a(u);n.set(f,e[s]=Mo(f,u))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();i=ve()},m(s,u){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(s,u);D(s,i,u),o=!0},p(s,u){u[0]&9&&(r=De(Object.entries(s[0].tab.open.protocols)),ge(),e=$t(e,u,a,1,s,r,n,i.parentNode,jt,Mo,i,Io),be())},i(s){if(!o){for(let u=0;u<r.length;u+=1)T(e[u]);o=!0}},o(s){for(let u=0;u<e.length;u+=1)E(e[u]);o=!1},d(s){s&&F(i);for(let u=0;u<e.length;u+=1)e[u].d(s)}}}function Ef(t){let e,n,i,o,r,a,s,u,f,p,m,_,b;return n=new Te({props:{title:t[2].settings.open.enable.tab.title,text:t[2].settings.open.enable.tab.description,$$slots:{input:[bf]},$$scope:{ctx:t}}}),o=new Te({props:{title:t[2].settings.open.editorHyperlink.title,text:t[2].settings.open.editorHyperlink.description,$$slots:{input:[_f]},$$scope:{ctx:t}}}),a=new Te({props:{title:t[2].settings.open.otherHyperlink.title,text:t[2].settings.open.otherHyperlink.description,$$slots:{input:[yf]},$$scope:{ctx:t}}}),f=new Si({props:{title:t[2].settings.protocols.title,$$slots:{default:[Tf]},$$scope:{ctx:t}}}),_=new ws({props:{minWidth:"16em",title:t[2].settings.open.shortcut.title,shortcut:t[0].tab.open.mouse,displayMouseEvent:!1,disabledMouseButton:!0,mouseButtonTitle:t[2].settings.mouse.button,mouseButtonOptions:[{key:st.Left,text:t[2].settings.mouse.left}]}}),_.$on("changed",t[3]),{c(){e=K("div"),P(n.$$.fragment),i=V(),P(o.$$.fragment),r=V(),P(a.$$.fragment),s=V(),u=K("div"),P(f.$$.fragment),p=V(),m=K("div"),P(_.$$.fragment),$(e,"data-type",t[6].tab[0].name),j(e,"fn__none",t[6].tab[0].key!==t[30]),$(u,"data-type",t[6].tab[1].name),j(u,"fn__none",t[6].tab[1].key!==t[30]),$(m,"data-type",t[6].tab[2].name),j(m,"fn__none",t[6].tab[2].key!==t[30])},m(g,y){D(g,e,y),I(n,e,null),H(e,i),I(o,e,null),H(e,r),I(a,e,null),D(g,s,y),D(g,u,y),I(f,u,null),D(g,p,y),D(g,m,y),I(_,m,null),b=!0},p(g,y){const k={};y[0]&1|y[1]&64&&(k.$$scope={dirty:y,ctx:g}),n.$set(k);const W={};y[0]&1|y[1]&64&&(W.$$scope={dirty:y,ctx:g}),o.$set(W);const S={};y[0]&1|y[1]&64&&(S.$$scope={dirty:y,ctx:g}),a.$set(S),(!b||y[0]&1073741888)&&j(e,"fn__none",g[6].tab[0].key!==g[30]);const ee={};y[0]&1|y[1]&64&&(ee.$$scope={dirty:y,ctx:g}),f.$set(ee),(!b||y[0]&1073741888)&&j(u,"fn__none",g[6].tab[1].key!==g[30]);const C={};y[0]&1&&(C.shortcut=g[0].tab.open.mouse),_.$set(C),(!b||y[0]&1073741888)&&j(m,"fn__none",g[6].tab[2].key!==g[30])},i(g){b||(T(n.$$.fragment,g),T(o.$$.fragment,g),T(a.$$.fragment,g),T(f.$$.fragment,g),T(_.$$.fragment,g),b=!0)},o(g){E(n.$$.fragment,g),E(o.$$.fragment,g),E(a.$$.fragment,g),E(f.$$.fragment,g),E(_.$$.fragment,g),b=!1},d(g){g&&(F(e),F(s),F(u),F(p),F(m)),M(n),M(o),M(a),M(f),M(_)}}}function Bf(t){let e,n;return e=new ys({props:{focus:Vf,tabs:t[6].tab,$$slots:{default:[Ef,({focus:i})=>({30:i}),({focus:i})=>[i?1073741824:0]]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1073741825|o[1]&64&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Sf(t){let e,n;return e=new ae({props:{slot:"input",type:te.checkbox,settingKey:"enable",settingValue:t[0].window.enable}}),e.$on("changed",t[13]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].window.enable),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Af(t){let e,n;return e=new ae({props:{slot:"input",type:te.checkbox,settingKey:"editorHyperlink",settingValue:t[0].window.open.targets.hyperlink.editor}}),e.$on("changed",t[14]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].window.open.targets.hyperlink.editor),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function $f(t){let e,n;return e=new ae({props:{slot:"input",type:te.checkbox,settingKey:"otherHyperlink",settingValue:t[0].window.open.targets.hyperlink.other}}),e.$on("changed",t[15]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].window.open.targets.hyperlink.other),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Rf(t){let e,n;return e=new ae({props:{slot:"input",type:te.number,settingKey:"width",settingValue:t[0].window.params.width,limits:{min:320,max:15360,step:40}}}),e.$on("changed",t[16]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].window.params.width),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function vf(t){let e,n;return e=new ae({props:{slot:"input",type:te.number,settingKey:"height",settingValue:t[0].window.params.height,limits:{min:240,max:8640,step:40}}}),e.$on("changed",t[17]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].window.params.height),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Cf(t){let e,n;return e=new ae({props:{slot:"input",type:te.checkbox,settingKey:"center",settingValue:t[0].window.params.center}}),e.$on("changed",t[18]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].window.params.center),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Lf(t){let e,n;return e=new ae({props:{slot:"input",type:te.checkbox,settingKey:"top",settingValue:t[0].window.params.alwaysOnTop}}),e.$on("changed",t[19]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].window.params.alwaysOnTop),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Of(t){let e,n;return e=new ae({props:{slot:"input",type:te.select,settingKey:"menuBar",settingValue:t[0].window.params.enableMenuBar?t[0].window.params.autoHideMenuBar?He.AutoHide:He.AlwaysShow:He.Disabled,options:[{key:He.AutoHide,text:t[2].settings.window.menuBar.options.autoHide},{key:He.AlwaysShow,text:t[2].settings.window.menuBar.options.alwaysShow},{key:He.Disabled,text:t[2].settings.window.menuBar.options.disabled}]}}),e.$on("changed",t[20]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].window.params.enableMenuBar?i[0].window.params.autoHideMenuBar?He.AutoHide:He.AlwaysShow:He.Disabled),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Nf(t){let e,n=t[32].prefix+"",i;return{c(){e=K("code"),i=Ke(n),$(e,"slot","title"),$(e,"class","fn__code")},m(o,r){D(o,e,r),H(e,i)},p(o,r){r[0]&1&&n!==(n=o[32].prefix+"")&&Bt(i,n)},d(o){o&&F(e)}}}function If(t){let e,n;function i(...o){return t[21](t[32],t[33],t[34],...o)}return e=new ae({props:{slot:"input",type:te.checkbox,settingKey:"Checkbox",settingValue:t[32].enable}}),e.$on("changed",i),{c(){P(e.$$.fragment)},m(o,r){I(e,o,r),n=!0},p(o,r){t=o;const a={};r[0]&1&&(a.settingValue=t[32].enable),e.$set(a)},i(o){n||(T(e.$$.fragment,o),n=!0)},o(o){E(e.$$.fragment,o),n=!1},d(o){M(e,o)}}}function Fo(t,e){let n,i,o;return i=new St({props:{minWidth:"8em",$$slots:{input:[If],title:[Nf]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=ve(),P(i.$$.fragment),this.first=n},m(r,a){D(r,n,a),I(i,r,a),o=!0},p(r,a){e=r;const s={};a[0]&1|a[1]&64&&(s.$$scope={dirty:a,ctx:e}),i.$set(s)},i(r){o||(T(i.$$.fragment,r),o=!0)},o(r){E(i.$$.fragment,r),o=!1},d(r){r&&F(n),M(i,r)}}}function Mf(t){let e=[],n=new Map,i,o,r=De(Object.entries(t[0].window.open.protocols));const a=s=>s[31];for(let s=0;s<r.length;s+=1){let u=No(t,r,s),f=a(u);n.set(f,e[s]=Fo(f,u))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();i=ve()},m(s,u){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(s,u);D(s,i,u),o=!0},p(s,u){u[0]&9&&(r=De(Object.entries(s[0].window.open.protocols)),ge(),e=$t(e,u,a,1,s,r,n,i.parentNode,jt,Fo,i,No),be())},i(s){if(!o){for(let u=0;u<r.length;u+=1)T(e[u]);o=!0}},o(s){for(let u=0;u<e.length;u+=1)E(e[u]);o=!1},d(s){s&&F(i);for(let u=0;u<e.length;u+=1)e[u].d(s)}}}function Ff(t){let e,n;return e=new ae({props:{slot:"input",type:te.checkbox,settingKey:"enable",settingValue:t[0].window.siyuan.enable}}),e.$on("changed",t[22]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].window.siyuan.enable),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Pf(t){let e,n;return e=new ae({props:{slot:"input",type:te.button,settingKey:"open-desktop-window",settingValue:t[2].settings.siyuan.open.desktop.text}}),e.$on("clicked",t[23]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p:oe,i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Df(t){let e,n;return e=new ae({props:{slot:"input",type:te.button,settingKey:"open-mobile-window",settingValue:t[2].settings.siyuan.open.mobile.text}}),e.$on("clicked",t[24]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p:oe,i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Uf(t){let e,n;return e=new ae({props:{slot:"input",type:te.checkbox,settingKey:"focus",settingValue:t[0].window.siyuan.focus}}),e.$on("changed",t[25]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].window.siyuan.focus),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Wf(t){let e,n;return e=new ae({props:{slot:"input",type:te.select,settingKey:"menuBar",settingValue:t[0].window.siyuan.editorType,options:[{key:Ge.mobile,text:t[2].settings.siyuan.editorType.options.mobile},{key:Ge.desktop,text:t[2].settings.siyuan.editorType.options.desktop},{key:Ge.window,text:t[2].settings.siyuan.editorType.options.window}]}}),e.$on("changed",t[26]),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.settingValue=i[0].window.siyuan.editorType),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function jf(t){let e,n,i,o,r,a,s,u,f,p,m,_,b,g,y,k,W,S,ee,C,J,z,ne,Q,q,Le,Ue,ht,We,G,Ie,it,Fe,xe;return n=new Te({props:{title:t[2].settings.open.enable.window.title,text:t[2].settings.open.enable.window.description,$$slots:{input:[Sf]},$$scope:{ctx:t}}}),o=new Te({props:{title:t[2].settings.open.editorHyperlink.title,text:t[2].settings.open.editorHyperlink.description,$$slots:{input:[Af]},$$scope:{ctx:t}}}),a=new Te({props:{title:t[2].settings.open.otherHyperlink.title,text:t[2].settings.open.otherHyperlink.description,$$slots:{input:[$f]},$$scope:{ctx:t}}}),u=new Te({props:{title:t[2].settings.window.width.title,text:t[2].settings.window.width.description,$$slots:{input:[Rf]},$$scope:{ctx:t}}}),p=new Te({props:{title:t[2].settings.window.height.title,text:t[2].settings.window.height.description,$$slots:{input:[vf]},$$scope:{ctx:t}}}),_=new Te({props:{title:t[2].settings.window.center.title,text:t[2].settings.window.center.description,$$slots:{input:[Cf]},$$scope:{ctx:t}}}),g=new Te({props:{title:t[2].settings.window.top.title,text:t[2].settings.window.top.description,$$slots:{input:[Lf]},$$scope:{ctx:t}}}),k=new Te({props:{title:t[2].settings.window.menuBar.title,text:t[2].settings.window.menuBar.description,$$slots:{input:[Of]},$$scope:{ctx:t}}}),ee=new Si({props:{title:t[2].settings.protocols.title,$$slots:{default:[Mf]},$$scope:{ctx:t}}}),z=new ws({props:{minWidth:"16em",title:t[2].settings.open.shortcut.title,shortcut:t[0].window.open.mouse,displayMouseEvent:!1,disabledMouseButton:!0,mouseButtonTitle:t[2].settings.mouse.button,mouseButtonOptions:[{key:st.Middle,text:t[2].settings.mouse.middle}]}}),z.$on("changed",t[3]),q=new Te({props:{title:t[2].settings.siyuan.enable.title,text:t[2].settings.siyuan.enable.description,$$slots:{input:[Ff]},$$scope:{ctx:t}}}),Ue=new Te({props:{title:t[2].settings.siyuan.open.desktop.title,text:t[2].settings.siyuan.open.desktop.description,$$slots:{input:[Pf]},$$scope:{ctx:t}}}),We=new Te({props:{title:t[2].settings.siyuan.open.mobile.title,text:t[2].settings.siyuan.open.mobile.description,$$slots:{input:[Df]},$$scope:{ctx:t}}}),Ie=new Te({props:{title:t[2].settings.siyuan.focus.title,text:t[2].settings.siyuan.focus.description,$$slots:{input:[Uf]},$$scope:{ctx:t}}}),Fe=new Te({props:{title:t[2].settings.siyuan.editorType.title,text:t[2].settings.siyuan.editorType.description,$$slots:{input:[Wf]},$$scope:{ctx:t}}}),{c(){e=K("div"),P(n.$$.fragment),i=V(),P(o.$$.fragment),r=V(),P(a.$$.fragment),s=V(),P(u.$$.fragment),f=V(),P(p.$$.fragment),m=V(),P(_.$$.fragment),b=V(),P(g.$$.fragment),y=V(),P(k.$$.fragment),W=V(),S=K("div"),P(ee.$$.fragment),C=V(),J=K("div"),P(z.$$.fragment),ne=V(),Q=K("div"),P(q.$$.fragment),Le=V(),P(Ue.$$.fragment),ht=V(),P(We.$$.fragment),G=V(),P(Ie.$$.fragment),it=V(),P(Fe.$$.fragment),$(e,"data-type",t[6].window[0].name),j(e,"fn__none",t[6].window[0].key!==t[30]),$(S,"data-type",t[6].window[1].name),j(S,"fn__none",t[6].window[1].key!==t[30]),$(J,"data-type",t[6].window[2].name),j(J,"fn__none",t[6].window[2].key!==t[30]),$(Q,"data-type",t[6].window[3].name),j(Q,"fn__none",t[6].window[3].key!==t[30])},m(x,N){D(x,e,N),I(n,e,null),H(e,i),I(o,e,null),H(e,r),I(a,e,null),H(e,s),I(u,e,null),H(e,f),I(p,e,null),H(e,m),I(_,e,null),H(e,b),I(g,e,null),H(e,y),I(k,e,null),D(x,W,N),D(x,S,N),I(ee,S,null),D(x,C,N),D(x,J,N),I(z,J,null),D(x,ne,N),D(x,Q,N),I(q,Q,null),H(Q,Le),I(Ue,Q,null),H(Q,ht),I(We,Q,null),H(Q,G),I(Ie,Q,null),H(Q,it),I(Fe,Q,null),xe=!0},p(x,N){const X={};N[0]&1|N[1]&64&&(X.$$scope={dirty:N,ctx:x}),n.$set(X);const re={};N[0]&1|N[1]&64&&(re.$$scope={dirty:N,ctx:x}),o.$set(re);const Xe={};N[0]&1|N[1]&64&&(Xe.$$scope={dirty:N,ctx:x}),a.$set(Xe);const dt={};N[0]&1|N[1]&64&&(dt.$$scope={dirty:N,ctx:x}),u.$set(dt);const mt={};N[0]&1|N[1]&64&&(mt.$$scope={dirty:N,ctx:x}),p.$set(mt);const gt={};N[0]&1|N[1]&64&&(gt.$$scope={dirty:N,ctx:x}),_.$set(gt);const bt={};N[0]&1|N[1]&64&&(bt.$$scope={dirty:N,ctx:x}),g.$set(bt);const Ve={};N[0]&1|N[1]&64&&(Ve.$$scope={dirty:N,ctx:x}),k.$set(Ve),(!xe||N[0]&1073741888)&&j(e,"fn__none",x[6].window[0].key!==x[30]);const ut={};N[0]&1|N[1]&64&&(ut.$$scope={dirty:N,ctx:x}),ee.$set(ut),(!xe||N[0]&1073741888)&&j(S,"fn__none",x[6].window[1].key!==x[30]);const ce={};N[0]&1&&(ce.shortcut=x[0].window.open.mouse),z.$set(ce),(!xe||N[0]&1073741888)&&j(J,"fn__none",x[6].window[2].key!==x[30]);const U={};N[0]&1|N[1]&64&&(U.$$scope={dirty:N,ctx:x}),q.$set(U);const Re={};N[0]&2|N[1]&64&&(Re.$$scope={dirty:N,ctx:x}),Ue.$set(Re);const Y={};N[0]&2|N[1]&64&&(Y.$$scope={dirty:N,ctx:x}),We.$set(Y);const ke={};N[0]&1|N[1]&64&&(ke.$$scope={dirty:N,ctx:x}),Ie.$set(ke);const ct={};N[0]&1|N[1]&64&&(ct.$$scope={dirty:N,ctx:x}),Fe.$set(ct),(!xe||N[0]&1073741888)&&j(Q,"fn__none",x[6].window[3].key!==x[30])},i(x){xe||(T(n.$$.fragment,x),T(o.$$.fragment,x),T(a.$$.fragment,x),T(u.$$.fragment,x),T(p.$$.fragment,x),T(_.$$.fragment,x),T(g.$$.fragment,x),T(k.$$.fragment,x),T(ee.$$.fragment,x),T(z.$$.fragment,x),T(q.$$.fragment,x),T(Ue.$$.fragment,x),T(We.$$.fragment,x),T(Ie.$$.fragment,x),T(Fe.$$.fragment,x),xe=!0)},o(x){E(n.$$.fragment,x),E(o.$$.fragment,x),E(a.$$.fragment,x),E(u.$$.fragment,x),E(p.$$.fragment,x),E(_.$$.fragment,x),E(g.$$.fragment,x),E(k.$$.fragment,x),E(ee.$$.fragment,x),E(z.$$.fragment,x),E(q.$$.fragment,x),E(Ue.$$.fragment,x),E(We.$$.fragment,x),E(Ie.$$.fragment,x),E(Fe.$$.fragment,x),xe=!1},d(x){x&&(F(e),F(W),F(S),F(C),F(J),F(ne),F(Q)),M(n),M(o),M(a),M(u),M(p),M(_),M(g),M(k),M(ee),M(z),M(q),M(Ue),M(We),M(Ie),M(Fe)}}}function qf(t){let e,n;return e=new ys({props:{focus:zf,tabs:t[6].window,$$slots:{default:[jf,({focus:i})=>({30:i}),({focus:i})=>[i?1073741824:0]]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&1073741827|o[1]&64&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Hf(t){let e,n,i,o,r,a;return e=new Qn({props:{display:t[5][0].key===t[29],$$slots:{default:[gf]},$$scope:{ctx:t}}}),i=new Qn({props:{display:t[5][1].key===t[29],$$slots:{default:[Bf]},$$scope:{ctx:t}}}),r=new Qn({props:{display:t[5][2].key===t[29],$$slots:{default:[qf]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment),n=V(),P(i.$$.fragment),o=V(),P(r.$$.fragment)},m(s,u){I(e,s,u),D(s,n,u),I(i,s,u),D(s,o,u),I(r,s,u),a=!0},p(s,u){const f={};u[0]&536870912&&(f.display=s[5][0].key===s[29]),u[0]&1|u[1]&64&&(f.$$scope={dirty:u,ctx:s}),e.$set(f);const p={};u[0]&536870912&&(p.display=s[5][1].key===s[29]),u[0]&1|u[1]&64&&(p.$$scope={dirty:u,ctx:s}),i.$set(p);const m={};u[0]&536870912&&(m.display=s[5][2].key===s[29]),u[0]&3|u[1]&64&&(m.$$scope={dirty:u,ctx:s}),r.$set(m)},i(s){a||(T(e.$$.fragment,s),T(i.$$.fragment,s),T(r.$$.fragment,s),a=!0)},o(s){E(e.$$.fragment,s),E(i.$$.fragment,s),E(r.$$.fragment,s),a=!1},d(s){s&&(F(n),F(o)),M(e,s),M(i,s),M(r,s)}}}function Kf(t){let e,n;return e=new nc({props:{panels:t[5],focus:xf,$$slots:{default:[Hf,({focus:i})=>({29:i}),({focus:i})=>[i?536870912:0]]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&536870915|o[1]&64&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}let xf=0,Vf=0,zf=0;function Gf(t,e,n){let{config:i}=e,{plugin:o}=e;const r=o.i18n;function a(){o.updateConfig(i)}function s(){o.siyuan.confirm(r.settings.generalSettings.reset.title,r.settings.generalSettings.reset.description,async()=>{await o.resetConfig(),globalThis.location.reload()})}const u=[{key:0,text:r.settings.generalSettings.title,name:r.settings.generalSettings.title,icon:"#iconSettings"},{key:1,text:r.settings.openTab,name:r.settings.openTab,icon:"#iconBoth"},{key:2,text:r.settings.openWindow,name:r.settings.openWindow,icon:"#iconOpenWindow"}],f={tab:[{key:0,text:r.settings.general,name:r.settings.general,icon:"⚙"},{key:1,text:r.settings.protocol,name:r.settings.protocol,icon:"🌐"},{key:2,text:r.settings.shortcut,name:r.settings.shortcut,icon:"⌨"}],window:[{key:0,text:r.settings.general,name:r.settings.general,icon:"⚙"},{key:1,text:r.settings.protocol,name:r.settings.protocol,icon:"🌐"},{key:2,text:r.settings.shortcut,name:r.settings.shortcut,icon:"⌨"},{key:3,text:r.settings.siyuan.title,name:r.settings.siyuan.title,icon:"📝"}]},p=G=>{n(0,i.general.useragent=G.detail.value,i),a()},m=G=>{n(0,i.general.background=G.detail.value,i),a()},_=G=>{n(0,i.tab.enable=G.detail.value,i),a()},b=G=>{n(0,i.tab.open.targets.hyperlink.editor.enable=G.detail.value,i),a()},g=G=>{n(0,i.tab.open.targets.hyperlink.other.enable=G.detail.value,i),a()},y=(G,Ie,it,Fe)=>{n(0,Ie[it][1].enable=Fe.detail.value,i),a()},k=G=>{n(0,i.window.enable=G.detail.value,i),a()},W=G=>{n(0,i.window.open.targets.hyperlink.editor=G.detail.value,i),a()},S=G=>{n(0,i.window.open.targets.hyperlink.other=G.detail.value,i),a()},ee=G=>{n(0,i.window.params.width=G.detail.value,i),a()},C=G=>{n(0,i.window.params.height=G.detail.value,i),a()},J=G=>{n(0,i.window.params.center=G.detail.value,i),a()},z=G=>{n(0,i.window.params.alwaysOnTop=G.detail.value,i),a()},ne=G=>{switch(G.detail.value){case He.AutoHide:n(0,i.window.params.enableMenuBar=!0,i),n(0,i.window.params.autoHideMenuBar=!0,i);break;case He.AlwaysShow:n(0,i.window.params.enableMenuBar=!0,i),n(0,i.window.params.autoHideMenuBar=!1,i);break;case He.Disabled:n(0,i.window.params.enableMenuBar=!1,i);break}a()},Q=(G,Ie,it,Fe)=>{n(0,Ie[it][1].enable=Fe.detail.value,i),a()},q=G=>{n(0,i.window.siyuan.enable=G.detail.value,i),a()},Le=G=>o.openSiyuanDesktopWindow(G.detail.event),Ue=G=>o.openSiyuanMobileWindow(G.detail.event),ht=G=>{n(0,i.window.siyuan.focus=G.detail.value,i),a()},We=G=>{n(0,i.window.siyuan.editorType=G.detail.value,i),a()};return t.$$set=G=>{"config"in G&&n(0,i=G.config),"plugin"in G&&n(1,o=G.plugin)},[i,o,r,a,s,u,f,p,m,_,b,g,y,k,W,S,ee,C,J,z,ne,Q,q,Le,Ue,ht,We]}class Yf extends Ne{constructor(e){super(),Oe(this,e,Gf,Kf,$e,{config:0,plugin:1},null,[-1,-1])}}function Po(t,{delay:e=0,duration:n=400,easing:i=ki}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:r=>`opacity: ${r*o}`}}const Jf=t=>({}),Do=t=>({});function Uo(t){let e,n;return e=new Je({props:{id:t[1],icon:t[2]}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&2&&(r.id=i[1]),o&4&&(r.icon=i[2]),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Xf(t){let e,n,i=t[2]&&Uo(t);return{c(){i&&i.c(),e=ve()},m(o,r){i&&i.m(o,r),D(o,e,r),n=!0},p(o,r){o[2]?i?(i.p(o,r),r&4&&T(i,1)):(i=Uo(o),i.c(),T(i,1),i.m(e.parentNode,e)):i&&(ge(),E(i,1,1,()=>{i=null}),be())},i(o){n||(T(i),n=!0)},o(o){E(i),n=!1},d(o){o&&F(e),i&&i.d(o)}}}function Qf(t){let e,n,i,o,r;const a=t[8].svg,s=Ee(a,t,t[7],Do),u=s||Xf(t);return{c(){e=K("span"),u&&u.c(),n=V(),i=K("span"),o=Ke(t[3]),$(i,"title",t[4]),$(i,"class","protyle-breadcrumb__text"),j(i,"protyle-breadcrumb__text--ellipsis",t[5]),$(e,"data-node-id",t[0]),$(e,"class","protyle-breadcrumb__item"),j(e,"protyle-breadcrumb__item--active",t[6])},m(f,p){D(f,e,p),u&&u.m(e,null),H(e,n),H(e,i),H(i,o),r=!0},p(f,[p]){s?s.p&&(!r||p&128)&&Se(s,a,f,f[7],r?Be(a,f[7],p,Jf):Ae(f[7]),Do):u&&u.p&&(!r||p&6)&&u.p(f,r?p:-1),(!r||p&8)&&Bt(o,f[3]),(!r||p&16)&&$(i,"title",f[4]),(!r||p&32)&&j(i,"protyle-breadcrumb__text--ellipsis",f[5]),(!r||p&1)&&$(e,"data-node-id",f[0]),(!r||p&64)&&j(e,"protyle-breadcrumb__item--active",f[6])},i(f){r||(T(u,f),r=!0)},o(f){E(u,f),r=!1},d(f){f&&F(e),u&&u.d(f)}}}function Zf(t,e,n){let{$$slots:i={},$$scope:o}=e,{itemId:r=""}=e,{iconId:a=""}=e,{icon:s=""}=e,{text:u=""}=e,{textTitle:f=""}=e,{textEllipsis:p=!0}=e,{active:m=!1}=e;return t.$$set=_=>{"itemId"in _&&n(0,r=_.itemId),"iconId"in _&&n(1,a=_.iconId),"icon"in _&&n(2,s=_.icon),"text"in _&&n(3,u=_.text),"textTitle"in _&&n(4,f=_.textTitle),"textEllipsis"in _&&n(5,p=_.textEllipsis),"active"in _&&n(6,m=_.active),"$$scope"in _&&n(7,o=_.$$scope)},[r,a,s,u,f,p,m,o,i]}class ep extends Ne{constructor(e){super(),Oe(this,e,Zf,Qf,$e,{itemId:0,iconId:1,icon:2,text:3,textTitle:4,textEllipsis:5,active:6})}}function Wo(t,e,n){const i=t.slice();return i[3]=e[n],i[5]=n,i}function tp(t){let e,n;return e=new Je({props:{className:"protyle-breadcrumb__arrow",icon:t[3].icon||"#iconRight"}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&1&&(r.icon=i[3].icon||"#iconRight"),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function np(t){let e,n;const i=[t[3]];let o={};for(let r=0;r<i.length;r+=1)o=Un(o,i[r]);return e=new ep({props:o}),{c(){P(e.$$.fragment)},m(r,a){I(e,r,a),n=!0},p(r,a){const s=a&1?Bi(i,[_s(r[3])]):{};e.$set(s)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function jo(t,e){let n,i,o,r,a;const s=[np,tp],u=[];function f(p,m){return p[3].type==="item"?0:p[3].type==="arrow"?1:-1}return~(i=f(e))&&(o=u[i]=s[i](e)),{key:t,first:null,c(){n=ve(),o&&o.c(),r=ve(),this.first=n},m(p,m){D(p,n,m),~i&&u[i].m(p,m),D(p,r,m),a=!0},p(p,m){e=p;let _=i;i=f(e),i===_?~i&&u[i].p(e,m):(o&&(ge(),E(u[_],1,1,()=>{u[_]=null}),be()),~i?(o=u[i],o?o.p(e,m):(o=u[i]=s[i](e),o.c()),T(o,1),o.m(r.parentNode,r)):o=null)},i(p){a||(T(o),a=!0)},o(p){E(o),a=!1},d(p){p&&(F(n),F(r)),~i&&u[i].d(p)}}}function ip(t){let e=[],n=new Map,i,o,r=De(t[0]);const a=s=>s[5];for(let s=0;s<r.length;s+=1){let u=Wo(t,r,s),f=a(u);n.set(f,e[s]=jo(f,u))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();i=ve()},m(s,u){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(s,u);D(s,i,u),o=!0},p(s,u){u&1&&(r=De(s[0]),ge(),e=$t(e,u,a,1,s,r,n,i.parentNode,jt,jo,i,Wo),be())},i(s){if(!o){for(let u=0;u<r.length;u+=1)T(e[u]);o=!0}},o(s){for(let u=0;u<e.length;u+=1)E(e[u]);o=!1},d(s){s&&F(i);for(let u=0;u<e.length;u+=1)e[u].d(s)}}}function op(t){let e,n;const i=t[2].default,o=Ee(i,t,t[1],null),r=o||ip(t);return{c(){e=K("div"),r&&r.c(),$(e,"class","protyle-breadcrumb__bar protyle-breadcrumb__bar--nowrap")},m(a,s){D(a,e,s),r&&r.m(e,null),n=!0},p(a,[s]){o?o.p&&(!n||s&2)&&Se(o,i,a,a[1],n?Be(i,a[1],s,null):Ae(a[1]),null):r&&r.p&&(!n||s&1)&&r.p(a,n?s:-1)},i(a){n||(T(r,a),n=!0)},o(a){E(r,a),n=!1},d(a){a&&F(e),r&&r.d(a)}}}function rp(t,e,n){let{$$slots:i={},$$scope:o}=e,{items:r=[]}=e;return t.$$set=a=>{"items"in a&&n(0,r=a.items),"$$scope"in a&&n(1,o=a.$$scope)},[r,o,i]}class sp extends Ne{constructor(e){super(),Oe(this,e,rp,op,$e,{items:0})}}const vt=[];function wt(t,e=oe){let n;const i=new Set;function o(s){if($e(t,s)&&(t=s,n)){const u=!vt.length;for(const f of i)f[1](),vt.push(f,t);if(u){for(let f=0;f<vt.length;f+=2)vt[f][0](vt[f+1]);vt.length=0}}}function r(s){o(s(t))}function a(s,u=oe){const f=[s,u];return i.add(f),i.size===1&&(n=e(o,r)||oe),s(t),()=>{i.delete(f),i.size===0&&n&&(n(),n=null)}}return{set:o,update:r,subscribe:a}}var Ze=(t=>(t.none="",t.n="b3-tooltips__n",t.ne="b3-tooltips__ne",t.e="b3-tooltips__e",t.se="b3-tooltips__se",t.s="b3-tooltips__s",t.sw="b3-tooltips__sw",t.w="b3-tooltips__w",t.nw="b3-tooltips__nw",t))(Ze||{});function Zn(t){let e,n,i,o,r,a;n=new Je({props:{icon:t[0]}});let s=[{role:"button"},{"data-type":t[5]},{"aria-label":t[6]},{class:i="block__icon fn__flex-center "+t[7]}],u={};for(let f=0;f<s.length;f+=1)u=Un(u,s[f]);return{c(){e=K(t[8]),P(n.$$.fragment),eo(t[8])(e,u),j(e,"fn__none",t[2]),j(e,"block__icon--show",t[1]),j(e,"toolbar__item--active",t[3]),j(e,"toolbar__item--disabled",t[4]),j(e,"b3-tooltips",t[7]!==Ze.none)},m(f,p){D(f,e,p),I(n,e,null),t[14](e),o=!0,r||(a=[ue(e,"click",t[12]),ue(e,"dblclick",t[13]),ue(e,"click",t[15])],r=!0)},p(f,p){const m={};p&1&&(m.icon=f[0]),n.$set(m),eo(f[8])(e,u=Bi(s,[{role:"button"},(!o||p&32)&&{"data-type":f[5]},(!o||p&64)&&{"aria-label":f[6]},(!o||p&128&&i!==(i="block__icon fn__flex-center "+f[7]))&&{class:i}])),j(e,"fn__none",f[2]),j(e,"block__icon--show",f[1]),j(e,"toolbar__item--active",f[3]),j(e,"toolbar__item--disabled",f[4]),j(e,"b3-tooltips",f[7]!==Ze.none)},i(f){o||(T(n.$$.fragment,f),o=!0)},o(f){E(n.$$.fragment,f),o=!1},d(f){f&&F(e),M(n),t[14](null),r=!1,Ce(a)}}}function ap(t){let e=t[8],n,i=t[8]&&Zn(t);return{c(){i&&i.c(),n=ve()},m(o,r){i&&i.m(o,r),D(o,n,r)},p(o,[r]){o[8]?e?$e(e,o[8])?(i.d(1),i=Zn(o),e=o[8],i.c(),i.m(n.parentNode,n)):i.p(o,r):(i=Zn(o),e=o[8],i.c(),i.m(n.parentNode,n)):e&&(i.d(1),i=null,e=o[8])},i:oe,o(o){E(i,o)},d(o){o&&F(n),i&&i.d(o)}}}function lp(t,e,n){let{icon:i="#iconHelp"}=e,{tag:o="button"}=e,{show:r=!0}=e,{none:a=!1}=e,{active:s=!1}=e,{disabled:u=!1}=e,{type:f=""}=e,{ariaLabel:p=""}=e,{tooltipsDirection:m=Ze.none}=e,{onClick:_=()=>null}=e,b;const g={icon:wt(i),show:wt(r),none:wt(a),active:wt(s),disabled:wt(u),type:wt(f),ariaLabel:wt(p),tooltipsDirection:wt(m)},y=[g.icon.subscribe(C=>n(0,i=C)),g.show.subscribe(C=>n(1,r=C)),g.none.subscribe(C=>n(2,a=C)),g.active.subscribe(C=>n(3,s=C)),g.disabled.subscribe(C=>n(4,u=C)),g.type.subscribe(C=>n(5,f=C)),g.ariaLabel.subscribe(C=>n(6,p=C)),g.tooltipsDirection.subscribe(C=>n(7,m=C))];Wu(()=>{y.forEach(C=>C())});function k(C){io.call(this,t,C)}function W(C){io.call(this,t,C)}function S(C){Jt[C?"unshift":"push"](()=>{b=C,n(10,b)})}const ee=C=>_(C,b,g);return t.$$set=C=>{"icon"in C&&n(0,i=C.icon),"tag"in C&&n(8,o=C.tag),"show"in C&&n(1,r=C.show),"none"in C&&n(2,a=C.none),"active"in C&&n(3,s=C.active),"disabled"in C&&n(4,u=C.disabled),"type"in C&&n(5,f=C.type),"ariaLabel"in C&&n(6,p=C.ariaLabel),"tooltipsDirection"in C&&n(7,m=C.tooltipsDirection),"onClick"in C&&n(9,_=C.onClick)},t.$$.update=()=>{t.$$.dirty&1&&g.icon.set(i),t.$$.dirty&2&&g.show.set(r),t.$$.dirty&4&&g.none.set(a),t.$$.dirty&8&&g.active.set(s),t.$$.dirty&16&&g.disabled.set(u),t.$$.dirty&32&&g.type.set(f),t.$$.dirty&64&&g.ariaLabel.set(p),t.$$.dirty&128&&g.tooltipsDirection.set(m)},[i,r,a,s,u,f,p,m,o,_,b,g,k,W,S,ee]}class kt extends Ne{constructor(e){super(),Oe(this,e,lp,ap,$e,{icon:0,tag:8,show:1,none:2,active:3,disabled:4,type:5,ariaLabel:6,tooltipsDirection:7,onClick:9})}}function qo(t,e,n){const i=t.slice();return i[4]=e[n],i[6]=n,i}const up=t=>({}),Ho=t=>({}),cp=t=>({}),Ko=t=>({});function fp(t){let e,n;return e=new sp({props:{items:t[0]}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&1&&(r.items=i[0]),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function pp(t){let e;return{c(){e=K("span"),$(e,"class","fn__space")},m(n,i){D(n,e,i)},d(n){n&&F(e)}}}function hp(t){let e;return{c(){e=K("span"),$(e,"class","protyle-breadcrumb__space")},m(n,i){D(n,e,i)},d(n){n&&F(e)}}}function xo(t,e){let n,i,o,r;function a(m,_){return m[6]===0?hp:pp}let s=a(e),u=s(e);const f=[e[4]];let p={};for(let m=0;m<f.length;m+=1)p=Un(p,f[m]);return o=new kt({props:p}),{key:t,first:null,c(){n=ve(),u.c(),i=V(),P(o.$$.fragment),this.first=n},m(m,_){D(m,n,_),u.m(m,_),D(m,i,_),I(o,m,_),r=!0},p(m,_){e=m,s!==(s=a(e))&&(u.d(1),u=s(e),u&&(u.c(),u.m(i.parentNode,i)));const b=_&2?Bi(f,[_s(e[4])]):{};o.$set(b)},i(m){r||(T(o.$$.fragment,m),r=!0)},o(m){E(o.$$.fragment,m),r=!1},d(m){m&&(F(n),F(i)),u.d(m),M(o,m)}}}function dp(t){let e=[],n=new Map,i,o,r=De(t[1]);const a=s=>s[6];for(let s=0;s<r.length;s+=1){let u=qo(t,r,s),f=a(u);n.set(f,e[s]=xo(f,u))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();i=ve()},m(s,u){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(s,u);D(s,i,u),o=!0},p(s,u){u&2&&(r=De(s[1]),ge(),e=$t(e,u,a,1,s,r,n,i.parentNode,jt,xo,i,qo),be())},i(s){if(!o){for(let u=0;u<r.length;u+=1)T(e[u]);o=!0}},o(s){for(let u=0;u<e.length;u+=1)E(e[u]);o=!1},d(s){s&&F(i);for(let u=0;u<e.length;u+=1)e[u].d(s)}}}function mp(t){let e,n,i;const o=t[3].bar,r=Ee(o,t,t[2],Ko),a=r||fp(t),s=t[3].icons,u=Ee(s,t,t[2],Ho),f=u||dp(t);return{c(){e=K("div"),a&&a.c(),n=V(),f&&f.c(),$(e,"class","protyle-breadcrumb")},m(p,m){D(p,e,m),a&&a.m(e,null),H(e,n),f&&f.m(e,null),i=!0},p(p,[m]){r?r.p&&(!i||m&4)&&Se(r,o,p,p[2],i?Be(o,p[2],m,cp):Ae(p[2]),Ko):a&&a.p&&(!i||m&1)&&a.p(p,i?m:-1),u?u.p&&(!i||m&4)&&Se(u,s,p,p[2],i?Be(s,p[2],m,up):Ae(p[2]),Ho):f&&f.p&&(!i||m&2)&&f.p(p,i?m:-1)},i(p){i||(T(a,p),T(f,p),i=!0)},o(p){E(a,p),E(f,p),i=!1},d(p){p&&F(e),a&&a.d(p),f&&f.d(p)}}}function gp(t,e,n){let{$$slots:i={},$$scope:o}=e,{items:r=[]}=e,{icons:a=[]}=e;return t.$$set=s=>{"items"in s&&n(0,r=s.items),"icons"in s&&n(1,a=s.icons),"$$scope"in s&&n(2,o=s.$$scope)},[r,a,o,i]}class bp extends Ne{constructor(e){super(),Oe(this,e,gp,mp,$e,{items:0,icons:1})}}const _p=t=>({}),Vo=t=>({}),yp=t=>({}),zo=t=>({});function Go(t){let e,n;return e=new bp({props:{items:t[2],icons:t[3]}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o&4&&(r.items=i[2]),o&8&&(r.icons=i[3]),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function wp(t){let e,n,i=t[1]&&Go(t);return{c(){i&&i.c(),e=ve()},m(o,r){i&&i.m(o,r),D(o,e,r),n=!0},p(o,r){o[1]?i?(i.p(o,r),r&2&&T(i,1)):(i=Go(o),i.c(),T(i,1),i.m(e.parentNode,e)):i&&(ge(),E(i,1,1,()=>{i=null}),be())},i(o){n||(T(i),n=!0)},o(o){E(i),n=!1},d(o){o&&F(e),i&&i.d(o)}}}function kp(t){let e,n,i,o;const r=t[5].breadcrumb,a=Ee(r,t,t[4],zo),s=a||wp(t),u=t[5].content,f=Ee(u,t,t[4],Vo);return{c(){e=K("div"),s&&s.c(),n=V(),i=K("div"),f&&f.c(),$(i,"class","protyle-preview"),$(e,"class","fn__flex-column"),j(e,"fullscreen",t[0])},m(p,m){D(p,e,m),s&&s.m(e,null),H(e,n),H(e,i),f&&f.m(i,null),o=!0},p(p,[m]){a?a.p&&(!o||m&16)&&Se(a,r,p,p[4],o?Be(r,p[4],m,yp):Ae(p[4]),zo):s&&s.p&&(!o||m&14)&&s.p(p,o?m:-1),f&&f.p&&(!o||m&16)&&Se(f,u,p,p[4],o?Be(u,p[4],m,_p):Ae(p[4]),Vo),(!o||m&1)&&j(e,"fullscreen",p[0])},i(p){o||(T(s,p),T(f,p),o=!0)},o(p){E(s,p),E(f,p),o=!1},d(p){p&&F(e),s&&s.d(p),f&&f.d(p)}}}function Tp(t,e,n){let{$$slots:i={},$$scope:o}=e,{fullscreen:r=!1}=e,{breadcrumb:a=!0}=e,{breadcrumbItems:s=[]}=e,{breadcrumbIcons:u=[]}=e;return t.$$set=f=>{"fullscreen"in f&&n(0,r=f.fullscreen),"breadcrumb"in f&&n(1,a=f.breadcrumb),"breadcrumbItems"in f&&n(2,s=f.breadcrumbItems),"breadcrumbIcons"in f&&n(3,u=f.breadcrumbIcons),"$$scope"in f&&n(4,o=f.$$scope)},[r,a,s,u,o,i]}class Ep extends Ne{constructor(e){super(),Oe(this,e,Tp,kp,$e,{fullscreen:0,breadcrumb:1,breadcrumbItems:2,breadcrumbIcons:3})}}const ks=$p();Rp();vp();function Bp(){return!!globalThis.require}function Sp(){return!!globalThis.process}function Ap(){var t,e;return!!((e=(t=globalThis.process)==null?void 0:t.versions)!=null&&e.hasOwnProperty("electron"))}function $p(){return Sp()&&Bp()&&Ap()}function Rp(){var t,e,n;return((n=(e=(t=globalThis.siyuan)==null?void 0:t.config)==null?void 0:e.appearance)==null?void 0:n.mode)===0}function vp(){var t,e,n;return((n=(e=(t=globalThis.siyuan)==null?void 0:t.config)==null?void 0:e.appearance)==null?void 0:n.mode)===1}const{replace:Cp}="",Lp=/[&<>'"]/g,Op={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},Np=t=>Op[t],Ct=t=>Cp.call(t,Lp,Np);var Ip={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.validDataUrl=n()})(zl,function(){function e(n){return e.regex.test((n||"").trim())}return e.regex=/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i,e})})(Ip);var Ts={},qn={};qn.byteLength=Pp;qn.toByteArray=Up;qn.fromByteArray=qp;var at=[],ze=[],Mp=typeof Uint8Array<"u"?Uint8Array:Array,ei="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Lt=0,Fp=ei.length;Lt<Fp;++Lt)at[Lt]=ei[Lt],ze[ei.charCodeAt(Lt)]=Lt;ze["-".charCodeAt(0)]=62;ze["_".charCodeAt(0)]=63;function Es(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var i=n===e?0:4-n%4;return[n,i]}function Pp(t){var e=Es(t),n=e[0],i=e[1];return(n+i)*3/4-i}function Dp(t,e,n){return(e+n)*3/4-n}function Up(t){var e,n=Es(t),i=n[0],o=n[1],r=new Mp(Dp(t,i,o)),a=0,s=o>0?i-4:i,u;for(u=0;u<s;u+=4)e=ze[t.charCodeAt(u)]<<18|ze[t.charCodeAt(u+1)]<<12|ze[t.charCodeAt(u+2)]<<6|ze[t.charCodeAt(u+3)],r[a++]=e>>16&255,r[a++]=e>>8&255,r[a++]=e&255;return o===2&&(e=ze[t.charCodeAt(u)]<<2|ze[t.charCodeAt(u+1)]>>4,r[a++]=e&255),o===1&&(e=ze[t.charCodeAt(u)]<<10|ze[t.charCodeAt(u+1)]<<4|ze[t.charCodeAt(u+2)]>>2,r[a++]=e>>8&255,r[a++]=e&255),r}function Wp(t){return at[t>>18&63]+at[t>>12&63]+at[t>>6&63]+at[t&63]}function jp(t,e,n){for(var i,o=[],r=e;r<n;r+=3)i=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(t[r+2]&255),o.push(Wp(i));return o.join("")}function qp(t){for(var e,n=t.length,i=n%3,o=[],r=16383,a=0,s=n-i;a<s;a+=r)o.push(jp(t,a,a+r>s?s:a+r));return i===1?(e=t[n-1],o.push(at[e>>2]+at[e<<4&63]+"==")):i===2&&(e=(t[n-2]<<8)+t[n-1],o.push(at[e>>10]+at[e>>4&63]+at[e<<2&63]+"=")),o.join("")}var Ai={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ai.read=function(t,e,n,i,o){var r,a,s=o*8-i-1,u=(1<<s)-1,f=u>>1,p=-7,m=n?o-1:0,_=n?-1:1,b=t[e+m];for(m+=_,r=b&(1<<-p)-1,b>>=-p,p+=s;p>0;r=r*256+t[e+m],m+=_,p-=8);for(a=r&(1<<-p)-1,r>>=-p,p+=i;p>0;a=a*256+t[e+m],m+=_,p-=8);if(r===0)r=1-f;else{if(r===u)return a?NaN:(b?-1:1)*(1/0);a=a+Math.pow(2,i),r=r-f}return(b?-1:1)*a*Math.pow(2,r-i)};Ai.write=function(t,e,n,i,o,r){var a,s,u,f=r*8-o-1,p=(1<<f)-1,m=p>>1,_=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=i?0:r-1,g=i?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=p):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+m>=1?e+=_/u:e+=_*Math.pow(2,1-m),e*u>=2&&(a++,u/=2),a+m>=p?(s=0,a=p):a+m>=1?(s=(e*u-1)*Math.pow(2,o),a=a+m):(s=e*Math.pow(2,m-1)*Math.pow(2,o),a=0));o>=8;t[n+b]=s&255,b+=g,s/=256,o-=8);for(a=a<<o|s,f+=o;f>0;t[n+b]=a&255,b+=g,a/=256,f-=8);t[n+b-g]|=y*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=qn,n=Ai,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=S,t.INSPECT_MAX_BYTES=50;const o=2147483647;t.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=r(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{const h=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(h,l),h.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function a(h){if(h>o)throw new RangeError('The value "'+h+'" is invalid for option "size"');const l=new Uint8Array(h);return Object.setPrototypeOf(l,s.prototype),l}function s(h,l,c){if(typeof h=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(h)}return u(h,l,c)}s.poolSize=8192;function u(h,l,c){if(typeof h=="string")return _(h,l);if(ArrayBuffer.isView(h))return g(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(ye(h,ArrayBuffer)||h&&ye(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(h,SharedArrayBuffer)||h&&ye(h.buffer,SharedArrayBuffer)))return y(h,l,c);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const d=h.valueOf&&h.valueOf();if(d!=null&&d!==h)return s.from(d,l,c);const w=k(h);if(w)return w;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return s.from(h[Symbol.toPrimitive]("string"),l,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}s.from=function(h,l,c){return u(h,l,c)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function f(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function p(h,l,c){return f(h),h<=0?a(h):l!==void 0?typeof c=="string"?a(h).fill(l,c):a(h).fill(l):a(h)}s.alloc=function(h,l,c){return p(h,l,c)};function m(h){return f(h),a(h<0?0:W(h)|0)}s.allocUnsafe=function(h){return m(h)},s.allocUnsafeSlow=function(h){return m(h)};function _(h,l){if((typeof l!="string"||l==="")&&(l="utf8"),!s.isEncoding(l))throw new TypeError("Unknown encoding: "+l);const c=ee(h,l)|0;let d=a(c);const w=d.write(h,l);return w!==c&&(d=d.slice(0,w)),d}function b(h){const l=h.length<0?0:W(h.length)|0,c=a(l);for(let d=0;d<l;d+=1)c[d]=h[d]&255;return c}function g(h){if(ye(h,Uint8Array)){const l=new Uint8Array(h);return y(l.buffer,l.byteOffset,l.byteLength)}return b(h)}function y(h,l,c){if(l<0||h.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<l+(c||0))throw new RangeError('"length" is outside of buffer bounds');let d;return l===void 0&&c===void 0?d=new Uint8Array(h):c===void 0?d=new Uint8Array(h,l):d=new Uint8Array(h,l,c),Object.setPrototypeOf(d,s.prototype),d}function k(h){if(s.isBuffer(h)){const l=W(h.length)|0,c=a(l);return c.length===0||h.copy(c,0,0,l),c}if(h.length!==void 0)return typeof h.length!="number"||je(h.length)?a(0):b(h);if(h.type==="Buffer"&&Array.isArray(h.data))return b(h.data)}function W(h){if(h>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return h|0}function S(h){return+h!=h&&(h=0),s.alloc(+h)}s.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==s.prototype},s.compare=function(l,c){if(ye(l,Uint8Array)&&(l=s.from(l,l.offset,l.byteLength)),ye(c,Uint8Array)&&(c=s.from(c,c.offset,c.byteLength)),!s.isBuffer(l)||!s.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===c)return 0;let d=l.length,w=c.length;for(let B=0,R=Math.min(d,w);B<R;++B)if(l[B]!==c[B]){d=l[B],w=c[B];break}return d<w?-1:w<d?1:0},s.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(l,c){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return s.alloc(0);let d;if(c===void 0)for(c=0,d=0;d<l.length;++d)c+=l[d].length;const w=s.allocUnsafe(c);let B=0;for(d=0;d<l.length;++d){let R=l[d];if(ye(R,Uint8Array))B+R.length>w.length?(s.isBuffer(R)||(R=s.from(R)),R.copy(w,B)):Uint8Array.prototype.set.call(w,R,B);else if(s.isBuffer(R))R.copy(w,B);else throw new TypeError('"list" argument must be an Array of Buffers');B+=R.length}return w};function ee(h,l){if(s.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||ye(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);const c=h.length,d=arguments.length>2&&arguments[2]===!0;if(!d&&c===0)return 0;let w=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return ot(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return fe(h).length;default:if(w)return d?-1:ot(h).length;l=(""+l).toLowerCase(),w=!0}}s.byteLength=ee;function C(h,l,c){let d=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,l>>>=0,c<=l))return"";for(h||(h="utf8");;)switch(h){case"hex":return x(this,l,c);case"utf8":case"utf-8":return G(this,l,c);case"ascii":return Fe(this,l,c);case"latin1":case"binary":return xe(this,l,c);case"base64":return We(this,l,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,l,c);default:if(d)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),d=!0}}s.prototype._isBuffer=!0;function J(h,l,c){const d=h[l];h[l]=h[c],h[c]=d}s.prototype.swap16=function(){const l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<l;c+=2)J(this,c,c+1);return this},s.prototype.swap32=function(){const l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<l;c+=4)J(this,c,c+3),J(this,c+1,c+2);return this},s.prototype.swap64=function(){const l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<l;c+=8)J(this,c,c+7),J(this,c+1,c+6),J(this,c+2,c+5),J(this,c+3,c+4);return this},s.prototype.toString=function(){const l=this.length;return l===0?"":arguments.length===0?G(this,0,l):C.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(l){if(!s.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:s.compare(this,l)===0},s.prototype.inspect=function(){let l="";const c=t.INSPECT_MAX_BYTES;return l=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(l+=" ... "),"<Buffer "+l+">"},i&&(s.prototype[i]=s.prototype.inspect),s.prototype.compare=function(l,c,d,w,B){if(ye(l,Uint8Array)&&(l=s.from(l,l.offset,l.byteLength)),!s.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(c===void 0&&(c=0),d===void 0&&(d=l?l.length:0),w===void 0&&(w=0),B===void 0&&(B=this.length),c<0||d>l.length||w<0||B>this.length)throw new RangeError("out of range index");if(w>=B&&c>=d)return 0;if(w>=B)return-1;if(c>=d)return 1;if(c>>>=0,d>>>=0,w>>>=0,B>>>=0,this===l)return 0;let R=B-w,Z=d-c;const he=Math.min(R,Z),pe=this.slice(w,B),de=l.slice(c,d);for(let se=0;se<he;++se)if(pe[se]!==de[se]){R=pe[se],Z=de[se];break}return R<Z?-1:Z<R?1:0};function z(h,l,c,d,w){if(h.length===0)return-1;if(typeof c=="string"?(d=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,je(c)&&(c=w?0:h.length-1),c<0&&(c=h.length+c),c>=h.length){if(w)return-1;c=h.length-1}else if(c<0)if(w)c=0;else return-1;if(typeof l=="string"&&(l=s.from(l,d)),s.isBuffer(l))return l.length===0?-1:ne(h,l,c,d,w);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?w?Uint8Array.prototype.indexOf.call(h,l,c):Uint8Array.prototype.lastIndexOf.call(h,l,c):ne(h,[l],c,d,w);throw new TypeError("val must be string, number or Buffer")}function ne(h,l,c,d,w){let B=1,R=h.length,Z=l.length;if(d!==void 0&&(d=String(d).toLowerCase(),d==="ucs2"||d==="ucs-2"||d==="utf16le"||d==="utf-16le")){if(h.length<2||l.length<2)return-1;B=2,R/=2,Z/=2,c/=2}function he(de,se){return B===1?de[se]:de.readUInt16BE(se*B)}let pe;if(w){let de=-1;for(pe=c;pe<R;pe++)if(he(h,pe)===he(l,de===-1?0:pe-de)){if(de===-1&&(de=pe),pe-de+1===Z)return de*B}else de!==-1&&(pe-=pe-de),de=-1}else for(c+Z>R&&(c=R-Z),pe=c;pe>=0;pe--){let de=!0;for(let se=0;se<Z;se++)if(he(h,pe+se)!==he(l,se)){de=!1;break}if(de)return pe}return-1}s.prototype.includes=function(l,c,d){return this.indexOf(l,c,d)!==-1},s.prototype.indexOf=function(l,c,d){return z(this,l,c,d,!0)},s.prototype.lastIndexOf=function(l,c,d){return z(this,l,c,d,!1)};function Q(h,l,c,d){c=Number(c)||0;const w=h.length-c;d?(d=Number(d),d>w&&(d=w)):d=w;const B=l.length;d>B/2&&(d=B/2);let R;for(R=0;R<d;++R){const Z=parseInt(l.substr(R*2,2),16);if(je(Z))return R;h[c+R]=Z}return R}function q(h,l,c,d){return Me(ot(l,h.length-c),h,c,d)}function Le(h,l,c,d){return Me(en(l),h,c,d)}function Ue(h,l,c,d){return Me(fe(l),h,c,d)}function ht(h,l,c,d){return Me(L(l,h.length-c),h,c,d)}s.prototype.write=function(l,c,d,w){if(c===void 0)w="utf8",d=this.length,c=0;else if(d===void 0&&typeof c=="string")w=c,d=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(d)?(d=d>>>0,w===void 0&&(w="utf8")):(w=d,d=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const B=this.length-c;if((d===void 0||d>B)&&(d=B),l.length>0&&(d<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");w||(w="utf8");let R=!1;for(;;)switch(w){case"hex":return Q(this,l,c,d);case"utf8":case"utf-8":return q(this,l,c,d);case"ascii":case"latin1":case"binary":return Le(this,l,c,d);case"base64":return Ue(this,l,c,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ht(this,l,c,d);default:if(R)throw new TypeError("Unknown encoding: "+w);w=(""+w).toLowerCase(),R=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function We(h,l,c){return l===0&&c===h.length?e.fromByteArray(h):e.fromByteArray(h.slice(l,c))}function G(h,l,c){c=Math.min(h.length,c);const d=[];let w=l;for(;w<c;){const B=h[w];let R=null,Z=B>239?4:B>223?3:B>191?2:1;if(w+Z<=c){let he,pe,de,se;switch(Z){case 1:B<128&&(R=B);break;case 2:he=h[w+1],(he&192)===128&&(se=(B&31)<<6|he&63,se>127&&(R=se));break;case 3:he=h[w+1],pe=h[w+2],(he&192)===128&&(pe&192)===128&&(se=(B&15)<<12|(he&63)<<6|pe&63,se>2047&&(se<55296||se>57343)&&(R=se));break;case 4:he=h[w+1],pe=h[w+2],de=h[w+3],(he&192)===128&&(pe&192)===128&&(de&192)===128&&(se=(B&15)<<18|(he&63)<<12|(pe&63)<<6|de&63,se>65535&&se<1114112&&(R=se))}}R===null?(R=65533,Z=1):R>65535&&(R-=65536,d.push(R>>>10&1023|55296),R=56320|R&1023),d.push(R),w+=Z}return it(d)}const Ie=4096;function it(h){const l=h.length;if(l<=Ie)return String.fromCharCode.apply(String,h);let c="",d=0;for(;d<l;)c+=String.fromCharCode.apply(String,h.slice(d,d+=Ie));return c}function Fe(h,l,c){let d="";c=Math.min(h.length,c);for(let w=l;w<c;++w)d+=String.fromCharCode(h[w]&127);return d}function xe(h,l,c){let d="";c=Math.min(h.length,c);for(let w=l;w<c;++w)d+=String.fromCharCode(h[w]);return d}function x(h,l,c){const d=h.length;(!l||l<0)&&(l=0),(!c||c<0||c>d)&&(c=d);let w="";for(let B=l;B<c;++B)w+=$i[h[B]];return w}function N(h,l,c){const d=h.slice(l,c);let w="";for(let B=0;B<d.length-1;B+=2)w+=String.fromCharCode(d[B]+d[B+1]*256);return w}s.prototype.slice=function(l,c){const d=this.length;l=~~l,c=c===void 0?d:~~c,l<0?(l+=d,l<0&&(l=0)):l>d&&(l=d),c<0?(c+=d,c<0&&(c=0)):c>d&&(c=d),c<l&&(c=l);const w=this.subarray(l,c);return Object.setPrototypeOf(w,s.prototype),w};function X(h,l,c){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+l>c)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(l,c,d){l=l>>>0,c=c>>>0,d||X(l,c,this.length);let w=this[l],B=1,R=0;for(;++R<c&&(B*=256);)w+=this[l+R]*B;return w},s.prototype.readUintBE=s.prototype.readUIntBE=function(l,c,d){l=l>>>0,c=c>>>0,d||X(l,c,this.length);let w=this[l+--c],B=1;for(;c>0&&(B*=256);)w+=this[l+--c]*B;return w},s.prototype.readUint8=s.prototype.readUInt8=function(l,c){return l=l>>>0,c||X(l,1,this.length),this[l]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(l,c){return l=l>>>0,c||X(l,2,this.length),this[l]|this[l+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(l,c){return l=l>>>0,c||X(l,2,this.length),this[l]<<8|this[l+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(l,c){return l=l>>>0,c||X(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(l,c){return l=l>>>0,c||X(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},s.prototype.readBigUInt64LE=Qe(function(l){l=l>>>0,Y(l,"offset");const c=this[l],d=this[l+7];(c===void 0||d===void 0)&&ke(l,this.length-8);const w=c+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,B=this[++l]+this[++l]*2**8+this[++l]*2**16+d*2**24;return BigInt(w)+(BigInt(B)<<BigInt(32))}),s.prototype.readBigUInt64BE=Qe(function(l){l=l>>>0,Y(l,"offset");const c=this[l],d=this[l+7];(c===void 0||d===void 0)&&ke(l,this.length-8);const w=c*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],B=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+d;return(BigInt(w)<<BigInt(32))+BigInt(B)}),s.prototype.readIntLE=function(l,c,d){l=l>>>0,c=c>>>0,d||X(l,c,this.length);let w=this[l],B=1,R=0;for(;++R<c&&(B*=256);)w+=this[l+R]*B;return B*=128,w>=B&&(w-=Math.pow(2,8*c)),w},s.prototype.readIntBE=function(l,c,d){l=l>>>0,c=c>>>0,d||X(l,c,this.length);let w=c,B=1,R=this[l+--w];for(;w>0&&(B*=256);)R+=this[l+--w]*B;return B*=128,R>=B&&(R-=Math.pow(2,8*c)),R},s.prototype.readInt8=function(l,c){return l=l>>>0,c||X(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},s.prototype.readInt16LE=function(l,c){l=l>>>0,c||X(l,2,this.length);const d=this[l]|this[l+1]<<8;return d&32768?d|4294901760:d},s.prototype.readInt16BE=function(l,c){l=l>>>0,c||X(l,2,this.length);const d=this[l+1]|this[l]<<8;return d&32768?d|4294901760:d},s.prototype.readInt32LE=function(l,c){return l=l>>>0,c||X(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},s.prototype.readInt32BE=function(l,c){return l=l>>>0,c||X(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},s.prototype.readBigInt64LE=Qe(function(l){l=l>>>0,Y(l,"offset");const c=this[l],d=this[l+7];(c===void 0||d===void 0)&&ke(l,this.length-8);const w=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(d<<24);return(BigInt(w)<<BigInt(32))+BigInt(c+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)}),s.prototype.readBigInt64BE=Qe(function(l){l=l>>>0,Y(l,"offset");const c=this[l],d=this[l+7];(c===void 0||d===void 0)&&ke(l,this.length-8);const w=(c<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(w)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+d)}),s.prototype.readFloatLE=function(l,c){return l=l>>>0,c||X(l,4,this.length),n.read(this,l,!0,23,4)},s.prototype.readFloatBE=function(l,c){return l=l>>>0,c||X(l,4,this.length),n.read(this,l,!1,23,4)},s.prototype.readDoubleLE=function(l,c){return l=l>>>0,c||X(l,8,this.length),n.read(this,l,!0,52,8)},s.prototype.readDoubleBE=function(l,c){return l=l>>>0,c||X(l,8,this.length),n.read(this,l,!1,52,8)};function re(h,l,c,d,w,B){if(!s.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>w||l<B)throw new RangeError('"value" argument is out of bounds');if(c+d>h.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(l,c,d,w){if(l=+l,c=c>>>0,d=d>>>0,!w){const Z=Math.pow(2,8*d)-1;re(this,l,c,d,Z,0)}let B=1,R=0;for(this[c]=l&255;++R<d&&(B*=256);)this[c+R]=l/B&255;return c+d},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(l,c,d,w){if(l=+l,c=c>>>0,d=d>>>0,!w){const Z=Math.pow(2,8*d)-1;re(this,l,c,d,Z,0)}let B=d-1,R=1;for(this[c+B]=l&255;--B>=0&&(R*=256);)this[c+B]=l/R&255;return c+d},s.prototype.writeUint8=s.prototype.writeUInt8=function(l,c,d){return l=+l,c=c>>>0,d||re(this,l,c,1,255,0),this[c]=l&255,c+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(l,c,d){return l=+l,c=c>>>0,d||re(this,l,c,2,65535,0),this[c]=l&255,this[c+1]=l>>>8,c+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(l,c,d){return l=+l,c=c>>>0,d||re(this,l,c,2,65535,0),this[c]=l>>>8,this[c+1]=l&255,c+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(l,c,d){return l=+l,c=c>>>0,d||re(this,l,c,4,4294967295,0),this[c+3]=l>>>24,this[c+2]=l>>>16,this[c+1]=l>>>8,this[c]=l&255,c+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(l,c,d){return l=+l,c=c>>>0,d||re(this,l,c,4,4294967295,0),this[c]=l>>>24,this[c+1]=l>>>16,this[c+2]=l>>>8,this[c+3]=l&255,c+4};function Xe(h,l,c,d,w){Re(l,d,w,h,c,7);let B=Number(l&BigInt(4294967295));h[c++]=B,B=B>>8,h[c++]=B,B=B>>8,h[c++]=B,B=B>>8,h[c++]=B;let R=Number(l>>BigInt(32)&BigInt(4294967295));return h[c++]=R,R=R>>8,h[c++]=R,R=R>>8,h[c++]=R,R=R>>8,h[c++]=R,c}function dt(h,l,c,d,w){Re(l,d,w,h,c,7);let B=Number(l&BigInt(4294967295));h[c+7]=B,B=B>>8,h[c+6]=B,B=B>>8,h[c+5]=B,B=B>>8,h[c+4]=B;let R=Number(l>>BigInt(32)&BigInt(4294967295));return h[c+3]=R,R=R>>8,h[c+2]=R,R=R>>8,h[c+1]=R,R=R>>8,h[c]=R,c+8}s.prototype.writeBigUInt64LE=Qe(function(l,c=0){return Xe(this,l,c,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Qe(function(l,c=0){return dt(this,l,c,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(l,c,d,w){if(l=+l,c=c>>>0,!w){const he=Math.pow(2,8*d-1);re(this,l,c,d,he-1,-he)}let B=0,R=1,Z=0;for(this[c]=l&255;++B<d&&(R*=256);)l<0&&Z===0&&this[c+B-1]!==0&&(Z=1),this[c+B]=(l/R>>0)-Z&255;return c+d},s.prototype.writeIntBE=function(l,c,d,w){if(l=+l,c=c>>>0,!w){const he=Math.pow(2,8*d-1);re(this,l,c,d,he-1,-he)}let B=d-1,R=1,Z=0;for(this[c+B]=l&255;--B>=0&&(R*=256);)l<0&&Z===0&&this[c+B+1]!==0&&(Z=1),this[c+B]=(l/R>>0)-Z&255;return c+d},s.prototype.writeInt8=function(l,c,d){return l=+l,c=c>>>0,d||re(this,l,c,1,127,-128),l<0&&(l=255+l+1),this[c]=l&255,c+1},s.prototype.writeInt16LE=function(l,c,d){return l=+l,c=c>>>0,d||re(this,l,c,2,32767,-32768),this[c]=l&255,this[c+1]=l>>>8,c+2},s.prototype.writeInt16BE=function(l,c,d){return l=+l,c=c>>>0,d||re(this,l,c,2,32767,-32768),this[c]=l>>>8,this[c+1]=l&255,c+2},s.prototype.writeInt32LE=function(l,c,d){return l=+l,c=c>>>0,d||re(this,l,c,4,2147483647,-2147483648),this[c]=l&255,this[c+1]=l>>>8,this[c+2]=l>>>16,this[c+3]=l>>>24,c+4},s.prototype.writeInt32BE=function(l,c,d){return l=+l,c=c>>>0,d||re(this,l,c,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[c]=l>>>24,this[c+1]=l>>>16,this[c+2]=l>>>8,this[c+3]=l&255,c+4},s.prototype.writeBigInt64LE=Qe(function(l,c=0){return Xe(this,l,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Qe(function(l,c=0){return dt(this,l,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function mt(h,l,c,d,w,B){if(c+d>h.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function gt(h,l,c,d,w){return l=+l,c=c>>>0,w||mt(h,l,c,4),n.write(h,l,c,d,23,4),c+4}s.prototype.writeFloatLE=function(l,c,d){return gt(this,l,c,!0,d)},s.prototype.writeFloatBE=function(l,c,d){return gt(this,l,c,!1,d)};function bt(h,l,c,d,w){return l=+l,c=c>>>0,w||mt(h,l,c,8),n.write(h,l,c,d,52,8),c+8}s.prototype.writeDoubleLE=function(l,c,d){return bt(this,l,c,!0,d)},s.prototype.writeDoubleBE=function(l,c,d){return bt(this,l,c,!1,d)},s.prototype.copy=function(l,c,d,w){if(!s.isBuffer(l))throw new TypeError("argument should be a Buffer");if(d||(d=0),!w&&w!==0&&(w=this.length),c>=l.length&&(c=l.length),c||(c=0),w>0&&w<d&&(w=d),w===d||l.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("sourceEnd out of bounds");w>this.length&&(w=this.length),l.length-c<w-d&&(w=l.length-c+d);const B=w-d;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,d,w):Uint8Array.prototype.set.call(l,this.subarray(d,w),c),B},s.prototype.fill=function(l,c,d,w){if(typeof l=="string"){if(typeof c=="string"?(w=c,c=0,d=this.length):typeof d=="string"&&(w=d,d=this.length),w!==void 0&&typeof w!="string")throw new TypeError("encoding must be a string");if(typeof w=="string"&&!s.isEncoding(w))throw new TypeError("Unknown encoding: "+w);if(l.length===1){const R=l.charCodeAt(0);(w==="utf8"&&R<128||w==="latin1")&&(l=R)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(c<0||this.length<c||this.length<d)throw new RangeError("Out of range index");if(d<=c)return this;c=c>>>0,d=d===void 0?this.length:d>>>0,l||(l=0);let B;if(typeof l=="number")for(B=c;B<d;++B)this[B]=l;else{const R=s.isBuffer(l)?l:s.from(l,w),Z=R.length;if(Z===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(B=0;B<d-c;++B)this[B+c]=R[B%Z]}return this};const Ve={};function ut(h,l,c){Ve[h]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(w){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:w,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}ut("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ut("ERR_INVALID_ARG_TYPE",function(h,l){return`The "${h}" argument must be of type number. Received type ${typeof l}`},TypeError),ut("ERR_OUT_OF_RANGE",function(h,l,c){let d=`The value of "${h}" is out of range.`,w=c;return Number.isInteger(c)&&Math.abs(c)>2**32?w=ce(String(c)):typeof c=="bigint"&&(w=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(w=ce(w)),w+="n"),d+=` It must be ${l}. Received ${w}`,d},RangeError);function ce(h){let l="",c=h.length;const d=h[0]==="-"?1:0;for(;c>=d+4;c-=3)l=`_${h.slice(c-3,c)}${l}`;return`${h.slice(0,c)}${l}`}function U(h,l,c){Y(l,"offset"),(h[l]===void 0||h[l+c]===void 0)&&ke(l,h.length-(c+1))}function Re(h,l,c,d,w,B){if(h>c||h<l){const R=typeof l=="bigint"?"n":"";let Z;throw B>3?l===0||l===BigInt(0)?Z=`>= 0${R} and < 2${R} ** ${(B+1)*8}${R}`:Z=`>= -(2${R} ** ${(B+1)*8-1}${R}) and < 2 ** ${(B+1)*8-1}${R}`:Z=`>= ${l}${R} and <= ${c}${R}`,new Ve.ERR_OUT_OF_RANGE("value",Z,h)}U(d,w,B)}function Y(h,l){if(typeof h!="number")throw new Ve.ERR_INVALID_ARG_TYPE(l,"number",h)}function ke(h,l,c){throw Math.floor(h)!==h?(Y(h,c),new Ve.ERR_OUT_OF_RANGE(c||"offset","an integer",h)):l<0?new Ve.ERR_BUFFER_OUT_OF_BOUNDS:new Ve.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${l}`,h)}const ct=/[^+/0-9A-Za-z-_]/g;function _t(h){if(h=h.split("=")[0],h=h.trim().replace(ct,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function ot(h,l){l=l||1/0;let c;const d=h.length;let w=null;const B=[];for(let R=0;R<d;++R){if(c=h.charCodeAt(R),c>55295&&c<57344){if(!w){if(c>56319){(l-=3)>-1&&B.push(239,191,189);continue}else if(R+1===d){(l-=3)>-1&&B.push(239,191,189);continue}w=c;continue}if(c<56320){(l-=3)>-1&&B.push(239,191,189),w=c;continue}c=(w-55296<<10|c-56320)+65536}else w&&(l-=3)>-1&&B.push(239,191,189);if(w=null,c<128){if((l-=1)<0)break;B.push(c)}else if(c<2048){if((l-=2)<0)break;B.push(c>>6|192,c&63|128)}else if(c<65536){if((l-=3)<0)break;B.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((l-=4)<0)break;B.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return B}function en(h){const l=[];for(let c=0;c<h.length;++c)l.push(h.charCodeAt(c)&255);return l}function L(h,l){let c,d,w;const B=[];for(let R=0;R<h.length&&!((l-=2)<0);++R)c=h.charCodeAt(R),d=c>>8,w=c%256,B.push(w),B.push(d);return B}function fe(h){return e.toByteArray(_t(h))}function Me(h,l,c,d){let w;for(w=0;w<d&&!(w+c>=l.length||w>=h.length);++w)l[w+c]=h[w];return w}function ye(h,l){return h instanceof l||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===l.name}function je(h){return h!==h}const $i=function(){const h="0123456789abcdef",l=new Array(256);for(let c=0;c<16;++c){const d=c*16;for(let w=0;w<16;++w)l[d+w]=h[c]+h[w]}return l}();function Qe(h){return typeof BigInt>"u"?Bs:h}function Bs(){throw new Error("BigInt not supported")}})(Ts);globalThis.Buffer=Ts.Buffer;function Hp(t,e){return`data:${e};base64,${t}`}var Xo,Qo;const O=(Qo=(Xo=globalThis==null?void 0:globalThis.require)==null?void 0:Xo.call(globalThis,"electron"))==null?void 0:Qo.clipboard;var on,Zo;(Zo=(on=O==null?void 0:O.availableFormats)==null?void 0:on.bind)==null||Zo.call(on,O);var rn,er;(er=(rn=O==null?void 0:O.clear)==null?void 0:rn.bind)==null||er.call(rn,O);var sn,tr;(tr=(sn=O==null?void 0:O.has)==null?void 0:sn.bind)==null||tr.call(sn,O);var an,nr;(nr=(an=O==null?void 0:O.read)==null?void 0:an.bind)==null||nr.call(an,O);var ln,ir;(ir=(ln=O==null?void 0:O.readBookmark)==null?void 0:ln.bind)==null||ir.call(ln,O);var un,or;(or=(un=O==null?void 0:O.readBuffer)==null?void 0:un.bind)==null||or.call(un,O);var cn,rr;(rr=(cn=O==null?void 0:O.readFindText)==null?void 0:cn.bind)==null||rr.call(cn,O);var fn,sr;(sr=(fn=O==null?void 0:O.readHTML)==null?void 0:fn.bind)==null||sr.call(fn,O);var pn,ar;(ar=(pn=O==null?void 0:O.readImage)==null?void 0:pn.bind)==null||ar.call(pn,O);var hn,lr;(lr=(hn=O==null?void 0:O.readRTF)==null?void 0:hn.bind)==null||lr.call(hn,O);var dn,ur;(ur=(dn=O==null?void 0:O.readText)==null?void 0:dn.bind)==null||ur.call(dn,O);var mn,cr;(cr=(mn=O==null?void 0:O.write)==null?void 0:mn.bind)==null||cr.call(mn,O);var gn,fr;(fr=(gn=O==null?void 0:O.writeBookmark)==null?void 0:gn.bind)==null||fr.call(gn,O);var bn,pr;(pr=(bn=O==null?void 0:O.writeBuffer)==null?void 0:bn.bind)==null||pr.call(bn,O);var _n,hr;(hr=(_n=O==null?void 0:O.writeFindText)==null?void 0:_n.bind)==null||hr.call(_n,O);var yn,dr;(dr=(yn=O==null?void 0:O.writeHTML)==null?void 0:yn.bind)==null||dr.call(yn,O);var wn,mr;(mr=(wn=O==null?void 0:O.writeImage)==null?void 0:wn.bind)==null||mr.call(wn,O);var kn,gr;(gr=(kn=O==null?void 0:O.writeRTF)==null?void 0:kn.bind)==null||gr.call(kn,O);var Tn,br;(br=(Tn=O==null?void 0:O.writeText)==null?void 0:Tn.bind)==null||br.call(Tn,O);var _r;const _e=(_r=globalThis==null?void 0:globalThis.require)==null?void 0:_r.call(globalThis,"electron");_e==null||_e.clipboard;_e==null||_e.contextBridge;_e==null||_e.crashReporter;_e==null||_e.ipcRenderer;const Kp=_e==null?void 0:_e.nativeImage;_e==null||_e.shell;_e==null||_e.webFrame;function xp(t){let e,n,i,o,r,a,s,u,f,p,m,_,b,g,y,k,W,S,ee;return n=new kt({props:{icon:"#iconLeft",ariaLabel:t[15].webview.goForwardOnePage,disabled:!t[5],tooltipsDirection:Ze.se}}),n.$on("click",t[16]),o=new kt({props:{icon:"#iconRight",ariaLabel:t[15].webview.goBackOnePage,disabled:!t[6],tooltipsDirection:Ze.se}}),o.$on("click",t[17]),a=new kt({props:{icon:t[7]?"#iconClose":"#iconRefresh",ariaLabel:t[7]?t[15].webview.stopLoadingThisPage:t[15].webview.reloadCurrentPage,tooltipsDirection:Ze.se}}),a.$on("click",t[18]),p=new kt({props:{icon:"#iconLanguage",ariaLabel:t[15].webview.openWithDefaultProgram,tooltipsDirection:Ze.sw}}),p.$on("click",t[20]),_=new kt({props:{icon:"#iconOpenWindow",ariaLabel:t[15].webview.openWithNewWindow,tooltipsDirection:Ze.sw}}),_.$on("click",t[21]),g=new kt({props:{icon:t[4]?"#iconFullscreenExit":"#iconFullscreen",ariaLabel:t[4]?t[15].webview.exitFullscreen:t[15].webview.enterFullscreen,active:t[4],tooltipsDirection:Ze.sw}}),g.$on("click",t[22]),k=new kt({props:{icon:"#iconBug",ariaLabel:t[9]?t[15].webview.closeDevTools:t[15].webview.openDevTools,active:t[9],tooltipsDirection:Ze.sw}}),k.$on("click",t[23]),{c(){e=K("div"),P(n.$$.fragment),i=V(),P(o.$$.fragment),r=V(),P(a.$$.fragment),s=V(),u=K("input"),f=V(),P(p.$$.fragment),m=V(),P(_.$$.fragment),b=V(),P(g.$$.fragment),y=V(),P(k.$$.fragment),$(u,"class","b3-text-field fn__flex-1 address-field svelte-1y82r3i"),$(u,"type","url"),$(e,"slot","breadcrumb"),$(e,"class","protyle-breadcrumb svelte-1y82r3i")},m(C,J){D(C,e,J),I(n,e,null),H(e,i),I(o,e,null),H(e,r),I(a,e,null),H(e,s),H(e,u),Pe(u,t[8]),H(e,f),I(p,e,null),H(e,m),I(_,e,null),H(e,b),I(g,e,null),H(e,y),I(k,e,null),W=!0,S||(ee=[ue(u,"change",t[19]),ue(u,"input",t[30])],S=!0)},p(C,J){const z={};J[0]&32&&(z.disabled=!C[5]),n.$set(z);const ne={};J[0]&64&&(ne.disabled=!C[6]),o.$set(ne);const Q={};J[0]&128&&(Q.icon=C[7]?"#iconClose":"#iconRefresh"),J[0]&128&&(Q.ariaLabel=C[7]?C[15].webview.stopLoadingThisPage:C[15].webview.reloadCurrentPage),a.$set(Q),J[0]&256&&u.value!==C[8]&&Pe(u,C[8]);const q={};J[0]&16&&(q.icon=C[4]?"#iconFullscreenExit":"#iconFullscreen"),J[0]&16&&(q.ariaLabel=C[4]?C[15].webview.exitFullscreen:C[15].webview.enterFullscreen),J[0]&16&&(q.active=C[4]),g.$set(q);const Le={};J[0]&512&&(Le.ariaLabel=C[9]?C[15].webview.closeDevTools:C[15].webview.openDevTools),J[0]&512&&(Le.active=C[9]),k.$set(Le)},i(C){W||(T(n.$$.fragment,C),T(o.$$.fragment,C),T(a.$$.fragment,C),T(p.$$.fragment,C),T(_.$$.fragment,C),T(g.$$.fragment,C),T(k.$$.fragment,C),W=!0)},o(C){E(n.$$.fragment,C),E(o.$$.fragment,C),E(a.$$.fragment,C),E(p.$$.fragment,C),E(_.$$.fragment,C),E(g.$$.fragment,C),E(k.$$.fragment,C),W=!1},d(C){C&&F(e),M(n),M(o),M(a),M(p),M(_),M(g),M(k),S=!1,Ce(ee)}}}function Vp(t){let e,n;return{c(){e=K("iframe"),Cn(e.src,n=t[0])||$(e,"src",n),$(e,"title",t[1]),$(e,"class","fn__flex-1"),e.allowFullscreen=!0,nt(e,"background",t[3])},m(i,o){D(i,e,o),t[29](e)},p(i,o){o[0]&1&&!Cn(e.src,n=i[0])&&$(e,"src",n),o[0]&2&&$(e,"title",i[1]),o[0]&8&&nt(e,"background",i[3])},d(i){i&&F(e),t[29](null)}}}function zp(t){let e,n;return{c(){e=K("webview"),Cn(e.src,n=t[0])||$(e,"src",n),$(e,"title",t[1]),$(e,"useragent",t[2]),$(e,"class","webview fn__flex-1 svelte-1y82r3i"),$(e,"allowpopups",""),j(e,"pointer-events-disable",t[12]),nt(e,"background",t[3])},m(i,o){D(i,e,o),t[28](e)},p(i,o){o[0]&1&&!Cn(e.src,n=i[0])&&$(e,"src",n),o[0]&2&&$(e,"title",i[1]),o[0]&4&&$(e,"useragent",i[2]),o[0]&4096&&j(e,"pointer-events-disable",i[12]),o[0]&8&&nt(e,"background",i[3])},d(i){i&&F(e),t[28](null)}}}function Yo(t){let e,n,i,o,r,a;return{c(){e=K("div"),n=K("span"),i=Ke(t[14]),$(e,"class","webview-status tooltip svelte-1y82r3i")},m(s,u){D(s,e,u),H(e,n),H(n,i),a=!0},p(s,u){(!a||u[0]&16384)&&Bt(i,s[14])},i(s){a||(s&&At(()=>{a&&(r&&r.end(1),o=xu(e,Po,{delay:0,duration:125}),o.start())}),a=!0)},o(s){o&&o.invalidate(),s&&(r=Vu(e,Po,{delay:500,duration:250})),a=!1},d(s){s&&F(e),s&&r&&r.end()}}}function Gp(t){let e,n,i,o;function r(f,p){return ks?zp:Vp}let s=r()(t),u=t[13]&&Yo(t);return{c(){e=K("div"),s.c(),n=V(),u&&u.c(),$(e,"slot","content"),$(e,"class","content fn__flex fn__flex-1 svelte-1y82r3i")},m(f,p){D(f,e,p),s.m(e,null),H(e,n),u&&u.m(e,null),i||(o=[ue(e,"mouseenter",Zi(t[24]),!0),ue(e,"mouseleave",Zi(t[25]),!0)],i=!0)},p(f,p){s.p(f,p),f[13]?u?(u.p(f,p),p[0]&8192&&T(u,1)):(u=Yo(f),u.c(),T(u,1),u.m(e,null)):u&&(ge(),E(u,1,1,()=>{u=null}),be())},d(f){f&&F(e),s.d(),u&&u.d(),i=!1,Ce(o)}}}function Yp(t){let e,n;return e=new Ep({props:{fullscreen:t[4],$$slots:{content:[Gp],breadcrumb:[xp]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(i,o){I(e,i,o),n=!0},p(i,o){const r={};o[0]&16&&(r.fullscreen=i[4]),o[0]&32767|o[1]&4&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){E(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Jp(t,e,n){let{src:i}=e,{tab:o}=e,{plugin:r}=e,{title:a=""}=e,{useragent:s=r.useragent}=e,{background:u=r.background}=e;const f=r.i18n;let p,m=!1,_=!1,b=!1,g=!1,y=globalThis.decodeURIComponent(i),k=!1,W,S,ee=!1,C=!1,J="";function z(N){var X;if(ks)try{(X=S==null?void 0:S.loadURL)==null||X.call(S,N,{userAgent:s})}catch{n(0,i=N)}else n(0,i=N)}function ne(){var N;_&&((N=S==null?void 0:S.goBack)==null||N.call(S))}function Q(){var N;_&&((N=S==null?void 0:S.goBack)==null||N.call(S))}function q(){var N,X;g?(N=S==null?void 0:S.stop)==null||N.call(S):(X=S==null?void 0:S.reload)==null||X.call(S)}function Le(N){if(y)try{var X;try{X=new URL(y).href}catch{switch(!0){case y.startsWith("//"):{X=new URL(`https:${y}`).href;break}case os(y,!1):{X=new URL(`${globalThis.document.baseURI}${rs(y,"/")}`).href;break}default:{X=new URL(`https://${y}`).href;break}}}z(X)}catch(re){r.logger.warn(re),r.siyuan.showMessage(`${r.name}:
URL <code class="fn__code">${y}</code> ${f.message.nonStandardURL}
`,void 0,"error")}}function Ue(){global.open(o.data.href,"_blank")}function ht(N){r.openWindow(o.data.href,{x:N.screenX,y:N.screenY,title:o.data.title})}function We(){n(4,m=!m)}function G(){var N,X,re;S&&((N=S==null?void 0:S.isDevToolsOpened)!=null&&N.call(S)?(X=S==null?void 0:S.closeDevTools)==null||X.call(S):(re=S==null?void 0:S.openDevTools)==null||re.call(S))}Uu(()=>{var N,X,re,Xe,dt,mt,gt,bt,Ve,ut;(N=S==null?void 0:S.addEventListener)==null||N.call(S,"load-commit",ce=>{var U,Re;ce.isMainFrame&&(n(8,y=globalThis.decodeURIComponent(ce.url)),n(26,o.data.href=ce.url,o)),n(5,_=(U=S==null?void 0:S.canGoBack)==null?void 0:U.call(S)),n(6,b=(Re=S==null?void 0:S.canGoForward)==null?void 0:Re.call(S))}),(X=S==null?void 0:S.addEventListener)==null||X.call(S,"page-title-updated",ce=>{n(1,a=ce.title),n(26,o.data.title=a,o),o.tab.updateTitle(a),n(26,o.tab.headElement.ariaLabel=a,o)}),(re=S==null?void 0:S.addEventListener)==null||re.call(S,"page-favicon-updated",ce=>{var Re;const U=ce.favicons;if((Re=o.tab.headElement.querySelector(".item__graphic"))==null||Re.remove(),U.length>0){const Y=U[0],ke=o.tab.headElement.querySelector(".item__icon");if(o.tab.docIcon!==Y||!ke){n(26,o.tab.docIcon=Y,o);const ct=`<img src="${Y}" />`;ke?ke.innerHTML=ct:o.tab.headElement.insertAdjacentHTML("afterbegin",`<span class="item__icon">${ct}</span>`)}}else o.tab.setDocIcon("🌐".codePointAt(0).toString(16))}),(Xe=S==null?void 0:S.addEventListener)==null||Xe.call(S,"did-start-loading",ce=>{n(7,g=!0)}),(dt=S==null?void 0:S.addEventListener)==null||dt.call(S,"did-stop-loading",ce=>{n(7,g=!1)}),(mt=S==null?void 0:S.addEventListener)==null||mt.call(S,"devtools-open-url",ce=>{r.openWebviewTab(ce.url)}),(gt=S==null?void 0:S.addEventListener)==null||gt.call(S,"devtools-opened",ce=>n(9,k=!0)),(bt=S==null?void 0:S.addEventListener)==null||bt.call(S,"devtools-closed",ce=>n(9,k=!1)),(Ve=S==null?void 0:S.addEventListener)==null||Ve.call(S,"update-target-url",ce=>{ce.url?(n(14,J=globalThis.decodeURIComponent(ce.url)),C||n(13,C=!0)):n(13,C=!1)}),(ut=S==null?void 0:S.addEventListener)==null||ut.call(S,"context-menu",ce=>{r.logger.debug(ce);const{params:U}=ce,Re=U.titleText||U.linkText||U.altText||U.suggestedFilename,Y=[];function ke(L,fe,Me,ye=!0){const je=[];return ye&&(je.push({icon:"icon-webview-click",label:f.menu.openTabCurrent.label,action:Me,click:()=>z(L)}),je.push({type:"separator"})),je.push({icon:"iconAdd",label:f.menu.openTab.label,action:Me,click:()=>r.openWebviewTab(L,fe)}),je.push({icon:"iconMin",label:f.menu.openTabBackground.label,action:Me,click:()=>r.openWebviewTab(L,fe,void 0,{keepCursor:!0})}),je.push({icon:"iconLayoutRight",label:f.menu.openTabRight.label,action:Me,click:()=>r.openWebviewTab(L,fe,void 0,{position:"right"})}),je.push({icon:"iconLayoutBottom",label:f.menu.openTabBottom.label,action:Me,click:()=>r.openWebviewTab(L,fe,void 0,{position:"bottom"})}),je.push({type:"separator"}),je.push({icon:"iconOpenWindow",label:f.menu.openByNewWindow.label,action:Me,click:($i,Qe)=>(r.openWebpageWindow(L,fe,{screenX:Qe.screenX,screenY:Qe.screenY}),null)}),je}function ct(L){const fe=[];return L.linkURL&&fe.push({icon:"iconLink",label:f.menu.copyLinkAddress.label,action:"iconLink",click:()=>O.writeText(L.linkURL)}),L.srcURL&&fe.push({icon:"iconLink",label:f.menu.copyResourceAddress.label,action:"iconCloud",click:()=>O.writeText(L.srcURL)}),L.frameURL&&fe.push({icon:"iconLink",label:f.menu.copyFrameAddress.label,action:"iconLayout",click:()=>O.writeText(L.frameURL)}),L.pageURL&&fe.push({icon:"iconLink",label:f.menu.copyPageAddress.label,action:"iconFile",click:()=>O.writeText(L.pageURL)}),fe.push({type:"separator"}),L.titleText&&fe.push({icon:"icon-webview-title",label:f.menu.copyTitle.label,click:()=>O.writeText(L.titleText)}),L.altText&&fe.push({icon:"iconInfo",label:f.menu.copyAlt.label,click:()=>O.writeText(L.altText)}),L.linkText&&fe.push({icon:"icon-webview-anchor",label:f.menu.copyText.label,click:()=>O.writeText(L.linkText)}),L.suggestedFilename&&fe.push({icon:"iconN",label:f.menu.copyFileName.label,click:()=>O.writeText(L.suggestedFilename)}),fe}function _t(L,fe,Me){L=L||"🔗";const ye=[];return ye.push("["),ye.push(L.replaceAll("]","\\]").replaceAll(`
`,"")),ye.push("]("),ye.push(fe),Me&&ye.push(` "${Me.replaceAll(`
`,"").replaceAll("&","&amp;").replaceAll('"',"&quot;")}"`),ye.push(")"),ye.join("")}function ot(...L){return L.filter(fe=>!!fe)}switch(U.selectionText&&(Y.push({icon:"icon-webview-select",label:f.menu.copySelectionText.label,click:()=>O.writeText(U.selectionText)}),Y.push({type:"separator"})),U.mediaType){case"none":case"file":case"canvas":case"plugin":default:{switch(!0){case!!U.linkURL:{Y.push(...ke(U.linkURL,Re,"iconLink")),Y.push({type:"separator"}),Y.push({icon:"iconLink",label:f.menu.copyLink.label,accelerator:Ct("<a>"),click:()=>{const L=globalThis.document.createElement("a");L.href=U.linkURL,L.title=U.titleText,L.innerText=U.linkText,O.writeHTML(L.outerHTML)}}),Y.push({icon:"iconHTML5",label:f.menu.copyLink.label,accelerator:"HTML",click:()=>{const L=globalThis.document.createElement("a");L.href=U.linkURL,L.title=U.titleText,L.innerText=U.linkText,O.writeText(L.outerHTML)}}),Y.push({icon:"iconMarkdown",label:f.menu.copyLink.label,accelerator:"Markdown",click:()=>{const L=ot(U.linkText,U.altText,U.suggestedFilename,U.titleText);O.writeText(_t(L.shift(),U.linkURL,L.pop()))}});break}case!!U.frameURL:{Y.push(...ke(U.frameURL,Re,"iconLayout")),Y.push({type:"separator"}),Y.push({icon:"iconLayout",label:f.menu.copyFrame.label,accelerator:Ct("<iframe>"),click:()=>{const L=globalThis.document.createElement("iframe");L.src=U.frameURL,L.title=U.titleText,O.writeHTML(L.outerHTML)}}),Y.push({icon:"iconHTML5",label:f.menu.copyFrame.label,accelerator:"HTML",click:()=>{const L=globalThis.document.createElement("iframe");L.src=U.frameURL,L.title=U.titleText,O.writeText(L.outerHTML)}}),Y.push({icon:"iconMarkdown",label:f.menu.copyFrame.label,accelerator:"Markdown",click:()=>{const L=ot(U.linkText,U.altText,U.suggestedFilename,U.titleText);O.writeText(_t(L.shift(),U.frameURL,L.pop()))}});break}default:{Y.push(...ke(U.pageURL,Re,"iconFile",!1)),Y.push({type:"separator"}),Y.push({icon:"iconFile",label:f.menu.copyPage.label,accelerator:Ct("<a>"),click:()=>{const L=globalThis.document.createElement("a");L.href=U.pageURL,L.title=U.titleText,O.writeHTML(L.outerHTML)}}),Y.push({icon:"iconHTML5",label:f.menu.copyPage.label,accelerator:"HTML",click:()=>{const L=globalThis.document.createElement("a");L.href=U.pageURL,L.title=U.titleText,O.writeText(L.outerHTML)}}),Y.push({icon:"iconMarkdown",label:f.menu.copyPage.label,accelerator:"Markdown",click:()=>{const L=ot(U.linkText,U.altText,U.suggestedFilename,U.titleText);O.writeText(_t(L.shift(),U.pageURL,L.pop()))}});break}}break}case"image":{Y.push(...ke(U.linkURL,Re,"iconImage")),Y.push({type:"separator"}),Y.push({icon:"iconImage",label:f.menu.copyImage.label,click:()=>(setTimeout(async()=>{try{const L=await r.client.forwardProxy({headers:[],method:"GET",responseEncoding:"base64",timeout:6e4,url:U.srcURL});if(200<=L.data.status&&L.data.status<300){const fe=Hp(L.data.body,L.data.contentType),Me=Kp.createFromDataURL(fe);O.writeImage(Me)}}catch(L){r.logger.warn(L)}finally{p==null||p.close()}}),!0)}),Y.push({icon:"iconImage",label:f.menu.copyImage.label,accelerator:Ct("<img>"),click:()=>{const L=globalThis.document.createElement("img");L.src=U.srcURL,L.title=U.titleText,L.alt=U.altText,O.writeHTML(L.outerHTML)}}),Y.push({icon:"iconHTML5",label:f.menu.copyImage.label,accelerator:"HTML",click:()=>{const L=globalThis.document.createElement("img");L.src=U.srcURL,L.title=U.titleText,L.alt=U.altText,O.writeText(L.outerHTML)}}),Y.push({icon:"iconMarkdown",label:f.menu.copyImage.label,accelerator:"Markdown",click:()=>{const L=ot(U.altText,U.linkText,U.suggestedFilename,U.titleText);O.writeText(_t(L.shift(),U.srcURL,L.pop()))}});break}case"audio":{Y.push(...ke(U.srcURL,Re,"iconRecord")),Y.push({type:"separator"}),Y.push({icon:"iconRecord",label:f.menu.copyAudio.label,accelerator:Ct("<audio>"),click:()=>{const L=globalThis.document.createElement("audio");L.src=U.srcURL,L.title=U.titleText,O.writeHTML(L.outerHTML)}}),Y.push({icon:"iconHTML5",label:f.menu.copyAudio.label,accelerator:"HTML",click:()=>{const L=globalThis.document.createElement("audio");L.src=U.srcURL,L.title=U.titleText,O.writeText(L.outerHTML)}}),Y.push({icon:"iconMarkdown",label:f.menu.copyAudio.label,accelerator:"Markdown",click:()=>{const L=ot(U.altText,U.linkText,U.suggestedFilename,U.titleText);O.writeText(_t(L.shift(),U.srcURL,L.pop()))}});break}case"video":{Y.push(...ke(U.srcURL,Re,"iconVideo")),Y.push({type:"separator"}),Y.push({icon:"iconVideo",label:f.menu.copyVideo.label,accelerator:Ct("<video>"),click:()=>{const L=globalThis.document.createElement("video");L.src=U.srcURL,L.title=U.titleText,O.writeHTML(L.outerHTML)}}),Y.push({icon:"iconHTML5",label:f.menu.copyVideo.label,accelerator:"HTML",click:()=>{const L=globalThis.document.createElement("video");L.src=U.srcURL,L.title=U.titleText,O.writeText(L.outerHTML)}}),Y.push({icon:"iconMarkdown",label:f.menu.copyVideo.label,accelerator:"Markdown",click:()=>{const L=ot(U.altText,U.linkText,U.suggestedFilename,U.titleText);O.writeText(_t(L.shift(),U.srcURL,L.pop()))}});break}}Y.push({type:"separator"}),Y.push(...ct(U));const en=It(Y);en.length>0&&(p=new r.siyuan.Menu,en.forEach(L=>p.addItem(L)),p.open({x:U.x,y:U.y}))})});function Ie(N){n(12,ee=N.button!==0),p==null||p.close()}function it(N){n(12,ee=!0)}function Fe(N){Jt[N?"unshift":"push"](()=>{S=N,n(11,S)})}function xe(N){Jt[N?"unshift":"push"](()=>{W=N,n(10,W)})}function x(){y=this.value,n(8,y)}return t.$$set=N=>{"src"in N&&n(0,i=N.src),"tab"in N&&n(26,o=N.tab),"plugin"in N&&n(27,r=N.plugin),"title"in N&&n(1,a=N.title),"useragent"in N&&n(2,s=N.useragent),"background"in N&&n(3,u=N.background)},[i,a,s,u,m,_,b,g,y,k,W,S,ee,C,J,f,ne,Q,q,Le,Ue,ht,We,G,Ie,it,o,r,Fe,xe,x]}class Xp extends Ne{constructor(e){super(),Oe(this,e,Jp,Yp,$e,{src:0,tab:26,plugin:27,title:1,useragent:2,background:3},null,[-1,-1])}}const Jo={general:{useragent:"",background:"transparent"},tab:{enable:!0,open:{mouse:{type:"click",button:st.Left,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},targets:{hyperlink:{editor:{enable:!0},other:{enable:!0}}},protocols:{https:{enable:!0,prefix:"https://"},http:{enable:!0,prefix:"http://"},file:{enable:!0,prefix:"file://"},ftps:{enable:!0,prefix:"ftps://"},ftp:{enable:!0,prefix:"ftp://"},"//":{enable:!0,prefix:"//"},"#":{enable:!1,prefix:"#"}}}},window:{enable:!0,open:{mouse:{type:"mousedown",button:st.Middle,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},targets:{hyperlink:{editor:{enable:!0},other:{enable:!1}}},protocols:{siyuan:{enable:!0,prefix:"siyuan://"},https:{enable:!0,prefix:"https://"},http:{enable:!0,prefix:"http://"},file:{enable:!0,prefix:"file://"},ftps:{enable:!0,prefix:"ftps://"},ftp:{enable:!0,prefix:"ftp://"},"//":{enable:!0,prefix:"//"}}},params:{width:800,height:600,center:!1,frame:!0,alwaysOnTop:!0,autoHideMenuBar:!0,enableMenuBar:!0},siyuan:{enable:!0,focus:!1,editorType:Ge.mobile}}},Tt=class Tt extends qe.Plugin{constructor(n){super(n);le(this,"siyuan",qe);le(this,"logger");le(this,"client");le(this,"TOP_BAR_MENU_ID");le(this,"SETTINGS_DIALOG_ID");le(this,"WEBVIEW_TAB_ID");le(this,"webview_tab");le(this,"tab_bar_item");le(this,"config");le(this,"blockRefMenuEventListener",n=>{const o=n.detail.element.dataset.id,r=[];r.push({icon:"iconOpenWindow",label:this.i18n.menu.openEditor.label,click:()=>this.openSiyuanWindowByID(o,!1)}),r.push({icon:"iconFocus",label:this.i18n.menu.openFocusedEditor.label,click:()=>this.openSiyuanWindowByID(o,!0)}),n.detail.menu.addItem({icon:"icon-webview-chromium",label:this.i18n.displayName,submenu:It(r)})});le(this,"linkMenuEventListener",n=>{const i=[],o=n.detail.element,r=this.parseHyperlinkMeta(o,this.config.tab.open.targets);switch(!0){case r.href.startsWith("siyuan:"):{const a=new URL(r.href),s=Xi(a);i.push(...this.buildOpenBlockSubmenu(s.id,s.focus));break}case os(r.href):{const a=r.href.startsWith("/")?`${globalThis.location.origin}${r.href}`:`${globalThis.document.baseURI}${r.href}`,s=gu(r.href);i.push(...this.buildOpenLinkSubmenu(a,r.title,s));break}default:{i.push(...this.buildOpenLinkSubmenu(r.href,r.title,"icon-webview-chromium"));break}}n.detail.menu.addItem({icon:"icon-webview-chromium",label:this.i18n.displayName,submenu:It(i)})});le(this,"imageMenuEventListener",n=>{const i=n.detail.element.querySelector("img");if(i){const o=this.buildOpenLinkSubmenu(i.src,i.title||i.alt,"iconImage");n.detail.menu.addItem({icon:"icon-webview-chromium",label:this.i18n.displayName,submenu:It(o)})}});le(this,"fileAnnotationRefMenuEventListener",n=>{try{const i=n.detail.element,o=i.dataset.id.replace(/\/\d{14}-[0-9a-z]{7}$/,""),r=cu(o),a=this.buildOpenLinkSubmenu(r.href,i.innerText,"iconPDF");n.detail.menu.addItem({icon:"icon-webview-chromium",label:this.i18n.displayName,submenu:It(a)})}catch(i){this.logger.warn(i)}});le(this,"blockMenuEventListener",n=>{const i=n.detail,o=yu(n.detail);if(o){const a=[];if(!o.isDocumentBlock&&!o.isMultiBlock){var r;switch(o.type){case Nt.NodeType.NodeAudio:r=o.element.querySelector("audio");break;case Nt.NodeType.NodeVideo:r=o.element.querySelector("video");break;case Nt.NodeType.NodeIFrame:case Nt.NodeType.NodeWidget:r=o.element.querySelector("iframe");break}if(r){const s=new URL(r.src);o.type===Nt.NodeType.NodeWidget&&s.searchParams.set("id",o.id),a.push({icon:"iconImage",label:this.i18n.menu.openResource.label,submenu:this.buildOpenLinkSubmenu(s.href,o.type,_u(o.type))},{type:"separator"})}}a.push(...this.buildOpenBlockSubmenu(o.id,!1)),i.menu.addItem({icon:"icon-webview-chromium",label:this.i18n.displayName,submenu:It(a)})}});le(this,"openTabEventListener",n=>{try{if(!this.config.tab.enable||!Yi(n,this.config.tab.open.mouse))return;const i=this.parseHyperlinkMeta(n.target,this.config.tab.open.targets);if(i.valid&&(this.logger.info(i),this.isUrlSchemeAvailable(i.href,this.config.tab.open.protocols)))try{n.preventDefault(),n.stopPropagation(),this.openWebviewTab(i.href,i.title)}catch(o){this.logger.warn(o)}}catch(i){this.logger.warn(i)}});le(this,"openWindowEventListener",n=>{try{if(!this.config.window.enable||!Yi(n,this.config.window.open.mouse))return;const i=this.parseHyperlinkMeta(n.target,this.config.window.open.targets);if(i.valid){if(this.logger.info(i.href),i.enabled&&this.isUrlSchemeAvailable(i.href,this.config.window.open.protocols))if(n.preventDefault(),n.stopPropagation(),i.href.startsWith("siyuan://")){if(this.config.window.siyuan.enable){const o=Ht(Jn(this.config.window.siyuan.editorType),Xi(new URL(i.href)));this.openSiyuanWindow(o,n)}}else this.openWindow(i.href,{x:n.screenX,y:n.screenY,title:i.title||this.name})}else if(this.config.window.siyuan.enable){const o=fu(n);if(o){n.preventDefault(),n.stopPropagation();const r=Ht(Jn(this.config.window.siyuan.editorType),{id:o,focus:this.config.window.siyuan.focus});this.openSiyuanWindow(r,n)}}}catch(i){this.logger.warn(i)}});this.logger=new xl(this.name),this.client=new Ul(void 0,"fetch"),this.TOP_BAR_MENU_ID=`${this.name}-top-bar-menu`,this.SETTINGS_DIALOG_ID=`${this.name}-settings-dialog`,this.WEBVIEW_TAB_ID=`${this.name}${Tt.WEBVIEW_TAB_TYPE}`;const i=this;this.webview_tab=this.addTab({type:Tt.WEBVIEW_TAB_TYPE,init(){const o=this;new Xp({target:o.element,props:{src:o.data.href,tab:o,plugin:i,title:o.data.title}})}})}onload(){this.addIcons([wu,ku,Tu,Eu,Bu,Su].join("")),this.addCommand({langKey:"openDesktopWindow",langText:this.i18n.menu.openDesktopWindow.label,hotkey:"⇧⌘N",customHotkey:"",callback:()=>{this.openSiyuanDesktopWindow()}}),this.addCommand({langKey:"openMobildWindow",langText:this.i18n.menu.openMobildWindow.label,hotkey:"",customHotkey:"",callback:()=>{this.openSiyuanMobileWindow()}}),this.addCommand({langKey:"openNewTab",langText:this.i18n.menu.openNewTab.label,hotkey:"⌘T",customHotkey:"",callback:()=>{this.openWebviewTab(void 0,this.i18n.menu.openNewTab.title)}}),this.loadData(Tt.GLOBAL_CONFIG_NAME).then(n=>{this.config=vn(Jo,n||{})}).catch(n=>this.logger.error(n)).finally(()=>{zi&&Yn&&globalThis.addEventListener(this.config.tab.open.mouse.type,this.openTabEventListener,!0),globalThis.addEventListener(this.config.window.open.mouse.type,this.openWindowEventListener,!0),this.eventBus.on("click-editortitleicon",this.blockMenuEventListener),this.eventBus.on("click-blockicon",this.blockMenuEventListener),this.eventBus.on("open-menu-blockref",this.blockRefMenuEventListener),this.eventBus.on("open-menu-link",this.linkMenuEventListener),this.eventBus.on("open-menu-image",this.imageMenuEventListener),this.eventBus.on("open-menu-fileannotationref",this.fileAnnotationRefMenuEventListener)})}onLayoutReady(){Yn&&(new qe.Menu(this.TOP_BAR_MENU_ID),this.tab_bar_item=this.addTopBar({icon:"icon-webview-chromium",title:this.i18n.displayName,position:"right",callback:n=>{const i=new qe.Menu(this.TOP_BAR_MENU_ID);i.addItem({icon:"iconSiYuan",label:this.i18n.menu.openDesktopWindow.label,click:r=>{this.openSiyuanDesktopWindow({screenX:globalThis.siyuan.coordinates.screenX,screenY:globalThis.siyuan.coordinates.screenY})}}),i.addItem({icon:"iconSiYuan",label:this.i18n.menu.openMobildWindow.label,click:r=>{this.openSiyuanMobileWindow({screenX:globalThis.siyuan.coordinates.screenX,screenY:globalThis.siyuan.coordinates.screenY})}}),i.addSeparator(),i.addItem({icon:"iconLayout",label:this.i18n.menu.openNewTab.label,click:r=>{this.openWebviewTab(void 0,this.i18n.menu.openNewTab.title)}});const o={x:0,y:0,isLeft:!0};if(n.target.classList.contains("fn__none")){const r=document.getElementById("barPlugins");if(r){const a=r.getBoundingClientRect();o.x=a.x+a.width/2,o.y=a.y+a.height/2}}else{const r=this.tab_bar_item.getBoundingClientRect();o.x=r.x+r.width/2,o.y=r.y+r.height/2}i.open(o)}}))}onunload(){zi&&Yn&&globalThis.removeEventListener(this.config.tab.open.mouse.type,this.openTabEventListener,!0),globalThis.removeEventListener(this.config.window.open.mouse.type,this.openWindowEventListener,!0),this.eventBus.off("click-blockicon",this.blockMenuEventListener),this.eventBus.off("click-editortitleicon",this.blockMenuEventListener),this.eventBus.off("open-menu-blockref",this.blockRefMenuEventListener),this.eventBus.off("open-menu-link",this.linkMenuEventListener),this.eventBus.off("open-menu-image",this.imageMenuEventListener),this.eventBus.off("open-menu-fileannotationref",this.fileAnnotationRefMenuEventListener)}openSetting(){const n=this,i=new qe.Dialog({title:`${this.i18n.displayName} <code class="fn__code">${this.name}</code>`,content:`<div id="${n.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:Gi?"92vw":"720px",height:Gi?void 0:"640px"});new Yf({target:i.element.querySelector(`#${n.SETTINGS_DIALOG_ID}`),props:{config:this.config,plugin:this}})}async resetConfig(){return this.updateConfig(vn(Jo))}async updateConfig(n){return n&&n!==this.config&&(this.config=n),this.saveData(Tt.GLOBAL_CONFIG_NAME,this.config)}get useragent(){return this.config.general.useragent||global.navigator.userAgent}get background(){return this.config.general.background}openWebviewTab(n="about:blank",i,o="icon-webview-chromium",r={}){qe.openTab({app:this.app,custom:{icon:o,title:i||this.displayName,id:this.WEBVIEW_TAB_ID,data:{href:n,title:i||this.displayName}},keepCursor:!1,removeCurrentTab:!1,...r})}openWindow(n,i={x:0,y:0,title:null},o={defaultFontSize:globalThis.siyuan.config.editor.fontSize,defaultFontFamily:{standard:globalThis.siyuan.config.editor.fontFamily}}){try{const r=new URL(n);return pf(r,{backgroundColor:this.background,...this.config.window.params},i,o,this)}catch(r){this.logger.warn(r)}}openWebpageWindow(n,i,o){const r={x:(o==null?void 0:o.screenX)??0,y:(o==null?void 0:o.screenY)??0,title:i,alwaysOnTop:!1,autoHideMenuBar:!0,webPreferences:{nodeIntegration:!1,webviewTag:!1,contextIsolation:!1},enableMenuBar:!0,enableElectron:!1};return this.openWindow(n,r)}openSiyuanDesktopWindow(n,i){const o={x:(n==null?void 0:n.screenX)??0,y:(n==null?void 0:n.screenY)??0,title:"desktop",alwaysOnTop:!1,autoHideMenuBar:!1,webPreferences:{nodeIntegration:!0,webviewTag:!0,contextIsolation:!1},enableMenuBar:!0,enableElectron:!0};this.openWindow(i||Ht(li.desktop).href,o)}openSiyuanMobileWindow(n,i){const o={x:(n==null?void 0:n.screenX)??0,y:(n==null?void 0:n.screenY)??0,title:"mobile",alwaysOnTop:!0,autoHideMenuBar:!1,webPreferences:{nodeIntegration:!0,webviewTag:!0,contextIsolation:!1},enableMenuBar:!0,enableElectron:!0};this.openWindow(i||Ht(li.mobile).href,o)}openSiyuanNativeWindow(n,i){const o=pu(i);if(o){const r={position:this.config.window.params.center?void 0:{x:(n==null?void 0:n.screenX)??0,y:(n==null?void 0:n.screenY)??0},height:this.config.window.params.height,width:this.config.window.params.height,doc:{id:o.id}};this.siyuan.openWindow(r)}}openSiyuanWindow(n,i,o=this.config.window.siyuan.editorType){switch(o){case Ge.desktop:this.openSiyuanDesktopWindow(i,n.href);break;case Ge.mobile:this.openSiyuanMobileWindow(i,n.href);break;case Ge.window:this.openSiyuanNativeWindow(i,n);break}}openSiyuanWindowByID(n,i=!1,o=this.config.window.siyuan.editorType){const r=Ht(Jn(o),{id:n,focus:i});this.openSiyuanWindowByURL(r,o)}openSiyuanWindowByURL(n,i=this.config.window.siyuan.editorType){this.openSiyuanWindow(n,{screenX:globalThis.siyuan.coordinates.screenX,screenY:globalThis.siyuan.coordinates.screenY},i)}isUrlSchemeAvailable(n,i){for(const o in i){const r=i[o];if(r.enable&&n.startsWith(r.prefix))return!0}return!1}parseHyperlinkMeta(n,i){const o={valid:!1,enabled:!1,href:void 0,title:void 0};switch(n.localName){case"a":o.valid=!0,o.enabled=i.hyperlink.other.enable,o.href=n.getAttribute("href")||"",o.title=n.title||n.innerText;break;case"span":/\ba\b/.test(n.dataset.type)&&(o.valid=!0,o.enabled=i.hyperlink.editor.enable,o.href=n.dataset.href||"",o.title=n.dataset.title||n.innerText);break}return o}buildOpenBlockSubmenu(n,i=!1){const o={app:this.app,doc:{id:n,action:["cb-get-focus","cb-get-hl"],zoomIn:i}};return[{icon:"iconAdd",label:this.i18n.menu.openTab.label,click:()=>{qe.openTab({...o,keepCursor:!1,removeCurrentTab:!1})}},{icon:"iconMin",label:this.i18n.menu.openTabBackground.label,click:()=>{qe.openTab({...o,keepCursor:!0,removeCurrentTab:!1})}},{icon:"iconLayoutRight",label:this.i18n.menu.openTabRight.label,click:()=>{qe.openTab({...o,position:"right",keepCursor:!1,removeCurrentTab:!1})}},{icon:"iconLayoutBottom",label:this.i18n.menu.openTabBottom.label,click:()=>{qe.openTab({...o,position:"bottom",keepCursor:!1,removeCurrentTab:!1})}},{type:"separator"},{icon:"iconOpenWindow",label:this.i18n.menu.openEditor.label,click:()=>this.openSiyuanWindowByID(n,!1)},{icon:"iconFocus",label:this.i18n.menu.openFocusedEditor.label,click:()=>this.openSiyuanWindowByID(n,!0)}]}buildOpenLinkSubmenu(n,i,o){return[{icon:"iconAdd",label:this.i18n.menu.openTab.label,click:()=>this.openWebviewTab(n,i,o)},{icon:"iconMin",label:this.i18n.menu.openTabBackground.label,click:()=>this.openWebviewTab(n,i,o,{keepCursor:!0})},{icon:"iconLayoutRight",label:this.i18n.menu.openTabRight.label,click:()=>this.openWebviewTab(n,i,o,{position:"right"})},{icon:"iconLayoutBottom",label:this.i18n.menu.openTabBottom.label,click:()=>this.openWebviewTab(n,i,o,{position:"bottom"})},{type:"separator"},{icon:"iconOpenWindow",label:this.i18n.menu.openByNewWindow.label,click:()=>(this.openWebpageWindow(n,i,{screenX:globalThis.siyuan.coordinates.screenX,screenY:globalThis.siyuan.coordinates.screenY}),null)}]}};le(Tt,"GLOBAL_CONFIG_NAME","global-config"),le(Tt,"WEBVIEW_TAB_TYPE","-webview-tag");let hi=Tt;module.exports=hi;
