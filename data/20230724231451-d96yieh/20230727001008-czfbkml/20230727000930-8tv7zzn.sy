{"ID":"20230727000930-8tv7zzn","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f3fa","id":"20230727000930-8tv7zzn","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20230727000930-8tv7zzn\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20230727000931-rkkbsiz\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20230727000967-v36igkz\u0026quot;,\u0026quot;scrollTop\u0026quot;:0,\u0026quot;focusId\u0026quot;:\u0026quot;20230727000931-rkkbsiz\u0026quot;,\u0026quot;focusStart\u0026quot;:0,\u0026quot;focusEnd\u0026quot;:0\u0026#125;","title":"28. go flag包","updated":"20230727000930"},"Children":[{"ID":"20230727000931-rkkbsiz","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230727000931-rkkbsiz","updated":"20230727000931"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeText","Data":"28. go flag包"}]},{"ID":"20230727000932-3dl4gbp","Type":"NodeParagraph","Properties":{"id":"20230727000932-3dl4gbp","updated":"20230727000932"},"Children":[{"Type":"NodeText","Data":"Go语言内置的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"flag"},{"Type":"NodeText","Data":"包实现了命令行参数的解析，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"flag"},{"Type":"NodeText","Data":"包使得开发命令行工具更为简单。"}]},{"ID":"20230727000933-ihygn5m","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230727000933-ihygn5m","updated":"20230727000933"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"os.Args"}]},{"ID":"20230727000934-2vh7e2x","Type":"NodeParagraph","Properties":{"id":"20230727000934-2vh7e2x","updated":"20230727000934"},"Children":[{"Type":"NodeText","Data":"如果你只是简单的想要获取命令行参数，可以像下面的代码示例一样使用"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"os.Args"},{"Type":"NodeText","Data":"来获取命令行参数。"}]},{"ID":"20230727000935-40q1bs3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000935-40q1bs3","updated":"20230727000935"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport (\n\t\"fmt\"\n\t\"os\"\n)\n\n//os.Args demo\nfunc main() {\n\t//os.Args是一个[]string\n\tif len(os.Args) \u003e 0 {\n\t\tfor index, arg := range os.Args {\n\t\t\tfmt.Printf(\"args[%d]=%v\\n\", index, arg)\n\t\t}\n\t}\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000936-1s22ee6","Type":"NodeParagraph","Properties":{"id":"20230727000936-1s22ee6","updated":"20230727000936"},"Children":[{"Type":"NodeText","Data":"将上面的代码执行 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"go build -o \u0026quot;args_demo\u0026quot;"},{"Type":"NodeText","Data":" 编译之后，执行："}]},{"ID":"20230727000937-wa9bavr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000937-wa9bavr","updated":"20230727000937"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"$ ./args_demo a b c d\nargs[0]=./args_demo\nargs[1]=a\nargs[2]=b\nargs[3]=c\nargs[4]=d\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000938-ker2dex","Type":"NodeParagraph","Properties":{"id":"20230727000938-ker2dex","updated":"20230727000938"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"os.Args"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"是一个存储命令行参数的字符串切片，它的第一个元素是执行文件的名称。"}]},{"ID":"20230727000939-xlg2wdm","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230727000939-xlg2wdm","updated":"20230727000939"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeText","Data":"flag"}]},{"ID":"20230727000940-17vd0of","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230727000940-17vd0of","updated":"20230727000940"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"flag 参数类型"}]},{"ID":"20230727000941-pv8sw0o","Type":"NodeParagraph","Properties":{"id":"20230727000941-pv8sw0o","updated":"20230727000941"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"flag包支持的命令行参数类型有"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"bool"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"int"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"int64"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"uint"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"uint64"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"float"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":" "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"float64"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"string"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"duration"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"。"}]},{"ID":"20230727000942-n6loi4e","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230727000942-n6loi4e","updated":"20230727000942"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"定义命令行flag参数"}]},{"ID":"20230727000943-e2zyoof","Type":"NodeParagraph","Properties":{"id":"20230727000943-e2zyoof","updated":"20230727000943"},"Children":[{"Type":"NodeText","Data":"有以下两种常用的定义命令行 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"flag"},{"Type":"NodeText","Data":" 参数的方法"}]},{"ID":"20230727000944-fsaxebh","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000944-fsaxebh","updated":"20230727000944"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"flag.Type()"}]},{"ID":"20230727000945-nqulnsz","Type":"NodeParagraph","Properties":{"id":"20230727000945-nqulnsz","updated":"20230727000945"},"Children":[{"Type":"NodeText","Data":"基本格式如下："}]},{"ID":"20230727000946-ltxix62","Type":"NodeParagraph","Properties":{"id":"20230727000946-ltxix62","updated":"20230727000946"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"flag.Type(flag名, 默认值, 帮助信息)*Type"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":" 例如我们要定义姓名、年龄、婚否三个命令行参数，我们可以按如下方式定义："}]},{"ID":"20230727000947-t16hnps","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000947-t16hnps","updated":"20230727000947"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"name := flag.String(\"name\", \"张三\", \"姓名\")\nage := flag.Int(\"age\", 18, \"年龄\")\nmarried := flag.Bool(\"married\", false, \"婚否\")\ndelay := flag.Duration(\"d\", 0, \"时间间隔\")\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000948-3ks7gz3","Type":"NodeParagraph","Properties":{"id":"20230727000948-3ks7gz3","updated":"20230727000948"},"Children":[{"Type":"NodeText","Data":"需要注意的是，此时"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"name"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"age"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"married"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"delay"},{"Type":"NodeText","Data":"均为对应类型的指针。"}]},{"ID":"20230727000949-a193i0l","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230727000949-a193i0l","updated":"20230727000949"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"flag.TypeVar()"}]},{"ID":"20230727000950-i4g42o6","Type":"NodeParagraph","Properties":{"id":"20230727000950-i4g42o6","updated":"20230727000950"},"Children":[{"Type":"NodeText","Data":"基本格式如下： "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"flag.TypeVar(Type指针, flag名, 默认值, 帮助信息)"},{"Type":"NodeText","Data":" 例如我们要定义姓名、年龄、婚否三个命令行参数，我们可以按如下方式定义："}]},{"ID":"20230727000951-q0p3hm2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000951-q0p3hm2","updated":"20230727000951"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"var name string\nvar age int\nvar married bool\nvar delay time.Duration\nflag.StringVar(\u0026name, \"name\", \"张三\", \"姓名\")\nflag.IntVar(\u0026age, \"age\", 18, \"年龄\")\nflag.BoolVar(\u0026married, \"married\", false, \"婚否\")\nflag.DurationVar(\u0026delay, \"d\", 0, \"时间间隔\")\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230727000952-epy70n0","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230727000952-epy70n0","updated":"20230727000952"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"flag.Parse()"}]},{"ID":"20230727000953-sos50t3","Type":"NodeParagraph","Properties":{"id":"20230727000953-sos50t3","updated":"20230727000953"},"Children":[{"Type":"NodeText","Data":"通过以上两种方法定义好命令行flag参数后，需要通过调用"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"flag.Parse()"},{"Type":"NodeText","Data":"来对命令行参数进行解析。"}]},{"ID":"20230727000954-ds5unxp","Type":"NodeParagraph","Properties":{"id":"20230727000954-ds5unxp","updated":"20230727000954"},"Children":[{"Type":"NodeText","Data":"支持的命令行参数格式有以下几种："}]},{"ID":"20230727000955-2to25je","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230727000955-2to25je","updated":"20230727000955"},"Children":[{"ID":"20230727000956-0wejf8d","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230727000956-0wejf8d","updated":"20230727000956"},"Children":[{"ID":"20230727000957-g8tpchg","Type":"NodeParagraph","Properties":{"id":"20230727000957-g8tpchg","updated":"20230727000957"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-flag xxx"},{"Type":"NodeText","Data":" （使用空格，一个"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-"},{"Type":"NodeText","Data":"符号）"}]}]},{"ID":"20230727000958-szc2cob","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230727000958-szc2cob","updated":"20230727000958"},"Children":[{"ID":"20230727000959-e65ya0y","Type":"NodeParagraph","Properties":{"id":"20230727000959-e65ya0y","updated":"20230727000959"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"--flag xxx"},{"Type":"NodeText","Data":" （使用空格，两个"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-"},{"Type":"NodeText","Data":"符号）"}]}]},{"ID":"20230727000960-4wxo1x3","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230727000960-4wxo1x3","updated":"20230727000960"},"Children":[{"ID":"20230727000961-6gn5edk","Type":"NodeParagraph","Properties":{"id":"20230727000961-6gn5edk","updated":"20230727000961"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-flag=xxx"},{"Type":"NodeText","Data":" （使用等号，一个"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-"},{"Type":"NodeText","Data":"符号）"}]}]},{"ID":"20230727000962-0rm2v0g","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230727000962-0rm2v0g","updated":"20230727000962"},"Children":[{"ID":"20230727000963-l86aldr","Type":"NodeParagraph","Properties":{"id":"20230727000963-l86aldr","updated":"20230727000963"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"--flag=xxx"},{"Type":"NodeText","Data":" （使用等号，两个"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-"},{"Type":"NodeText","Data":"符号）"}]}]}]},{"ID":"20230727000964-7j0o15r","Type":"NodeParagraph","Properties":{"id":"20230727000964-7j0o15r","updated":"20230727000964"},"Children":[{"Type":"NodeText","Data":"其中，布尔类型的参数必须使用等号的方式指定。"}]},{"ID":"20230727000965-qa11weh","Type":"NodeParagraph","Properties":{"id":"20230727000965-qa11weh","updated":"20230727000965"},"Children":[{"Type":"NodeText","Data":"Flag解析在第一个非flag参数（单个”-“不是flag参数）之前停止，或者在终止符”–“之后停止。"}]},{"ID":"20230727000966-ylck347","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230727000966-ylck347","updated":"20230727000966"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"flag 其他函数"}]},{"ID":"20230727000967-v36igkz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Z28=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230727000967-v36igkz","updated":"20230727000967"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"flag.Args()  ////返回命令行参数后的其他参数，以[]string类型\nflag.NArg()  //返回命令行参数后的其他参数个数\nflag.NFlag() //返回使用的命令行参数个数\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]}]}