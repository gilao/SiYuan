{"ID":"20231109222108-d1zl9o7","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f989","id":"20231109222108-d1zl9o7","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20231109222108-d1zl9o7\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20231109222118-xo3vmx4\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20231109222443-1zaetcv\u0026quot;,\u0026quot;scrollTop\u0026quot;:1032.6666259765625\u0026#125;","title":"获取请求参数","updated":"20231109222443"},"Children":[{"ID":"20231109222118-xo3vmx4","Type":"NodeParagraph","Properties":{"id":"20231109222118-xo3vmx4","updated":"20231109222139"},"Children":[{"Type":"NodeText","Data":"路由 /api/info?shortlink=2 "}]},{"ID":"20231109222139-odszw65","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231109222139-odszw65","updated":"20231109222149"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"a.Router.Handle(\"/api/info\", m.ThenFunc(a.getShortlinkInfo)).Methods(\"GET\")\n\nfunc getShortlinkInfo(w http.ResponseWriter, r *http.Request) {\n  vals := r.URL.Query()\n  s := vals.Get(\"shortlink\")\n\n  fmt.Println(s) // 2\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231109222108-w0z2oxa","Type":"NodeParagraph","Properties":{"id":"20231109222108-w0z2oxa","updated":"20231109222202"},"Children":[{"Type":"NodeText","Data":"路由/2 "}]},{"ID":"20231109222202-89ubs9q","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231109222202-89ubs9q","updated":"20231109222213"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"a.Router.Handle(\"/{shortlink:[a-zA-Z0-9]{1,11}}\", m.ThenFunc(a.redirect)).Methods(\"GET\")\n\nfunc redirect(w http.ResponseWriter, r *http.Request) {\n  vars := mux.Vars(r)\n  shortlink := vars[\"shortlink\"]\n\n  fmt.Println(shortlink) // 2\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231109222233-695kwl0","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20231109222233-695kwl0","updated":"20231109222244"},"Children":[{"Type":"NodeText","Data":"获取请求体"}]},{"ID":"20231109222244-3kam3fo","Type":"NodeParagraph","Properties":{"id":"20231109222244-3kam3fo","updated":"20231109222332"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"json.NewDecoder(r.Body)"},{"Type":"NodeText","Data":"​ 作用是将 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http"},{"Type":"NodeText","Data":"​ 请求的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"body"},{"Type":"NodeText","Data":"​ 内容解析为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"json"},{"Type":"NodeText","Data":"​ 格式"}]},{"ID":"20231109222332-4fr0axf","Type":"NodeParagraph","Properties":{"id":"20231109222332-4fr0axf","updated":"20231109222405"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"r.body"},{"Type":"NodeText","Data":"​ 是一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"io.Reader"},{"Type":"NodeText","Data":"​ 类型， 他代表请求的原始数据"}]},{"ID":"20231109222405-m0u5xlx","Type":"NodeParagraph","Properties":{"id":"20231109222405-m0u5xlx","updated":"20231109222436"},"Children":[{"Type":"NodeText","Data":"如果关联成功可以用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Decode()"},{"Type":"NodeText","Data":"​ 方法来解析 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"json"},{"Type":"NodeText","Data":"​ 数据"}]},{"ID":"20231109222439-i1jc5zf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231109222439-i1jc5zf","updated":"20231109222442"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"type User struct {\n  Name string `json:\"name\"`\n  Age int `json:\"age\"`\n}\n\nfunc controller(w http.ResponseWriter, r *http.Request){\n  var user User\n  if err := json.NewDecoder(r.Body).Decode(\u0026user); err != nil {\n    fmt.Println(err)\n  }\n  fmt.Println(user)\n}\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231109222443-1zaetcv","Type":"NodeParagraph","Properties":{"id":"20231109222443-1zaetcv"}}]}