{"ID":"20240525155355-c3vmcvb","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f63e","id":"20240525155355-c3vmcvb","title":"GORM框架","type":"doc","updated":"20240527094722"},"Children":[{"ID":"20240527094722-qew7auf","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240527094722-qew7auf","updated":"20240527094722"},"Children":[{"Type":"NodeText","Data":"GORM介绍和使用"}]},{"ID":"20240527094722-73qs0x9","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240527094722-73qs0x9","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"来源"}]},{"ID":"20240527094722-4pym76k","Type":"NodeList","ListData":{},"Properties":{"id":"20240527094722-4pym76k","updated":"20240527094723"},"Children":[{"ID":"20240527094722-je2f88w","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240527094722-je2f88w","updated":"20240527094722"},"Children":[{"ID":"20240527094722-3hp59yx","Type":"NodeParagraph","Properties":{"id":"20240527094722-3hp59yx","updated":"20240527094722"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://www.liwenzhou.com/posts/Go/gorm/","TextMarkTextContent":"https://www.liwenzhou.com/posts/Go/gorm/"}]}]},{"ID":"20240527094722-2l25899","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240527094722-2l25899","updated":"20240527094722"},"Children":[{"ID":"20240527094722-g50eiup","Type":"NodeParagraph","Properties":{"id":"20240527094722-g50eiup","updated":"20240527094722"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://www.liwenzhou.com/posts/Go/gorm_crud/","TextMarkTextContent":"https://www.liwenzhou.com/posts/Go/gorm_crud/"}]}]}]},{"ID":"20240527094722-ewnt3pp","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240527094722-ewnt3pp","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"什么是ORM"}]},{"ID":"20240527094722-h0j60bm","Type":"NodeParagraph","Properties":{"id":"20240527094722-h0j60bm","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Object Relational Mapping：对象关系映射"}]},{"ID":"20240527094722-b6lllps","Type":"NodeParagraph","Properties":{"id":"20240527094722-b6lllps","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"结构体 和 SQL数据库存在映射，这个时候就有了ORM语句"}]},{"ID":"20240527094722-wylmqvg","Type":"NodeParagraph","Properties":{"id":"20240527094722-wylmqvg","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"一句话说：就是将数据库中的表数据 和 结构体进行对应的关系"}]},{"ID":"20240527094722-7h7acrj","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240527094722-7h7acrj","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"ORM的优缺点"}]},{"ID":"20240527094722-t2a99wx","Type":"NodeParagraph","Properties":{"id":"20240527094722-t2a99wx","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"优点："}]},{"ID":"20240527094722-r6vw976","Type":"NodeList","ListData":{},"Properties":{"id":"20240527094722-r6vw976","updated":"20240527094723"},"Children":[{"ID":"20240527094722-9farc7o","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240527094722-9farc7o","updated":"20240527094722"},"Children":[{"ID":"20240527094722-an0x8v9","Type":"NodeParagraph","Properties":{"id":"20240527094722-an0x8v9","updated":"20240527094722"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"提高开发效率"}]}]}]},{"ID":"20240527094722-ax15qvb","Type":"NodeParagraph","Properties":{"id":"20240527094722-ax15qvb","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"缺点:"}]},{"ID":"20240527094722-0mfl3wa","Type":"NodeList","ListData":{},"Properties":{"id":"20240527094722-0mfl3wa","updated":"20240527094723"},"Children":[{"ID":"20240527094722-5y4ts3c","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240527094722-5y4ts3c","updated":"20240527094722"},"Children":[{"ID":"20240527094722-pr9rt92","Type":"NodeParagraph","Properties":{"id":"20240527094722-pr9rt92","updated":"20240527094722"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"牺牲执行性能【中间多了一个环节】"}]}]},{"ID":"20240527094722-1z6b2cm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240527094722-1z6b2cm","updated":"20240527094722"},"Children":[{"ID":"20240527094722-oaqh2xx","Type":"NodeParagraph","Properties":{"id":"20240527094722-oaqh2xx","updated":"20240527094722"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"牺牲灵活性"}]}]},{"ID":"20240527094722-86hr1tz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240527094722-86hr1tz","updated":"20240527094722"},"Children":[{"ID":"20240527094722-er6x15p","Type":"NodeParagraph","Properties":{"id":"20240527094722-er6x15p","updated":"20240527094722"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"弱化SQL能力"}]}]}]},{"ID":"20240527094722-qy1nbtg","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240527094722-qy1nbtg","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"gorm介绍"}]},{"ID":"20240527094722-g290tr1","Type":"NodeParagraph","Properties":{"id":"20240527094722-g290tr1","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://github.com/jinzhu/gorm","TextMarkTextContent":"Github GORM"}]},{"ID":"20240527094722-xqpgqhw","Type":"NodeParagraph","Properties":{"id":"20240527094722-xqpgqhw","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://gorm.io/zh_CN/","TextMarkTextContent":"中文官方网站"},{"Type":"NodeText","Data":"内含十分齐全的中文文档，有了它你甚至不需要再继续向下阅读本文。"}]},{"ID":"20240527094722-rg0c9t1","Type":"NodeParagraph","Properties":{"id":"20240527094722-rg0c9t1","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"gorm是一个使用Go语言编写的ORM框架。它文档齐全，对开发者友好，支持主流数据库。"}]},{"ID":"20240527094722-tcszslq","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240527094722-tcszslq","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"安装"}]},{"ID":"20240527094722-9d73aag","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-9d73aag","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"go get -u github.com/jinzhu/gorm\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-59dnxtd","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240527094722-59dnxtd","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"连接数据库"}]},{"ID":"20240527094722-44djbbh","Type":"NodeParagraph","Properties":{"id":"20240527094722-44djbbh","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"连接不同的数据库都需要导入对应数据的驱动程序，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"GORM"},{"Type":"NodeText","Data":"​已经贴心的为我们包装了一些驱动程序，只需要按如下方式导入需要的数据库驱动即可："}]},{"ID":"20240527094722-hgh5cct","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-hgh5cct","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"import _ \"github.com/jinzhu/gorm/dialects/mysql\"\n// import _ \"github.com/jinzhu/gorm/dialects/postgres\"\n// import _ \"github.com/jinzhu/gorm/dialects/sqlite\"\n// import _ \"github.com/jinzhu/gorm/dialects/mssql\"\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-2xxlqtm","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527094722-2xxlqtm","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"连接MySQL"}]},{"ID":"20240527094722-ziabp1t","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-ziabp1t","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"import (\n  \"github.com/jinzhu/gorm\"\n  _ \"github.com/jinzhu/gorm/dialects/mysql\"\n)\n\nfunc main() {\n  db, err := gorm.Open(\"mysql\", \"user:password@(localhost)/dbname?charset=utf8mb4\u0026parseTime=True\u0026loc=Local\")\n  defer db.Close()\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-vzb5etu","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527094722-vzb5etu","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"连接PostgreSQL"}]},{"ID":"20240527094722-lwyzrnb","Type":"NodeParagraph","Properties":{"id":"20240527094722-lwyzrnb","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"基本代码同上，注意引入对应"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"postgres"},{"Type":"NodeText","Data":"​驱动并正确指定"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"gorm.Open()"},{"Type":"NodeText","Data":"​参数。"}]},{"ID":"20240527094722-mykgu0e","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-mykgu0e","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"import (\n  \"github.com/jinzhu/gorm\"\n  _ \"github.com/jinzhu/gorm/dialects/postgres\"\n)\n\nfunc main() {\n  db, err := gorm.Open(\"postgres\", \"host=myhost port=myport user=gorm dbname=gorm password=mypassword\")\n  defer db.Close()\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-w17431w","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527094722-w17431w","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"连接Sqlite3"}]},{"ID":"20240527094722-5uv3ulp","Type":"NodeParagraph","Properties":{"id":"20240527094722-5uv3ulp","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"基本代码同上，注意引入对应"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"sqlite"},{"Type":"NodeText","Data":"​驱动并正确指定"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"gorm.Open()"},{"Type":"NodeText","Data":"​参数。"}]},{"ID":"20240527094722-p797dgn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-p797dgn","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"import (\n  \"github.com/jinzhu/gorm\"\n  _ \"github.com/jinzhu/gorm/dialects/sqlite\"\n)\n\nfunc main() {\n  db, err := gorm.Open(\"sqlite3\", \"/tmp/gorm.db\")\n  defer db.Close()\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-tbdrvdy","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527094722-tbdrvdy","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"连接SQL Server"}]},{"ID":"20240527094722-wru2p14","Type":"NodeParagraph","Properties":{"id":"20240527094722-wru2p14","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"基本代码同上，注意引入对应"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mssql"},{"Type":"NodeText","Data":"​驱动并正确指定"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"gorm.Open()"},{"Type":"NodeText","Data":"​参数。"}]},{"ID":"20240527094722-a41c4rc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-a41c4rc","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"import (\n  \"github.com/jinzhu/gorm\"\n  _ \"github.com/jinzhu/gorm/dialects/mssql\"\n)\n\nfunc main() {\n  db, err := gorm.Open(\"mssql\", \"sqlserver://username:password@localhost:1433?database=dbname\")\n  defer db.Close()\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-4pza7nb","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240527094722-4pza7nb","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"GORM基本示例"}]},{"ID":"20240527094722-7x4puky","Type":"NodeParagraph","Properties":{"id":"20240527094722-7x4puky","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"注意:"}]},{"ID":"20240527094722-99rrif9","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240527094722-99rrif9","updated":"20240527094723"},"Children":[{"ID":"20240527094722-l4c4bha","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240527094722-l4c4bha","updated":"20240527094722"},"Children":[{"ID":"20240527094722-1y9hytu","Type":"NodeParagraph","Properties":{"id":"20240527094722-1y9hytu","updated":"20240527094722"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"本文以MySQL数据库为例，讲解GORM各项功能的主要使用方法。"}]}]},{"ID":"20240527094722-cq6slcc","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240527094722-cq6slcc","updated":"20240527094722"},"Children":[{"ID":"20240527094722-2h0epii","Type":"NodeParagraph","Properties":{"id":"20240527094722-2h0epii","updated":"20240527094722"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"往下阅读本文前，你需要有一个能够成功连接上的MySQL数据库实例。"}]}]}]},{"ID":"20240527094722-tbr67tl","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527094722-tbr67tl","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"Docker快速创建MySQL实例"}]},{"ID":"20240527094722-83v3bx3","Type":"NodeParagraph","Properties":{"id":"20240527094722-83v3bx3","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"很多同学如果不会安装MySQL或者懒得安装MySQL，可以使用一下命令快速运行一个MySQL8.0.19实例，当然前提是你要有docker环境…"}]},{"ID":"20240527094722-y2di9kk","Type":"NodeParagraph","Properties":{"id":"20240527094722-y2di9kk","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"在本地的"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"13306"},{"Type":"NodeText","Data":"​端口运行一个名为"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysql8019"},{"Type":"NodeText","Data":"​，root用户名密码为"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"root1234"},{"Type":"NodeText","Data":"​的MySQL容器环境:"}]},{"ID":"20240527094722-efa13jm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-efa13jm","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"docker run --name mysql8019 -p 13306:3306 -e MYSQL_ROOT_PASSWORD=root1234 -d mysql:8.0.19\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-hvjwzih","Type":"NodeParagraph","Properties":{"id":"20240527094722-hvjwzih","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"在另外启动一个"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"MySQL Client"},{"Type":"NodeText","Data":"​连接上面的MySQL环境，密码为上一步指定的密码"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"root1234"},{"Type":"NodeText","Data":"​:"}]},{"ID":"20240527094722-5e8n6cd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-5e8n6cd","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"docker run -it --network host --rm mysql mysql -h127.0.0.1 -P13306 --default-character-set=utf8mb4 -uroot -p\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-sxid2n2","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527094722-sxid2n2","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"创建数据库"}]},{"ID":"20240527094722-p5qe52l","Type":"NodeParagraph","Properties":{"id":"20240527094722-p5qe52l","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"在使用GORM前手动创建数据库"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"db1"},{"Type":"NodeText","Data":"​："}]},{"ID":"20240527094722-7prw04l","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-7prw04l","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"CREATE DATABASE db1;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-s33bhby","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527094722-s33bhby","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"GORM操作MySQL"}]},{"ID":"20240527094722-z2zc030","Type":"NodeParagraph","Properties":{"id":"20240527094722-z2zc030","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"使用GORM连接上面的"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"db1"},{"Type":"NodeText","Data":"​进行创建、查询、更新、删除操作。"}]},{"ID":"20240527094722-qng8o1c","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-qng8o1c","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport (\n    \"fmt\"\n    \"github.com/jinzhu/gorm\"\n    _ \"github.com/jinzhu/gorm/dialects/mysql\"\n)\n\n// UserInfo 用户信息\ntype UserInfo struct {\n    ID uint\n    Name string\n    Gender string\n    Hobby string\n}\n\n\nfunc main() {\n    db, err := gorm.Open(\"mysql\", \"root:root1234@(127.0.0.1:13306)/db1?charset=utf8mb4\u0026parseTime=True\u0026loc=Local\")\n    if err!= nil{\n       panic(err)\n    }\n    defer db.Close()\n\n    // 自动迁移\n    db.AutoMigrate(\u0026UserInfo{})\n\n    u1 := UserInfo{1, \"七米\", \"男\", \"篮球\"}\n    u2 := UserInfo{2, \"沙河娜扎\", \"女\", \"足球\"}\n    // 创建记录\n    db.Create(\u0026u1)\n    db.Create(\u0026u2)\n    // 查询\n    var u = new(UserInfo)\n    db.First(u)\n    fmt.Printf(\"%#v\\n\", u)\n\n    var uu UserInfo\n    db.Find(\u0026uu, \"hobby=?\", \"足球\")\n    fmt.Printf(\"%#v\\n\", uu)\n\n    // 更新\n    db.Model(\u0026u).Update(\"hobby\", \"双色球\")\n    // 删除\n    db.Delete(\u0026u)\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-8mm0xzy","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240527094722-8mm0xzy","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"GORM Model定义"}]},{"ID":"20240527094722-f9nig52","Type":"NodeParagraph","Properties":{"id":"20240527094722-f9nig52","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"在使用ORM工具时，通常我们需要在代码中定义模型（Models）与数据库中的数据表进行映射，在GORM中模型（Models）通常是正常定义的结构体、基本的go类型或它们的指针。 同时也支持"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"sql.Scanner"},{"Type":"NodeText","Data":"​及"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"driver.Valuer"},{"Type":"NodeText","Data":"​接口（interfaces）。"}]},{"ID":"20240527094722-ae8dvtf","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527094722-ae8dvtf","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"gorm.Model"}]},{"ID":"20240527094722-k6y00d4","Type":"NodeParagraph","Properties":{"id":"20240527094722-k6y00d4","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"为了方便模型定义，GORM内置了一个"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"gorm.Model"},{"Type":"NodeText","Data":"​结构体。"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"gorm.Model"},{"Type":"NodeText","Data":"​是一个包含了"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ID"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"CreatedAt"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"UpdatedAt"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"DeletedAt"},{"Type":"NodeText","Data":"​四个字段的Golang结构体。"}]},{"ID":"20240527094722-bn0a1ht","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-bn0a1ht","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"// gorm.Model 定义\ntype Model struct {\n  ID        uint `gorm:\"primary_key\"`\n  CreatedAt time.Time\n  UpdatedAt time.Time\n  DeletedAt *time.Time\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-awb8n2h","Type":"NodeParagraph","Properties":{"id":"20240527094722-awb8n2h","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"你可以将它嵌入到你自己的模型中："}]},{"ID":"20240527094722-du2fguo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-du2fguo","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"// 将 `ID`, `CreatedAt`, `UpdatedAt`, `DeletedAt`字段注入到`User`模型中\ntype User struct {\n  gorm.Model\n  Name string\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-5uat1ni","Type":"NodeParagraph","Properties":{"id":"20240527094722-5uat1ni","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"当然你也可以完全自己定义模型："}]},{"ID":"20240527094722-xn4fthg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-xn4fthg","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"// 不使用gorm.Model，自行定义模型\ntype User struct {\n  ID   int\n  Name string\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-2zdbtus","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527094722-2zdbtus","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"模型定义示例"}]},{"ID":"20240527094722-xbam7yo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-xbam7yo","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"type User struct {\n  gorm.Model\n  Name         string\n  Age          sql.NullInt64\n  Birthday     *time.Time\n  Email        string  `gorm:\"type:varchar(100);unique_index\"`\n  Role         string  `gorm:\"size:255\"` // 设置字段大小为255\n  MemberNumber *string `gorm:\"unique;not null\"` // 设置会员号（member number）唯一并且不为空\n  Num          int     `gorm:\"AUTO_INCREMENT\"` // 设置 num 为自增类型\n  Address      string  `gorm:\"index:addr\"` // 给address字段创建名为addr的索引\n  IgnoreMe     int     `gorm:\"-\"` // 忽略本字段\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-e14jpqw","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527094722-e14jpqw","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"结构体标记（tags）"}]},{"ID":"20240527094722-8rcnfat","Type":"NodeParagraph","Properties":{"id":"20240527094722-8rcnfat","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"使用结构体声明模型时，标记（tags）是可选项。gorm支持以下标记:"}]},{"ID":"20240527094722-l1nre7t","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240527094722-l1nre7t","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"支持的结构体标记（Struct tags）"}]},{"ID":"20240527094722-sbaaat9","Type":"NodeTable","TableAligns":[0,0],"Properties":{"colgroup":"|","id":"20240527094722-sbaaat9","updated":"20240527094723"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"结构体标记（Tag）"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"描述"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Column"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定列名"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Type"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定列数据类型"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Size"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定列大小, 默认值255"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"PRIMARY_KEY"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"将列指定为主键"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"UNIQUE"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"将列指定为唯一"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"DEFAULT"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定列默认值"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"PRECISION"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定列精度"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"NOT NULL"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"将列指定为非 NULL"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"AUTO_INCREMENT"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定列是否为自增类型"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"INDEX"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"创建具有或不带名称的索引, 如果多个索引同名则创建复合索引"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"UNIQUE_INDEX"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"和"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"INDEX"},{"Type":"NodeText","Data":"​类似，只不过创建的是唯一索引"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"EMBEDDED"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"将结构设置为嵌入"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"EMBEDDED_PREFIX"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"设置嵌入结构的前缀"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"-"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"忽略此字段"}]}]}]},{"ID":"20240527094722-1ge7o3v","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240527094722-1ge7o3v","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"关联相关标记（tags）"}]},{"ID":"20240527094722-syiw1uh","Type":"NodeTable","TableAligns":[0,0],"Properties":{"colgroup":"|","id":"20240527094722-syiw1uh","updated":"20240527094723"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"结构体标记（Tag）"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"描述"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"MANY2MANY"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定连接表"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"FOREIGNKEY"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"设置外键"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"ASSOCIATION_FOREIGNKEY"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"设置关联外键"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"POLYMORPHIC"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定多态类型"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"POLYMORPHIC_VALUE"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定多态值"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"JOINTABLE_FOREIGNKEY"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定连接表的外键"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"ASSOCIATION_JOINTABLE_FOREIGNKEY"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定连接表的关联外键"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"SAVE_ASSOCIATIONS"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"是否自动完成 save 的相关操作"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"ASSOCIATION_AUTOUPDATE"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"是否自动完成 update 的相关操作"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"ASSOCIATION_AUTOCREATE"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"是否自动完成 create 的相关操作"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"ASSOCIATION_SAVE_REFERENCE"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"是否自动完成引用的 save 的相关操作"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"PRELOAD"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"是否自动完成预加载的相关操作"}]}]}]},{"ID":"20240527094722-df1iyqi","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240527094722-df1iyqi","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"主键、表名、列名的约定"}]},{"ID":"20240527094722-sacukqe","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527094722-sacukqe","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"主键（Primary Key）"}]},{"ID":"20240527094722-z6vqg6k","Type":"NodeParagraph","Properties":{"id":"20240527094722-z6vqg6k","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"GORM 默认会使用名为ID的字段作为表的主键。"}]},{"ID":"20240527094722-pbjkvz8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-pbjkvz8","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"type User struct {\n  ID   string // 名为`ID`的字段会默认作为表的主键\n  Name string\n}\n\n// 使用`AnimalID`作为主键\ntype Animal struct {\n  AnimalID int64 `gorm:\"primary_key\"`\n  Name     string\n  Age      int64\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-nn6hled","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527094722-nn6hled","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"表名（Table Name）"}]},{"ID":"20240527094722-lmf40df","Type":"NodeParagraph","Properties":{"id":"20240527094722-lmf40df","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"表名默认就是结构体名称的复数，例如："}]},{"ID":"20240527094722-03j3htp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-03j3htp","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"type User struct {} // 默认表名是 `users`\n\n// 将 User 的表名设置为 `profiles`\nfunc (User) TableName() string {\n  return \"profiles\"\n}\n\nfunc (u User) TableName() string {\n  if u.Role == \"admin\" {\n    return \"admin_users\"\n  } else {\n    return \"users\"\n  }\n}\n\n// 禁用默认表名的复数形式，如果置为 true，则 `User` 的默认表名是 `user`\ndb.SingularTable(true)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-2kq7yvu","Type":"NodeParagraph","Properties":{"id":"20240527094722-2kq7yvu","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"也可以通过"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Table()"},{"Type":"NodeText","Data":"​指定表名："}]},{"ID":"20240527094722-2gbfd4y","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-2gbfd4y","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"// 使用User结构体创建名为`deleted_users`的表\ndb.Table(\"deleted_users\").CreateTable(\u0026User{})\n\nvar deleted_users []User\ndb.Table(\"deleted_users\").Find(\u0026deleted_users)\n//// SELECT * FROM deleted_users;\n\ndb.Table(\"deleted_users\").Where(\"name = ?\", \"jinzhu\").Delete()\n//// DELETE FROM deleted_users WHERE name = 'jinzhu';\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-c0y7rqo","Type":"NodeParagraph","Properties":{"id":"20240527094722-c0y7rqo","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"GORM还支持更改默认表名称规则："}]},{"ID":"20240527094722-psk8j7h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-psk8j7h","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"gorm.DefaultTableNameHandler = func (db *gorm.DB, defaultTableName string) string  {\n  return \"prefix_\" + defaultTableName;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-fl2n0od","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527094722-fl2n0od","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"列名（Column Name）"}]},{"ID":"20240527094722-hde6q3g","Type":"NodeParagraph","Properties":{"id":"20240527094722-hde6q3g","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"列名由字段名称进行下划线分割来生成"}]},{"ID":"20240527094722-aylk6r7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-aylk6r7","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"type User struct {\n  ID        uint      // column name is `id`\n  Name      string    // column name is `name`\n  Birthday  time.Time // column name is `birthday`\n  CreatedAt time.Time // column name is `created_at`\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-6zmy8y2","Type":"NodeParagraph","Properties":{"id":"20240527094722-6zmy8y2","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"可以使用结构体tag指定列名："}]},{"ID":"20240527094722-8sp8s97","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-8sp8s97","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"type Animal struct {\n  AnimalId    int64     `gorm:\"column:beast_id\"`         // set column name to `beast_id`\n  Birthday    time.Time `gorm:\"column:day_of_the_beast\"` // set column name to `day_of_the_beast`\n  Age         int64     `gorm:\"column:age_of_the_beast\"` // set column name to `age_of_the_beast`\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-pvog2yy","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527094722-pvog2yy","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"时间戳跟踪"}]},{"ID":"20240527094722-uiorvvt","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240527094722-uiorvvt","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"CreatedAt"}]},{"ID":"20240527094722-n17lnbx","Type":"NodeParagraph","Properties":{"id":"20240527094722-n17lnbx","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"**如果模型有 **"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"CreatedAt"},{"Type":"NodeText","Data":"​字段，该字段的值将会是初次创建记录的时间。"}]},{"ID":"20240527094722-znbwxfl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-znbwxfl","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"db.Create(\u0026user) // `CreatedAt`将会是当前时间\n\n// 可以使用`Update`方法来改变`CreateAt`的值\ndb.Model(\u0026user).Update(\"CreatedAt\", time.Now())\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-dl8rwar","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240527094722-dl8rwar","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"UpdatedAt"}]},{"ID":"20240527094722-gkmag3o","Type":"NodeParagraph","Properties":{"id":"20240527094722-gkmag3o","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"如果模型有"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"UpdatedAt"},{"Type":"NodeText","Data":"​字段，该字段的值将会是每次更新记录的时间。"}]},{"ID":"20240527094722-zxygwm3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527094722-zxygwm3","updated":"20240527094723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"db.Save(\u0026user) // `UpdatedAt`将会是当前时间\n\ndb.Model(\u0026user).Update(\"name\", \"jinzhu\") // `UpdatedAt`将会是当前时间\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527094722-q2kkmjq","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240527094722-q2kkmjq","updated":"20240527094723"},"Children":[{"Type":"NodeText","Data":"DeletedAt"}]},{"ID":"20240527094722-oebbks7","Type":"NodeParagraph","Properties":{"id":"20240527094722-oebbks7","updated":"20240527094723"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"如果模型有"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"DeletedAt"},{"Type":"NodeText","Data":"​字段，调用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Delete"},{"Type":"NodeText","Data":"​删除该记录时，将会设置"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"DeletedAt"},{"Type":"NodeText","Data":"​字段为当前时间，而不是直接将记录从数据库中删除。"}]}]}