{"ID":"20240526190905-4d3bak4","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f441-fe0f","id":"20240526190905-4d3bak4","title":"gRPC Client 开发","type":"doc","updated":"20240526191115"},"Children":[{"ID":"20240526191043-ursy4jn","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240526191043-ursy4jn","updated":"20240526191043"},"Children":[{"Type":"NodeText","Data":"示例"}]},{"ID":"20240526191043-px2omir","Type":"NodeParagraph","Properties":{"id":"20240526191043-px2omir","updated":"20240526191043"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"准备工作"}]},{"ID":"20240526191043-1xsh6j6","Type":"NodeParagraph","Properties":{"id":"20240526191043-1xsh6j6","updated":"20240526191043"},"Children":[{"Type":"NodeText","Data":"事先我们执行如下执行生成一个 proto 文件及其 pb 文件。"}]},{"ID":"20240526191043-o1t5f14","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240526191043-o1t5f14","updated":"20240526191043"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"# 创建 demo 服务目录\n$ mkdir demo \u0026\u0026 cd demo\n# go mod 初始化\n$ go mod init demo\n# 生成 greet.proto 文件\n$ goctl rpc -o greet.proto\n# 生 pb.go 文件\n$ protoc greet.proto --go_out=. --go-grpc_out=.\n# 创建 client 目录\n$ mkdir client \u0026\u0026 cd client\n# 新增配置文件\n$ mkdir etc \u0026\u0026 cd etc\n$ touch greet-client.yaml\n# 新增 client.go 文件\n$ touch client.go\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240526191043-duornpb","Type":"NodeParagraph","Properties":{"id":"20240526191043-duornpb","updated":"20240526191043"},"Children":[{"Type":"NodeText","Data":"参考配置及内容如下"}]},{"ID":"20240526191048-20zmzgs","Type":"NodeList","ListData":{},"Properties":{"id":"20240526191048-20zmzgs","updated":"20240526191104"},"Children":[{"ID":"20240526191049-q3ykjdb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240526191049-q3ykjdb","updated":"20240526191104"},"Children":[{"ID":"20240526191049-ui3lqpb","Type":"NodeParagraph","Properties":{"id":"20240526191049-ui3lqpb","updated":"20240526191059"},"Children":[{"Type":"NodeText","Data":"etc/greet-client.yaml"}]},{"ID":"20240526191059-a3cvqqu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240526191059-a3cvqqu","updated":"20240526191104"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"Target: 127.0.0.1:8080\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20240526191104-y9gyyli","Type":"NodeList","ListData":{},"Properties":{"id":"20240526191104-y9gyyli","updated":"20240526191115"},"Children":[{"ID":"20240526191108-v5zitqi","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240526191108-v5zitqi","updated":"20240526191115"},"Children":[{"ID":"20240526191108-f6924ok","Type":"NodeParagraph","Properties":{"id":"20240526191108-f6924ok","updated":"20240526191112"},"Children":[{"Type":"NodeText","Data":"client.go"}]},{"ID":"20240526191112-sbsg2tz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240526191112-sbsg2tz","updated":"20240526191115"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"func main() {\n    var clientConf zrpc.RpcClientConf\n    conf.MustLoad(\"etc/client.yaml\", \u0026clientConf)\n    conn := zrpc.MustNewClient(clientConf)\n    client := greet.NewGreetClient(conn.Conn())\n    resp, err := client.Ping(context.Background(), \u0026greet.Request{})\n    if err != nil {\n        log.Fatal(err)\n        return\n    }\n\n    log.Println(resp)\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]}