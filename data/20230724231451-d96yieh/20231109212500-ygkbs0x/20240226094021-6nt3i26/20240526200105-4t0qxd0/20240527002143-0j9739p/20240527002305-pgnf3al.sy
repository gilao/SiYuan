{"ID":"20240527002305-pgnf3al","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f6f9","id":"20240527002305-pgnf3al","title":"请求参数","type":"doc","updated":"20240527002336"},"Children":[{"ID":"20240527002336-mp5atg2","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240527002336-mp5atg2","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"概述"}]},{"ID":"20240527002336-4kiv617","Type":"NodeParagraph","Properties":{"id":"20240527002336-4kiv617","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"在 go-zero 中，支持通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http.Request"},{"Type":"NodeText","Data":"​ 的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Body"},{"Type":"NodeText","Data":"​ 字段获取请求参数，同时支持通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http.Request"},{"Type":"NodeText","Data":"​ 的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Form"},{"Type":"NodeText","Data":"​ 字段获取请求参数， 其中 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Body"},{"Type":"NodeText","Data":"​ 只接受 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"application/json"},{"Type":"NodeText","Data":"​ 格式的请求参数，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Form"},{"Type":"NodeText","Data":"​ 只接受 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"application/x-www-form-urlencoded"},{"Type":"NodeText","Data":"​ 格式的请求参数， 除此之外，go-zero 还支持 path 参数和请求头参数的获取，他们都是通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"httpx.Parse"},{"Type":"NodeText","Data":"​ 方法将数据解析到结构体中。"}]},{"ID":"20240527002336-xgrktxh","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240527002336-xgrktxh","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"参数用法"}]},{"ID":"20240527002336-5rwgkle","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527002336-5rwgkle","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"Form 表单请求参数"}]},{"ID":"20240527002336-546t7qs","Type":"NodeParagraph","Properties":{"id":"20240527002336-546t7qs","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"对于表单请求参数，go-zero 支持通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"form"},{"Type":"NodeText","Data":"​ tag 来定义参数的名称，其支持 Content-Type 为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"application/x-www-form-urlencoded"},{"Type":"NodeText","Data":"​ 的请求参数，也支持 Get 方法的 query 参数，其写法是在结构体的 tag 中加上 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"form"},{"Type":"NodeText","Data":"​ 关键字，在 tag 中的写法是一个 k-v 结构，key 是固定值 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"form"},{"Type":"NodeText","Data":"​，value 是对应 query 的 key 值。"}]},{"ID":"20240527002336-tw6qh5w","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527002336-tw6qh5w","updated":"20240527002336"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"type Request struct {\n    Name    string  `form:\"name\"` // 必填参数\n    Age     int     `form:\"age,optional\"` // optional定义非必填参数\n}\n\n\nvar req Request\nerr := httpx.Parse(r, \u0026req) // 解析参数\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527002336-9pn33cb","Type":"NodeParagraph","Properties":{"id":"20240527002336-9pn33cb","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"Copy"}]},{"ID":"20240527002336-qr77uh9","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527002336-qr77uh9","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"Json 请求参数"}]},{"ID":"20240527002336-wdqlw0c","Type":"NodeParagraph","Properties":{"id":"20240527002336-wdqlw0c","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"对于 Json 参数请求，其接受来自 Post 请求方法 Content-Type 为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"application/json"},{"Type":"NodeText","Data":"​ 的请求参数，其写法是在结构体的 tag 中加上 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"json"},{"Type":"NodeText","Data":"​ 关键字， 在 tag 中写法是一个 k-v 结构，key 是固定值 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"json"},{"Type":"NodeText","Data":"​，value 是对应 json 的 key 值。"}]},{"ID":"20240527002336-leat51b","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527002336-leat51b","updated":"20240527002336"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"type Request struct {\n    Name string `json:\"name\"`\n    Age  int    `json:\"age\"`\n}\n\nvar req Request\nerr := httpx.Parse(r, \u0026req) // 解析参数\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527002336-uenqtm5","Type":"NodeParagraph","Properties":{"id":"20240527002336-uenqtm5","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"Copy"}]},{"ID":"20240527002336-iy08qcm","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527002336-iy08qcm","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"Path 请求参数"}]},{"ID":"20240527002336-wswkoj2","Type":"NodeParagraph","Properties":{"id":"20240527002336-wswkoj2","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"对于 Path 参数请求，其支持在路径上定义参数，其写法是在结构体的 tag 中加上 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"path"},{"Type":"NodeText","Data":"​ 关键字，用于获取特定的路径参数，其是一个 k-v格式， key 为固定值 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"path"},{"Type":"NodeText","Data":"​，value 为路径参数的变量。"}]},{"ID":"20240527002336-g5c512x","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527002336-g5c512x","updated":"20240527002336"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"type Request struct {\n    Name string `path:\"name\"`\n}\n\n// Path定义\nrest.Route{\n    Method:  http.MethodGet,\n    Path:    \"/user/:name\",\n    Handler: handle,\n}\n\nvar req Request\nerr := httpx.Parse(r, \u0026req) // 解析参数\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527002336-eih3rx6","Type":"NodeParagraph","Properties":{"id":"20240527002336-eih3rx6","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"Copy"}]},{"ID":"20240527002336-th5chqa","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527002336-th5chqa","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"Header 参数获取"}]},{"ID":"20240527002336-tvzal5n","Type":"NodeParagraph","Properties":{"id":"20240527002336-tvzal5n","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"header 参数获取，其写法是在结构体的 tag 中加上 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"header"},{"Type":"NodeText","Data":"​ 关键字，用于获取特定的请求头的值，其是一个 k-v格式， key 为固定值 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"header"},{"Type":"NodeText","Data":"​，value 为请求头的 key 值。"}]},{"ID":"20240527002336-6w1ezyy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527002336-6w1ezyy","updated":"20240527002336"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"type Request struct {\n    Authorization string `header:\"authorization\"`\n}\n\nvar req Request\nerr := httpx.Parse(r, \u0026req) // 解析参数\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527002336-a5y5142","Type":"NodeParagraph","Properties":{"id":"20240527002336-a5y5142","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"Copy"}]},{"ID":"20240527002336-1v9gafg","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240527002336-1v9gafg","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"参数校验"}]},{"ID":"20240527002336-748l152","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527002336-748l152","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"参数可选"}]},{"ID":"20240527002336-ytmt4mt","Type":"NodeParagraph","Properties":{"id":"20240527002336-ytmt4mt","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"在 go-zero 中，参数可选是通过在结构体的tag 中通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"optional"},{"Type":"NodeText","Data":"​ 关键字来实现的，如果参数不是必填的，可以在参数后面加上 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"optional"},{"Type":"NodeText","Data":"​ 关键字，否则就认为是必填参数"}]},{"ID":"20240527002336-wgn4t4g","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527002336-wgn4t4g","updated":"20240527002336"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"type Request struct {\n    Age int `form:\"age, optional\"`\n}\n\nvar req Request\nerr := httpx.Parse(r, \u0026req) // 解析参数\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527002336-z0sa0cc","Type":"NodeParagraph","Properties":{"id":"20240527002336-z0sa0cc","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"Copy"}]},{"ID":"20240527002336-45ovymh","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20240527002336-45ovymh","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"Tip"}]},{"ID":"20240527002336-lfpij35","Type":"NodeParagraph","Properties":{"id":"20240527002336-lfpij35","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"对于必填参数，如果没有传递参数，会返回如下类似错误。"}]},{"ID":"20240527002336-a3i4d3i","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527002336-a3i4d3i","updated":"20240527002336"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"dW5kZWZpbmVk"},{"Type":"NodeCodeBlockCode","Data":"field age is not set\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527002336-t01fcy4","Type":"NodeParagraph","Properties":{"id":"20240527002336-t01fcy4","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"Copy"}]},{"ID":"20240527002336-osvdt3g","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527002336-osvdt3g","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"参数区间定义"}]},{"ID":"20240527002336-ggmc5xk","Type":"NodeParagraph","Properties":{"id":"20240527002336-ggmc5xk","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"go-zero 提供了参数区间的定义，可以通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"range"},{"Type":"NodeText","Data":"​ 关键字来定义参数的区间，其写法是在结构体的 tag 中加上 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"range"},{"Type":"NodeText","Data":"​ 关键字，其写法格式为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"range=$range_expression"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20240527002336-r1s1m25","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527002336-r1s1m25","updated":"20240527002336"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"type Request struct {\n    Age int `form:\"age,range=[18:35)\"`\n}\n\nvar req Request\nerr := httpx.Parse(r, \u0026req) // 解析参数\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527002336-76finei","Type":"NodeParagraph","Properties":{"id":"20240527002336-76finei","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"Copy"}]},{"ID":"20240527002336-cv5xxvt","Type":"NodeParagraph","Properties":{"id":"20240527002336-cv5xxvt","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"关于参数区间的详细说明请参考 api 语法 "},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://go-zero.dev/docs/tutorials/api/parameter","TextMarkTextContent":"参数规则"}]},{"ID":"20240527002336-nld93vz","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527002336-nld93vz","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"参数枚举值"}]},{"ID":"20240527002336-trxju35","Type":"NodeParagraph","Properties":{"id":"20240527002336-trxju35","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"go-zero 提供了参数枚举值的定义，可以通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"options"},{"Type":"NodeText","Data":"​ 关键字来定义参数的枚举值，其写法是在结构体的 tag 中加上 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"options"},{"Type":"NodeText","Data":"​ 关键字，其写法格式为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"options=$option_expression"},{"Type":"NodeText","Data":"​。枚举值以英文逗号分割，例如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"options=18|19"},{"Type":"NodeText","Data":"​，其含义表示为仅接受 18 和 19 两个值，除此外都是非法值。"}]},{"ID":"20240527002336-rjruhv6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527002336-rjruhv6","updated":"20240527002336"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"type Request struct {\n    Age int `form:\"age,options=18|19\"`\n}\n\nvar req Request\nerr := httpx.Parse(r, \u0026req) // 解析参数\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527002336-w5jzdkx","Type":"NodeParagraph","Properties":{"id":"20240527002336-w5jzdkx","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"Copy"}]},{"ID":"20240527002336-n3nn0nc","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527002336-n3nn0nc","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"参数默认值"}]},{"ID":"20240527002336-oeec47z","Type":"NodeParagraph","Properties":{"id":"20240527002336-oeec47z","updated":"20240527002336"},"Children":[{"Type":"NodeText","Data":"go-zero 提供了参数默认值的定义，可以通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"default"},{"Type":"NodeText","Data":"​ 关键字来定义参数的默认值，其写法是在结构体的 tag 中加上 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"default"},{"Type":"NodeText","Data":"​ 关键字，其写法格式为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"default=$default_value"},{"Type":"NodeText","Data":"​，其功能是可选参数的扩充，可选参数默认值为零值。"}]},{"ID":"20240527002336-dep47v0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527002336-dep47v0","updated":"20240527002336"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"type Request struct {\n    Age int `form:\"age,default=18\"`\n}\n\nvar req Request\nerr := httpx.Parse(r, \u0026req) // 解析参数\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527002305-d4kt5n3","Type":"NodeParagraph","Properties":{"id":"20240527002305-d4kt5n3","updated":"20240527002336"}}]}