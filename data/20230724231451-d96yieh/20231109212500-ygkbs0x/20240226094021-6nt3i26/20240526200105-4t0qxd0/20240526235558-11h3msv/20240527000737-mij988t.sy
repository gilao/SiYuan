{"ID":"20240527000737-mij988t","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2328-fe0f","id":"20240527000737-mij988t","title":"goctl kube","type":"doc","updated":"20240527000808"},"Children":[{"ID":"20240527000808-h6kfi8o","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240527000808-h6kfi8o","updated":"20240527000808"},"Children":[{"Type":"NodeText","Data":"概述"}]},{"ID":"20240527000808-yii6y12","Type":"NodeParagraph","Properties":{"id":"20240527000808-yii6y12","updated":"20240527000809"},"Children":[{"Type":"NodeText","Data":"goctl kube 可以快速生成 kubernetes deployment 资源文件。"}]},{"ID":"20240527000808-u0nro7e","Type":"NodeParagraph","Properties":{"id":"20240527000808-u0nro7e","updated":"20240527000809"},"Children":[{"Type":"NodeText","Data":"头疼的 k8s yaml 文件编写？相信你也遇到过："}]},{"ID":"20240527000808-pdv61cc","Type":"NodeList","ListData":{},"Properties":{"id":"20240527000808-pdv61cc","updated":"20240527000809"},"Children":[{"ID":"20240527000808-l36pz24","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240527000808-l36pz24","updated":"20240527000808"},"Children":[{"ID":"20240527000808-que020x","Type":"NodeParagraph","Properties":{"id":"20240527000808-que020x","updated":"20240527000808"},"Children":[{"Type":"NodeText","Data":"K8S yaml 参数很多，需要边写边查？"}]}]},{"ID":"20240527000808-38bcw33","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240527000808-38bcw33","updated":"20240527000808"},"Children":[{"ID":"20240527000808-08c1g8j","Type":"NodeParagraph","Properties":{"id":"20240527000808-08c1g8j","updated":"20240527000808"},"Children":[{"Type":"NodeText","Data":"保留回滚版本数怎么设？"}]}]},{"ID":"20240527000808-l74sncp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240527000808-l74sncp","updated":"20240527000808"},"Children":[{"ID":"20240527000808-xjp4my6","Type":"NodeParagraph","Properties":{"id":"20240527000808-xjp4my6","updated":"20240527000808"},"Children":[{"Type":"NodeText","Data":"如何探测启动成功，如何探活？"}]}]},{"ID":"20240527000808-g92lruf","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240527000808-g92lruf","updated":"20240527000808"},"Children":[{"ID":"20240527000808-8o99h0g","Type":"NodeParagraph","Properties":{"id":"20240527000808-8o99h0g","updated":"20240527000808"},"Children":[{"Type":"NodeText","Data":"如何分配和限制资源？"}]}]},{"ID":"20240527000808-67fgmmi","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240527000808-67fgmmi","updated":"20240527000808"},"Children":[{"ID":"20240527000808-8r0lkou","Type":"NodeParagraph","Properties":{"id":"20240527000808-8r0lkou","updated":"20240527000808"},"Children":[{"Type":"NodeText","Data":"如何设置时区？否则打印日志是 GMT 标准时间"}]}]},{"ID":"20240527000808-51cg0rj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240527000808-51cg0rj","updated":"20240527000808"},"Children":[{"ID":"20240527000808-v6quunv","Type":"NodeParagraph","Properties":{"id":"20240527000808-v6quunv","updated":"20240527000808"},"Children":[{"Type":"NodeText","Data":"如何暴露服务供其它服务调用？"}]}]},{"ID":"20240527000808-cqk85b1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240527000808-cqk85b1","updated":"20240527000808"},"Children":[{"ID":"20240527000808-7cw392t","Type":"NodeParagraph","Properties":{"id":"20240527000808-7cw392t","updated":"20240527000808"},"Children":[{"Type":"NodeText","Data":"如何根据 CPU 和内存使用率来配置水平伸缩？"}]}]}]},{"ID":"20240527000808-wamz4kl","Type":"NodeParagraph","Properties":{"id":"20240527000808-wamz4kl","updated":"20240527000809"},"Children":[{"Type":"NodeText","Data":"首先，你需要知道有这些知识点，其次要把这些知识点都搞明白也不容易，再次，每次编写依然容易出错！"}]},{"ID":"20240527000808-cnyw8qa","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240527000808-cnyw8qa","updated":"20240527000808"},"Children":[{"Type":"NodeText","Data":"goctl kube 指令"}]},{"ID":"20240527000808-5n3uch2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527000808-5n3uch2","updated":"20240527000809"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"$ goctl kube --help\nGenerate kubernetes files\n\nUsage:\n  goctl kube [command]\n\nAvailable Commands:\n  deploy      Generate deployment yaml file\n\nFlags:\n  -h, --help   help for kube\n\n\nUse \"goctl kube [command] --help\" for more information about a command.\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527000808-dtmt3h7","Type":"NodeParagraph","Properties":{"id":"20240527000808-dtmt3h7","updated":"20240527000809"},"Children":[{"Type":"NodeText","Data":"Copy"}]},{"ID":"20240527000808-lxg8u4r","Type":"NodeParagraph","Properties":{"id":"20240527000808-lxg8u4r","updated":"20240527000809"},"Children":[{"Type":"NodeText","Data":"goctl kube 目前支持生成 deployment yaml 文件。"}]},{"ID":"20240527000808-0d7kwkj","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240527000808-0d7kwkj","updated":"20240527000809"},"Children":[{"Type":"NodeText","Data":"goctl kube deploy 指令"}]},{"ID":"20240527000808-2ya7hfb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527000808-2ya7hfb","updated":"20240527000809"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"$ goctl kube deploy --help\nGenerate deployment yaml file\n\nUsage:\n  goctl kube deploy [flags]\n\nFlags:\n      --branch string            The branch of the remote repo, it does work with --remote\n  -h, --help                     help for deploy\n      --home string              The goctl home path of the template, --home and --remote cannot be set at the same time, if they are, --remote has higher priority\n      --image string             The docker image of deployment (required)\n      --imagePullPolicy string   Image pull policy. One of Always, Never, IfNotPresent\n      --limitCpu int             The limit cpu to deploy (default 1000)\n      --limitMem int             The limit memory to deploy (default 1024)\n      --maxReplicas int          The max replicas to deploy (default 10)\n      --minReplicas int          The min replicas to deploy (default 3)\n      --name string              The name of deployment (required)\n      --namespace string         The namespace of deployment (required)\n      --nodePort int             The nodePort of the deployment to expose\n      --o string                 The output yaml file (required)\n      --port int                 The port of the deployment to listen on pod (required)\n      --remote string            The remote git repo of the template, --home and --remote cannot be set at the same time, if they are, --remote has higher priority\n                                 The git repo directory must be consistent with the https://github.com/zeromicro/go-zero-template directory structure\n      --replicas int             The number of replicas to deploy (default 3)\n      --requestCpu int           The request cpu to deploy (default 500)\n      --requestMem int           The request memory to deploy (default 512)\n      --revisions int            The number of revision history to limit (default 5)\n      --secret string            The secret to image pull from registry\n      --serviceAccount string    The ServiceAccount for the deployment\n      --targetPort int           The targetPort of the deployment, default to port\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527000808-vp2bbs4","Type":"NodeParagraph","Properties":{"id":"20240527000808-vp2bbs4","updated":"20240527000809"},"Children":[{"Type":"NodeText","Data":"Copy"}]},{"ID":"20240527000808-76gpat2","Type":"NodeTable","TableAligns":[0,0,0,0,0],"Properties":{"colgroup":"||||","id":"20240527000808-76gpat2","updated":"20240527000809"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"参数字段"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"参数类型"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"是否必填"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"默认值"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"参数说明"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"branch"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"NO"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"空字符串"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"远程模板所在 git 分支名称，仅当 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"remote"},{"Type":"NodeText","Data":"​ 有值时使用"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"home"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"NO"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"${HOME}/.goctl"},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"本地模板文件目录"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"image"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"YES"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"空字符串"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"镜像名称"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"imagePullPolicy"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"YES"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"空字符串"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"镜像拉取策略，Always：总是拉取，Never：从不拉取，IfNotPresent：不存在时拉取"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"limitCpu"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"NO"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"1000"},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"cpu 资源使用上限"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"limitMem"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"NO"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"1024"},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"内存资源使用上限"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"maxReplicas"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"NO"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"10"},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"最大保副本数"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"minReplicas"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"NO"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"3"},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"最小保副本数"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"name"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"YES"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"空字符串"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"deployment 名称"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"namespace"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"YES"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"空字符串"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"k8s 域名空间"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"nodePort"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"YES"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"0"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"需要暴露的服务端口"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"o"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"YES"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"空字符串"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"yaml 文件名称"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"port"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"YES"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"0"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"需要监听的端口"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"remote"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"NO"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"空字符串"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"远程模板所在 git 仓库地址，当此字段传值时，优先级高于 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"home"},{"Type":"NodeText","Data":"​ 字段值"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"replicas"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"NO"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"3"},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"副本数"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"requestCpu"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"NO"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"500"},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"cpu 需求额度"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"requestMem"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"NO"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"512"},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"内存需求额度"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"revisions"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"NO"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"1"},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"保留的版本数量，便于回滚"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"secret"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"NO"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"空字符串"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"拉取镜像的密钥"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"serviceAccount"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"NO"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"空字符串"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"服务账户"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"targetPort"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"NO"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"0"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"目标 port"}]}]}]},{"ID":"20240527000808-xpzcrzm","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240527000808-xpzcrzm","updated":"20240527000808"},"Children":[{"Type":"NodeText","Data":"使用示例"}]},{"ID":"20240527000808-1cghdzy","Type":"NodeParagraph","Properties":{"id":"20240527000808-1cghdzy","updated":"20240527000809"},"Children":[{"Type":"NodeText","Data":"我们以 redis 镜像为例子演示如何使用 goctl kube deploy 指令生成 deployment yaml 文件。"}]},{"ID":"20240527000808-6rgibwb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527000808-6rgibwb","updated":"20240527000809"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"$ goctl kube deploy -name redis -namespace adhoc -image redis:6-alpine -o redis.yaml -port 6379\nDone.\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527000808-sc55j8b","Type":"NodeParagraph","Properties":{"id":"20240527000808-sc55j8b","updated":"20240527000809"},"Children":[{"Type":"NodeText","Data":"Copy"}]},{"ID":"20240527000808-4iu48xb","Type":"NodeParagraph","Properties":{"id":"20240527000808-4iu48xb","updated":"20240527000809"},"Children":[{"Type":"NodeText","Data":"执行上述命令后，会在当前目录下生成 redis.yaml 文件，内容如下："}]},{"ID":"20240527000808-3l7gak5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240527000808-3l7gak5","updated":"20240527000809"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"eWFtbA=="},{"Type":"NodeCodeBlockCode","Data":"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: redis\n  namespace: adhoc\n  labels:\n    app: redis\nspec:\n  replicas: 3\n  revisionHistoryLimit: 5\n  selector:\n    matchLabels:\n      app: redis\n  template:\n    metadata:\n      labels:\n        app: redis\n    spec:\n      containers:\n      - name: redis\n        image: redis:6-alpine\n        ports:\n        - containerPort: 6379\n        readinessProbe:\n          tcpSocket:\n            port: 6379\n          initialDelaySeconds: 5\n          periodSeconds: 10\n        livenessProbe:\n          tcpSocket:\n            port: 6379\n          initialDelaySeconds: 15\n          periodSeconds: 20\n        resources:\n          requests:\n            cpu: 500m\n            memory: 512Mi\n          limits:\n            cpu: 1000m\n            memory: 1024Mi\n        volumeMounts:\n        - name: timezone\n          mountPath: /etc/localtime\n      volumes:\n        - name: timezone\n          hostPath:\n            path: /usr/share/zoneinfo/Asia/Shanghai\n\n---\n\napiVersion: v1\nkind: Service\nmetadata:\n  name: redis-svc\n  namespace: adhoc\nspec:\n  ports:\n  - port: 6379\n    targetPort: 6379\n  selector:\n    app: redis\n\n---\n\napiVersion: autoscaling/v2beta1\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: redis-hpa-c\n  namespace: adhoc\n  labels:\n    app: redis-hpa-c\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: redis\n  minReplicas: 3\n  maxReplicas: 10\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      targetAverageUtilization: 80\n\n---\n\napiVersion: autoscaling/v2beta1\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: redis-hpa-m\n  namespace: adhoc\n  labels:\n    app: redis-hpa-m\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: redis\n  minReplicas: 3\n  maxReplicas: 10\n  metrics:\n  - type: Resource\n    resource:\n      name: memory\n      targetAverageUtilization: 80\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240527000737-imi51sf","Type":"NodeParagraph","Properties":{"id":"20240527000737-imi51sf","updated":"20240527000809"}}]}