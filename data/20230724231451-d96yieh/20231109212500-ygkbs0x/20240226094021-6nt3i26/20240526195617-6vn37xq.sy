{"ID":"20240526195617-6vn37xq","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f30e","id":"20240526195617-6vn37xq","title":"队列","type":"doc","updated":"20240526195841"},"Children":[{"ID":"20240526195624-rj8p8me","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240526195624-rj8p8me","updated":"20240526195632"},"Children":[{"Type":"NodeText","Data":"消息队列"}]},{"ID":"20240526195639-j32wecu","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240526195639-j32wecu","updated":"20240526195639"},"Children":[{"Type":"NodeText","Data":"概述"}]},{"ID":"20240526195639-kuu4s4h","Type":"NodeParagraph","Properties":{"id":"20240526195639-kuu4s4h","updated":"20240526195640"},"Children":[{"Type":"NodeText","Data":"消息队列是一种应用程序间通信的方式，它可以实现异步通信，提高系统的可用性和可扩展性。在 go-zero 中，我们使用了 "},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://github.com/zeromicro/go-queue","TextMarkTextContent":"go-queue"}]},{"ID":"20240526195647-5rjw5ra","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240526195647-5rjw5ra","updated":"20240526195647"},"Children":[{"Type":"NodeText","Data":"生产者"}]},{"ID":"20240526195647-k8j6b23","Type":"NodeParagraph","Properties":{"id":"20240526195647-k8j6b23","updated":"20240526195647"},"Children":[{"Type":"NodeText","Data":"go-queue 生产者很简单，只需要 kafka 地址，topic 即可创建一个 Pusher 对象。"}]},{"ID":"20240526195647-36voyng","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240526195647-36voyng","updated":"20240526195647"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"NewPusher(addrs []string, topic string, opts ...PushOption)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240526195654-pzvzttr","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240526195654-pzvzttr","updated":"20240526195654"},"Children":[{"Type":"NodeText","Data":"代码示例1"}]},{"ID":"20240526195654-a8pi22c","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240526195654-a8pi22c","updated":"20240526195654"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"pusher := kq.NewPusher([]string{\n    \"127.0.0.1:19092\",\n    \"127.0.0.1:19093\",\n    \"127.0.0.1:19094\",\n}, \"test\")\n\nif err:=pusher.Push(\"foo\");err!=nil{\n    log.Fatal(err)\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240526195704-x5yqskl","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240526195704-x5yqskl","updated":"20240526195704"},"Children":[{"Type":"NodeText","Data":"消费者"}]},{"ID":"20240526195704-aw1h16b","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240526195704-aw1h16b","updated":"20240526195705"},"Children":[{"Type":"NodeText","Data":"配置介绍"}]},{"ID":"20240526195704-qp12lrn","Type":"NodeParagraph","Properties":{"id":"20240526195704-qp12lrn","updated":"20240526195705"},"Children":[{"Type":"NodeText","Data":"kq 的配置结构体声明如下："}]},{"ID":"20240526195704-kz0p3n9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240526195704-kz0p3n9","updated":"20240526195705"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"type KqConf struct {\n    service.ServiceConf\n    Brokers     []string\n    Group       string\n    Topic       string\n    Offset      string `json:\",options=first|last,default=last\"`\n    Conns       int    `json:\",default=1\"`\n    Consumers   int    `json:\",default=8\"`\n    Processors  int    `json:\",default=8\"`\n    MinBytes    int    `json:\",default=10240\"`    // 10K\n    MaxBytes    int    `json:\",default=10485760\"` // 10M\n    Username    string `json:\",optional\"`\n    Password    string `json:\",optional\"`\n    ForceCommit bool   `json:\",default=true\"`\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240526195704-g21lnj4","Type":"NodeParagraph","Properties":{"id":"20240526195704-g21lnj4","updated":"20240526195705"},"Children":[{"Type":"NodeText","Data":"service.ServiceConf 请参考 "},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://go-zero.dev/docs/tutorials/go-zero/configuration/service","TextMarkTextContent":"基础服务配置"}]},{"ID":"20240526195704-36w8z59","Type":"NodeTable","TableAligns":[0,0,0,0,0],"Properties":{"colgroup":"||||","id":"20240526195704-36w8z59","updated":"20240526195705"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"参数"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"类型"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"是否必填"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"默认值"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"说明"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Brokers"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"[]string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"是"}]},{"Type":"NodeTableCell","Data":"td"},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"kafka 集群地址"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Group"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"是"}]},{"Type":"NodeTableCell","Data":"td"},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"消费者组"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Topic"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"是"}]},{"Type":"NodeTableCell","Data":"td"},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"消息主题"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Offset"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"last"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"消费者消费的起始位置，可选值为 first 和 last"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Conns"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"1"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"连接数"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Consumers"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"8"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"消费者数"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Processors"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"8"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"消息处理器数"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"MinBytes"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"10240"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"消息最小字节数"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"MaxBytes"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"int"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"10485760"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"消息最大字节数"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Username"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td"},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"用户名"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Password"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td"},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"密码"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"ForceCommit"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"bool"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"true"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"是否强制提交"}]}]}]},{"ID":"20240526195704-z6tfu6h","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240526195704-z6tfu6h","updated":"20240526195705"},"Children":[{"Type":"NodeText","Data":"代码示例2"}]},{"ID":"20240526195714-uingp47","Type":"NodeList","ListData":{},"Properties":{"id":"20240526195714-uingp47","updated":"20240526195719"},"Children":[{"ID":"20240526195719-9ijf8bs","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240526195719-9ijf8bs","updated":"20240526195719"},"Children":[{"ID":"20240526195719-b01y5df","Type":"NodeParagraph","Properties":{"id":"20240526195719-b01y5df","updated":"20240526195725"},"Children":[{"Type":"NodeText","Data":"config.yaml"}]},{"ID":"20240526195725-p4hq0jd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240526195725-p4hq0jd","updated":"20240526195730"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"Name: kq\nBrokers:\n- 127.0.0.1:19092\n- 127.0.0.1:19093\n- 127.0.0.1:19094\nGroup: foo\nTopic: test\nOffset: first\nConsumers: 1\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20240526195735-75v21mr","Type":"NodeList","ListData":{},"Properties":{"id":"20240526195735-75v21mr","updated":"20240526195747"},"Children":[{"ID":"20240526195736-g60zewu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240526195736-g60zewu","updated":"20240526195747"},"Children":[{"ID":"20240526195736-euxs3k9","Type":"NodeParagraph","Properties":{"id":"20240526195736-euxs3k9","updated":"20240526195739"},"Children":[{"Type":"NodeText","Data":"main.go"}]},{"ID":"20240526195741-yn1jmnu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240526195741-yn1jmnu","updated":"20240526195747"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport (\n    \"fmt\"\n\n    \"github.com/zeromicro/go-queue/kq\"\n    \"github.com/zeromicro/go-zero/core/conf\"\n)\n\nfunc main() {\n    var c kq.KqConf\n    conf.MustLoad(\"config.yaml\", \u0026c)\n\n    q := kq.MustNewQueue(c, kq.WithHandle(func(k, v string) error {\n        fmt.Printf(\"=\u003e %s\\n\", v)\n        return nil\n    }))\n    defer q.Stop()\n    q.Start()\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20240526195748-hblpqwa","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240526195748-hblpqwa","updated":"20240526195810"},"Children":[{"Type":"NodeText","Data":"延时队列"}]},{"ID":"20240526195811-idkwn6e","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240526195811-idkwn6e","updated":"20240526195814"},"Children":[{"Type":"NodeText","Data":"概述"}]},{"ID":"20240526195820-ku3gtv7","Type":"NodeParagraph","Properties":{"id":"20240526195820-ku3gtv7","updated":"20240526195820"},"Children":[{"Type":"NodeText","Data":"延时队列是一种特殊的队列，它的元素只有在指定的延时时间到达之后才能被消费。延时队列的实现通常依赖于定时任务，定时任务会定期扫描队列中的元素，将到期的元素移动到另一个队列中，消费者从这个队列中消费元素。"}]},{"ID":"20240526195820-usfzlq1","Type":"NodeParagraph","Properties":{"id":"20240526195820-usfzlq1","updated":"20240526195820"},"Children":[{"Type":"NodeText","Data":"在 go-zero 中我们使用 "},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://github.com/zeromicro/go-queue","TextMarkTextContent":"go-queue"},{"Type":"NodeText","Data":" 来实现延时队列。"}]},{"ID":"20240526195832-uwjm4su","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240526195832-uwjm4su","updated":"20240526195832"},"Children":[{"Type":"NodeText","Data":"生产者"}]},{"ID":"20240526195832-li36xpl","Type":"NodeParagraph","Properties":{"id":"20240526195832-li36xpl","updated":"20240526195832"},"Children":[{"Type":"NodeText","Data":"dq 生产者很简单，只需要 beanstalkd 地址，tube 即可创建一个 Producer 对象。"}]},{"ID":"20240526195832-yjua271","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240526195832-yjua271","updated":"20240526195832"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"type Beanstalk struct {\n  Endpoint string // beanstalkd 地址\n  Tube     string // tube 名称\n}\n\nNewProducer(beanstalks []Beanstalk) Producer\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240526195832-1he91he","Type":"NodeParagraph","Properties":{"id":"20240526195832-1he91he","updated":"20240526195832"},"Children":[{"Type":"NodeText","Data":"Copy"}]},{"ID":"20240526195832-8wfjt52","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240526195832-8wfjt52","updated":"20240526195832"},"Children":[{"Type":"NodeText","Data":"代码示例"}]},{"ID":"20240526195832-qlodk6a","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240526195832-qlodk6a","updated":"20240526195832"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport (\n    \"fmt\"\n    \"strconv\"\n    \"time\"\n\n    \"github.com/zeromicro/go-queue/dq\"\n)\n\nfunc main() {\n    producer := dq.NewProducer([]dq.Beanstalk{\n        {\n            Endpoint: \"localhost:11300\",\n            Tube:     \"tube\",\n        },\n        {\n            Endpoint: \"localhost:11301\",\n            Tube:     \"tube\",\n        },\n    })\n\n    // 延迟 5s 后处理\n    _, err := producer.Delay([]byte(\"hello\"), time.Second*5)\n    if err != nil {\n        fmt.Println(err)\n    }\n\n    // 在指定时间点处理\n    _, err = producer.At([]byte(\"hello\"), time.Now().Add(time.Second*10))\n    if err != nil {\n        fmt.Println(err)\n    }\n}\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240526195832-ae4qgq9","Type":"NodeParagraph","Properties":{"id":"20240526195832-ae4qgq9","updated":"20240526195832"},"Children":[{"Type":"NodeText","Data":"Copy"}]},{"ID":"20240526195832-wc5mylr","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240526195832-wc5mylr","updated":"20240526195832"},"Children":[{"Type":"NodeText","Data":"消费者"}]},{"ID":"20240526195832-bwh65u1","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240526195832-bwh65u1","updated":"20240526195832"},"Children":[{"Type":"NodeText","Data":"配置介绍"}]},{"ID":"20240526195832-m6l4ohq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240526195832-m6l4ohq","updated":"20240526195832"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"type DqConf struct {\n  Beanstalks []Beanstalk\n  Redis      redis.RedisConf\n}\n\ntype Beanstalk struct {\n  Endpoint string // beanstalkd 地址\n  Tube     string // tube 名称\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240526195832-xbgf4yg","Type":"NodeParagraph","Properties":{"id":"20240526195832-xbgf4yg","updated":"20240526195832"},"Children":[{"Type":"NodeText","Data":"Copy"}]},{"ID":"20240526195832-d5zyyoy","Type":"NodeTable","TableAligns":[0,0,0,0,0],"Properties":{"colgroup":"||||","id":"20240526195832-d5zyyoy","updated":"20240526195832"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"参数"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"类型"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"是否必填"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"默认值"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"说明"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Beanstalks"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"[]Beanstalk"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"是"}]},{"Type":"NodeTableCell","Data":"td"},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"beanstalkd 配置"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Redis"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"RedisConf"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"是"}]},{"Type":"NodeTableCell","Data":"td"},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"redis 配置，详情参考"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://go-zero.dev/docs/tutorials/go-zero/configuration/redis","TextMarkTextContent":"Redis 配置"}]}]}]},{"ID":"20240526195832-l27vk4m","Type":"NodeParagraph","Properties":{"id":"20240526195832-l27vk4m","updated":"20240526195832"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Beanstalk"}]},{"ID":"20240526195832-jm7vqz9","Type":"NodeTable","TableAligns":[0,0,0,0,0],"Properties":{"colgroup":"||||","id":"20240526195832-jm7vqz9","updated":"20240526195832"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"参数"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"类型"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"是否必填"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"默认值"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"说明"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Endpoint"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"是"}]},{"Type":"NodeTableCell","Data":"td"},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"beanstalkd 地址"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Tube"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"string"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"是"}]},{"Type":"NodeTableCell","Data":"td"},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"tube 名称"}]}]}]},{"ID":"20240526195832-yjnl7dn","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240526195832-yjnl7dn","updated":"20240526195832"},"Children":[{"Type":"NodeText","Data":"示例"}]},{"ID":"20240526195832-0gkkku0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240526195832-0gkkku0","updated":"20240526195840"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z28="},{"Type":"NodeCodeBlockCode","Data":"package main\n\nimport (\n    \"fmt\"\n\n    \"github.com/zeromicro/go-queue/dq\"\n    \"github.com/zeromicro/go-zero/core/stores/redis\"\n)\n\nfunc main() {\n    consumer := dq.NewConsumer(dq.DqConf{\n        Beanstalks: []dq.Beanstalk{\n            {\n                Endpoint: \"localhost:11300\",\n                Tube:     \"tube\",\n            },\n            {\n                Endpoint: \"localhost:11301\",\n                Tube:     \"tube\",\n            },\n        },\n        Redis: redis.RedisConf{\n            Host: \"localhost:6379\",\n            Type: redis.NodeType,\n        },\n    })\n    consumer.Consume(func(body []byte) {\n        fmt.Println(string(body))\n    })\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240526195841-53n6uu0","Type":"NodeParagraph","Properties":{"id":"20240526195841-53n6uu0"}}]}