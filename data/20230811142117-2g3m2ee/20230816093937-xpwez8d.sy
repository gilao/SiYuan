{"ID":"20230816093937-xpwez8d","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f9de","id":"20230816093937-xpwez8d","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20230816093937-xpwez8d\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20230816093937-3ovfg8w\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20230816101012-ek94wv7\u0026quot;,\u0026quot;scrollTop\u0026quot;:483\u0026#125;","title":"关于大模型启动脚本的python问题及后续Go框架设计思路","updated":"20230816105734"},"Children":[{"ID":"20230816093937-3ovfg8w","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230816093937-3ovfg8w","updated":"20230816094128"},"Children":[{"Type":"NodeText","Data":"大模型启动脚本的几个问题"}]},{"ID":"20230816094128-fvhnv83","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230816094128-fvhnv83","updated":"20230816095818"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"class LocalDocQA:\n    llm: BaseAnswer = None\n    embeddings: object = None\n    top_k: int = VECTOR_SEARCH_TOP_K\n    chunk_size: int = CHUNK_SIZE\n    chunk_conent: bool = True\n    score_threshold: int = VECTOR_SEARCH_SCORE_THRESHOLD\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230816095930-a6dhnst","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230816095930-a6dhnst","updated":"20230816100208"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"LocalDocQA.llm.generatorAnswer()"},{"Type":"NodeText","Data":"​​​​​"}]},{"ID":"20230816100214-kceg64m","Type":"NodeParagraph","Properties":{"id":"20230816100214-kceg64m","updated":"20230816100326"},"Children":[{"Type":"NodeText","Data":"调用的方法是否为 llm大模型，"}]},{"ID":"20230816100330-w5n3fuv","Type":"NodeParagraph","Properties":{"id":"20230816100330-w5n3fuv","updated":"20230816100426"},"Children":[{"Type":"NodeText","Data":"目前未调研golang是否有该模型的调用方法，如果没有，需要使用python来调用大模型生成回答，"}]},{"ID":"20230816100636-xacf1hv","Type":"NodeParagraph","Properties":{"id":"20230816100636-xacf1hv"}},{"ID":"20230816101018-p49p7jo","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230816101018-p49p7jo","updated":"20230816101543"},"Children":[{"Type":"NodeText","Data":"通过向量来计算得出相关文档及路径要用golang重构吗，"}]},{"ID":"20230816101546-9o7a2c2","Type":"NodeParagraph","Properties":{"id":"20230816101546-9o7a2c2","updated":"20230816101555"},"Children":[{"Type":"NodeText","Data":"python与golang的速度哪个更快需要测试调研"}]},{"ID":"20230816101016-ej88d2a","Type":"NodeParagraph","Properties":{"id":"20230816101016-ej88d2a"}},{"ID":"20230816100637-zqrzvmq","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230816100637-zqrzvmq","updated":"20230816100718"},"Children":[{"Type":"NodeText","Data":"该模型是否历史记录是否与每个用户对应"}]},{"ID":"20230816100719-i3syerv","Type":"NodeParagraph","Properties":{"id":"20230816100719-i3syerv","updated":"20230816100821"},"Children":[{"Type":"NodeText","Data":"通过阅读代码，发现历史数据是整合所有的请求结果，是否我的理解有偏差"}]},{"ID":"20230816101012-9vmckpx","Type":"NodeParagraph","Properties":{"id":"20230816101012-9vmckpx"}},{"ID":"20230816101012-ek94wv7","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230816101012-ek94wv7","updated":"20230816101811"},"Children":[{"Type":"NodeText","Data":"后续golang框架封装可能需要更加详细的理解该启动脚本"}]},{"ID":"20230816101751-zxh4d9x","Type":"NodeParagraph","Properties":{"id":"20230816101751-zxh4d9x"}},{"ID":"20230816101818-8lp2gds","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230816101818-8lp2gds","updated":"20230816101832"},"Children":[{"Type":"NodeText","Data":"Go 框架的设计思路"}]},{"ID":"20230816101832-ugrtm0c","Type":"NodeList","ListData":{},"Properties":{"id":"20230816101832-ugrtm0c","updated":"20230816105713"},"Children":[{"ID":"20230816103804-tpp96vb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230816103804-tpp96vb","updated":"20230816103804"},"Children":[{"ID":"20230816103804-iuo46wt","Type":"NodeParagraph","Properties":{"id":"20230816103804-iuo46wt","updated":"20230816104000"},"Children":[{"Type":"NodeText","Data":"通过python调用大模型，获取大模型的回答结果，与python的数据通信方案目前确定为基于共享内存实现，"}]}]},{"ID":"20230816104003-jc1kj9z","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230816104003-jc1kj9z"},"Children":[{"ID":"20230816104003-rbf9bth","Type":"NodeParagraph","Properties":{"id":"20230816104003-rbf9bth","updated":"20230816104825"},"Children":[{"Type":"NodeText","Data":"基于Go的Gin框架实现大模型的外部封装，可以通过web接口方式实现问答系统。后续可基于实际需要进行gRPC和其他微服务框架的开发；Go 的框架目前常用的有 gin、go-zero、Go-micro等"}]}]},{"ID":"20230816104821-e4dv0a7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230816104821-e4dv0a7"},"Children":[{"ID":"20230816104821-33yym30","Type":"NodeParagraph","Properties":{"id":"20230816104821-33yym30","updated":"20230816105247"},"Children":[{"Type":"NodeText","Data":"设计缓存结构，目前有两种缓存方案，一种是基于Go的内存缓存实现，另一种是基于Redis缓存实现，两种方案各有优劣，基于原有的python代码，优先选择内存缓存实现，后续可以基于实际情况进行更改"}]}]},{"ID":"20230816105249-32ggkru","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230816105249-32ggkru"},"Children":[{"ID":"20230816105249-gmbznc5","Type":"NodeParagraph","Properties":{"id":"20230816105249-gmbznc5","updated":"20230816105628"},"Children":[{"Type":"NodeText","Data":"实现并发控制，实现程序的并发，同时保证大模型的正常运行，将同一时间下的其他请求缓存排队，待原有的请求结束后处理后续的问题"}]}]},{"ID":"20230816105633-l8gk5mg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230816105633-l8gk5mg","updated":"20230816105713"},"Children":[{"ID":"20230816105633-6cxfgz2","Type":"NodeParagraph","Properties":{"id":"20230816105633-6cxfgz2","updated":"20230816105713"},"Children":[{"Type":"NodeText","Data":"用户历史设计，是否要开发基于每个用户加载其历史数据。"}]}]}]},{"ID":"20230816105733-0y0eitr","Type":"NodeParagraph","Properties":{"id":"20230816105733-0y0eitr","updated":"20230816105733"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20230816105733-nqspwst.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20230816105734-z7ardcn","Type":"NodeParagraph","Properties":{"id":"20230816105734-z7ardcn"}}]}