{"ID":"20230724003015-5kj7x2o","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230724003015-5kj7x2o","title":"3. vsftp","updated":"20230724003015"},"Children":[{"ID":"20230724003016-73bue5r","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230724003016-73bue5r","updated":"20230724003016"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeText","Data":"3. vsftp"}]},{"ID":"20230724003017-mrijkvs","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724003017-mrijkvs","updated":"20230724003017"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"一、vsftp 安装"}]},{"ID":"20230724003018-t6mx7wu","Type":"NodeParagraph","Properties":{"id":"20230724003018-t6mx7wu","updated":"20230724003018"},"Children":[{"Type":"NodeText","Data":"服务端软件：vsftp"}]},{"ID":"20230724003019-d7hrmgk","Type":"NodeParagraph","Properties":{"id":"20230724003019-d7hrmgk","updated":"20230724003019"},"Children":[{"Type":"NodeText","Data":"客户端软件：ftp"}]},{"ID":"20230724003020-396x4ae","Type":"NodeParagraph","Properties":{"id":"20230724003020-396x4ae","updated":"20230724003020"},"Children":[{"Type":"NodeText","Data":"端口号：20、21"}]},{"ID":"20230724003021-mpmldof","Type":"NodeParagraph","Properties":{"id":"20230724003021-mpmldof","updated":"20230724003021"},"Children":[{"Type":"NodeText","Data":"配置文件：vim /etc/vsftp.d/vsftpd.conf"}]},{"ID":"20230724003022-e1y65bl","Type":"NodeParagraph","Properties":{"id":"20230724003022-e1y65bl","updated":"20230724003022"},"Children":[{"Type":"NodeText","Data":"yum install vsftpd ftp\t\t\t安装"}]},{"ID":"20230724003023-qgc8bts","Type":"NodeParagraph","Properties":{"id":"20230724003023-qgc8bts","updated":"20230724003023"},"Children":[{"Type":"NodeText","Data":"systemctl enable vsftpd \t  开机自启"}]},{"ID":"20230724003024-pbmr4pl","Type":"NodeParagraph","Properties":{"id":"20230724003024-pbmr4pl","updated":"20230724003024"},"Children":[{"Type":"NodeText","Data":"systemctl start vsftpd \t\t  启动"}]},{"ID":"20230724003025-49ixx53","Type":"NodeParagraph","Properties":{"id":"20230724003025-49ixx53","updated":"20230724003025"},"Children":[{"Type":"NodeText","Data":"netstat -antp \t\t\t\t\t\t查看端口开放情况"}]},{"ID":"20230724003026-4ynnrba","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724003026-4ynnrba","updated":"20230724003026"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"二、工作模式"}]},{"ID":"20230724003027-z6lo5cn","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724003027-z6lo5cn","updated":"20230724003027"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1. 主动模式(prot)--\u003e默认模式"}]},{"ID":"20230724003028-il11f44","Type":"NodeParagraph","Properties":{"id":"20230724003028-il11f44","updated":"20230724003028"},"Children":[{"Type":"NodeText","Data":"FTP客户端和服务器TCP21端口建立连接，用来发送port命令；"}]},{"ID":"20230724003029-ng1s06g","Type":"NodeParagraph","Properties":{"id":"20230724003029-ng1s06g","updated":"20230724003029"},"Children":[{"Type":"NodeText","Data":"port 命令包含用什么端口接收数据，在传输数据时，服务器TCP 20 端口将数据发送到前面指定的端口"}]},{"ID":"20230724003030-li9pymb","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724003030-li9pymb","updated":"20230724003030"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2. 被动模式(passive)"}]},{"ID":"20230724003031-pmuoq5i","Type":"NodeParagraph","Properties":{"id":"20230724003031-pmuoq5i","updated":"20230724003031"},"Children":[{"Type":"NodeText","Data":"FTP客户端和服务器TCP21端口建立连接，建立后客户端发送pasv 命令"}]},{"ID":"20230724003032-copgzfo","Type":"NodeParagraph","Properties":{"id":"20230724003032-copgzfo","updated":"20230724003032"},"Children":[{"Type":"NodeText","Data":"服务端收到pasv 命令后打开一个临时端口，并通知客户端在这个端口上传数据的请求，客户端连接服务器临时端口并传输数据"}]},{"ID":"20230724003033-cb5hent","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724003033-cb5hent","updated":"20230724003033"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"三、传输模式"}]},{"ID":"20230724003034-jkhtdb6","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724003034-jkhtdb6","updated":"20230724003034"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1. Binarry"}]},{"ID":"20230724003035-c4e7gcj","Type":"NodeParagraph","Properties":{"id":"20230724003035-c4e7gcj","updated":"20230724003035"},"Children":[{"Type":"NodeText","Data":"适合图片、压缩文件、可执行文本"}]},{"ID":"20230724003036-58ujw4x","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724003036-58ujw4x","updated":"20230724003036"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2. ASCII"}]},{"ID":"20230724003037-s220zqc","Type":"NodeParagraph","Properties":{"id":"20230724003037-s220zqc","updated":"20230724003037"},"Children":[{"Type":"NodeText","Data":"适合普通文本"}]},{"ID":"20230724003038-quyjrwe","Type":"NodeParagraph","Properties":{"id":"20230724003038-quyjrwe","updated":"20230724003038"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"切换传输模式，登录到ftp后用命令切换"}]},{"ID":"20230724003039-szq5niw","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724003039-szq5niw","updated":"20230724003039"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"四、登陆方式"}]},{"ID":"20230724003040-6andqkz","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724003040-6andqkz","updated":"20230724003040"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1. 匿名登陆"}]},{"ID":"20230724003041-1316xbz","Type":"NodeParagraph","Properties":{"id":"20230724003041-1316xbz","updated":"20230724003041"},"Children":[{"Type":"NodeText","Data":"使用ftp 或 anonymous ，无密码，访问的目录在 /var/ftp ,可下载不可上传"}]},{"ID":"20230724003042-6s4oouz","Type":"NodeParagraph","Properties":{"id":"20230724003042-6s4oouz","updated":"20230724003042"},"Children":[{"Type":"NodeText","Data":"ftp localhost\t\t\t登录"}]},{"ID":"20230724003043-438s1xs","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724003043-438s1xs","updated":"20230724003043"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2. 本地 Linux用户登录"}]},{"ID":"20230724003044-3mforxo","Type":"NodeParagraph","Properties":{"id":"20230724003044-3mforxo","updated":"20230724003044"},"Children":[{"Type":"NodeText","Data":"访问目录是登录用户的家目录"}]},{"ID":"20230724003045-iuk59pr","Type":"NodeParagraph","Properties":{"id":"20230724003045-iuk59pr","updated":"20230724003045"},"Children":[{"Type":"NodeText","Data":"创建Linux用户，并使用用户名密码登录"}]},{"ID":"20230724003046-3dfpfln","Type":"NodeParagraph","Properties":{"id":"20230724003046-3dfpfln","updated":"20230724003046"},"Children":[{"Type":"NodeText","Data":"useradd wenlong"}]},{"ID":"20230724003047-en7sun0","Type":"NodeParagraph","Properties":{"id":"20230724003047-en7sun0","updated":"20230724003047"},"Children":[{"Type":"NodeText","Data":"passwd wenlong"}]},{"ID":"20230724003048-r4scomp","Type":"NodeParagraph","Properties":{"id":"20230724003048-r4scomp","updated":"20230724003048"},"Children":[{"Type":"NodeText","Data":"ftp localhost"}]},{"ID":"20230724003049-eyilo32","Type":"NodeParagraph","Properties":{"id":"20230724003049-eyilo32","updated":"20230724003049"},"Children":[{"Type":"NodeText","Data":"上传test.sh 文件"}]},{"ID":"20230724003050-m1dkyh5","Type":"NodeParagraph","Properties":{"id":"20230724003050-m1dkyh5","updated":"20230724003050"},"Children":[{"Type":"NodeText","Data":"put test.sh"}]},{"ID":"20230724003051-a32znii","Type":"NodeParagraph","Properties":{"id":"20230724003051-a32znii","updated":"20230724003051"},"Children":[{"Type":"NodeText","Data":"下载文件"}]},{"ID":"20230724003052-h5eh6y3","Type":"NodeParagraph","Properties":{"id":"20230724003052-h5eh6y3","updated":"20230724003052"},"Children":[{"Type":"NodeText","Data":"get test.sh"}]},{"ID":"20230724003053-ubd0rjt","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724003053-ubd0rjt","updated":"20230724003053"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"五、配置文件说明"}]},{"ID":"20230724003054-hq54m3h","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724003054-hq54m3h","updated":"20230724003054"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1. 主要的配置文件"}]},{"ID":"20230724003055-apsf8ta","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003055-apsf8ta","updated":"20230724003055"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"/etc/vsftpd/vsftpd.conf"}]},{"ID":"20230724003056-2nw773c","Type":"NodeParagraph","Properties":{"id":"20230724003056-2nw773c","updated":"20230724003056"},"Children":[{"Type":"NodeText","Data":"严格来说，整个vsftp的配置文件就只有这一个文件，"}]},{"ID":"20230724003057-4wb5mf0","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003057-4wb5mf0","updated":"20230724003057"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"/etc/pam.d/vsftpd"}]},{"ID":"20230724003058-r2ep8d4","Type":"NodeParagraph","Properties":{"id":"20230724003058-r2ep8d4","updated":"20230724003058"},"Children":[{"Type":"NodeText","Data":"这个是vsftpd使用PAM模块时的相关配置文件，主要用来作为身份认证之用。"}]},{"ID":"20230724003059-zgks7bc","Type":"NodeParagraph","Properties":{"id":"20230724003059-zgks7bc","updated":"20230724003059"},"Children":[{"Type":"NodeText","Data":"还有阻挡一些用户身份的功能，也可以通过该文件实现"}]},{"ID":"20230724003060-zkxdxqu","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003060-zkxdxqu","updated":"20230724003060"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"/etc/vsftpd/ftpusers"}]},{"ID":"20230724003061-7hlny8u","Type":"NodeParagraph","Properties":{"id":"20230724003061-7hlny8u","updated":"20230724003061"},"Children":[{"Type":"NodeText","Data":"PAM模块所指定的那个无法登陆的用户配置文件，只要将不想让他登录的FTP账号写入这个文件即可，一行一个账号"}]},{"ID":"20230724003062-n2xsiou","Type":"NodeParagraph","Properties":{"id":"20230724003062-n2xsiou","updated":"20230724003062"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"image-20211206160916837","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"C:\\Users\\560451\\AppData\\Roaming\\Typora\\typora-user-images\\image-20211206160916837.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230724003063-9fm9o9f","Type":"NodeParagraph","Properties":{"id":"20230724003063-9fm9o9f","updated":"20230724003063"},"Children":[{"Type":"NodeText","Data":"系统账号默认是无法使用vsftpd的。"}]},{"ID":"20230724003064-uf202is","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003064-uf202is","updated":"20230724003064"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"/etc/vsftpd/user_list"}]},{"ID":"20230724003065-4z4co3a","Type":"NodeParagraph","Properties":{"id":"20230724003065-4z4co3a","updated":"20230724003065"},"Children":[{"Type":"NodeText","Data":"这个文件是否生效与vsftpd.conf 内的两个参数有关，分别是userlist_enable 和userlist_deny"}]},{"ID":"20230724003066-t35w0cg","Type":"NodeParagraph","Properties":{"id":"20230724003066-t35w0cg","updated":"20230724003066"},"Children":[{"Type":"NodeText","Data":"/etc/vsftpd/ftpusers 是PAM模块的阻挡访问设置项目，那/etc/vsftpd/luser_list则是vsftpd自定义的阻挡访问项目。事实上，这个文件与/etc/vsftpd/ftpusers 几乎一摸一样，在默认的情况下，你可以将不允许登录vsftpd的账号写入这里，不过这个文件是否会发生作用由vsftpd.conf 配置文件内的 userlist_deny={YES/NO} 决定，"}]},{"ID":"20230724003067-lqrsdtt","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003067-lqrsdtt","updated":"20230724003067"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"/etc/vsftpdl/chroot_list"}]},{"ID":"20230724003068-qlow9l1","Type":"NodeParagraph","Properties":{"id":"20230724003068-qlow9l1","updated":"20230724003068"},"Children":[{"Type":"NodeText","Data":"默认不存在，需手动建立"}]},{"ID":"20230724003069-qld4pm9","Type":"NodeParagraph","Properties":{"id":"20230724003069-qld4pm9","updated":"20230724003069"},"Children":[{"Type":"NodeText","Data":"主要功能是可以将某些账号的用户chroot建立在他们的默认用户主目录下，这个文件要生效与vsftpd.conf 内的chroot_list_enable、chroot_list_file 两个参数有关"}]},{"ID":"20230724003070-gu5y80d","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003070-gu5y80d","updated":"20230724003070"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"/user/sbin/vsftpd"}]},{"ID":"20230724003071-y9hd269","Type":"NodeParagraph","Properties":{"id":"20230724003071-y9hd269","updated":"20230724003071"},"Children":[{"Type":"NodeText","Data":"vsftpd的主要执行文件，vsftpd只有这一个执行文件，"}]},{"ID":"20230724003072-r7agab2","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003072-r7agab2","updated":"20230724003072"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"/var/ftp/"}]},{"ID":"20230724003073-70ocwa2","Type":"NodeParagraph","Properties":{"id":"20230724003073-70ocwa2","updated":"20230724003073"},"Children":[{"Type":"NodeText","Data":"这是vsftpd 默认用户登录的根目录，"}]},{"ID":"20230724003074-o1uqhnz","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724003074-o1uqhnz","updated":"20230724003074"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2. vsftpd.conf 配置值说明"}]},{"ID":"20230724003075-hapd2t0","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724003075-hapd2t0","updated":"20230724003075"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1. 与服务器环境比较相关的设置值"}]},{"ID":"20230724003076-n3i3s5p","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003076-n3i3s5p","updated":"20230724003076"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"connect_from_port_20=YES(NO)"}]},{"ID":"20230724003077-ln6qikg","Type":"NodeParagraph","Properties":{"id":"20230724003077-ln6qikg","updated":"20230724003077"},"Children":[{"Type":"NodeText","Data":"主动式连接的端口号"}]},{"ID":"20230724003078-bfyzuit","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003078-bfyzuit","updated":"20230724003078"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"listen_port=21"}]},{"ID":"20230724003079-0nfwlbz","Type":"NodeParagraph","Properties":{"id":"20230724003079-0nfwlbz","updated":"20230724003079"},"Children":[{"Type":"NodeText","Data":"vsftpd使用的命令通道port"}]},{"ID":"20230724003080-ptxyc3t","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003080-ptxyc3t","updated":"20230724003080"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"dirmessage_enable=YES(NO)"}]},{"ID":"20230724003081-7twrems","Type":"NodeParagraph","Properties":{"id":"20230724003081-7twrems","updated":"20230724003081"},"Children":[{"Type":"NodeText","Data":"当用户进入某个目录中时，会显示该目录所需要注意的内容，显示的文件默认为 .message"}]},{"ID":"20230724003082-i7dqgkz","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003082-i7dqgkz","updated":"20230724003082"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"message_file=.message"}]},{"ID":"20230724003083-ao2k7ia","Type":"NodeParagraph","Properties":{"id":"20230724003083-ao2k7ia","updated":"20230724003083"},"Children":[{"Type":"NodeText","Data":"当dirmessage_enable=YES时，可以设置这个项目让vsftpd寻找该文件来显示信息，"}]},{"ID":"20230724003084-avumo1y","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003084-avumo1y","updated":"20230724003084"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"listen=YES(NO)"}]},{"ID":"20230724003085-oscplg2","Type":"NodeParagraph","Properties":{"id":"20230724003085-oscplg2","updated":"20230724003085"},"Children":[{"Type":"NodeText","Data":"若设置为YES，表示vsftpd 是以stand alone的方式来启动的。默认是 no"}]},{"ID":"20230724003086-mbxa8f2","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003086-mbxa8f2","updated":"20230724003086"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"pasv_enable=YES(NO)"}]},{"ID":"20230724003087-9d81z27","Type":"NodeParagraph","Properties":{"id":"20230724003087-9d81z27","updated":"20230724003087"},"Children":[{"Type":"NodeText","Data":"支持数据流的被动式连接模式，一定要设置YES"}]},{"ID":"20230724003088-q4hb2ke","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003088-q4hb2ke","updated":"20230724003088"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"use_localtime=YES(NO)"}]},{"ID":"20230724003089-932thi0","Type":"NodeParagraph","Properties":{"id":"20230724003089-932thi0","updated":"20230724003089"},"Children":[{"Type":"NodeText","Data":"是否设置本地时间，默认使用GMT时间，建议设置为YES"}]},{"ID":"20230724003090-nq0jgan","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003090-nq0jgan","updated":"20230724003090"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"write_enable=YES(NO)"}]},{"ID":"20230724003091-dlw2ujl","Type":"NodeParagraph","Properties":{"id":"20230724003091-dlw2ujl","updated":"20230724003091"},"Children":[{"Type":"NodeText","Data":"是否允许用户上传数据"}]},{"ID":"20230724003092-zoh4lze","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003092-zoh4lze","updated":"20230724003092"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"connect_timeout=60"}]},{"ID":"20230724003093-1f02qf7","Type":"NodeParagraph","Properties":{"id":"20230724003093-1f02qf7","updated":"20230724003093"},"Children":[{"Type":"NodeText","Data":"主动连接模式下，我们发出的信号在60秒内得不到客户端的响应，则不等待并强制断线"}]},{"ID":"20230724003094-kkfllr6","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003094-kkfllr6","updated":"20230724003094"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"accept_timeout=60"}]},{"ID":"20230724003095-1k39i4k","Type":"NodeParagraph","Properties":{"id":"20230724003095-1k39i4k","updated":"20230724003095"},"Children":[{"Type":"NodeText","Data":"用户以被动式PASV来进行数据传输时，如果服务器启用passive port 并等待Client超过60秒而无回应，就强制断线，"}]},{"ID":"20230724003096-q2mqh28","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003096-q2mqh28","updated":"20230724003096"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"data_connection_timeout=300"}]},{"ID":"20230724003097-668q0y4","Type":"NodeParagraph","Properties":{"id":"20230724003097-668q0y4","updated":"20230724003097"},"Children":[{"Type":"NodeText","Data":"如果服务器与用户端的资料连线已经成功建立(不论主动还是被动连线)，但是可能由于线路问题导致 300 秒内还是无法顺利的完成资料的传送，那用户端的连线就会被我们的vsftpd 强制剔除！"}]},{"ID":"20230724003098-ip7xauv","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003098-ip7xauv","updated":"20230724003098"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"idle_session_timeout=300"}]},{"ID":"20230724003099-yqo8vvi","Type":"NodeParagraph","Properties":{"id":"20230724003099-yqo8vvi","updated":"20230724003099"},"Children":[{"Type":"NodeText","Data":"如果使用者在300 秒内都没有命令动作，强制离线！"}]},{"ID":"20230724003100-sd0c4hu","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003100-sd0c4hu","updated":"20230724003100"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"max_clients=0"}]},{"ID":"20230724003101-lbherjl","Type":"NodeParagraph","Properties":{"id":"20230724003101-lbherjl","updated":"20230724003101"},"Children":[{"Type":"NodeText","Data":"如果vsftpd 是以stand alone 方式启动的，那么这个设定项目可以设定同一时间，最多有多少 client 可以同时连上vsftpd 哩！限制使用FTP 的用量！"}]},{"ID":"20230724003102-jsqh379","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003102-jsqh379","updated":"20230724003102"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"max_per_ip=0"}]},{"ID":"20230724003103-bgnw0ua","Type":"NodeParagraph","Properties":{"id":"20230724003103-bgnw0ua","updated":"20230724003103"},"Children":[{"Type":"NodeText","Data":"与上面max_clients 类似，这里是同一个IP 同一时间可允许多少连线"}]},{"ID":"20230724003104-c8udn2m","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003104-c8udn2m","updated":"20230724003104"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"pasv_min_port=0、pasv_max_port=0"}]},{"ID":"20230724003105-lrjilve","Type":"NodeParagraph","Properties":{"id":"20230724003105-lrjilve","updated":"20230724003105"},"Children":[{"Type":"NodeText","Data":"上面两个是与passive mode 使用的port number 有关，如果你想要使用65400 到 65410 这11 个port 来进行被动式连线模式的连接，可以这样设定pasv_max_port=65410 以及pasv_min_port=65400。如果是0 的话，表示随机取用而不限制。"}]},{"ID":"20230724003106-983fnms","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003106-983fnms","updated":"20230724003106"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"ftpd_banner=一些文字说明"}]},{"ID":"20230724003107-moyddew","Type":"NodeParagraph","Properties":{"id":"20230724003107-moyddew","updated":"20230724003107"},"Children":[{"Type":"NodeText","Data":"当使用者连线进入到vsftpd 时，在FTP 用户端软体上头会显示的说明文字。不过，这个设定值资料比较少啦！建议你可以使用底下的banner_file 设定值来取代这个项目；"}]},{"ID":"20230724003108-2xxibr0","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003108-2xxibr0","updated":"20230724003108"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"banner_file=/path/file"}]},{"ID":"20230724003109-l7hg0h0","Type":"NodeParagraph","Properties":{"id":"20230724003109-l7hg0h0","updated":"20230724003109"},"Children":[{"Type":"NodeText","Data":"这个项目可以指定某个纯文字档作为使用者登入vsftpd 服务器时所显示的欢迎字眼。同时，也能够放置一些让使用者知道本FTP 服务器的目录架构！"}]},{"ID":"20230724003110-1ozx0lq","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724003110-1ozx0lq","updated":"20230724003110"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2. 与实体用户较相关的设置值"}]},{"ID":"20230724003111-jo5w1l2","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003111-jo5w1l2","updated":"20230724003111"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"guest_enable=YES(NO)"}]},{"ID":"20230724003112-fobnpk7","Type":"NodeParagraph","Properties":{"id":"20230724003112-fobnpk7","updated":"20230724003112"},"Children":[{"Type":"NodeText","Data":"若这个值设定为YES 时，那么任何实体帐号，均会被假设成为guest 喔(所以预设是不开放的)！至于访客在vsftpd 当中，预设会取得ftp 这个使用者的相关权限。但可以透过guest_username 来修改。"}]},{"ID":"20230724003113-ivc8icb","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003113-ivc8icb","updated":"20230724003113"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"guest_username=ftp"}]},{"ID":"20230724003114-tolwgis","Type":"NodeParagraph","Properties":{"id":"20230724003114-tolwgis","updated":"20230724003114"},"Children":[{"Type":"NodeText","Data":"在guest_enable=YES 时才会生效，指定访客的身份而已。"}]},{"ID":"20230724003115-uvoy2jc","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003115-uvoy2jc","updated":"20230724003115"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"local_enable=YES(NO)"}]},{"ID":"20230724003116-tld25b5","Type":"NodeParagraph","Properties":{"id":"20230724003116-tld25b5","updated":"20230724003116"},"Children":[{"Type":"NodeText","Data":"这个设定值必须要为YES 时，在/etc/passwd 内的帐号才能以实体用户的方式登入我们的vsftpd 服务器"}]},{"ID":"20230724003117-bu2rbxl","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003117-bu2rbxl","updated":"20230724003117"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"local_max_rate=0"}]},{"ID":"20230724003118-k2vrteu","Type":"NodeParagraph","Properties":{"id":"20230724003118-k2vrteu","updated":"20230724003118"},"Children":[{"Type":"NodeText","Data":"实体用户的传输速度限制，单位为bytes/second， 0 为不限制。"}]},{"ID":"20230724003119-5zm3r6b","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003119-5zm3r6b","updated":"20230724003119"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"chroot_local_user=YES(NO)"}]},{"ID":"20230724003120-ig15evi","Type":"NodeParagraph","Properties":{"id":"20230724003120-ig15evi","updated":"20230724003120"},"Children":[{"Type":"NodeText","Data":"在预设的情况下，是否要将使用者限制在自己的家目录之内(chroot)？如果是YES 代表用户预设就会被chroot，如果是NO， 则预设是没有chroot。不过，实际还是需要底下的两个参数互相参考才行。为了安全性，这里应该要设定成YES 才好。"}]},{"ID":"20230724003121-p6grc2a","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003121-p6grc2a","updated":"20230724003121"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"chroot_list_enable=YES(NO)"}]},{"ID":"20230724003122-flp2wdo","Type":"NodeParagraph","Properties":{"id":"20230724003122-flp2wdo","updated":"20230724003122"},"Children":[{"Type":"NodeText","Data":"是否启用chroot 写入列表的功能？与底下的chroot_list_flie 有关！这个项目得要开启，否则底下的列表档案会无效。"}]},{"ID":"20230724003123-b5wwrj6","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003123-b5wwrj6","updated":"20230724003123"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"chroot_list_file=/etc/vsftpd.chroot_list"}]},{"ID":"20230724003124-xzh5nd3","Type":"NodeParagraph","Properties":{"id":"20230724003124-xzh5nd3","updated":"20230724003124"},"Children":[{"Type":"NodeText","Data":"如果chroot_list_enable=YES 那么就可以设定这个项目了！这个项目与chroot_local_user 有关，详细的设定状态请参考 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"http://linux.vbird.org/linux_server/0410vsftpd.php#server_real_chroot2","TextMarkTextContent":"21.2.6 chroot"},{"Type":"NodeText","Data":"的说明。"}]},{"ID":"20230724003125-b1uctes","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003125-b1uctes","updated":"20230724003125"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"userlist_enable=YES(NO)"}]},{"ID":"20230724003126-p829mf8","Type":"NodeParagraph","Properties":{"id":"20230724003126-p829mf8","updated":"20230724003126"},"Children":[{"Type":"NodeText","Data":"是否借助vsftpd 的抵挡机制来处理某些不受欢迎的帐号，与底下的参数设定有关；"}]},{"ID":"20230724003127-3odlrcn","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003127-3odlrcn","updated":"20230724003127"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"userlist_deny=YES(NO)"}]},{"ID":"20230724003128-hfpanvy","Type":"NodeParagraph","Properties":{"id":"20230724003128-hfpanvy","updated":"20230724003128"},"Children":[{"Type":"NodeText","Data":"当userlist_enable=YES 时才会生效的设定，若此设定值为YES 时，则当使用者帐号被列入到某个档案时， 在该档案内的使用者将无法登入vsftpd 服务器！该档案档名与下列设定项目有关。"}]},{"ID":"20230724003129-i4vjm4h","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003129-i4vjm4h","updated":"20230724003129"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"userlist_file=/etc/vsftpd/user_list"}]},{"ID":"20230724003130-r435tce","Type":"NodeParagraph","Properties":{"id":"20230724003130-r435tce","updated":"20230724003130"},"Children":[{"Type":"NodeText","Data":"若上面userlist_deny=YES 时，则这个档案就有用处了！在这个档案内的帐号都无法使用vsftpd 喔！"}]},{"ID":"20230724003131-ljfrgoy","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724003131-ljfrgoy","updated":"20230724003131"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"3.匿名用户登录的设置值"}]},{"ID":"20230724003132-bagx78q","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003132-bagx78q","updated":"20230724003132"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"anonymous_enable=YES(NO)"}]},{"ID":"20230724003133-qgkcyck","Type":"NodeParagraph","Properties":{"id":"20230724003133-qgkcyck","updated":"20230724003133"},"Children":[{"Type":"NodeText","Data":"设定为允许anonymous 登入我们的vsftpd 主机！预设是YES ，底下的所有相关设定都需要将这个设定为 anonymous_enable=YES 之后才会生效！"}]},{"ID":"20230724003134-yjon8mf","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003134-yjon8mf","updated":"20230724003134"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"anon_world_readable_only=YES(NO)"}]},{"ID":"20230724003135-840jcmx","Type":"NodeParagraph","Properties":{"id":"20230724003135-840jcmx","updated":"20230724003135"},"Children":[{"Type":"NodeText","Data":"仅允许anonymous 具有下载可读档案的权限，预设是YES"}]},{"ID":"20230724003136-ey2z8rc","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003136-ey2z8rc","updated":"20230724003136"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"anon_other_write_enable=YES(NO)"}]},{"ID":"20230724003137-lgvk5a4","Type":"NodeParagraph","Properties":{"id":"20230724003137-lgvk5a4","updated":"20230724003137"},"Children":[{"Type":"NodeText","Data":"是否允许anonymous 具有除了写入之外的权限？包括删除与改写服务器上的档案及档名等权限。预设当然是 NO！如果要设定为YES，那么开放给anonymous 写入的目录亦需要调整权限，让vsftpd 的PID 拥有者可以写入才行！"}]},{"ID":"20230724003138-6v2g32u","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003138-6v2g32u","updated":"20230724003138"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"anon_mkdir_write_enable=YES(NO)"}]},{"ID":"20230724003139-d0whd1v","Type":"NodeParagraph","Properties":{"id":"20230724003139-d0whd1v","updated":"20230724003139"},"Children":[{"Type":"NodeText","Data":"是否让anonymous 具有建立目录的权限？预设值是NO！如果要设定为YES， 那么anony_other_write_enable 必须设定为YES ！"}]},{"ID":"20230724003140-42fnr72","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003140-42fnr72","updated":"20230724003140"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"anon_upload_enable=YES(NO)"}]},{"ID":"20230724003141-um3bbno","Type":"NodeParagraph","Properties":{"id":"20230724003141-um3bbno","updated":"20230724003141"},"Children":[{"Type":"NodeText","Data":"是否让anonymous 具有上传资料的功能，预设是NO，如果要设定为YES ，则anon_other_write_enable=YES 必须设定。"}]},{"ID":"20230724003142-u2lf0nn","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003142-u2lf0nn","updated":"20230724003142"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"deny_emai;_enable=YES(NO)"}]},{"ID":"20230724003143-z6sn5d9","Type":"NodeParagraph","Properties":{"id":"20230724003143-z6sn5d9","updated":"20230724003143"},"Children":[{"Type":"NodeText","Data":"将某些特殊的email address 抵挡住，不让那些anonymous 登入！如果以anonymous 登入服务器时，不是会要求输入密码吗？密码不是要你输入你的email address 吗？如果你很讨厌某些email address， 就可以使用这个设定来将他取消登入的权限！需与下个设定项目配合："}]},{"ID":"20230724003144-n2wocd6","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003144-n2wocd6","updated":"20230724003144"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"banned_email_file=/etc/vsftpd/banned_emails"}]},{"ID":"20230724003145-dohixsf","Type":"NodeParagraph","Properties":{"id":"20230724003145-dohixsf","updated":"20230724003145"},"Children":[{"Type":"NodeText","Data":"如果deny_email_enable=YES 时，可以利用这个设定项目来规定哪个email address 不可登入我们的vsftpd 喔！在上面设定的档案内，一行输入一个email address 即可！"}]},{"ID":"20230724003146-d7vvv36","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003146-d7vvv36","updated":"20230724003146"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"no_anon_password=YES(NO)"}]},{"ID":"20230724003147-6gkzwpo","Type":"NodeParagraph","Properties":{"id":"20230724003147-6gkzwpo","updated":"20230724003147"},"Children":[{"Type":"NodeText","Data":"当设定为YES 时，表示anonymous 将会略过密码检验步骤，而直接进入vsftpd 服务器内喔！所以一般预设都是 NO 的！(登入时会检查输入的emai)"}]},{"ID":"20230724003148-x15ekbs","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003148-x15ekbs","updated":"20230724003148"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"anon_max_rate=0"}]},{"ID":"20230724003149-4n8bllw","Type":"NodeParagraph","Properties":{"id":"20230724003149-4n8bllw","updated":"20230724003149"},"Children":[{"Type":"NodeText","Data":"这个设定值后面接的数值单位为bytes/秒，限制anonymous 的传输速度，如果是0 则不限制(由最大频宽所限制)，如果你想让 anonymous 仅有30 KB/s 的速度，可以设定『anon_max_rate=30000』"}]},{"ID":"20230724003150-w3kbnlo","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003150-w3kbnlo","updated":"20230724003150"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"anon_umask=077"}]},{"ID":"20230724003151-ovkw8ew","Type":"NodeParagraph","Properties":{"id":"20230724003151-ovkw8ew","updated":"20230724003151"},"Children":[{"Type":"NodeText","Data":"限制anonymous 上传档案的权限！如果是077 则anonymous 传送过来的档案权限会是-rw------- 喔"}]},{"ID":"20230724003152-cd71yc5","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724003152-cd71yc5","updated":"20230724003152"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"4. 关于系统安全方面的一些设置值"}]},{"ID":"20230724003153-4abe2t9","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003153-4abe2t9","updated":"20230724003153"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"ascli_download_enable=YES(NO)"}]},{"ID":"20230724003154-bu7hlg3","Type":"NodeParagraph","Properties":{"id":"20230724003154-bu7hlg3","updated":"20230724003154"},"Children":[{"Type":"NodeText","Data":"如果设定为YES ，那么client 就优先(预设) 使用ASCII 格式下载档案。"}]},{"ID":"20230724003155-7ocewrh","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003155-7ocewrh","updated":"20230724003155"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"ascli_process_model=YES(NO)"}]},{"ID":"20230724003156-upi4qk6","Type":"NodeParagraph","Properties":{"id":"20230724003156-upi4qk6","updated":"20230724003156"},"Children":[{"Type":"NodeText","Data":"与上一个设定类似的，只是这个设定针对上传而言！预设是NO"}]},{"ID":"20230724003157-v7aydja","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003157-v7aydja","updated":"20230724003157"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"one_process_model=YES(NO)"}]},{"ID":"20230724003158-cjfgq48","Type":"NodeParagraph","Properties":{"id":"20230724003158-cjfgq48","updated":"20230724003158"},"Children":[{"Type":"NodeText","Data":"这个设定项目比较危险一点～当设定为YES 时，表示每个建立的连线都会拥有一支process 在负责，可以增加vsftpd 的效能。不过， 除非你的系统比较安全，而且硬体配备比较高，否则容易耗尽系统资源喔！一般建议设定为NO 的啦！"}]},{"ID":"20230724003159-jnhm699","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003159-jnhm699","updated":"20230724003159"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"tcp_wrappers=YES(NO)"}]},{"ID":"20230724003160-4927lw2","Type":"NodeParagraph","Properties":{"id":"20230724003160-4927lw2","updated":"20230724003160"},"Children":[{"Type":"NodeText","Data":"当然我们都习惯支援"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"http://linux.vbird.org/linux_server/0250simple_firewall.php#tcp_wrappers","TextMarkTextContent":"TCP Wrappers"},{"Type":"NodeText","Data":" 的啦！所以设定为YES 吧！"}]},{"ID":"20230724003161-gixg1k5","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003161-gixg1k5","updated":"20230724003161"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"xferlog_enable=YES(NO)"}]},{"ID":"20230724003162-roogyd0","Type":"NodeParagraph","Properties":{"id":"20230724003162-roogyd0","updated":"20230724003162"},"Children":[{"Type":"NodeText","Data":"当设定为YES 时，使用者上传与下载档案都会被纪录起来。记录的档案与下一个设定项目有关："}]},{"ID":"20230724003163-5szhj4w","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003163-5szhj4w","updated":"20230724003163"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"xferlog_file=/var/log/xferlog"}]},{"ID":"20230724003164-oy2n0fx","Type":"NodeParagraph","Properties":{"id":"20230724003164-oy2n0fx","updated":"20230724003164"},"Children":[{"Type":"NodeText","Data":"如果上一个xferlog_enable=YES 的话，这里就可以设定了！这个是登录档的档名啦！"}]},{"ID":"20230724003165-td2hlll","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003165-td2hlll","updated":"20230724003165"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"xferlog_std_format=YES(NO)"}]},{"ID":"20230724003166-8ao3hrn","Type":"NodeParagraph","Properties":{"id":"20230724003166-8ao3hrn","updated":"20230724003166"},"Children":[{"Type":"NodeText","Data":"是否设定为wu ftp 相同的登录档格式？预设为NO ，因为登录档会比较容易读！不过，如果你有使用wu ftp 登录档的分析软体，这里才需要设定为YES"}]},{"ID":"20230724003167-448478y","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003167-448478y","updated":"20230724003167"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"dual_log_enable=YES  、vaftpd_log_file=/var/log/vsftpd.log"}]},{"ID":"20230724003168-kmgwkdv","Type":"NodeParagraph","Properties":{"id":"20230724003168-kmgwkdv","updated":"20230724003168"},"Children":[{"Type":"NodeText","Data":"除了/var/log/xferlog 的wu-ftp 格式登录档之外，还可以具有vsftpd 的独特登录档格式喔！如果你的FTP 服务器并不是很忙碌， 或许订出两个登录档的撰写(/var/log/{vsftpd.log,xferlog) 是不错的。"}]},{"ID":"20230724003169-u1pvjds","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003169-u1pvjds","updated":"20230724003169"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"nopriv_uesr=nobody"}]},{"ID":"20230724003170-dtsfxp0","Type":"NodeParagraph","Properties":{"id":"20230724003170-dtsfxp0","updated":"20230724003170"},"Children":[{"Type":"NodeText","Data":"我们的vsftpd 预设以nobody 作为此一服务执行者的权限。因为nobody 的权限相当的低，因此即使被入侵，入侵者仅能取得 nobody 的权限喔！"}]},{"ID":"20230724003171-cnupc2p","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724003171-cnupc2p","updated":"20230724003171"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"pam_service_name=vsftpd"}]},{"ID":"20230724003172-8vvi642","Type":"NodeParagraph","Properties":{"id":"20230724003172-8vvi642","updated":"20230724003172"},"Children":[{"Type":"NodeText","Data":"这个是pam 模组的名称，我们放置在/etc/pam.d/vsftpd 即是这个！"}]},{"ID":"20230724003173-1j2811i","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724003173-1j2811i","updated":"20230724003173"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"六、vsftpd 启动的模式"}]},{"ID":"20230724003174-nvqsair","Type":"NodeParagraph","Properties":{"id":"20230724003174-nvqsair","updated":"20230724003174"},"Children":[{"Type":"NodeText","Data":"vsftpd 可以使用stand alone 或super daemon 的方式来启动，我们CentOS 预设是以stand alone 来启动的。那什么时候应该选择stand alone 或者是super daemon 呢"},{"Type":"NodeStrong","Children":[{"Type":"NodeStrongA6kOpenMarker","Data":"**"},{"Type":"NodeText","Data":"？如果你的ftp 伺服器是提供给整个网际网路来进行大量下载的任务，"},{"Type":"NodeStrongA6kCloseMarker","Data":"**"}]},{"Type":"NodeText","Data":"例如各大专院校的FTP 伺服器，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"那建议你使用stand alone 的方式"},{"Type":"NodeText","Data":"， 服务的速度上会比较好。"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"如果仅是提供给内部人员使用的FTP 伺服器，那使用super daemon 来管理即可"},{"Type":"NodeText","Data":"。"}]},{"ID":"20230724003175-1zvasq5","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724003175-1zvasq5","updated":"20230724003175"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1. 利用Centos 提供的script 来启动vsftpd(stand alone)"}]},{"ID":"20230724003176-tfj9c4l","Type":"NodeParagraph","Properties":{"id":"20230724003176-tfj9c4l","updated":"20230724003176"},"Children":[{"Type":"NodeText","Data":"其实CentOS 不用作任何设定就能够启动vsftpd"}]},{"ID":"20230724003177-d49ghmm","Type":"NodeParagraph","Properties":{"id":"20230724003177-d49ghmm","updated":"20230724003177"},"Children":[{"Type":"NodeText","Data":"/etc/init.d/vsftpd start"}]},{"ID":"20230724003178-fsx6p7a","Type":"NodeParagraph","Properties":{"id":"20230724003178-fsx6p7a","updated":"20230724003178"},"Children":[{"Type":"NodeText","Data":"netstat -tulnp | grep 21"}]},{"ID":"20230724003179-cd6tven","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724003179-cd6tven","updated":"20230724003179"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2. 自行设定以 super daemon 来启动"}]},{"ID":"20230724003180-kukwoyf","Type":"NodeParagraph","Properties":{"id":"20230724003180-kukwoyf","updated":"20230724003180"},"Children":[{"Type":"NodeText","Data":"如果你的FTP 是很少被使用的，那么利用super daemon 来管理不失为一个好主意。不过若你想要使用super daemon 管理的话，那就得要自行修改一下设定档了。其实也不难啦，你应该要这样处理的："}]},{"ID":"20230724003181-zdcdxue","Type":"NodeParagraph","Properties":{"id":"20230724003181-zdcdxue","updated":"20230724003181"},"Children":[{"Type":"NodeText","Data":"vim /etc/vsftpd/vsftpd.conf"}]},{"ID":"20230724003182-8lghgti","Type":"NodeParagraph","Properties":{"id":"20230724003182-8lghgti","updated":"20230724003182"},"Children":[{"Type":"NodeText","Data":"找到listen=YES 这一行，大约在109行左右，并将他改为"}]},{"ID":"20230724003183-0zjwqpj","Type":"NodeParagraph","Properties":{"id":"20230724003183-0zjwqpj","updated":"20230724003183"},"Children":[{"Type":"NodeText","Data":"listen=NO"}]},{"ID":"20230724003184-bknn8gv","Type":"NodeParagraph","Properties":{"id":"20230724003184-bknn8gv","updated":"20230724003184"},"Children":[{"Type":"NodeText","Data":"接下来修改一下 super daemon 的设定档，底下这个档案必须要自己建立，原本并不存在，"}]},{"ID":"20230724003185-aacwg72","Type":"NodeParagraph","Properties":{"id":"20230724003185-aacwg72","updated":"20230724003185"},"Children":[{"Type":"NodeText","Data":"yum install xinetd"}]},{"ID":"20230724003186-kf61los","Type":"NodeParagraph","Properties":{"id":"20230724003186-kf61los","updated":"20230724003186"},"Children":[{"Type":"NodeText","Data":"vim /etc/xinetd.d/vsftpd"}]},{"ID":"20230724003187-4jfm42u","Type":"NodeParagraph","Properties":{"id":"20230724003187-4jfm42u","updated":"20230724003187"},"Children":[{"Type":"NodeText","Data":"service ftp"}]},{"ID":"20230724003188-c761wae","Type":"NodeParagraph","Properties":{"id":"20230724003188-c761wae","updated":"20230724003188"},"Children":[{"Type":"NodeText","Data":"{"}]},{"ID":"20230724003189-dqeomnu","Type":"NodeParagraph","Properties":{"id":"20230724003189-dqeomnu","updated":"20230724003189"},"Children":[{"Type":"NodeText","Data":"socker_type = stream"}]},{"ID":"20230724003190-1hqhphv","Type":"NodeParagraph","Properties":{"id":"20230724003190-1hqhphv","updated":"20230724003190"},"Children":[{"Type":"NodeText","Data":"wait = no"}]},{"ID":"20230724003191-dh0ubo3","Type":"NodeParagraph","Properties":{"id":"20230724003191-dh0ubo3","updated":"20230724003191"},"Children":[{"Type":"NodeText","Data":"user = root"}]},{"ID":"20230724003192-ez3znsn","Type":"NodeParagraph","Properties":{"id":"20230724003192-ez3znsn","updated":"20230724003192"},"Children":[{"Type":"NodeText","Data":"server = /usr/sbin/vsftpd"}]},{"ID":"20230724003193-kzla48i","Type":"NodeParagraph","Properties":{"id":"20230724003193-kzla48i","updated":"20230724003193"},"Children":[{"Type":"NodeText","Data":"log_no_success += DURATION USERTD"}]},{"ID":"20230724003194-v8viik4","Type":"NodeParagraph","Properties":{"id":"20230724003194-v8viik4","updated":"20230724003194"},"Children":[{"Type":"NodeText","Data":"log_no_failure += USERID"}]},{"ID":"20230724003195-yd01xbj","Type":"NodeParagraph","Properties":{"id":"20230724003195-yd01xbj","updated":"20230724003195"},"Children":[{"Type":"NodeText","Data":"nice = 10"}]},{"ID":"20230724003196-2d053qo","Type":"NodeParagraph","Properties":{"id":"20230724003196-2d053qo","updated":"20230724003196"},"Children":[{"Type":"NodeText","Data":"disable = no"}]},{"ID":"20230724003197-2m677d2","Type":"NodeParagraph","Properties":{"id":"20230724003197-2m677d2","updated":"20230724003197"},"Children":[{"Type":"NodeText","Data":"}"}]},{"ID":"20230724003198-uppxef4","Type":"NodeParagraph","Properties":{"id":"20230724003198-uppxef4","updated":"20230724003198"},"Children":[{"Type":"NodeText","Data":"然后尝试启动看看"}]},{"ID":"20230724003199-l3yyi4n","Type":"NodeParagraph","Properties":{"id":"20230724003199-l3yyi4n","updated":"20230724003199"},"Children":[{"Type":"NodeText","Data":"/etc/init.d/vsftpd stop"}]},{"ID":"20230724003200-jglz3kj","Type":"NodeParagraph","Properties":{"id":"20230724003200-jglz3kj","updated":"20230724003200"},"Children":[{"Type":"NodeText","Data":"/etc/init.d/xinetd restart"}]},{"ID":"20230724003201-2aaohx2","Type":"NodeParagraph","Properties":{"id":"20230724003201-2aaohx2","updated":"20230724003201"},"Children":[{"Type":"NodeText","Data":"netstat -tulnp | grep 21"}]},{"ID":"20230724003202-zhrrmoo","Type":"NodeParagraph","Properties":{"id":"20230724003202-zhrrmoo","updated":"20230724003202"},"Children":[{"Type":"NodeText","Data":"两者启动的方式可不一样啊！管理的方式就会差很多的呦！"},{"Type":"NodeStrong","Children":[{"Type":"NodeStrongA6kOpenMarker","Data":"**"},{"Type":"NodeText","Data":"不管你要使用哪种启动的方式，切记不要两者同时启动，否则会发生错误的！你应该使用chkconfig --list 检查一下这两种启动的方式，然后依据你的需求来决定用哪一种方式启动。"},{"Type":"NodeStrongA6kCloseMarker","Data":"**"}]},{"Type":"NodeText","Data":"鸟哥底下的设定都会以 stand alone 这个CentOS 预设的启动模式来处理"}]},{"ID":"20230724003203-7ryovwy","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724003203-7ryovwy","updated":"20230724003203"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"七、CentOS  的 vsftpd 预设值"}]},{"ID":"20230724003204-mb4lxcu","Type":"NodeParagraph","Properties":{"id":"20230724003204-mb4lxcu","updated":"20230724003204"},"Children":[{"Type":"NodeText","Data":"在centOS的预设值当中，vsftpd 是同时开放实体用户与匿名使用者的，CentOS 的预设值如下："}]},{"ID":"20230724003205-as8oi2s","Type":"NodeParagraph","Properties":{"id":"20230724003205-as8oi2s","updated":"20230724003205"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"image-20211207102823403","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"C:\\Users\\560451\\AppData\\Roaming\\Typora\\typora-user-images\\image-20211207102823403.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230724003206-xdph8h5","Type":"NodeParagraph","Properties":{"id":"20230724003206-xdph8h5","updated":"20230724003206"},"Children":[{"Type":"NodeText","Data":"而通过这样的设定值咱们的 vsftpd 可以达到如下的功能："}]},{"ID":"20230724003207-rykyt9s","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003207-rykyt9s","updated":"20230724003207"},"Children":[{"ID":"20230724003208-1zsozyk","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003208-1zsozyk","updated":"20230724003208"},"Children":[{"ID":"20230724003209-9muzbqv","Type":"NodeParagraph","Properties":{"id":"20230724003209-9muzbqv","updated":"20230724003209"},"Children":[{"Type":"NodeText","Data":"你可以使用anonymous 这个匿名帐号或其他实体帐号(/etc/passwd) 登入；"}]}]},{"ID":"20230724003210-eacf9pe","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003210-eacf9pe","updated":"20230724003210"},"Children":[{"ID":"20230724003211-w7p1fma","Type":"NodeParagraph","Properties":{"id":"20230724003211-w7p1fma","updated":"20230724003211"},"Children":[{"Type":"NodeText","Data":"anonymous 的家目录在/var/ftp ，且无上传权限，亦已经被chroot 了；"}]}]},{"ID":"20230724003212-mmlczxx","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003212-mmlczxx","updated":"20230724003212"},"Children":[{"ID":"20230724003213-fb3yosm","Type":"NodeParagraph","Properties":{"id":"20230724003213-fb3yosm","updated":"20230724003213"},"Children":[{"Type":"NodeText","Data":"实体用户的家目录参考/etc/passwd，并没有被chroot，可前往任何有权限可进入的目录中；"}]}]},{"ID":"20230724003214-5rcs6yr","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003214-5rcs6yr","updated":"20230724003214"},"Children":[{"ID":"20230724003215-ofxv1dv","Type":"NodeParagraph","Properties":{"id":"20230724003215-ofxv1dv","updated":"20230724003215"},"Children":[{"Type":"NodeText","Data":"任何于/etc/vsftpd/ftpusers 内存在的帐号均无法使用vsftpd (PAM)；"}]}]},{"ID":"20230724003216-eelb53g","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003216-eelb53g","updated":"20230724003216"},"Children":[{"ID":"20230724003217-94h89iz","Type":"NodeParagraph","Properties":{"id":"20230724003217-94h89iz","updated":"20230724003217"},"Children":[{"Type":"NodeText","Data":"可利用/etc/hosts.{allow|deny} 来作为基础防火墙；"}]}]},{"ID":"20230724003218-xut7zwo","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003218-xut7zwo","updated":"20230724003218"},"Children":[{"ID":"20230724003219-6iyvke2","Type":"NodeParagraph","Properties":{"id":"20230724003219-6iyvke2","updated":"20230724003219"},"Children":[{"Type":"NodeText","Data":"当用户端有任何上传/下载资讯时，该资讯会被纪录到/var/log/xferlog 中；"}]}]},{"ID":"20230724003220-qvgvoyn","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003220-qvgvoyn","updated":"20230724003220"},"Children":[{"ID":"20230724003221-meual7d","Type":"NodeParagraph","Properties":{"id":"20230724003221-meual7d","updated":"20230724003221"},"Children":[{"Type":"NodeText","Data":"主动式连线的埠口为port 20；"}]}]},{"ID":"20230724003222-79l8d9n","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003222-79l8d9n","updated":"20230724003222"},"Children":[{"ID":"20230724003223-ja2ka7h","Type":"NodeParagraph","Properties":{"id":"20230724003223-ja2ka7h","updated":"20230724003223"},"Children":[{"Type":"NodeText","Data":"使用格林威治时间(GMT)。"}]}]}]},{"ID":"20230724003224-cloxr3o","Type":"NodeParagraph","Properties":{"id":"20230724003224-cloxr3o","updated":"20230724003224"},"Children":[{"Type":"NodeText","Data":"所以当你启动vsftpd 后，你的实体用户就能够直接利用vsftpd 这个服务来传输他自己的资料了。不过比较大的问题是，因为vsftpd 预设使用GMT 时间，因为你在用户端使用ftp 软体连接到FTP 伺服器时，会发现每个档案的时间都慢了八小时了！真是讨厌啊！所以建议你加设一个参数值，就是『 use_localtime=YES 』啰！"}]},{"ID":"20230724003225-clg957i","Type":"NodeParagraph","Properties":{"id":"20230724003225-clg957i","updated":"20230724003225"},"Children":[{"Type":"NodeText","Data":"如此一来你的FTP 伺服器不但可以提供匿名帐号来下载/var/ftp 的资料，如果使用实体帐号来登入的话， 就能够进入到该使用者的家目录底下去了！真是很简单方便的一个设定啊！且使用本地端时间呢！"},{"Type":"NodeSup","Children":[{"Type":"NodeSupOpenMarker","Data":"^"},{"Type":"NodeText","Data":"_"},{"Type":"NodeSupCloseMarker","Data":"^"}]}]},{"ID":"20230724003226-7rjt6x3","Type":"NodeParagraph","Properties":{"id":"20230724003226-7rjt6x3","updated":"20230724003226"},"Children":[{"Type":"NodeText","Data":"另外，如果你预计要将FTP 开放给Internet 使用时，请注意得要开放防火墙喔！关于防火墙的建置情况， 由于牵涉到资料流的主动、被动连线方式，因此，还得要加入防火墙模组。这部份我们在后续的 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"http://linux.vbird.org/linux_server/0410vsftpd.php#other_iptables","TextMarkTextContent":"21.2.8 小节"},{"Type":"NodeText","Data":"再加以介绍，反正，最终记得要开放FTP 的连线要求就对了！"}]},{"ID":"20230724003227-x0ne4v7","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724003227-x0ne4v7","updated":"20230724003227"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"八、针对实体账号的设置"}]},{"ID":"20230724003228-68v1h82","Type":"NodeParagraph","Properties":{"id":"20230724003228-68v1h82","updated":"20230724003228"},"Children":[{"Type":"NodeText","Data":"虽然在CentOS 的预设情况当中实体用户已经可以使用FTP 的服务了，不过我们可能还需要一些额外的功能来限制实体用户。举例来说，限制使用者无法离开家目录(chroot)、限制下载速率、限制使用者上传档案时的权限(mask) 等等。底下我们先列出一些希望达到的功能，然后再继续进行额外功能的处理："}]},{"ID":"20230724003229-t3gajm8","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003229-t3gajm8","updated":"20230724003229"},"Children":[{"ID":"20230724003230-bawxb2c","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003230-bawxb2c","updated":"20230724003230"},"Children":[{"ID":"20230724003231-gdljjc1","Type":"NodeParagraph","Properties":{"id":"20230724003231-gdljjc1","updated":"20230724003231"},"Children":[{"Type":"NodeText","Data":"希望使用台湾本地时间取代GMT 时间；"}]}]},{"ID":"20230724003232-sop8abv","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003232-sop8abv","updated":"20230724003232"},"Children":[{"ID":"20230724003233-xuhsvhb","Type":"NodeParagraph","Properties":{"id":"20230724003233-xuhsvhb","updated":"20230724003233"},"Children":[{"Type":"NodeText","Data":"使用者登入时显示一些欢迎讯息的资讯；"}]}]},{"ID":"20230724003234-ojmxcfr","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003234-ojmxcfr","updated":"20230724003234"},"Children":[{"ID":"20230724003235-dxrmmlh","Type":"NodeParagraph","Properties":{"id":"20230724003235-dxrmmlh","updated":"20230724003235"},"Children":[{"Type":"NodeText","Data":"系统帐号不可登入主机(亦即UID 小于500 以下的帐号)；"}]}]},{"ID":"20230724003236-h4xj90b","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003236-h4xj90b","updated":"20230724003236"},"Children":[{"ID":"20230724003237-573p9ap","Type":"NodeParagraph","Properties":{"id":"20230724003237-573p9ap","updated":"20230724003237"},"Children":[{"Type":"NodeText","Data":"一般实体用户可以进行上传、下载、建立目录及修改档案等动作；"}]}]},{"ID":"20230724003238-bqx3lnr","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003238-bqx3lnr","updated":"20230724003238"},"Children":[{"ID":"20230724003239-w7a1fv0","Type":"NodeParagraph","Properties":{"id":"20230724003239-w7a1fv0","updated":"20230724003239"},"Children":[{"Type":"NodeText","Data":"使用者新增的档案、目录之umask 希望设定为002；"}]}]},{"ID":"20230724003240-ke3owe2","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003240-ke3owe2","updated":"20230724003240"},"Children":[{"ID":"20230724003241-x4jdfmj","Type":"NodeParagraph","Properties":{"id":"20230724003241-x4jdfmj","updated":"20230724003241"},"Children":[{"Type":"NodeText","Data":"其他主机设定值保留"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"http://linux.vbird.org/linux_server/0410vsftpd.php#server_basic","TextMarkTextContent":"预设值"},{"Type":"NodeText","Data":"即可。"}]}]}]},{"ID":"20230724003242-9c06jxt","Type":"NodeParagraph","Properties":{"id":"20230724003242-9c06jxt","updated":"20230724003242"},"Children":[{"Type":"NodeText","Data":"你可以自行处理vsftpd.conf 这个档案，以下则是一个范例。注意，如果你的vsftpd.conf 没有相关设定值， 请自行补上吧！OK！让我们开始一步一步来依序处理先："}]},{"ID":"20230724003243-b51b9x7","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724003243-b51b9x7","updated":"20230724003243"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1. 先建立主设定档 vsftpd.conf ,这个设定档已经包含了主要的设定值，"}]},{"ID":"20230724003244-agsxil2","Type":"NodeParagraph","Properties":{"id":"20230724003244-agsxil2","updated":"20230724003244"},"Children":[{"Type":"NodeText","Data":"vim /etc/vsftpd/vsftpd.conf"}]},{"ID":"20230724003245-izmbmqy","Type":"NodeParagraph","Properties":{"id":"20230724003245-izmbmqy","updated":"20230724003245"},"Children":[{"Type":"NodeText","Data":"aninymous_enable=NO"}]},{"ID":"20230724003246-zqwx938","Type":"NodeParagraph","Properties":{"id":"20230724003246-zqwx938","updated":"20230724003246"},"Children":[{"Type":"NodeText","Data":"与匿名者相关的资讯，在这个案例中将匿名登入取消"}]},{"ID":"20230724003247-adjbs5s","Type":"NodeParagraph","Properties":{"id":"20230724003247-adjbs5s","updated":"20230724003247"},"Children":[{"Type":"NodeText","Data":"local_enable=YES"}]},{"ID":"20230724003248-w82a6op","Type":"NodeParagraph","Properties":{"id":"20230724003248-w82a6op","updated":"20230724003248"},"Children":[{"Type":"NodeText","Data":"write_enable=YES"}]},{"ID":"20230724003249-twgizld","Type":"NodeParagraph","Properties":{"id":"20230724003249-twgizld","updated":"20230724003249"},"Children":[{"Type":"NodeText","Data":"local_umask= 002"}]},{"ID":"20230724003250-mffw20z","Type":"NodeParagraph","Properties":{"id":"20230724003250-mffw20z","updated":"20230724003250"},"Children":[{"Type":"NodeText","Data":"userlist_enable=YES"}]},{"ID":"20230724003251-vfsy2gh","Type":"NodeParagraph","Properties":{"id":"20230724003251-vfsy2gh","updated":"20230724003251"},"Children":[{"Type":"NodeText","Data":"userlist_deny=YES"}]},{"ID":"20230724003252-8iu9g6n","Type":"NodeParagraph","Properties":{"id":"20230724003252-8iu9g6n","updated":"20230724003252"},"Children":[{"Type":"NodeText","Data":"userlist_file=/etc/vsftpd/user_list 这个档案必须存在"}]},{"ID":"20230724003253-kl0qj8l","Type":"NodeParagraph","Properties":{"id":"20230724003253-kl0qj8l","updated":"20230724003253"},"Children":[{"Type":"NodeText","Data":"与实体用户相关的资讯，可写入，且umake 为002"}]},{"ID":"20230724003254-nqaup38","Type":"NodeParagraph","Properties":{"id":"20230724003254-nqaup38","updated":"20230724003254"},"Children":[{"Type":"NodeText","Data":"use_localtime=YES"}]},{"ID":"20230724003255-khwuq4o","Type":"NodeParagraph","Properties":{"id":"20230724003255-khwuq4o","updated":"20230724003255"},"Children":[{"Type":"NodeText","Data":"dirmessage_enable=YES"}]},{"ID":"20230724003256-4q6ss2i","Type":"NodeParagraph","Properties":{"id":"20230724003256-4q6ss2i","updated":"20230724003256"},"Children":[{"Type":"NodeText","Data":"xferlog_enable=YES"}]},{"ID":"20230724003257-fzg2pyi","Type":"NodeParagraph","Properties":{"id":"20230724003257-fzg2pyi","updated":"20230724003257"},"Children":[{"Type":"NodeText","Data":"connect_from_port_20=YES"}]},{"ID":"20230724003258-qx04zto","Type":"NodeParagraph","Properties":{"id":"20230724003258-qx04zto","updated":"20230724003258"},"Children":[{"Type":"NodeText","Data":"xferlog_std_format=YES"}]},{"ID":"20230724003259-s4dqhqd","Type":"NodeParagraph","Properties":{"id":"20230724003259-s4dqhqd","updated":"20230724003259"},"Children":[{"Type":"NodeText","Data":"listen=YES"}]},{"ID":"20230724003260-vdl19kf","Type":"NodeParagraph","Properties":{"id":"20230724003260-vdl19kf","updated":"20230724003260"},"Children":[{"Type":"NodeText","Data":"pam_service_name=vsftpd"}]},{"ID":"20230724003261-nr2wb1d","Type":"NodeParagraph","Properties":{"id":"20230724003261-nr2wb1d","updated":"20230724003261"},"Children":[{"Type":"NodeText","Data":"tcp_wrapper=YES"}]},{"ID":"20230724003262-kbk1mrm","Type":"NodeParagraph","Properties":{"id":"20230724003262-kbk1mrm","updated":"20230724003262"},"Children":[{"Type":"NodeText","Data":"banner_file=/etc/vsftpd/welcome.txt 这个文件必须存在，手动建立"}]},{"ID":"20230724003263-llqri6i","Type":"NodeParagraph","Properties":{"id":"20230724003263-llqri6i","updated":"20230724003263"},"Children":[{"Type":"NodeText","Data":"与服务器环境相关的设定"}]},{"ID":"20230724003264-srnmxch","Type":"NodeParagraph","Properties":{"id":"20230724003264-srnmxch","updated":"20230724003264"},"Children":[{"Type":"NodeText","Data":"/etc/inin.d/xinetd restart"}]},{"ID":"20230724003265-uneq7z6","Type":"NodeParagraph","Properties":{"id":"20230724003265-uneq7z6","updated":"20230724003265"},"Children":[{"Type":"NodeText","Data":"/etc/init.d/vsftpd restart"}]},{"ID":"20230724003266-uj9ii6s","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724003266-uj9ii6s","updated":"20230724003266"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2.建立欢迎讯息"}]},{"ID":"20230724003267-xu962dm","Type":"NodeParagraph","Properties":{"id":"20230724003267-xu962dm","updated":"20230724003267"},"Children":[{"Type":"NodeText","Data":"当我们想让登入者可查阅咱们系统管理员所下达的『公告』事项时，可以使用这个设定！那就是 banner_file=/etc/vsftpd/welcome.txt 这个参数的用途了！我们可以编辑这个档案即可。"}]},{"ID":"20230724003268-v6kvnlj","Type":"NodeParagraph","Properties":{"id":"20230724003268-v6kvnlj","updated":"20230724003268"},"Children":[{"Type":"NodeText","Data":"vim /etc/vsftpd/welcome.txt"}]},{"ID":"20230724003269-hi2xk81","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724003269-hi2xk81","updated":"20230724003269"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"3. 建立限制系统账号登入的文件"}]},{"ID":"20230724003270-5g2y9uc","Type":"NodeParagraph","Properties":{"id":"20230724003270-5g2y9uc","updated":"20230724003270"},"Children":[{"Type":"NodeText","Data":"再来是针对系统帐号来给予抵挡的机制，其实有两个档案啦，一个是PAM 模组管的，一个是vsftpd 主动提供的， 在预设的情况下这两个档案分别是："}]},{"ID":"20230724003271-mhoebcw","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003271-mhoebcw","updated":"20230724003271"},"Children":[{"ID":"20230724003272-0g4p4sw","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003272-0g4p4sw","updated":"20230724003272"},"Children":[{"ID":"20230724003273-1aebu91","Type":"NodeParagraph","Properties":{"id":"20230724003273-1aebu91","updated":"20230724003273"},"Children":[{"Type":"NodeText","Data":"/etc/vsftpd/ftpusers：就是/etc/pam.d/vsftpd 这个档案的设定所影响的；"}]}]},{"ID":"20230724003274-jp1fn4e","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230724003274-jp1fn4e","updated":"20230724003274"},"Children":[{"ID":"20230724003275-dwkkejs","Type":"NodeParagraph","Properties":{"id":"20230724003275-dwkkejs","updated":"20230724003275"},"Children":[{"Type":"NodeText","Data":"/etc/vsftpd/user_list：由vsftpd.conf 的userlist_file 所设定。"}]}]}]},{"ID":"20230724003276-plw29id","Type":"NodeParagraph","Properties":{"id":"20230724003276-plw29id","updated":"20230724003276"},"Children":[{"Type":"NodeText","Data":"这两个档案的内容是一样的哩～并且这两个档案必须要存在才行。请你参考你的/etc/passwd 设定档， 然后将UID 小于500 的帐号名称给他同时写到这两个档案内吧！一行一个帐号！"}]},{"ID":"20230724003277-rxsrmqe","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724003277-rxsrmqe","updated":"20230724003277"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"4. 测试结果"}]},{"ID":"20230724003278-m7cgof6","Type":"NodeParagraph","Properties":{"id":"20230724003278-m7cgof6","updated":"20230724003278"},"Children":[{"Type":"NodeText","Data":"测试使用已知使用者登入，"}]},{"ID":"20230724003279-tkgnq58","Type":"NodeParagraph","Properties":{"id":"20230724003279-tkgnq58","updated":"20230724003279"},"Children":[{"Type":"NodeText","Data":"ftp localhost"}]},{"ID":"20230724003280-p5dc4nh","Type":"NodeParagraph","Properties":{"id":"20230724003280-p5dc4nh","updated":"20230724003280"},"Children":[{"Type":"NodeText","Data":"由于预设一般用户无法登入FTP 的！因为SELinux 的问题啦！请参考下个小节的方式来处理。然后以上面的方式测试完毕后，你可以在登入者帐号处分别填写(1)root (2)anonymous 来尝试登入看看！如果不能登入的话，那就是设定OK 的啦！(root 不能登入是因为PAM 模组以及user_list 设定值的关系， 而匿名无法登入，是因为我们vsftpd.conf 里头就是设定不能用匿名登入嘛！"}]}]}