{"ID":"20240406081147-ws1vnel","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f3c7","id":"20240406081147-ws1vnel","title":"3-31 Pytorch 与 autograd 中的几个重要概念 -variable - grad- grad_fn","updated":"20240406083820"},"Children":[{"ID":"20240406081239-vu38m8j","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240406081239-vu38m8j","updated":"20240406081309"},"Children":[{"Type":"NodeText","Data":"关于 Autorgrad 的几个概念"}]},{"ID":"20240406081325-hxfouvo","Type":"NodeParagraph","Properties":{"id":"20240406081325-hxfouvo","updated":"20240406081325"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240406081325-iupfs2p.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240406081147-40bbx2o","Type":"NodeList","ListData":{"Typ":3},"Properties":{"id":"20240406081147-40bbx2o","updated":"20240406082724"},"Children":[{"ID":"20240406081521-j1v28lg","Type":"NodeListItem","ListData":{"Typ":3,"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406081521-j1v28lg","updated":"20240406081521"},"Children":[{"Type":"NodeTaskListItemMarker"},{"ID":"20240406081521-5ygpy08","Type":"NodeParagraph","Properties":{"id":"20240406081521-5ygpy08","updated":"20240406081528"},"Children":[{"Type":"NodeText","Data":"grad VS grad_fn"}]},{"ID":"20240406081528-gvioy9m","Type":"NodeList","ListData":{},"Properties":{"id":"20240406081528-gvioy9m","updated":"20240406081530"},"Children":[{"ID":"20240406081530-aaqulwh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406081530-aaqulwh","updated":"20240406081530"},"Children":[{"ID":"20240406081530-n6yce3o","Type":"NodeParagraph","Properties":{"id":"20240406081530-n6yce3o","updated":"20240406081625"},"Children":[{"Type":"NodeText","Data":"grad: 该Tensor的梯度值，每次在计算backward时都需要将前一时刻的梯度归零，否则梯度值会一直累加"}]}]},{"ID":"20240406081626-es8d6bs","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406081626-es8d6bs"},"Children":[{"ID":"20240406081626-fvab0cg","Type":"NodeParagraph","Properties":{"id":"20240406081626-fvab0cg","updated":"20240406081736"},"Children":[{"Type":"NodeText","Data":"grad_fn 叶子节点通常为None ，只有结果节点 的 grad_fn才有效，用于指示梯度函数是哪种类型"}]}]}]}]},{"ID":"20240406081737-9eu1x7q","Type":"NodeListItem","ListData":{"Typ":3,"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406081737-9eu1x7q","updated":"20240406082724"},"Children":[{"Type":"NodeTaskListItemMarker"},{"ID":"20240406081737-9pi0q2v","Type":"NodeParagraph","Properties":{"id":"20240406081737-9pi0q2v","updated":"20240406081757"},"Children":[{"Type":"NodeText","Data":"backward 函数"}]},{"ID":"20240406081757-0c6ba6b","Type":"NodeList","ListData":{},"Properties":{"id":"20240406081757-0c6ba6b","updated":"20240406082724"},"Children":[{"ID":"20240406081800-7qyybup","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406081800-7qyybup","updated":"20240406082724"},"Children":[{"ID":"20240406081800-1lfciv0","Type":"NodeParagraph","Properties":{"id":"20240406081800-1lfciv0","updated":"20240406081914"},"Children":[{"Type":"NodeText","Data":"torch.autograd.backward(tensors,grad_tensors=None,retaion_graph=None,create_grapht=False)"}]},{"ID":"20240406081915-arj4qt1","Type":"NodeList","ListData":{},"Properties":{"id":"20240406081915-arj4qt1","updated":"20240406082724"},"Children":[{"ID":"20240406081916-6kkq213","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406081916-6kkq213","updated":"20240406081916"},"Children":[{"ID":"20240406081916-o4wnfz1","Type":"NodeParagraph","Properties":{"id":"20240406081916-o4wnfz1","updated":"20240406082020"},"Children":[{"Type":"NodeText","Data":"tensor:用于计算梯度的tensor，torch.autograd.backward(z) == z.backward()"}]}]},{"ID":"20240406082020-s4p1kyy","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406082020-s4p1kyy"},"Children":[{"ID":"20240406082020-rgnjld4","Type":"NodeParagraph","Properties":{"id":"20240406082020-rgnjld4","updated":"20240406082114"},"Children":[{"Type":"NodeText","Data":"grad_tensors:在计算矩阵的梯度时会用到，他其实也是一个tensor，shape 一般需要和前面的tensor保持一致"}]}]},{"ID":"20240406082434-ovnmw1y","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406082434-ovnmw1y"},"Children":[{"ID":"20240406082434-cnfldr0","Type":"NodeParagraph","Properties":{"id":"20240406082434-cnfldr0","updated":"20240406082600"},"Children":[{"Type":"NodeText","Data":"retain_graph: 通常在调用一次 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"backward"},{"Type":"NodeText","Data":" 后，pytorch 会自动把计算图销毁，所以想要对某个变量重复调用backward，则需要将该参数设置为True"}]}]},{"ID":"20240406082610-w2im7u0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406082610-w2im7u0","updated":"20240406082724"},"Children":[{"ID":"20240406082610-syeo4ue","Type":"NodeParagraph","Properties":{"id":"20240406082610-syeo4ue","updated":"20240406082724"},"Children":[{"Type":"NodeText","Data":"create_graph：如果为True, 那么就创建一个专门的graph of the derivative 这可以方便计算高阶微分。"}]}]}]}]}]}]}]},{"ID":"20240406082910-87mp3lj","Type":"NodeList","ListData":{"Typ":3},"Properties":{"id":"20240406082910-87mp3lj","updated":"20240406083348"},"Children":[{"ID":"20240406082911-qspqvqp","Type":"NodeListItem","ListData":{"Typ":3,"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406082911-qspqvqp","updated":"20240406083348"},"Children":[{"Type":"NodeTaskListItemMarker"},{"ID":"20240406082911-jw93hhc","Type":"NodeParagraph","Properties":{"id":"20240406082911-jw93hhc","updated":"20240406082929"},"Children":[{"Type":"NodeText","Data":"torch.autograd.grad() 函数"}]},{"ID":"20240406082931-da8vq43","Type":"NodeList","ListData":{},"Properties":{"id":"20240406082931-da8vq43","updated":"20240406083348"},"Children":[{"ID":"20240406082933-gk2ez3h","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406082933-gk2ez3h","updated":"20240406083348"},"Children":[{"ID":"20240406082933-zrcotmy","Type":"NodeParagraph","Properties":{"id":"20240406082933-zrcotmy","updated":"20240406083056"},"Children":[{"Type":"NodeText","Data":"def grad(outputs,inputs, grad_outputs = None, retain_graph= None,create_graph=False,only_inputs=True,allow=unused=False)"}]},{"ID":"20240406083101-v4y3tbb","Type":"NodeList","ListData":{},"Properties":{"id":"20240406083101-v4y3tbb","updated":"20240406083348"},"Children":[{"ID":"20240406083107-ok7j2nb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406083107-ok7j2nb","updated":"20240406083107"},"Children":[{"ID":"20240406083107-voe2791","Type":"NodeParagraph","Properties":{"id":"20240406083107-voe2791","updated":"20240406083131"},"Children":[{"Type":"NodeText","Data":"计算和返回 output关于inputs的梯度的和。"}]}]},{"ID":"20240406083132-rl4afxo","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406083132-rl4afxo"},"Children":[{"ID":"20240406083132-ryzvr87","Type":"NodeParagraph","Properties":{"id":"20240406083132-ryzvr87","updated":"20240406083157"},"Children":[{"Type":"NodeText","Data":"outputs:函数的因变量，即需要求导的那个函数"}]}]},{"ID":"20240406083157-0lwrgfw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406083157-0lwrgfw"},"Children":[{"ID":"20240406083157-owgfcgd","Type":"NodeParagraph","Properties":{"id":"20240406083157-owgfcgd","updated":"20240406083206"},"Children":[{"Type":"NodeText","Data":"inputs:函数的自变量"}]}]},{"ID":"20240406083207-nz0vbtp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406083207-nz0vbtp"},"Children":[{"ID":"20240406083207-uobj790","Type":"NodeParagraph","Properties":{"id":"20240406083207-uobj790","updated":"20240406083222"},"Children":[{"Type":"NodeText","Data":"grad_outputs:同backward"}]}]},{"ID":"20240406083223-fs3fzpe","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406083223-fs3fzpe"},"Children":[{"ID":"20240406083223-fxl3zxg","Type":"NodeParagraph","Properties":{"id":"20240406083223-fxl3zxg","updated":"20240406083244"},"Children":[{"Type":"NodeText","Data":"only_inputs：只计算input的梯度"}]}]},{"ID":"20240406083245-bh5ch1k","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406083245-bh5ch1k","updated":"20240406083348"},"Children":[{"ID":"20240406083245-og1776x","Type":"NodeParagraph","Properties":{"id":"20240406083245-og1776x","updated":"20240406083348"},"Children":[{"Type":"NodeText","Data":"allow_unused(bool ，可选） 如果为False 当计算输出出错时，（因此他们的梯度永远是0）指明不使用的inputs"}]}]}]}]}]}]}]},{"ID":"20240406083441-4mdmcgo","Type":"NodeParagraph","Properties":{"id":"20240406083441-4mdmcgo","updated":"20240406083458"},"Children":[{"Type":"NodeText","Data":"torch.autograd 包中的其他函数："}]},{"ID":"20240406083458-1owfsh4","Type":"NodeList","ListData":{},"Properties":{"id":"20240406083458-1owfsh4","updated":"20240406083613"},"Children":[{"ID":"20240406083459-kflupsd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406083459-kflupsd","updated":"20240406083459"},"Children":[{"ID":"20240406083459-wwklee9","Type":"NodeParagraph","Properties":{"id":"20240406083459-wwklee9","updated":"20240406083551"},"Children":[{"Type":"NodeText","Data":"torch.autograd.enable_grad: 启动梯度计算的上下文管理器"}]}]},{"ID":"20240406083551-9qn8ofc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406083551-9qn8ofc","updated":"20240406083613"},"Children":[{"ID":"20240406083551-1pg84qu","Type":"NodeParagraph","Properties":{"id":"20240406083551-1pg84qu","updated":"20240406083613"},"Children":[{"Type":"NodeText","Data":"torch.autograd.no_grad:禁止梯度计算的上下文管理器"}]}]}]},{"ID":"20240406083730-py8tqng","Type":"NodeList","ListData":{},"Properties":{"id":"20240406083730-py8tqng","updated":"20240406083820"},"Children":[{"ID":"20240406083735-wt2pnrv","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240406083735-wt2pnrv","updated":"20240406083820"},"Children":[{"ID":"20240406083735-w4twepo","Type":"NodeParagraph","Properties":{"id":"20240406083735-w4twepo","updated":"20240406083820"},"Children":[{"Type":"NodeText","Data":"torch.autograd.set_grad_enabled(mode): 设置是否进行梯度计算的上下文管理器。"}]}]}]}]}