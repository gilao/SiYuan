{"ID":"20240228154808-hb1w20y","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f35d","id":"20240228154808-hb1w20y","title":"3-26 Pytorch 简单编程技巧","updated":"20240229155604"},"Children":[{"ID":"20240228154808-pv4y0ia","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240228154808-pv4y0ia","updated":"20240228154837"},"Children":[{"Type":"NodeText","Data":"模型的保存 加载"}]},{"ID":"20240228154837-zor58l2","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240228154837-zor58l2","updated":"20240228154921"},"Children":[{"Type":"NodeText","Data":"torch.saves(state,dir) 保存 序列化"}]},{"ID":"20240228154859-l65zf5l","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240228154859-l65zf5l","updated":"20240228154911"},"Children":[{"Type":"NodeText","Data":"torch.load(dir) 加载模型"}]},{"ID":"20240228154911-q4lwlm7","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240228154911-q4lwlm7","updated":"20240228160621"},"Children":[{"Type":"NodeText","Data":"并行化"}]},{"ID":"20240228160623-jokck7g","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240228160623-jokck7g","updated":"20240228160635"},"Children":[{"Type":"NodeText","Data":"torch.get_num_threads():"}]},{"ID":"20240228160636-ymuc1ab","Type":"NodeParagraph","Properties":{"id":"20240228160636-ymuc1ab","updated":"20240228160655"},"Children":[{"Type":"NodeText","Data":"获得用于并行化CPU操作的OpenMP线程数"}]},{"ID":"20240228160655-vli4ra6","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240228160655-vli4ra6","updated":"20240228160710"},"Children":[{"Type":"NodeText","Data":"torch.set_num_threads(int):"}]},{"ID":"20240228160710-qcc3wwg","Type":"NodeParagraph","Properties":{"id":"20240228160710-qcc3wwg","updated":"20240228160726"},"Children":[{"Type":"NodeText","Data":"设定用于并行化CPU操作的OpenMP线程数"}]},{"ID":"20240228160727-1rli7yw","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240228160727-1rli7yw","updated":"20240228160839"},"Children":[{"Type":"NodeText","Data":"分布式"}]},{"ID":"20240228160839-63nk6t2","Type":"NodeParagraph","Properties":{"id":"20240228160839-63nk6t2","updated":"20240228160952"},"Children":[{"Type":"NodeText","Data":"python 在默认情况下只使用一个GPU，在多个GPU 的情况下就需要使用pytorch提供的 DataParallel"}]},{"ID":"20240228160953-65p26ff","Type":"NodeParagraph","Properties":{"id":"20240228160953-65p26ff","updated":"20240228160956"},"Children":[{"Type":"NodeText","Data":"单机多卡"}]},{"ID":"20240228160957-2yaa0x1","Type":"NodeParagraph","Properties":{"id":"20240228160957-2yaa0x1","updated":"20240228160959"},"Children":[{"Type":"NodeText","Data":"多机多卡"}]},{"ID":"20240228160959-03cjw7c","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240228160959-03cjw7c","updated":"20240228161023"},"Children":[{"Type":"NodeText","Data":"Tensor on GPU"}]},{"ID":"20240228161023-3vkdgrj","Type":"NodeParagraph","Properties":{"id":"20240228161023-3vkdgrj","updated":"20240228161101"},"Children":[{"Type":"NodeText","Data":"用方法 to() 可以将 Tensor 在CPU和GPU （需要硬件支持）之间相互移动"}]},{"ID":"20240228161102-951qj8a","Type":"NodeParagraph","Properties":{"id":"20240228161102-951qj8a","updated":"20240228161110"},"Children":[{"Type":"NodeText","Data":"如下示例代码："}]},{"ID":"20240228161110-qh6sck6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240228161110-qh6sck6","updated":"20240228161413"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"if torch.cuda.is_available():\n    device = torch.device(\"cuda\") # GPU\n    y = torch.ones_like(x,device=device) # 直接创建一个在GPU上的Tensor\n    x = x.to(device)    # 等价于 .to(\"cuda\")\n    z = x + y\n    print(z)\n    print(z.to(\"cpu\",torch.double)) # to() 还可以同时更改数据类型"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240228161436-lt9mhza","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240228161436-lt9mhza","updated":"20240228161450"},"Children":[{"Type":"NodeText","Data":"Tensor 的相关配置"}]},{"ID":"20240228161451-xgzqq9z","Type":"NodeList","ListData":{},"Properties":{"id":"20240228161451-xgzqq9z","updated":"20240228161654"},"Children":[{"ID":"20240228161538-bqzpft2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240228161538-bqzpft2","updated":"20240228161538"},"Children":[{"ID":"20240228161538-1pygh07","Type":"NodeParagraph","Properties":{"id":"20240228161538-1pygh07","updated":"20240228161600"},"Children":[{"Type":"NodeText","Data":"torch.is tensor() 如果是pytorch的tensor类型返回true"}]}]},{"ID":"20240228161605-xt01o3b","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240228161605-xt01o3b"},"Children":[{"ID":"20240228161605-z18dfqz","Type":"NodeParagraph","Properties":{"id":"20240228161605-z18dfqz"},"Children":[{"Type":"NodeText","Data":"torch.is_storage() 如果是pytorch的storage类型返回ture"}]}]},{"ID":"20240228161614-l3v4avz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240228161614-l3v4avz"},"Children":[{"ID":"20240228161614-lou7ypu","Type":"NodeParagraph","Properties":{"id":"20240228161614-lou7ypu","updated":"20240228161625"},"Children":[{"Type":"NodeText","Data":"torch.set flush denormal(mode)​防止一些不正常的元素产生"}]}]},{"ID":"20240228161632-xpst6uf","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240228161632-xpst6uf"},"Children":[{"ID":"20240228161632-b5du1pl","Type":"NodeParagraph","Properties":{"id":"20240228161632-b5du1pl"},"Children":[{"Type":"NodeText","Data":"torch.set default _dtype(d)​对torch.tensor() 设置默认的浮点类型"}]}]},{"ID":"20240228161639-wkj76m2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240228161639-wkj76m2"},"Children":[{"ID":"20240228161639-zwt6bmt","Type":"NodeParagraph","Properties":{"id":"20240228161639-zwt6bmt","updated":"20240228161646"},"Children":[{"Type":"NodeText","Data":"torch.set_printoptions(precision=None, threshold=None,edgeitems=None,linewidth=None, profile=None)# 设置printing的打印参数"}]}]},{"ID":"20240228161653-3pkx7tp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240228161653-3pkx7tp","updated":"20240228161654"},"Children":[{"ID":"20240228161653-icok525","Type":"NodeParagraph","Properties":{"id":"20240228161653-icok525","updated":"20240228161654"},"Children":[{"Type":"NodeText","Data":"等等"}]}]}]},{"ID":"20240228161657-dcxk7ps","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240228161657-dcxk7ps","updated":"20240228161719"},"Children":[{"Type":"NodeText","Data":"Tensor 与 numpy 的相互转换"}]},{"ID":"20240228161720-1fmw6ti","Type":"NodeParagraph","Properties":{"id":"20240228161720-1fmw6ti","updated":"20240228161736"},"Children":[{"Type":"NodeText","Data":"torch.from_numpy(ndarry)"}]},{"ID":"20240228161736-34rs8va","Type":"NodeParagraph","Properties":{"id":"20240228161736-34rs8va","updated":"20240228161742"},"Children":[{"Type":"NodeText","Data":"a.numpy()"}]},{"ID":"20240229155604-qbx0871","Type":"NodeParagraph","Properties":{"id":"20240229155604-qbx0871"}}]}