{"ID":"20240620004130-pf6keen","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f6e4-fe0f","id":"20240620004130-pf6keen","title":"使用 Buffalo 快速构建 Go Web 应用","type":"doc","updated":"20240620004148"},"Children":[{"ID":"20240620004148-atxnpke","Type":"NodeParagraph","Properties":{"id":"20240620004148-atxnpke","updated":"20240620004148"},"Children":[{"Type":"NodeText","Data":"Buffalo是面向Go语言的Web开发框架，它旨在简化Web应用的开发流程，并且提供了一整套的生态系统，帮助开发者快速搭建起从前端（JavaScript，SCSS等）到后端（数据库，路由等）的Web项目。接下来，我们将深入探讨Buffalo框架的关键特性，并以丰富的例子讲解如何使用Buffalo进行高效的Web开发。"}]},{"ID":"20240620004148-cisjzsl","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240620004148-cisjzsl","updated":"20240620004148"},"Children":[{"Type":"NodeText","Data":"背景任务处理：Grift"}]},{"ID":"20240620004148-b9nmupz","Type":"NodeParagraph","Properties":{"id":"20240620004148-b9nmupz","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"Buffalo框架允许开发者通过Grift（类似于Ruby中的Rake任务）轻松运行背景任务。我们可以定义简单的任务来进行数据库维护、数据处理或者其他需要定时运行的作业。"}]},{"ID":"20240620004148-51htnal","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240620004148-51htnal","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"示例：创建一个Grift任务"}]},{"ID":"20240620004148-jt2oaif","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240620004148-jt2oaif","updated":"20240620004149"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"// 在Grifts目录下创建your_task.go文件\n\npackage grifts\n\nimport (\n    \"github.com/markbates/grift/grift\"\n)\n\nvar _ = grift.Desc(\"your_task\", \"说明你的任务做什么\")\nvar _ = grift.Add(\"your_task\", func(c *grift.Context) error {\n    // 在这里编写任务的具体逻辑\n    return nil\n})\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240620004148-50jsbza","Type":"NodeParagraph","Properties":{"id":"20240620004148-50jsbza","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"你可以使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"buffalo task your_task"},{"Type":"NodeText","Data":"​命令来运行你定义的任务。"}]},{"ID":"20240620004148-3webk8n","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240620004148-3webk8n","updated":"20240620004148"},"Children":[{"Type":"NodeText","Data":"Buffalo工具集"}]},{"ID":"20240620004148-2hg4qdp","Type":"NodeParagraph","Properties":{"id":"20240620004148-2hg4qdp","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"Buffalo提供了一套简单的工具箱，用于生成应用的不同部分，并执行常见的任务，如创建数据库模型、处理路由等。"}]},{"ID":"20240620004148-18v1nqs","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240620004148-18v1nqs","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"示例：生成数据库模型"}]},{"ID":"20240620004148-a1ajtf4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240620004148-a1ajtf4","updated":"20240620004149"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"buffalo generate model user name:string age:int\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240620004148-sq6rlb2","Type":"NodeParagraph","Properties":{"id":"20240620004148-sq6rlb2","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"这将生成用户模型，并对应的数据库迁移脚本。"}]},{"ID":"20240620004148-gu8b7de","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240620004148-gu8b7de","updated":"20240620004148"},"Children":[{"Type":"NodeText","Data":"前端资源处理：Webpack"}]},{"ID":"20240620004148-c77gxs5","Type":"NodeParagraph","Properties":{"id":"20240620004148-c77gxs5","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"Buffalo与Webpack集成，它会生成一个预设的Webpack配置，帮助你优化前端资源，如CSS, JavaScript等。"}]},{"ID":"20240620004148-1x6go6f","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240620004148-1x6go6f","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"示例：加入新的前端依赖"}]},{"ID":"20240620004148-kwpl3ee","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240620004148-kwpl3ee","updated":"20240620004149"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"npm install --save [your_dependency]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240620004148-sjj6lv1","Type":"NodeParagraph","Properties":{"id":"20240620004148-sjj6lv1","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"通过修改"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"assets/js/application.js"},{"Type":"NodeText","Data":"​或"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"assets/css/application.scss"},{"Type":"NodeText","Data":"​，来引入你的依赖。"}]},{"ID":"20240620004148-pt2lahj","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240620004148-pt2lahj","updated":"20240620004148"},"Children":[{"Type":"NodeText","Data":"热代码重载"}]},{"ID":"20240620004148-f4kyxzf","Type":"NodeParagraph","Properties":{"id":"20240620004148-f4kyxzf","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"Buffalo支持热代码重载功能，你可以在开发过程中使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"buffalo dev"},{"Type":"NodeText","Data":"​命令实时反映代码更改。"}]},{"ID":"20240620004148-5472yc8","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240620004148-5472yc8","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"示例：启动热代码重载的开发服务器"}]},{"ID":"20240620004148-cvgsznz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240620004148-cvgsznz","updated":"20240620004149"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"buffalo dev\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240620004148-q6hm0qq","Type":"NodeParagraph","Properties":{"id":"20240620004148-q6hm0qq","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"这个命令将启动Buffalo服务器，并在检测到代码变动时自动重载。"}]},{"ID":"20240620004148-0ty18ac","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240620004148-0ty18ac","updated":"20240620004148"},"Children":[{"Type":"NodeText","Data":"ORM：Pop集成"}]},{"ID":"20240620004148-dseko6v","Type":"NodeParagraph","Properties":{"id":"20240620004148-dseko6v","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"Buffalo与Pop ORM深度集成，支持多种数据库，包括MySQL/MariaDB, PostgreSQL, "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"CockroachDB"},{"Type":"NodeText","Data":"和SQLite。"}]},{"ID":"20240620004148-9zbqr8g","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240620004148-9zbqr8g","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"示例：创建和迁移数据库"}]},{"ID":"20240620004148-my077lq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240620004148-my077lq","updated":"20240620004149"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"buffalo db create    // 创建数据库\nbuffalo db migrate   // 迁移数据库\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240620004148-edkgh14","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240620004148-edkgh14","updated":"20240620004148"},"Children":[{"Type":"NodeText","Data":"路由：Gorilla工具集"}]},{"ID":"20240620004148-zqmzv5g","Type":"NodeParagraph","Properties":{"id":"20240620004148-zqmzv5g","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"Buffalo使用Gorilla Toolkit来管理路由、会话、cookies等，提供强大的路由功能。"}]},{"ID":"20240620004148-c1glxuw","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240620004148-c1glxuw","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"示例：定义路由"}]},{"ID":"20240620004148-ou6cjnq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240620004148-ou6cjnq","updated":"20240620004149"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"// 在app.go文件中定义路由\napp.GET(\"/example\", ExampleHandler)\n\n// 定义对应的处理器函数\nfunc ExampleHandler(c buffalo.Context) error {\n    return c.Render(200, r.HTML(\"example.html\"))\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240620004148-a1mblxi","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240620004148-a1mblxi","updated":"20240620004148"},"Children":[{"Type":"NodeText","Data":"模版渲染：Plush"}]},{"ID":"20240620004148-6ey6tpp","Type":"NodeParagraph","Properties":{"id":"20240620004148-6ey6tpp","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"Buffalo允许你使用像Rails那样的语法撰写Plush模板，并且可以通过自定义助手函数扩展功能。"}]},{"ID":"20240620004148-p9vybig","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240620004148-p9vybig","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"示例：创建一个Plush模板"}]},{"ID":"20240620004148-7en0qz0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240620004148-7en0qz0","updated":"20240620004149"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"\u003c!-- 在templates目录下创建example.plush.html --\u003e\n\u003ch1\u003eHello \u003c%= name %\u003e\u003c/h1\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240620004148-k31t419","Type":"NodeParagraph","Properties":{"id":"20240620004148-k31t419","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"在控制器中设置"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"name"},{"Type":"NodeText","Data":"​变量并渲染这个模板。"}]},{"ID":"20240620004148-tezaiaa","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240620004148-tezaiaa","updated":"20240620004148"},"Children":[{"Type":"NodeText","Data":"测试框架"}]},{"ID":"20240620004148-3hl27x4","Type":"NodeParagraph","Properties":{"id":"20240620004148-3hl27x4","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"Buffalo帮助定义测试套件，并为生成的代码提供测试模板。"}]},{"ID":"20240620004148-zji3n8f","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240620004148-zji3n8f","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"示例：写一个测试用例"}]},{"ID":"20240620004148-uht4a6h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240620004148-uht4a6h","updated":"20240620004149"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"package actions\n\nfunc (as *ActionSuite) Test_HomeHandler() {\n res := as.HTML(\"/\").Get()\n as.Equal(200, res.Code)\n // 进行更多的断言...\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240620004148-vbymtzi","Type":"NodeParagraph","Properties":{"id":"20240620004148-vbymtzi","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"以上就是Buffalo框架提供的一些关键特性及其示例，希望能够帮助你在Go语言的Web开发之旅上取得成功。"}]},{"ID":"20240620004148-93pc0o0","Type":"NodeParagraph","Properties":{"id":"20240620004148-93pc0o0","updated":"20240620004149"},"Children":[{"Type":"NodeText","Data":"这篇文章只是浅尝辄止，Buffalo的潜力和功能远远不止于此。它通过插件和开发者社区的活跃参与，不断拓展其功能和改进现有特性，如果你是一位追求高效Web开发体验的Go开发者，Buffalo无疑值得你深入探索和实践。"}]}]}