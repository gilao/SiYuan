{"ID":"20240620003515-br057cu","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f4d4","id":"20240620003515-br057cu","title":"go-money实现货币运算的金标准","type":"doc","updated":"20240620003537"},"Children":[{"ID":"20240620003537-uxzc7s4","Type":"NodeParagraph","Properties":{"id":"20240620003537-uxzc7s4","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"在进行金融领域的软件开发时，货币值的精确表示和操作至关重要。由于"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"浮点数"},{"Type":"NodeText","Data":"带来的精度问题，传统的处理方式经常导致数值上的细微误差。针对这一问题，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"go-money"},{"Type":"NodeText","Data":"​包提供了基于Go语言的解决方案，实现了Fowler的货币模式。"}]},{"ID":"20240620003537-sd0vdod","Type":"NodeParagraph","Properties":{"id":"20240620003537-sd0vdod","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"本文将深入解析"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"go-money"},{"Type":"NodeText","Data":"​包，演示其具体的使用方式，并通过丰富的示例让您掌握如何在Go项目中实现精确的货币计算。"}]},{"ID":"20240620003537-rtqk6si","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240620003537-rtqk6si","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"起步：安装go-money"}]},{"ID":"20240620003537-475g1vq","Type":"NodeParagraph","Properties":{"id":"20240620003537-475g1vq","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"要使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"go-money"},{"Type":"NodeText","Data":"​，首先需要安装该包。在命令行中输入以下命令来获取包："}]},{"ID":"20240620003537-nl8tv0y","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240620003537-nl8tv0y","updated":"20240620003537"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ go get github.com/Rhymond/go-money\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240620003537-nomit91","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240620003537-nomit91","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"初始化"}]},{"ID":"20240620003537-ulnmc1j","Type":"NodeParagraph","Properties":{"id":"20240620003537-ulnmc1j","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"go-money"},{"Type":"NodeText","Data":"​允许通过两种方式初始化货币值："}]},{"ID":"20240620003537-eow9ifg","Type":"NodeList","ListData":{},"Properties":{"id":"20240620003537-eow9ifg","updated":"20240620003537"},"Children":[{"ID":"20240620003537-ljlkic5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-ljlkic5","updated":"20240620003537"},"Children":[{"ID":"20240620003537-t1zu7ua","Type":"NodeParagraph","Properties":{"id":"20240620003537-t1zu7ua","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"使用货币最小单位（例如100代表1英镑）"}]}]},{"ID":"20240620003537-prdz5dg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-prdz5dg","updated":"20240620003537"},"Children":[{"ID":"20240620003537-zce8to5","Type":"NodeParagraph","Properties":{"id":"20240620003537-zce8to5","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"使用直接金额（例如使用浮点数表示）"}]}]}]},{"ID":"20240620003537-3qsj271","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240620003537-3qsj271","updated":"20240620003537"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"import \"github.com/Rhymond/go-money\"\n\n// 使用最小单位初始化（100代表1英镑）\npound := money.New(100, money.GBP)\n\n// 使用浮点数直接初始化\nquarterEuro := money.NewFromFloat(0.25, money.EUR)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240620003537-u5cgspp","Type":"NodeParagraph","Properties":{"id":"20240620003537-u5cgspp","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"go-money"},{"Type":"NodeText","Data":"​要求使用ISO 4217"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"货币代码"},{"Type":"NodeText","Data":"来设定货币类型，并为所有ISO 4217标准货币代码提供了常量。"}]},{"ID":"20240620003537-5m6e44o","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240620003537-5m6e44o","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"货币比较"}]},{"ID":"20240620003537-a8areva","Type":"NodeParagraph","Properties":{"id":"20240620003537-a8areva","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"go-money"},{"Type":"NodeText","Data":"​提供了一系列货币值比较功能，包括："}]},{"ID":"20240620003537-91alpjw","Type":"NodeList","ListData":{},"Properties":{"id":"20240620003537-91alpjw","updated":"20240620003537"},"Children":[{"ID":"20240620003537-grb6ti7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-grb6ti7","updated":"20240620003537"},"Children":[{"ID":"20240620003537-lk7saif","Type":"NodeParagraph","Properties":{"id":"20240620003537-lk7saif","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"等于（Equals）"}]}]},{"ID":"20240620003537-xoslhec","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-xoslhec","updated":"20240620003537"},"Children":[{"ID":"20240620003537-6hfmj0x","Type":"NodeParagraph","Properties":{"id":"20240620003537-6hfmj0x","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"大于（GreaterThan）"}]}]},{"ID":"20240620003537-2hjc1z9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-2hjc1z9","updated":"20240620003537"},"Children":[{"ID":"20240620003537-i4qpsd7","Type":"NodeParagraph","Properties":{"id":"20240620003537-i4qpsd7","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"大于或等于（GreaterThanOrEqual）"}]}]},{"ID":"20240620003537-whmynmt","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-whmynmt","updated":"20240620003537"},"Children":[{"ID":"20240620003537-u1sgamb","Type":"NodeParagraph","Properties":{"id":"20240620003537-u1sgamb","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"小于（LessThan）"}]}]},{"ID":"20240620003537-1ugj531","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-1ugj531","updated":"20240620003537"},"Children":[{"ID":"20240620003537-t6g00os","Type":"NodeParagraph","Properties":{"id":"20240620003537-t6g00os","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"小于或等于（LessThanOrEqual）"}]}]},{"ID":"20240620003537-77vdg0f","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-77vdg0f","updated":"20240620003537"},"Children":[{"ID":"20240620003537-zpssypu","Type":"NodeParagraph","Properties":{"id":"20240620003537-zpssypu","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"比较（Compare）"}]}]}]},{"ID":"20240620003537-hjiqsqk","Type":"NodeParagraph","Properties":{"id":"20240620003537-hjiqsqk","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"比较操作必须在相同的货币单位之间进行。"}]},{"ID":"20240620003537-95rkbgy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240620003537-95rkbgy","updated":"20240620003537"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"pound := money.New(100, money.GBP)\ntwoPounds := money.New(200, money.GBP)\ntwoEuros := money.New(200, money.EUR)\n\n// 比较英镑数额\npound.GreaterThan(twoPounds) // 返回 false, nil\npound.LessThan(twoPounds) // 返回 true, nil\ntwoPounds.Equals(twoEuros) // 返回 false, error: Currencies don't match\ntwoPounds.Compare(pound) // 返回 1, nil\npound.Compare(twoPounds) // 返回 -1, nil\npound.Compare(pound) // 返回 0, nil\npound.Compare(twoEuros) // 返回 pound.amount, ErrCurrencyMismatch\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240620003537-rdkoiqv","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240620003537-rdkoiqv","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"断言"}]},{"ID":"20240620003537-xk4b1s1","Type":"NodeParagraph","Properties":{"id":"20240620003537-xk4b1s1","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"go-money"},{"Type":"NodeText","Data":"​还提供了以下断言方法："}]},{"ID":"20240620003537-xi6z288","Type":"NodeList","ListData":{},"Properties":{"id":"20240620003537-xi6z288","updated":"20240620003537"},"Children":[{"ID":"20240620003537-r6nftz0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-r6nftz0","updated":"20240620003537"},"Children":[{"ID":"20240620003537-6pwnski","Type":"NodeParagraph","Properties":{"id":"20240620003537-6pwnski","updated":"20240620003537"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"是否为零（"},{"Type":"NodeText","Data":"IsZero"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"）"}]}]},{"ID":"20240620003537-bdcp4l8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-bdcp4l8","updated":"20240620003537"},"Children":[{"ID":"20240620003537-7b7xyda","Type":"NodeParagraph","Properties":{"id":"20240620003537-7b7xyda","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"是否为正（IsPositive）"}]}]},{"ID":"20240620003537-yvfrwd9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-yvfrwd9","updated":"20240620003537"},"Children":[{"ID":"20240620003537-j3ryt3l","Type":"NodeParagraph","Properties":{"id":"20240620003537-j3ryt3l","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"是否为负（IsNegative）"}]}]}]},{"ID":"20240620003537-sxmg49i","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240620003537-sxmg49i","updated":"20240620003537"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"pound := money.New(100, money.GBP)\n\n// 断定是否为零\nresult := pound.IsZero() // 返回 false\n\n// 断定是否为正值\npound.IsPositive() // 返回 true\n\n// 断定是否为负值\npound.IsNegative() // 返回 false\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240620003537-8xrh5hw","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240620003537-8xrh5hw","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"基本运算"}]},{"ID":"20240620003537-zaeknq0","Type":"NodeParagraph","Properties":{"id":"20240620003537-zaeknq0","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"go-money"},{"Type":"NodeText","Data":"​支持以下"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"基础货币"},{"Type":"NodeText","Data":"运算："}]},{"ID":"20240620003537-zp14ik6","Type":"NodeList","ListData":{},"Properties":{"id":"20240620003537-zp14ik6","updated":"20240620003537"},"Children":[{"ID":"20240620003537-z9zcwma","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-z9zcwma","updated":"20240620003537"},"Children":[{"ID":"20240620003537-hah3lxs","Type":"NodeParagraph","Properties":{"id":"20240620003537-hah3lxs","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"加法（Add）"}]}]},{"ID":"20240620003537-t9gil8t","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-t9gil8t","updated":"20240620003537"},"Children":[{"ID":"20240620003537-78sf2aw","Type":"NodeParagraph","Properties":{"id":"20240620003537-78sf2aw","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"减法（Subtract）"}]}]},{"ID":"20240620003537-hrn0y19","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-hrn0y19","updated":"20240620003537"},"Children":[{"ID":"20240620003537-rq3e67v","Type":"NodeParagraph","Properties":{"id":"20240620003537-rq3e67v","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"乘法（Multiply）"}]}]},{"ID":"20240620003537-vhy5ut4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-vhy5ut4","updated":"20240620003537"},"Children":[{"ID":"20240620003537-cf9g4ux","Type":"NodeParagraph","Properties":{"id":"20240620003537-cf9g4ux","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"绝对值（Absolute）"}]}]},{"ID":"20240620003537-6gk4bpo","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-6gk4bpo","updated":"20240620003537"},"Children":[{"ID":"20240620003537-7jpd7el","Type":"NodeParagraph","Properties":{"id":"20240620003537-7jpd7el","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"负数值（Negative）"}]}]}]},{"ID":"20240620003537-f4ug8vq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240620003537-f4ug8vq","updated":"20240620003537"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"// 加法\npound := money.New(100, money.GBP)\nresult, err := pound.Add(twoPounds) // 返回 £3.00, nil\n\n// 减法\nresult, err = pound.Subtract(twoPounds) // 返回 -£1.00, nil\n\n// 乘法\nresult = pound.Multiply(2) // 返回 £2.00\n\n// 绝对值\npound = money.New(-100, money.GBP)\nresult = pound.Absolute() // 返回 £1.00\n\n// 负值\nresult = pound.Negative() // 返回 -£1.00\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240620003537-f5bmn78","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240620003537-f5bmn78","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"分配运算"}]},{"ID":"20240620003537-muv6pds","Type":"NodeList","ListData":{},"Properties":{"id":"20240620003537-muv6pds","updated":"20240620003537"},"Children":[{"ID":"20240620003537-8pumuvd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-8pumuvd","updated":"20240620003537"},"Children":[{"ID":"20240620003537-5kp6rag","Type":"NodeParagraph","Properties":{"id":"20240620003537-5kp6rag","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"分割（Split）"}]}]},{"ID":"20240620003537-k8fcqwg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240620003537-k8fcqwg","updated":"20240620003537"},"Children":[{"ID":"20240620003537-ynbvqnd","Type":"NodeParagraph","Properties":{"id":"20240620003537-ynbvqnd","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"分配（Allocate）"}]}]}]},{"ID":"20240620003537-0yrrxe2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240620003537-0yrrxe2","updated":"20240620003537"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"// 分割\npound := money.New(100, money.GBP)\nparties, err := pound.Split(3)\n\n// 分割后的每一份\nparties[0].Display() // 输出 £0.34\nparties[1].Display() // 输出 £0.33\nparties[2].Display() // 输出 £0.33\n\n// 分配\n// Allocate是可变参数函数，可以接收切片(int[]{33, 33, 33}...)或逗号分隔的整数\nparties, err = pound.Allocate(33, 33, 33)\n\n// 分配后的每一份\nparties[0].Display() // 输出 £0.34\nparties[1].Display() // 输出 £0.33\nparties[2].Display() // 输出 £0.33\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240620003537-42cyts0","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240620003537-42cyts0","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"格式化"}]},{"ID":"20240620003537-a3n60bm","Type":"NodeParagraph","Properties":{"id":"20240620003537-a3n60bm","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Display()"},{"Type":"NodeText","Data":"​和"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AsMajorUnits()"},{"Type":"NodeText","Data":"​方法可以将货币值进行格式化。"}]},{"ID":"20240620003537-foc63mt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240620003537-foc63mt","updated":"20240620003537"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"// 使用 Display() 格式化\nmoney.New(123456789, money.EUR).Display() // 输出 €1,234,567.89\n\n// 使用 AsMajorUnits() 格式化为浮点数表示的金额值\nmoney.New(123456789, money.EUR).AsMajorUnits() // 输出 1234567.89\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240620003537-m9f7zlf","Type":"NodeParagraph","Properties":{"id":"20240620003537-m9f7zlf","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"在这些示例中，我们看到"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"go-money"},{"Type":"NodeText","Data":"​包如何提供了一种简便的方式来处理货币值，从而避免了传统浮点数操作中常见的精度问题。"}]},{"ID":"20240620003537-gel4hry","Type":"NodeParagraph","Properties":{"id":"20240620003537-gel4hry","updated":"20240620003537"},"Children":[{"Type":"NodeText","Data":"综上，通过深入理解和学习"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"go-money"},{"Type":"NodeText","Data":"​的使用方法和示例，您可以在Go语言开发中，轻松实现精确的货币计算和操作，确保金融领域软件的高质量和可靠性。"}]}]}