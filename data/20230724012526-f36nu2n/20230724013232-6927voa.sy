{"ID":"20230724013232-6927voa","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f3db","id":"20230724013232-6927voa","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20230724013232-6927voa\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20230724013240-8y78u6b\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20230724013240-57zka3r\u0026quot;,\u0026quot;scrollTop\u0026quot;:0,\u0026quot;focusId\u0026quot;:\u0026quot;20230724013240-gosy6vo\u0026quot;,\u0026quot;focusStart\u0026quot;:207,\u0026quot;focusEnd\u0026quot;:207\u0026#125;","tags":"Docker","title":"Docker 详解","updated":"20230724013420"},"Children":[{"ID":"20230724013240-8y78u6b","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230724013240-8y78u6b","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"Docker"}]},{"ID":"20230724013240-v9banjy","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-v9banjy","updated":"20230724013240"},"Children":[{"ID":"20230724013240-lhf60vn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-lhf60vn","updated":"20230724013240"},"Children":[{"ID":"20230724013240-1c44rmj","Type":"NodeParagraph","Properties":{"id":"20230724013240-1c44rmj","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"官方文档地址:"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://www.docker.com/get-started","TextMarkTextContent":"https://www.docker.com/get-started"}]}]},{"ID":"20230724013240-8v6ytng","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-8v6ytng","updated":"20230724013240"},"Children":[{"ID":"20230724013240-pw18wxv","Type":"NodeParagraph","Properties":{"id":"20230724013240-pw18wxv","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"中文参考手册:"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://docker_practice.gitee.io/zh-cn/","TextMarkTextContent":"https://docker_practice.gitee.io/zh-cn/"}]}]}]},{"ID":"20230724013240-rs73trg","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-rs73trg","updated":"20230724013240"}},{"ID":"20230724013240-ixbrwhj","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-ixbrwhj","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"1.什么是 Docker"}]},{"ID":"20230724013240-492uxv3","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-492uxv3","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"1.1 官方定义"}]},{"ID":"20230724013240-1zvlcbg","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-1zvlcbg","updated":"20230724013240"},"Children":[{"ID":"20230724013240-2fgrmaz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-2fgrmaz","updated":"20230724013240"},"Children":[{"ID":"20230724013240-evklvlt","Type":"NodeParagraph","Properties":{"id":"20230724013240-evklvlt","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"最新官网首页"}]}]}]},{"ID":"20230724013240-gosy6vo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-gosy6vo","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.官方介绍\n- We have a complete container solution for you - no matter who you are and where you are on your containerization journey.\n- 翻译: 我们为你提供了一个完整的容器解决方案,不管你是谁,不管你在哪,你都可以开始容器的的旅程。\n- 官方定义: docker是一个容器技术。\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-ej4lgzk","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-ej4lgzk","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"1.2 Docker的起源"}]},{"ID":"20230724013240-fpll216","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-fpll216","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"Docker 最初是 dotCloud 公司创始人 Solomon Hykes 在法国期间发起的一个公司内部项目，它是基于 dotCloud 公司多年云服务技术的一次革新，并于 2013 年 3 月以 Apache 2.0 授权协议开源，主要项目代码在 GitHub 上进行维护。Docker 项目后来还加入了 Linux 基金会，并成立推动 开放容器联盟（OCI）。\n\nDocker 自开源后受到广泛的关注和讨论，至今其 GitHub 项目 已经超过 5 万 7 千个星标和一万多个 fork。甚至由于 Docker 项目的火爆，在 2013 年底，dotCloud 公司决定改名为 Docker。Docker 最初是在 Ubuntu 12.04 上开发实现的；Red Hat 则从 RHEL 6.5 开始对 Docker 进行支持；Google 也在其 PaaS 产品中广泛应用 Docker。\n\nDocker 使用 Google 公司推出的 Go 语言 进行开发实现，基于 Linux 内核的 cgroup，namespace，以及 OverlayFS 类的 Union FS 等技术，对进程进行封装隔离，属于操作系统层面的虚拟化技术。由于隔离的进程独立于宿主和其它的隔离的进程，因此也称其为容器。\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-pcuc8bg","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-pcuc8bg","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"2.为什么是Docker"}]},{"ID":"20230724013240-7xn7hzo","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-7xn7hzo","updated":"20230724013240"},"Children":[{"ID":"20230724013240-bpia5tj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-bpia5tj","updated":"20230724013240"},"Children":[{"ID":"20230724013240-8mpt7ba","Type":"NodeParagraph","Properties":{"id":"20230724013240-8mpt7ba","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"在开发的时候，在本机测试环境可以跑，生产环境跑不起来"},{"Type":"NodeText","Data":"​\n"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"这里我们拿java Web应用程序举例，我们一个java Web应用程序涉及很多东西，比如jdk、tomcat、mysql等软件环境。当这些其中某一项版本不一致的时候，可能就会导致应用程序跑不起来这种情况。Docker则将程序以及使用软件环境直接打包在一起，无论在那个机器上保证了环境一致。"},{"Type":"NodeText","Data":"\n"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"优势1:  一致的运行环境,更轻松的迁移"}]}]},{"ID":"20230724013240-ifjp8ji","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-ifjp8ji","updated":"20230724013240"},"Children":[{"ID":"20230724013240-pl3tfm0","Type":"NodeParagraph","Properties":{"id":"20230724013240-pl3tfm0","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"服务器自己的程序挂了，结果发现是别人程序出了问题把内存吃完了，自己程序因为内存不够就挂了"},{"Type":"NodeText","Data":"​\n"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"这种也是一种比较常见的情况，如果你的程序重要性不是特别高的话，公司基本上不可能让你的程序独享一台服务器的，这时候你的服务器就会跟公司其他人的程序共享一台服务器，所以不可避免地就会受到其他程序的干扰，导致自己的程序出现问题。Docker就很好解决了环境隔离的问题，别人程序不会影响到自己的程序。"},{"Type":"NodeText","Data":"\n"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"优势2：对进程进行封装隔离,容器与容器之间互不影响,更高效的利用系统资源"}]}]},{"ID":"20230724013240-xe610z4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-xe610z4","updated":"20230724013240"},"Children":[{"ID":"20230724013240-wn39qn6","Type":"NodeParagraph","Properties":{"id":"20230724013240-wn39qn6","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"公司要弄一个活动，可能会有大量的流量进来，公司需要再多部署几十台服务器"},{"Type":"NodeText","Data":"​\n"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"在没有Docker的情况下，要在几天内部署几十台服务器，这对运维来说是一件非常折磨人的事，而且每台服务器的环境还不一定一样，就会出现各种问题，最后部署地头皮发麻。用Docker的话，我只需要将程序打包到镜像，你要多少台服务，我就给力跑多少容器，极大地提高了部署效率。"},{"Type":"NodeText","Data":"\n"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"优势3: 通过镜像复制N多个环境一致容器"}]}]}]},{"ID":"20230724013240-f94k225","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-f94k225","updated":"20230724013240"}},{"ID":"20230724013240-oep2l8m","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-oep2l8m","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"3.Docker和虚拟机区别"}]},{"ID":"20230724013240-shhuw8r","Type":"NodeBlockquote","Properties":{"id":"20230724013240-shhuw8r","updated":"20230724013240"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20230724013240-qjqclg6","Type":"NodeParagraph","Properties":{"id":"20230724013240-qjqclg6","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"关于Docker与虚拟机的区别，我在网上找到的一张图，非常直观形象地展示出来，话不多说，直接上图。"}]}]},{"ID":"20230724013240-44kakvg","Type":"NodeParagraph","Properties":{"id":"20230724013240-44kakvg","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"比较上面两张图，我们发现虚拟机是携带操作系统，本身很小的应用程序却因为携带了操作系统而变得非常大，很笨重"},{"Type":"NodeText","Data":"​。Docker是不携带操作系统的，所以Docker的应用就非常的轻巧。另外在调用宿主机的CPU、磁盘等等这些资源的时候，拿内存举例，虚拟机是利用Hypervisor去虚拟化内存，整个调用过程是虚拟内存-\u003e虚拟物理内存-\u003e真正物理内存，但是Docker是利用Docker Engine去调用宿主的的资源，这时候过程是虚拟内存-\u003e真正物理内存。"}]},{"ID":"20230724013240-u74py31","Type":"NodeTable","TableAligns":[0,0,0],"Properties":{"colgroup":"||","id":"20230724013240-u74py31","updated":"20230724013240"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th"},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"传统虚拟机"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Docker容器"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"磁盘占用"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"几个GB到几十个GB左右"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"几十MB到几百MB左右"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"CPU内存占用"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"虚拟操作系统非常占用CPU和内存"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Docker引擎占用极低"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"启动速度"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"（从开机到运行项目）几分钟"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"（从开启容器到运行项目）几秒"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"安装管理"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"需要专门的运维技术"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"安装、管理方便"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"应用部署"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"每次部署都费时费力"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"从第二次部署开始轻松简捷"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"耦合性"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"多个应用服务安装到一起，容易互相影响"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"每个应用服务一个容器，达成隔离"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"系统依赖"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"无"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"需求相同或相似的内核，目前推荐是Linux"}]}]}]},{"ID":"20230724013240-4w5cbvu","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-4w5cbvu","updated":"20230724013240"}},{"ID":"20230724013240-67f97dl","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-67f97dl","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"4.Docker的安装"}]},{"ID":"20230724013240-wkjjwpb","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-wkjjwpb","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"4.1 安装docker(centos7.x)"}]},{"ID":"20230724013240-j9fvfi4","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-j9fvfi4","updated":"20230724013240"},"Children":[{"ID":"20230724013240-0hari6j","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-0hari6j","updated":"20230724013240"},"Children":[{"ID":"20230724013240-kk50457","Type":"NodeParagraph","Properties":{"id":"20230724013240-kk50457","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"卸载原始docker"}]},{"ID":"20230724013240-mh7a1kx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-mh7a1kx","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ sudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-engine\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20230724013240-gjw0nl4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-gjw0nl4","updated":"20230724013240"},"Children":[{"ID":"20230724013240-bjxy2bo","Type":"NodeParagraph","Properties":{"id":"20230724013240-bjxy2bo","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"安装docker依赖"}]},{"ID":"20230724013240-5ci6ud4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-5ci6ud4","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ sudo yum install -y yum-utils \\\n  device-mapper-persistent-data \\\n  lvm2\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20230724013240-gseq0ch","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-gseq0ch","updated":"20230724013240"},"Children":[{"ID":"20230724013240-281dqay","Type":"NodeParagraph","Properties":{"id":"20230724013240-281dqay","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"设置docker的yum源"}]},{"ID":"20230724013240-go496bx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-go496bx","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ sudo yum-config-manager \\\n    --add-repo \\\n    https://download.docker.com/linux/centos/docker-ce.repo\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20230724013240-x8tazgs","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-x8tazgs","updated":"20230724013240"},"Children":[{"ID":"20230724013240-78074li","Type":"NodeParagraph","Properties":{"id":"20230724013240-78074li","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"安装最新版的docker"}]},{"ID":"20230724013240-875cv8f","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-875cv8f","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ sudo yum install docker-ce docker-ce-cli containerd.io\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20230724013240-hsbfx73","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-hsbfx73","updated":"20230724013240"},"Children":[{"ID":"20230724013240-zsb4nbm","Type":"NodeParagraph","Properties":{"id":"20230724013240-zsb4nbm","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定版本安装docker"}]},{"ID":"20230724013240-3tp1hrl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-3tp1hrl","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ yum list docker-ce --showduplicates | sort -r\n$ sudo yum install docker-ce-\u003cVERSION_STRING\u003e docker-ce-cli-\u003cVERSION_STRING\u003e containerd.io\n$ sudo yum install docker-ce-18.09.5-3.el7 docker-ce-cli-18.09.5-3.el7 containerd.io\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20230724013240-jq5e8vr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-jq5e8vr","updated":"20230724013240"},"Children":[{"ID":"20230724013240-91sp4wz","Type":"NodeParagraph","Properties":{"id":"20230724013240-91sp4wz","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"启动docker"}]},{"ID":"20230724013240-4fmfaw9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-4fmfaw9","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ sudo systemctl enable docker\n$ sudo systemctl start docker\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20230724013240-5zeq25g","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-5zeq25g","updated":"20230724013240"},"Children":[{"ID":"20230724013240-wmmd2vl","Type":"NodeParagraph","Properties":{"id":"20230724013240-wmmd2vl","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"关闭docker"}]},{"ID":"20230724013240-kok5n0x","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-kok5n0x","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ sudo systemctl stop docker\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20230724013240-k1pblbd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-k1pblbd","updated":"20230724013240"},"Children":[{"ID":"20230724013240-qpbg8g3","Type":"NodeParagraph","Properties":{"id":"20230724013240-qpbg8g3","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"测试docker安装"}]},{"ID":"20230724013240-zwa758l","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-zwa758l","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ sudo docker run hello-world\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20230724013240-2ujz4le","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-2ujz4le","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"4.2 bash安装(通用所有平台)"}]},{"ID":"20230724013240-i1rtvq1","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-i1rtvq1","updated":"20230724013240"},"Children":[{"ID":"20230724013240-clmhv5c","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-clmhv5c","updated":"20230724013240"},"Children":[{"ID":"20230724013240-07gpwbs","Type":"NodeParagraph","Properties":{"id":"20230724013240-07gpwbs","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"在测试或开发环境中 Docker 官方为了简化安装流程，提供了一套便捷的安装脚本，CentOS 系统上可以使用这套脚本安装，另外可以通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--mirror"},{"Type":"NodeText","Data":"​ 选项使用国内源进行安装：执行这个命令后，脚本就会自动的将一切准备工作做好，并且把 Docker 的稳定(stable)版本安装在系统中。"}]},{"ID":"20230724013240-vrekzro","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-vrekzro","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ curl -fsSL get.docker.com -o get-docker.sh\n$ sudo sh get-docker.sh --mirror Aliyun\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20230724013240-2zrg9v1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-2zrg9v1","updated":"20230724013240"},"Children":[{"ID":"20230724013240-2tcjaid","Type":"NodeParagraph","Properties":{"id":"20230724013240-2tcjaid","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"启动docker"}]},{"ID":"20230724013240-apjlrlj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-apjlrlj","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ sudo systemctl enable docker\n$ sudo systemctl start docker\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20230724013240-3hzop73","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-3hzop73","updated":"20230724013240"},"Children":[{"ID":"20230724013240-iikzf6m","Type":"NodeParagraph","Properties":{"id":"20230724013240-iikzf6m","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"创建docker用户组"}]},{"ID":"20230724013240-24wnk1r","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-24wnk1r","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ sudo groupadd docker\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20230724013240-vde72fm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-vde72fm","updated":"20230724013240"},"Children":[{"ID":"20230724013240-psxxigr","Type":"NodeParagraph","Properties":{"id":"20230724013240-psxxigr","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"将当前用户加入docker组"}]},{"ID":"20230724013240-zv4dxao","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-zv4dxao","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ sudo usermod -aG docker $USER\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20230724013240-2j66q70","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-2j66q70","updated":"20230724013240"},"Children":[{"ID":"20230724013240-ax0qpgw","Type":"NodeParagraph","Properties":{"id":"20230724013240-ax0qpgw","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"测试docker安装是否正确"}]},{"ID":"20230724013240-mtwup9s","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-mtwup9s","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ docker run hello-world\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20230724013240-5ttj3vv","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-5ttj3vv","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"5.Docker 的核心架构"}]},{"ID":"20230724013240-a3ks5j4","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-a3ks5j4","updated":"20230724013240"},"Children":[{"ID":"20230724013240-t7za88z","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-t7za88z","updated":"20230724013240"},"Children":[{"ID":"20230724013240-84czxhv","Type":"NodeParagraph","Properties":{"id":"20230724013240-84czxhv","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"镜像:"},{"Type":"NodeText","Data":"​ 一个镜像代表一个应用环境,他是一个只读的文件,如 mysql镜像,tomcat镜像,nginx镜像等"}]}]},{"ID":"20230724013240-ex597fs","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-ex597fs","updated":"20230724013240"},"Children":[{"ID":"20230724013240-9n64o30","Type":"NodeParagraph","Properties":{"id":"20230724013240-9n64o30","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"容器:"},{"Type":"NodeText","Data":"​ 镜像每次运行之后就是产生一个容器,就是正在运行的镜像,特点就是可读可写"}]}]},{"ID":"20230724013240-q8kw8dz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-q8kw8dz","updated":"20230724013240"},"Children":[{"ID":"20230724013240-3sttdvt","Type":"NodeParagraph","Properties":{"id":"20230724013240-3sttdvt","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"仓库:"},{"Type":"NodeText","Data":"​用来存放镜像的位置,类似于maven仓库,也是镜像下载和上传的位置"}]}]},{"ID":"20230724013240-kxaphir","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-kxaphir","updated":"20230724013240"},"Children":[{"ID":"20230724013240-1y1ur8x","Type":"NodeParagraph","Properties":{"id":"20230724013240-1y1ur8x","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"dockerFile:"},{"Type":"NodeText","Data":"​docker生成镜像配置文件,用来书写自定义镜像的一些配置"}]}]},{"ID":"20230724013240-rttg78f","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-rttg78f","updated":"20230724013240"},"Children":[{"ID":"20230724013240-96mbqly","Type":"NodeParagraph","Properties":{"id":"20230724013240-96mbqly","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"tar:"},{"Type":"NodeText","Data":"​一个对镜像打包的文件,日后可以还原成镜像"}]}]}]},{"ID":"20230724013240-nrokq38","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-nrokq38","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"6. Docker 配置阿里镜像加速服务"}]},{"ID":"20230724013240-uxqoe1h","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-uxqoe1h","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"6.1 docker 运行流程"}]},{"ID":"20230724013240-fe7z13d","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-fe7z13d","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"6.2 docker配置阿里云镜像加速"}]},{"ID":"20230724013240-o6m36ml","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-o6m36ml","updated":"20230724013240"},"Children":[{"ID":"20230724013240-ewp6mxo","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-ewp6mxo","updated":"20230724013240"},"Children":[{"ID":"20230724013240-31syzzl","Type":"NodeParagraph","Properties":{"id":"20230724013240-31syzzl","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"访问阿里云登录自己账号查看docker镜像加速服务"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20230724013240-tvstewp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-tvstewp","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"sudo mkdir -p /etc/docker\nsudo tee /etc/docker/daemon.json \u003c\u003c-'EOF'\n{\n  \"registry-mirrors\": [\"https://lz2nib3q.mirror.aliyuncs.com\"]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-ltitud6","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-ltitud6","updated":"20230724013240"},"Children":[{"ID":"20230724013240-3wg8u4o","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-3wg8u4o","updated":"20230724013240"},"Children":[{"ID":"20230724013240-44uchkw","Type":"NodeParagraph","Properties":{"id":"20230724013240-44uchkw","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"验证docker的镜像加速是否生效"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20230724013240-33l1v4d","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-33l1v4d","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"[root@localhost ~]# docker info\n        ..........\n    127.0.0.0/8\n   Registry Mirrors:\n    'https://lz2nib3q.mirror.aliyuncs.com/'\n   Live Restore Enabled: false\n   Product License: Community Engine\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-w4x4snz","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-w4x4snz","updated":"20230724013240"}},{"ID":"20230724013240-zjmmqwb","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-zjmmqwb","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"7.Docker的入门应用"}]},{"ID":"20230724013240-qity9d4","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-qity9d4","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"7.1 docker 的第一个程序"}]},{"ID":"20230724013240-zwsl93a","Type":"NodeBlockquote","Properties":{"id":"20230724013240-zwsl93a","updated":"20230724013240"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20230724013240-zz9a709","Type":"NodeParagraph","Properties":{"id":"20230724013240-zz9a709","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"docker  run hello-world"}]}]},{"ID":"20230724013240-u5i4wxz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-u5i4wxz","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"[root@localhost ~]# docker run hello-world\n\nHello from Docker!\nThis message shows that your installation appears to be working correctly.\n\nTo generate this message, Docker took the following steps:\n 1. The Docker client contacted the Docker daemon.\n 2. The Docker daemon pulled the \"hello-world\" image from the Docker Hub.\n    (amd64)\n 3. The Docker daemon created a new container from that image which runs the\n    executable that produces the output you are currently reading.\n 4. The Docker daemon streamed that output to the Docker client, which sent it\n    to your terminal.\n\nTo try something more ambitious, you can run an Ubuntu container with:\n $ docker run -it ubuntu bash\n\nShare images, automate workflows, and more with a free Docker ID:\n https://hub.docker.com/\n\nFor more examples and ideas, visit:\n https://docs.docker.com/get-started/\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-qefe09h","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-qefe09h","updated":"20230724013240"}},{"ID":"20230724013240-kooccqb","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-kooccqb","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"8.常用命令"}]},{"ID":"20230724013240-1liw2pw","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-1liw2pw","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"6.1 辅助命令"}]},{"ID":"20230724013240-q27zujn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-q27zujn","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.安装完成辅助命令\n        docker version  --------------------------  查看docker的信息\n        docker info     --------------------------  查看更详细的信息\n        docker --help   --------------------------  帮助命令\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-s57qyvk","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-s57qyvk","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"6.2 Images 镜像命令"}]},{"ID":"20230724013240-jhq23gb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-jhq23gb","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.查看本机中所有镜像\n    docker images   --------------------------  列出本地所有镜像\n        -a          列出所有镜像（包含中间映像层）\n    -q          只显示镜像id\n\n# 2.搜索镜像\n    docker search [options] 镜像名 ------------------- 去dockerhub上查询当前镜像\n        -s 指定值      列出收藏数不少于指定值的镜像\n    --no-trunc    显示完整的镜像信息\n\n# 3.从仓库下载镜像\n    docker pull 镜像名[:TAG|@DIGEST]   ----------------- 下载镜像\n\n# 4.删除镜像\n    docker rmi 镜像名  --------------------------  删除镜像\n        -f      强制删除\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-m2gjjib","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-m2gjjib","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"6.3 Contrainer 容器命令"}]},{"ID":"20230724013240-5hoqdbd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-5hoqdbd","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.运行容器\n    docker run 镜像名  --------------------------  镜像名新建并启动容器\n    --name                  别名为容器起一个名字\n    -d                          启动守护式容器（在后台启动容器）\n    -p                          映射端口号：原始端口号      指定端口号启动\n\n    例：docker run -it --name myTomcat -p 8888:8080 tomcat\n     docker run -d --name myTomcat -P tomcat\n\n# 2.查看运行的容器\n    docker ps                   --------------------------  列出所有正在运行的容器\n    -a          正在运行的和历史运行过的容器\n    -q          静默模式，只显示容器编号\n\n# 3.停止|关闭|重启容器\n    docker start   容器名字或者容器id  --------------- 开启容器\n    docker restart 容器名或者容器id    --------------- 重启容器\n    docker stop  容器名或者容器id      ------------------ 正常停止容器运行\n    docker kill  容器名或者容器id      ------------------ 立即停止容器运行\n\n# 4.删除容器\n    docker rm -f 容器id和容器名     \n    docker rm -f $(docker ps -aq)       --------------------------  删除所有容器\n\n# 5.查看容器内进程\n    docker top 容器id或者容器名 ------------------ 查看容器内的进程\n\n# 6.查看查看容器内部细节\n    docker inspect 容器id         ------------------ 查看容器内部细节\n\n# 7.查看容器的运行日志\n    docker logs [OPTIONS] 容器id或容器名  ------------------ 查看容器日志\n    -t           加入时间戳\n    -f           跟随最新的日志打印\n    --tail   数字 显示最后多少条\n\n# 8.进入容器内部\n    docker exec [options] 容器id 容器内命令 ------------------ 进入容器执行命令\n        -i      以交互模式运行容器，通常与-t一起使用\n    -t      分配一个伪终端    shell窗口   bash \n\n# 9.容器和宿主机之间复制文件\n    docker cp 文件|目录 容器id:容器路径           -----------------   将宿主机复制到容器内部\n    docker cp 容器id:容器内资源路径 宿主机目录路径  -----------------   将容器内资源拷贝到主机上\n\n# 10.数据卷(volum)实现与宿主机共享目录\n    docker run -v 宿主机的路径|任意别名:/容器内的路径 镜像名\n        注意: \n                1.如果是宿主机路径必须是绝对路径,宿主机目录会覆盖容器内目录内容\n                2.如果是别名则会在docker运行容器时自动在宿主机中创建一个目录,并将容器目录文件复制到宿主机中\n\n# 11.打包镜像\n        docker save 镜像名 -o  名称.tar\n\n# 12.载入镜像\n        docker load -i   名称.tar\n\n# 13.容器打包成新的镜像\n      docker commit -m \"描述信息\" -a \"作者信息\"   （容器id或者名称）打包的镜像名称:标签\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-fjkr2qv","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-fjkr2qv","updated":"20230724013240"}},{"ID":"20230724013240-zd79qgh","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-zd79qgh","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"7.docker的镜像原理"}]},{"ID":"20230724013240-o33y9mj","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-o33y9mj","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"7.1 镜像是什么？"}]},{"ID":"20230724013240-0iyo4x5","Type":"NodeBlockquote","Properties":{"id":"20230724013240-0iyo4x5","updated":"20230724013240"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20230724013240-cztgawu","Type":"NodeParagraph","Properties":{"id":"20230724013240-cztgawu","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"镜像是一种轻量级的，可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含运行某个软件所需的所有内容，包括代码、运行时所需的库、环境变量和配置文件。"}]}]},{"ID":"20230724013240-xqz13x9","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-xqz13x9","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"7.2 为什么一个镜像会那么大？"}]},{"ID":"20230724013240-x53v4jr","Type":"NodeParagraph","Properties":{"id":"20230724013240-x53v4jr","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"镜像就是花卷"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-cemxzbc","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-cemxzbc","updated":"20230724013240"},"Children":[{"ID":"20230724013240-798bkvi","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-798bkvi","updated":"20230724013240"},"Children":[{"ID":"20230724013240-edzvyhh","Type":"NodeParagraph","Properties":{"id":"20230724013240-edzvyhh","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"UnionFS（联合文件系统）:"},{"Type":"NodeText","Data":"\n"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Union文件系统是一种分层，轻量级并且高性能的文件系统，它支持对文件系统的修改作为一次提交来一层层的叠加，同时可以将不同目录挂载到同一个虚拟文件系统下。Union文件系统是Docker镜像的基础。这种文件系统特性:就是一次同时加载多个文件系统，但从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录 。"}]}]}]},{"ID":"20230724013240-75bkqgg","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-75bkqgg","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"7.3 Docker镜像原理"}]},{"ID":"20230724013240-0vmjpqz","Type":"NodeBlockquote","Properties":{"id":"20230724013240-0vmjpqz","updated":"20230724013240"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20230724013240-rt9lsm5","Type":"NodeParagraph","Properties":{"id":"20230724013240-rt9lsm5","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker的镜像实际是由一层一层的文件系统组成。"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20230724013240-4fd9e9g","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-4fd9e9g","updated":"20230724013240"},"Children":[{"ID":"20230724013240-r1160ob","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-r1160ob","updated":"20230724013240"},"Children":[{"ID":"20230724013240-fj2k9bw","Type":"NodeParagraph","Properties":{"id":"20230724013240-fj2k9bw","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"bootfs（boot file system）主要包含bootloader和kernel，bootloader主要是引导加载kernel，Linux刚启动时会加载bootfs文件系统。在docker镜像的最底层就是bootfs。这一层与Linux/Unix 系统是一样的，包含boot加载器（bootloader）和内核（kernel）。当boot加载完,后整个内核就都在内存中了，此时内存的使用权已由bootfs转交给内核，此时会卸载bootfs。"}]}]},{"ID":"20230724013240-vylx61z","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-vylx61z","updated":"20230724013240"},"Children":[{"ID":"20230724013240-mg0vxmk","Type":"NodeParagraph","Properties":{"id":"20230724013240-mg0vxmk","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"rootfs（root file system），在bootfs之上，包含的就是典型的linux系统中的/dev，/proc，/bin，/etc等标准的目录和文件。rootfs就是各种不同的操作系统发行版，比如Ubuntu/CentOS等等。"}]}]},{"ID":"20230724013240-qbhnrgs","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-qbhnrgs","updated":"20230724013240"},"Children":[{"ID":"20230724013240-3kt04ka","Type":"NodeParagraph","Properties":{"id":"20230724013240-3kt04ka","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"我们平时安装进虚拟机的centos都有1到几个GB，为什么docker这里才200MB？对于一个精简的OS，rootfs可以很小，只需要包括最基本的命令，工具，和程序库就可以了，因为底层直接使用Host的Kernal，自己只需要提供rootfs就行了。由此可见不同的linux发行版，他们的bootfs是一致的，rootfs会有差别。因此不同的发行版可以共用bootfs。"}]}]}]},{"ID":"20230724013240-2a216jk","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-2a216jk","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"7.4 为什么docker镜像要采用这种分层结构呢?"}]},{"ID":"20230724013240-nxvgl4u","Type":"NodeBlockquote","Properties":{"id":"20230724013240-nxvgl4u","updated":"20230724013240"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20230724013240-pd3tdps","Type":"NodeParagraph","Properties":{"id":"20230724013240-pd3tdps","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"最大的一个好处就是资源共享"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20230724013240-ixvw216","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-ixvw216","updated":"20230724013240"},"Children":[{"ID":"20230724013240-8efrg1z","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-8efrg1z","updated":"20230724013240"},"Children":[{"ID":"20230724013240-yt3dch9","Type":"NodeParagraph","Properties":{"id":"20230724013240-yt3dch9","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"比如：有多个镜像都是从相同的base镜像构建而来的，那么宿主机只需在磁盘中保存一份base镜像。同时内存中也只需要加载一份base镜像，就可以为所有容器服务了。而且镜像的每一层都可以被共享。Docker镜像都是只读的。当容器启动时，一个新的可写层被加载到镜像的顶部。这一层通常被称为容器层，容器层之下都叫镜像层。"}]}]}]},{"ID":"20230724013240-1gvrbsf","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-1gvrbsf","updated":"20230724013240"}},{"ID":"20230724013240-1bu0r7g","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-1bu0r7g","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"8.Docker安装常用服务"}]},{"ID":"20230724013240-f5kd349","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-f5kd349","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"8.1 安装mysql"}]},{"ID":"20230724013240-xzav3ef","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-xzav3ef","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.拉取mysql镜像到本地\n    docker pull mysql:tag (tag不加默认最新版本)\n  \n# 2.运行mysql服务\n    docker run --name mysql -e MYSQL_ROOT_PASSWORD=root -d mysql:tag                          --没有暴露外部端口外部不能连接\n    docker run --name mysql -e MYSQL_ROOT_PASSWORD=root -p 3306:3306 -d  mysql:tag  --没有暴露外部端口\n\n# 3.进入mysql容器\n    docker exec -it 容器名称|容器id bash\n\n# 4.外部查看mysql日志\n    docker logs 容器名称|容器id\n\n# 5.使用自定义配置参数\n    docker run --name mysql -v /root/mysql/conf.d:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=root -d mysql:tag\n\n# 6.将容器数据位置与宿主机位置挂载保证数据安全\n    docker run --name mysql -v /root/mysql/data:/var/lib/mysql -v /root/mysql/conf.d:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=root -p 3306:3306 -d mysql:tag\n\n# 7.通过其他客户端访问 如在window系统|macos系统使用客户端工具访问\n  \n# 8.将mysql数据库备份为sql文件\n    docker exec mysql|容器id sh -c 'exec mysqldump --all-databases -uroot -p\"$MYSQL_ROOT_PASSWORD\"' \u003e /root/all-databases.sql  --导出全部数据\n    docker exec mysql sh -c 'exec mysqldump --databases 库表 -uroot -p\"$MYSQL_ROOT_PASSWORD\"' \u003e /root/all-databases.sql  --导出指定库数据\n    docker exec mysql sh -c 'exec mysqldump --no-data --databases 库表 -uroot -p\"$MYSQL_ROOT_PASSWORD\"' \u003e /root/all-databases.sql  --导出指定库数据不要数据\n\n# 9.执行sql文件到mysql中\n    docker exec -i mysql sh -c 'exec mysql -uroot -p\"$MYSQL_ROOT_PASSWORD\"' \u003c /root/xxx.sql\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-r7f5dzx","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-r7f5dzx","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"8.2 安装Redis服务"}]},{"ID":"20230724013240-5zzphi1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-5zzphi1","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.在docker hub搜索redis镜像\n    docker search redis\n\n# 2.拉取redis镜像到本地\n    docker pull redis\n\n# 3.启动redis服务运行容器\n    docker run --name redis -d redis:tag (没有暴露外部端口)\n    docker run --name redis -p 6379:6379 -d redis:tag (暴露外部宿主机端口为6379进行连接) \n\n# 4.查看启动日志\n    docker logs -t -f 容器id|容器名称\n\n# 5.进入容器内部查看\n    docker exec -it 容器id|名称 bash  \n\n# 6.加载外部自定义配置启动redis容器\n    默认情况下redis官方镜像中没有redis.conf配置文件 需要去官网下载指定版本的配置文件\n    1. wget http://download.redis.io/releases/redis-5.0.8.tar.gz  下载官方安装包\n    2. 将官方安装包中配置文件进行复制到宿主机指定目录中如 /root/redis/redis.conf文件\n    3. 修改需要自定义的配置\n         bind 0.0.0.0 开启远程权限\n         appenonly yes 开启aof持久化\n    4. 加载配置启动\n    docker run --name redis -v /root/redis:/usr/local/etc/redis -p 6379:6379 -d redis redis-server /usr/local/etc/redis/redis.conf  \n\n# 7.将数据目录挂在到本地保证数据安全\n    docker run --name redis -v /root/redis/data:/data -v /root/redis/redis.conf:/usr/local/etc/redis/redis.conf -p 6379:6379 -d redis redis-server                  /usr/local/etc/redis/redis.conf  \n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-gswda23","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-gswda23","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"8.3 安装Nginx"}]},{"ID":"20230724013240-kyya4t1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-kyya4t1","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.在docker hub搜索nginx\n    docker search nginx\n\n# 2.拉取nginx镜像到本地\n    [root@localhost ~]# docker pull nginx\n    Using default tag: latest\n    latest: Pulling from library/nginx\n    afb6ec6fdc1c: Pull complete \n    b90c53a0b692: Pull complete \n    11fa52a0fdc0: Pull complete \n    Digest: sha256:30dfa439718a17baafefadf16c5e7c9d0a1cde97b4fd84f63b69e13513be7097\n    Status: Downloaded newer image for nginx:latest\n    docker.io/library/nginx:latest\n\n# 3.启动nginx容器\n        docker run -p 80:80 --name nginx01 -d nginx\n\n# 4.进入容器\n        docker exec -it nginx01 /bin/bash\n        查找目录:  whereis nginx\n        配置文件:  /etc/nginx/nginx.conf\n\n# 5.复制配置文件到宿主机\n        docker cp nginx01(容器id|容器名称):/etc/nginx/nginx.conf 宿主机名录\n\n# 6.挂在nginx配置以及html到宿主机外部\n        docker run --name nginx02 -v /root/nginx/nginx.conf:/etc/nginx/nginx.conf -v /root/nginx/html:/usr/share/nginx/html -p 80:80 -d nginx   \n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-b645ldx","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-b645ldx","updated":"20230724013240"}},{"ID":"20230724013240-8lauze8","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-8lauze8","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"8.4 安装Tomcat"}]},{"ID":"20230724013240-d27vvk0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-d27vvk0","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.在docker hub搜索tomcat\n    docker search tomcat\n\n# 2.下载tomcat镜像\n    docker pull tomcat\n\n# 3.运行tomcat镜像\n    docker run -p 8080:8080 -d --name mytomcat tomcat\n\n# 4.进入tomcat容器\n    docker exec -it mytomcat /bin/bash\n\n# 5.将webapps目录挂载在外部\n    docker run -p 8080:8080 -v /root/webapps:/usr/local/tomcat/webapps -d --name mytomcat tomcat\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-s19g7zq","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-s19g7zq","updated":"20230724013240"}},{"ID":"20230724013240-t4zd6wa","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-t4zd6wa","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"8.5 安装MongoDB数据库"}]},{"ID":"20230724013240-k1k1xh1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-k1k1xh1","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.运行mongDB\n    docker run -d -p 27017:27017 --name mymongo mongo  ---无须权限\n    docker logs -f mymongo --查看mongo运行日志\n\n# 2.进入mongodb容器\n    docker exec -it mymongo /bin/bash\n        直接执行mongo命令进行操作\n\n# 3.常见具有权限的容器\n    docker run --name  mymongo  -p 27017:27017  -d mongo --auth\n\n# 4.进入容器配置用户名密码\n    mongo\n    use admin 选择admin库\n    db.createUser({user:\"root\",pwd:\"root\",roles:[{role:'root',db:'admin'}]})   //创建用户,此用户创建成功,则后续操作都需要用户认证\n    exit\n\n# 5.将mongoDB中数据目录映射到宿主机中\n    docker run -d -p 27017:27017 -v /root/mongo/data:/data/db --name mymongo mongo \n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-zi2269i","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-zi2269i","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"8.6 安装ElasticSearch"}]},{"ID":"20230724013240-ujr085t","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-ujr085t","updated":"20230724013240"},"Children":[{"ID":"20230724013240-ke2mkj8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-ke2mkj8","updated":"20230724013240"},"Children":[{"ID":"20230724013240-3wa0vbu","Type":"NodeParagraph","Properties":{"id":"20230724013240-3wa0vbu","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"注意:"},{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"调高JVM线程数限制数量"}]}]}]},{"ID":"20230724013240-kpb8pq4","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-kpb8pq4","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"0.拉取镜像运行elasticsearch"}]},{"ID":"20230724013240-yyfus10","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-yyfus10","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.dockerhub 拉取镜像\n    docker pull elasticsearch:6.4.2\n# 2.查看docker镜像\n    docker images\n# 3.运行docker镜像\n    docker run -p 9200:9200 -p 9300:9300 elasticsearch:6.4.2\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-rioc63u","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-rioc63u","updated":"20230724013240"},"Children":[{"ID":"20230724013240-ptnf3ed","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-ptnf3ed","updated":"20230724013240"},"Children":[{"ID":"20230724013240-hnckkde","Type":"NodeParagraph","Properties":{"id":"20230724013240-hnckkde","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"启动出现如下错误"}]}]},{"ID":"20230724013240-uxqwpch","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-uxqwpch","updated":"20230724013240"},"Children":[{"ID":"20230724013240-z9u5nyl","Type":"NodeParagraph","Properties":{"id":"20230724013240-z9u5nyl","updated":"20230724013240"}}]}]},{"ID":"20230724013240-atrfrtk","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-atrfrtk","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"1. 预先配置"}]},{"ID":"20230724013240-ulsm32g","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-ulsm32g","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.在centos虚拟机中，修改配置sysctl.conf\n    vim /etc/sysctl.conf\n# 2.加入如下配置\n    vm.max_map_count=262144 \n# 3.启用配置\n    sysctl -p\n    注：这一步是为了防止启动容器时，报出如下错误：\n    bootstrap checks failed max virtual memory areas vm.max_map_count [65530] likely too low, increase to at least [262144]\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-x4afv69","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-x4afv69","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"2.启动EleasticSearch容器"}]},{"ID":"20230724013240-mbemo7i","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-mbemo7i","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 0.复制容器中data目录到宿主机中\n    docker cp 容器id:/usr/share/share/elasticsearch/data /root/es\n# 1.运行ES容器 指定jvm内存大小并指定ik分词器位置\n    docker run -d --name es -p 9200:9200 -p 9300:9300 -e ES_JAVA_OPTS=\"-Xms128m -Xmx128m\" -v /root/es/plugins:/usr/share/elasticsearch/plugins -v /root/es/data:/usr/share/elasticsearch/data elasticsearch:6.4.2\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-aenu7ha","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-aenu7ha","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"3.安装IK分词器"}]},{"ID":"20230724013240-1sldw2f","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-1sldw2f","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.下载对应版本的IK分词器\n    wget https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.4.2/elasticsearch-analysis-ik-6.4.2.zip\n\n# 2.解压到plugins文件夹中\n    yum install -y unzip\n    unzip -d ik elasticsearch-analysis-ik-6.4.2.zip\n\n# 3.添加自定义扩展词和停用词\n    cd plugins/elasticsearch/config\n    vim IKAnalyzer.cfg.xml\n    \u003cproperties\u003e\n        \u003ccomment\u003eIK Analyzer 扩展配置\u003c/comment\u003e\n        \u003c!--用户可以在这里配置自己的扩展字典 --\u003e\n        \u003centry key=\"ext_dict\"\u003eext_dict.dic\u003c/entry\u003e\n        \u003c!--用户可以在这里配置自己的扩展停止词字典--\u003e\n        \u003centry key=\"ext_stopwords\"\u003eext_stopwords.dic\u003c/entry\u003e\n    \u003c/properties\u003e\n\n# 4.在ik分词器目录下config目录中创建ext_dict.dic文件   编码一定要为UTF-8才能生效\n    vim ext_dict.dic 加入扩展词即可\n# 5. 在ik分词器目录下config目录中创建ext_stopword.dic文件 \n    vim ext_stopwords.dic 加入停用词即可\n\n# 6.重启容器生效\n    docker restart 容器id\n# 7.将此容器提交成为一个新的镜像\n    docker commit -a=\"xiaochen\" -m=\"es with IKAnalyzer\" 容器id xiaochen/elasticsearch:6.4.2\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-bfhi49g","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-bfhi49g","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"4. 安装Kibana"}]},{"ID":"20230724013240-35mr87u","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-35mr87u","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.下载kibana镜像到本地\n    docker pull kibana:6.4.2\n\n# 2.启动kibana容器\n    docker run -d --name kibana -e ELASTICSEARCH_URL=http://10.15.0.3:9200 -p 5601:5601 kibana:6.4.2\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-gk6c1at","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-gk6c1at","updated":"20230724013240"}},{"ID":"20230724013240-u5ilrhb","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-u5ilrhb","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"10.Docker中出现如下错误解决方案"}]},{"ID":"20230724013240-hxsr67u","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-hxsr67u","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"[root@localhost ~]# docker search mysql 或者 docker pull 这些命令无法使用\nError response from daemon: Get https://index.docker.io/v1/search?q=mysql\u0026n=25: x509: certificate has expired or is not yet valid\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-p381fbm","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-p381fbm","updated":"20230724013240"},"Children":[{"ID":"20230724013240-ez1q188","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-ez1q188","updated":"20230724013240"},"Children":[{"ID":"20230724013240-eox1yld","Type":"NodeParagraph","Properties":{"id":"20230724013240-eox1yld","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"注意:这个错误的原因在于是系统的时间和docker hub时间不一致,需要做系统时间与网络时间同步"}]}]}]},{"ID":"20230724013240-s7iotb3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-s7iotb3","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.安装时间同步\n    sudo yum -y install ntp ntpdate\n# 2.同步时间\n    sudo ntpdate cn.pool.ntp.org\n# 3.查看本机时间\n    date\n# 4.从新测试\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-qhqw30u","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-qhqw30u","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.Dockerfile"}]},{"ID":"20230724013240-83deypl","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-83deypl","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.1 什么是Dockerfile"}]},{"ID":"20230724013240-9vq6czg","Type":"NodeParagraph","Properties":{"id":"20230724013240-9vq6czg","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Dockerfile可以认为是Docker镜像的描述文件，是由一系列命令和参数构成的脚本"},{"Type":"NodeText","Data":"。主要作用是"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"用来构建docker镜像的构建文件"},{"Type":"NodeText","Data":"。"}]},{"ID":"20230724013240-1y7kewm","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-1y7kewm","updated":"20230724013240"},"Children":[{"ID":"20230724013240-ohulery","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-ohulery","updated":"20230724013240"},"Children":[{"ID":"20230724013240-dqpl2md","Type":"NodeParagraph","Properties":{"id":"20230724013240-dqpl2md","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"通过架构图可以看出通过DockerFile可以直接构建镜像"}]}]}]},{"ID":"20230724013240-1ad2bzk","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-1ad2bzk","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.2 Dockerfile解析过程"}]},{"ID":"20230724013240-mp2sqj6","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-mp2sqj6","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.3 Dockerfile的保留命令"}]},{"ID":"20230724013240-a0q6rrx","Type":"NodeParagraph","Properties":{"id":"20230724013240-a0q6rrx","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"官方说明:"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://docs.docker.com/engine/reference/builder/","TextMarkTextContent":"https://docs.docker.com/engine/reference/builder/"}]},{"ID":"20230724013240-mxvzbjk","Type":"NodeTable","TableAligns":[0,0],"Properties":{"colgroup":"|","id":"20230724013240-mxvzbjk","updated":"20230724013240"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"保留字"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"作用"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"FROM"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"当前镜像是基于哪个镜像的"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"第一个指令必须是FROM"},{"Type":"NodeText","Data":"​"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"MAINTAINER"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"镜像维护者的姓名和邮箱地址"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"RUN"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"构建镜像时需要运行的指令"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"EXPOSE"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"当前容器对外暴露出的端口号"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"WORKDIR"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定在创建容器后，终端默认登录进来的工作目录，一个落脚点"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"ENV"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"用来在构建镜像过程中设置环境变量"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"ADD"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"将宿主机目录下的文件拷贝进镜像且ADD命令会自动处理URL和解压tar包"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"COPY"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"类似于ADD，拷贝文件和目录到镜像中 "},{"Type":"NodeTextMark","TextMarkType":"strong strong","TextMarkTextContent":"将从构建上下文目录中\u0026lt;原路径\u0026gt;的文件/目录复制到新的一层的镜像内的\u0026lt;目标路径\u0026gt;位置"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"VOLUME"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"容器数据卷，用于数据保存和持久化工作"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"CMD"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定一个容器启动时要运行的命令 "},{"Type":"NodeTextMark","TextMarkType":"strong strong","TextMarkTextContent":"Dockerfile中可以有多个CMD指令，但只有最后一个生效，CMD会被docker run之后的参数替换"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"ENTRYPOINT"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定一个容器启动时要运行的命令 "},{"Type":"NodeTextMark","TextMarkType":"strong strong","TextMarkTextContent":"ENTRYPOINT的目的和CMD一样，都是在指定容器启动程序及其参数"}]}]}]},{"ID":"20230724013240-lt4xon5","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-lt4xon5","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.3.1 FROM 命令"}]},{"ID":"20230724013240-ey3ntgg","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-ey3ntgg","updated":"20230724013240"},"Children":[{"ID":"20230724013240-0isvt9k","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-0isvt9k","updated":"20230724013240"},"Children":[{"ID":"20230724013240-drvmw2s","Type":"NodeParagraph","Properties":{"id":"20230724013240-drvmw2s","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"基于那个镜像进行构建新的镜像,在构建时会自动从docker hub拉取base镜像 必须作为Dockerfile的第一个指令出现"}]}]},{"ID":"20230724013240-c0xtnqc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-c0xtnqc","updated":"20230724013240"},"Children":[{"ID":"20230724013240-tvaucxi","Type":"NodeParagraph","Properties":{"id":"20230724013240-tvaucxi","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"语法:"}]},{"ID":"20230724013240-65vxvps","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-65vxvps","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"FROM  \u003cimage\u003e\nFROM  \u003cimage\u003e[:\u003ctag\u003e]     使用版本不写为latest\nFROM  \u003cimage\u003e[@\u003cdigest\u003e]  使用摘要\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20230724013240-mm8y7fu","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-mm8y7fu","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.3.2 MAINTAINER  命令"}]},{"ID":"20230724013240-skg6ts0","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-skg6ts0","updated":"20230724013240"},"Children":[{"ID":"20230724013240-5lqjby9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-5lqjby9","updated":"20230724013240"},"Children":[{"ID":"20230724013240-lw08ail","Type":"NodeParagraph","Properties":{"id":"20230724013240-lw08ail","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"镜像维护者的姓名和邮箱地址[废弃]"}]}]},{"ID":"20230724013240-bxc5u4s","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-bxc5u4s","updated":"20230724013240"},"Children":[{"ID":"20230724013240-ov2fnmr","Type":"NodeParagraph","Properties":{"id":"20230724013240-ov2fnmr","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"语法:"}]},{"ID":"20230724013240-cuionpq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-cuionpq","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"MAINTAINER \u003cname\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20230724013240-t774ibg","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-t774ibg","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.3.3 RUN 命令"}]},{"ID":"20230724013240-mn99ch0","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-mn99ch0","updated":"20230724013240"},"Children":[{"ID":"20230724013240-fv7ijgs","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-fv7ijgs","updated":"20230724013240"},"Children":[{"ID":"20230724013240-0ppe4q0","Type":"NodeParagraph","Properties":{"id":"20230724013240-0ppe4q0","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"RUN指令将在当前映像之上的新层中执行任何命令并提交结果。生成的提交映像将用于Dockerfile中的下一步"}]}]},{"ID":"20230724013240-zjqo4wq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-zjqo4wq","updated":"20230724013240"},"Children":[{"ID":"20230724013240-n9hhhh5","Type":"NodeParagraph","Properties":{"id":"20230724013240-n9hhhh5","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"语法:"}]},{"ID":"20230724013240-x2eretp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-x2eretp","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"RUN \u003ccommand\u003e (shell form, the command is run in a shell, which by default is /bin/sh -c on Linux or cmd /S /C on Windows)\nRUN echo hello\n\nRUN [\"executable\", \"param1\", \"param2\"] (exec form)\nRUN [\"/bin/bash\", \"-c\", \"echo hello\"]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20230724013240-wpuh145","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-wpuh145","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.3.4 EXPOSE 命令"}]},{"ID":"20230724013240-jwzudac","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-jwzudac","updated":"20230724013240"},"Children":[{"ID":"20230724013240-ra48ry7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-ra48ry7","updated":"20230724013240"},"Children":[{"ID":"20230724013240-rbcvxlr","Type":"NodeParagraph","Properties":{"id":"20230724013240-rbcvxlr","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"用来指定构建的镜像在运行为容器时对外暴露的端口"}]}]},{"ID":"20230724013240-hol9opp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-hol9opp","updated":"20230724013240"},"Children":[{"ID":"20230724013240-vly05vg","Type":"NodeParagraph","Properties":{"id":"20230724013240-vly05vg","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"语法:"}]},{"ID":"20230724013240-j37tpza","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-j37tpza","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"EXPOSE 80/tcp  如果没有显示指定则默认暴露都是tcp\nEXPOSE 80/udp\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20230724013240-x3d28sh","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-x3d28sh","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.3.5 CMD 命令"}]},{"ID":"20230724013240-vp5fz8o","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-vp5fz8o","updated":"20230724013240"},"Children":[{"ID":"20230724013240-lwow73x","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-lwow73x","updated":"20230724013240"},"Children":[{"ID":"20230724013240-2d9epej","Type":"NodeParagraph","Properties":{"id":"20230724013240-2d9epej","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"用来为启动的容器指定执行的命令,在Dockerfile中只能有一条CMD指令。如果列出多个命令，则只有最后一个命令才会生效。"}]}]},{"ID":"20230724013240-mxbjk88","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-mxbjk88","updated":"20230724013240"},"Children":[{"ID":"20230724013240-hljegl4","Type":"NodeParagraph","Properties":{"id":"20230724013240-hljegl4","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"注意: "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Dockerfile中只能有一条CMD指令。如果列出多个命令，则只有最后一个命令才会生效。"}]}]},{"ID":"20230724013240-an9g8yd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-an9g8yd","updated":"20230724013240"},"Children":[{"ID":"20230724013240-a9l5a1i","Type":"NodeParagraph","Properties":{"id":"20230724013240-a9l5a1i","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"语法:"}]},{"ID":"20230724013240-i0spm0g","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-i0spm0g","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"CMD [\"executable\",\"param1\",\"param2\"] (exec form, this is the preferred form)\nCMD [\"param1\",\"param2\"] (as default parameters to ENTRYPOINT)\nCMD command param1 param2 (shell form)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20230724013240-138urur","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-138urur","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.3.6 WORKDIR 命令"}]},{"ID":"20230724013240-eah5ueh","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-eah5ueh","updated":"20230724013240"},"Children":[{"ID":"20230724013240-9xp79vz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-9xp79vz","updated":"20230724013240"},"Children":[{"ID":"20230724013240-7prbf3i","Type":"NodeParagraph","Properties":{"id":"20230724013240-7prbf3i","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"用来为Dockerfile中的任何RUN、CMD、ENTRYPOINT、COPY和ADD指令设置工作目录。如果WORKDIR不存在，即使它没有在任何后续Dockerfile指令中使用，它也将被创建。"}]}]},{"ID":"20230724013240-qdyiozi","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-qdyiozi","updated":"20230724013240"},"Children":[{"ID":"20230724013240-lvnpbv7","Type":"NodeParagraph","Properties":{"id":"20230724013240-lvnpbv7","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"语法:"}]},{"ID":"20230724013240-gjf3bd5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-gjf3bd5","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"WORKDIR /path/to/workdir\n\nWORKDIR /a\nWORKDIR b\nWORKDIR c\n`注意:WORKDIR指令可以在Dockerfile中多次使用。如果提供了相对路径，则该路径将与先前WORKDIR指令的路径相对`\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20230724013240-qutllg7","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-qutllg7","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.3.7 ENV 命令"}]},{"ID":"20230724013240-m46mhwz","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-m46mhwz","updated":"20230724013240"},"Children":[{"ID":"20230724013240-i3jp249","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-i3jp249","updated":"20230724013240"},"Children":[{"ID":"20230724013240-ha5w97s","Type":"NodeParagraph","Properties":{"id":"20230724013240-ha5w97s","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"用来为构建镜像设置环境变量。这个值将出现在构建阶段中所有后续指令的环境中。"}]}]},{"ID":"20230724013240-bsy7g5a","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-bsy7g5a","updated":"20230724013240"},"Children":[{"ID":"20230724013240-w6uko7n","Type":"NodeParagraph","Properties":{"id":"20230724013240-w6uko7n","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"语法："}]},{"ID":"20230724013240-tld3xcr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-tld3xcr","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"ENV \u003ckey\u003e \u003cvalue\u003e\nENV \u003ckey\u003e=\u003cvalue\u003e ...\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20230724013240-ca6khdx","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-ca6khdx","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.3.8 ADD 命令"}]},{"ID":"20230724013240-9r1x7ke","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-9r1x7ke","updated":"20230724013240"},"Children":[{"ID":"20230724013240-nd4ti9j","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-nd4ti9j","updated":"20230724013240"},"Children":[{"ID":"20230724013240-e5s8md8","Type":"NodeParagraph","Properties":{"id":"20230724013240-e5s8md8","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"用来从context上下文复制新文件、目录或远程文件url，并将它们添加到位于指定路径的映像文件系统中。"}]}]},{"ID":"20230724013240-40kb5ql","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-40kb5ql","updated":"20230724013240"},"Children":[{"ID":"20230724013240-70wrp2p","Type":"NodeParagraph","Properties":{"id":"20230724013240-70wrp2p","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"语法:"}]},{"ID":"20230724013240-7h73c54","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-7h73c54","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"ADD hom* /mydir/       通配符添加多个文件\nADD hom?.txt /mydir/   通配符添加\nADD test.txt relativeDir/  可以指定相对路径\nADD test.txt /absoluteDir/ 也可以指定绝对路径\nADD url \n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20230724013240-yd3dsrr","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-yd3dsrr","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.3.9 COPY 命令"}]},{"ID":"20230724013240-3ycib45","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-3ycib45","updated":"20230724013240"},"Children":[{"ID":"20230724013240-n89y9c8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-n89y9c8","updated":"20230724013240"},"Children":[{"ID":"20230724013240-sncf0x9","Type":"NodeParagraph","Properties":{"id":"20230724013240-sncf0x9","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"用来将context目录中指定文件复制到镜像的指定目录中"}]}]},{"ID":"20230724013240-jc5rn4t","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-jc5rn4t","updated":"20230724013240"},"Children":[{"ID":"20230724013240-msqwe05","Type":"NodeParagraph","Properties":{"id":"20230724013240-msqwe05","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"语法:"}]},{"ID":"20230724013240-33a09wp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-33a09wp","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"COPY src dest\nCOPY [\"\u003csrc\u003e\",... \"\u003cdest\u003e\"]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20230724013240-lx9cwgi","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-lx9cwgi","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.3.10 VOLUME 命令"}]},{"ID":"20230724013240-tr5kaiw","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-tr5kaiw","updated":"20230724013240"},"Children":[{"ID":"20230724013240-pin2cth","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-pin2cth","updated":"20230724013240"},"Children":[{"ID":"20230724013240-h9qcfwp","Type":"NodeParagraph","Properties":{"id":"20230724013240-h9qcfwp","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"用来定义容器运行时可以挂在到宿主机的目录"}]}]},{"ID":"20230724013240-p1h7mr8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-p1h7mr8","updated":"20230724013240"},"Children":[{"ID":"20230724013240-wrncs2k","Type":"NodeParagraph","Properties":{"id":"20230724013240-wrncs2k","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"语法:"}]},{"ID":"20230724013240-anktjiw","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-anktjiw","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"VOLUME [\"/data\"]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20230724013240-uk0yrpr","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-uk0yrpr","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.3.11 ENTRYPOINT命令"}]},{"ID":"20230724013240-3u71gle","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-3u71gle","updated":"20230724013240"},"Children":[{"ID":"20230724013240-rt4alxu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-rt4alxu","updated":"20230724013240"},"Children":[{"ID":"20230724013240-boz14rh","Type":"NodeParagraph","Properties":{"id":"20230724013240-boz14rh","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"用来指定容器启动时执行命令和CMD类似"}]}]},{"ID":"20230724013240-zpd9p7t","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-zpd9p7t","updated":"20230724013240"},"Children":[{"ID":"20230724013240-vcs6y4g","Type":"NodeParagraph","Properties":{"id":"20230724013240-vcs6y4g","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"语法:"}]},{"ID":"20230724013240-o0wxu0k","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-o0wxu0k","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"  [\"executable\", \"param1\", \"param2\"]\nENTRYPOINT command param1 param2\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-12gi4qz","Type":"NodeParagraph","Properties":{"id":"20230724013240-12gi4qz","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"ENTRYPOINT指令，往往用于设置容器启动后的第一个命令"},{"Type":"NodeText","Data":"，这对一个容器来说往往是固定的。 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"CMD指令，往往用于设置容器启动的第一个命令的"},{"Type":"NodeText","Data":"默认参数，这对一个容器来说可以是变化的。"}]}]}]},{"ID":"20230724013240-ntb0dv6","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-ntb0dv6","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.3.11 ENTRYPOINT命令"}]},{"ID":"20230724013240-0al5ptc","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-0al5ptc","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"9.4 Dockerfile构建springboot项目部署"}]},{"ID":"20230724013240-xafks3x","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-xafks3x","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"1.准备springboot可运行项目"}]},{"ID":"20230724013240-x30cuct","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-x30cuct","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"2.将可运行项目放入linux虚拟机中"}]},{"ID":"20230724013240-7dr5wwr","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-7dr5wwr","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"3.编写Dockerfile"}]},{"ID":"20230724013240-vng7g9i","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-vng7g9i","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"FROM openjdk:8\nWORKDIR /ems\nADD ems.jar /ems\nEXPOSE 8989\nENTRYPOINT [\"java\",\"-jar\"]\nCMD [\"ems.jar\"]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-s0c8v21","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-s0c8v21","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"4.构建镜像"}]},{"ID":"20230724013240-g5q9dks","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-g5q9dks","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"[root@localhost ems]# docker build -t ems .\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-jf2mdyl","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-jf2mdyl","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"5.运行镜像"}]},{"ID":"20230724013240-vg21u7y","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-vg21u7y","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"[root@localhost ems]# docker run -p 8989:8989 ems\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-b2mp44n","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-b2mp44n","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"6.访问项目"}]},{"ID":"20230724013240-fvkccn6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-fvkccn6","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"http://10.15.0.8:8989/ems/login.html\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-7nhwwuq","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-7nhwwuq","updated":"20230724013240"}},{"ID":"20230724013240-x240spi","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-x240spi","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"10.高级网络配置"}]},{"ID":"20230724013240-f24z23q","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-f24z23q","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"10.1 说明"}]},{"ID":"20230724013240-etxx8r4","Type":"NodeParagraph","Properties":{"id":"20230724013240-etxx8r4","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"当 Docker 启动时，会自动在主机上创建一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker0"},{"Type":"NodeText","Data":"​ 虚拟网桥，实际上是 Linux 的一个 bridge，可以理解为一个软件交换机。它会在挂载到它的网口之间进行转发。"}]},{"ID":"20230724013240-lib75fa","Type":"NodeParagraph","Properties":{"id":"20230724013240-lib75fa","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"同时，Docker 随机分配一个本地未占用的私有网段（在 "},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://tools.ietf.org/html/rfc1918","TextMarkTextContent":"RFC1918"},{"Type":"NodeText","Data":" 中定义）中的一个地址给 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker0"},{"Type":"NodeText","Data":"​ 接口。比如典型的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"172.17.42.1"},{"Type":"NodeText","Data":"​，掩码为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"255.255.0.0"},{"Type":"NodeText","Data":"​。此后启动的容器内的网口也会自动分配一个同一网段（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"172.17.0.0/16"},{"Type":"NodeText","Data":"​）的地址。"}]},{"ID":"20230724013240-siqgy70","Type":"NodeParagraph","Properties":{"id":"20230724013240-siqgy70","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"当创建一个 Docker 容器的时候，同时会创建了一对 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"veth pair"},{"Type":"NodeText","Data":"​ 接口（当数据包发送到一个接口时，另外一个接口也可以收到相同的数据包）。这对接口一端在容器内，即 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"eth0"},{"Type":"NodeText","Data":"​；另一端在本地并被挂载到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker0"},{"Type":"NodeText","Data":"​ 网桥，名称以 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"veth"},{"Type":"NodeText","Data":"​ 开头（例如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"vethAQI2QT"},{"Type":"NodeText","Data":"​）。通过这种方式，主机可以跟容器通信，容器之间也可以相互通信。Docker 就创建了在主机和所有容器之间一个虚拟共享网络。"}]},{"ID":"20230724013240-rhrlthb","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-rhrlthb","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"10.2 查看网络信息"}]},{"ID":"20230724013240-xi6objc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-xi6objc","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# docker network ls\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-3jr9ftv","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-3jr9ftv","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"10.3 创建一个网桥"}]},{"ID":"20230724013240-omqypgy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-omqypgy","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# docker network create -d bridge 网桥名称\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-b2cin5p","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-b2cin5p","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"10.4 删除一个网桥"}]},{"ID":"20230724013240-fpmjzyg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-fpmjzyg","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# docker network rm 网桥名称\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-08hloo1","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-08hloo1","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"10.5 容器之前使用网络通信"}]},{"ID":"20230724013240-nels44a","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-nels44a","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.查询当前网络配置\n- docker network ls\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-qkr24dl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-qkr24dl","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"NETWORK ID          NAME                DRIVER              SCOPE\n8e424e5936b7        bridge              bridge              local\n17d974db02da        docker_gwbridge     bridge              local\nd6c326e433f7        host                host                local\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-cm7a5cf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-cm7a5cf","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 2.创建桥接网络\n- docker network create -d bridge info\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-iuruksm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-iuruksm","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"[root@centos ~]# docker network create -d bridge info\n6e4aaebff79b1df43a064e0e8fdab08f52d64ce34db78dd5184ce7aaaf550a2f\n[root@centos ~]# docker network ls\nNETWORK ID          NAME                DRIVER              SCOPE\n8e424e5936b7        bridge              bridge              local\n17d974db02da        docker_gwbridge     bridge              local\nd6c326e433f7        host                host                local\n6e4aaebff79b        info                bridge              local\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-eg7uluf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-eg7uluf","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 3.启动容器指定使用网桥\n- docker run -d -p 8890:80 --name nginx001 --network info nginx \n- docker run -d -p 8891:80 --name nginx002 --network info nginx \n    `注意:一旦指定网桥后--name指定名字就是主机名,多个容器指定在同一个网桥时,可以在任意一个容器中使用主机名与容器进行互通`\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-scl5qgt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-scl5qgt","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"[root@centos ~]# docker run -d -p 8890:80 --name nginx001 --network info nginx \nc315bcc94e9ddaa36eb6c6f16ca51592b1ac8bf1ecfe9d8f01d892f3f10825fe\n[root@centos ~]# docker run -d -p 8891:80 --name nginx002 --network info nginx\nf8682db35dd7fb4395f90edb38df7cad71bbfaba71b6a4c6e2a3a525cb73c2a5\n[root@centos ~]# docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES\nf8682db35dd7        nginx               \"/docker-entrypoint.…\"   3 seconds ago       Up 2 seconds        0.0.0.0:8891-\u003e80/tcp   nginx002\nc315bcc94e9d        nginx               \"/docker-entrypoint.…\"   7 minutes ago       Up 7 minutes        0.0.0.0:8890-\u003e80/tcp   nginx001\nb63169d43792        mysql:5.7.19        \"docker-entrypoint.s…\"   7 minutes ago       Up 7 minutes        3306/tcp               mysql_mysql.1.s75qe5kkpwwttyf0wrjvd2cda\n[root@centos ~]# docker exec -it f8682db35dd7 /bin/bash\nroot@f8682db35dd7:/# curl http://nginx001\n\u003c!DOCTYPE html\u003e\n\u003chtml\u003e\n\u003chead\u003e\n\u003ctitle\u003eWelcome to nginx!\u003c/title\u003e\n.....\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-pl6jzl2","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-pl6jzl2","updated":"20230724013240"}},{"ID":"20230724013240-bg6l12x","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-bg6l12x","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"11.高级数据卷配置"}]},{"ID":"20230724013240-vl32gln","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-vl32gln","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"11.1 说明"}]},{"ID":"20230724013240-4hthfd6","Type":"NodeParagraph","Properties":{"id":"20230724013240-4hthfd6","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"数据卷"},{"Type":"NodeText","Data":"​ 是一个可供一个或多个容器使用的特殊目录，它绕过 UFS，可以提供很多有用的特性："}]},{"ID":"20230724013240-9cx65qr","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-9cx65qr","updated":"20230724013240"},"Children":[{"ID":"20230724013240-gww9kbr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-gww9kbr","updated":"20230724013240"},"Children":[{"ID":"20230724013240-i8rpof2","Type":"NodeParagraph","Properties":{"id":"20230724013240-i8rpof2","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"数据卷"},{"Type":"NodeText","Data":"​ 可以在容器之间共享和重用"}]}]},{"ID":"20230724013240-9vaqcv3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-9vaqcv3","updated":"20230724013240"},"Children":[{"ID":"20230724013240-fedl6e5","Type":"NodeParagraph","Properties":{"id":"20230724013240-fedl6e5","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"对 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"数据卷"},{"Type":"NodeText","Data":"​ 的修改会立马生效"}]}]},{"ID":"20230724013240-f5m8qza","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-f5m8qza","updated":"20230724013240"},"Children":[{"ID":"20230724013240-antvlsj","Type":"NodeParagraph","Properties":{"id":"20230724013240-antvlsj","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"对 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"数据卷"},{"Type":"NodeText","Data":"​ 的更新，不会影响镜像"}]}]},{"ID":"20230724013240-kaw547c","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-kaw547c","updated":"20230724013240"},"Children":[{"ID":"20230724013240-cnovav3","Type":"NodeParagraph","Properties":{"id":"20230724013240-cnovav3","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"数据卷"},{"Type":"NodeText","Data":"​ 默认会一直存在，即使容器被删除"}]}]}]},{"ID":"20230724013240-ykumc6q","Type":"NodeBlockquote","Properties":{"id":"20230724013240-ykumc6q","updated":"20230724013240"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20230724013240-dahry9s","Type":"NodeParagraph","Properties":{"id":"20230724013240-dahry9s","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"注意："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"数据卷"},{"Type":"NodeText","Data":"​ 的使用，类似于 Linux 下对目录或文件进行 mount，镜像中的被指定为挂载点的目录中的文件会复制到数据卷中（仅数据卷为空时会复制）。"}]}]},{"ID":"20230724013240-sout0ps","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-sout0ps","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"11.2 创建数据卷"}]},{"ID":"20230724013240-f0fd70z","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-f0fd70z","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"[root@centos ~]# docker volume create my-vol\nmy-vol\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-g4k7vwy","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-g4k7vwy","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"11.3 查看数据卷"}]},{"ID":"20230724013240-d743qb4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-d743qb4","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"[root@centos ~]# docker volume inspect my-vol       \n[\n    {\n        \"CreatedAt\": \"2020-11-25T11:43:56+08:00\",\n        \"Driver\": \"local\",\n        \"Labels\": {},\n        \"Mountpoint\": \"/var/lib/docker/volumes/my-vol/_data\",\n        \"Name\": \"my-vol\",\n        \"Options\": {},\n        \"Scope\": \"local\"\n    }\n]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-56upfh9","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-56upfh9","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"11.4 挂载数据卷"}]},{"ID":"20230724013240-2h5da0c","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-2h5da0c","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"[root@centos ~]# docker run -d -P --name web  -v my-vol:/usr/share/nginx/html  nginx\n[root@centos ~]# docker inspect web\n                \"Mounts\": [\n            {\n                \"Type\": \"volume\",\n                \"Name\": \"my-vol\",\n                \"Source\": \"/var/lib/docker/volumes/my-vol/_data\",\n                \"Destination\": \"/usr/share/nginx/html\",\n                \"Driver\": \"local\",\n                \"Mode\": \"z\",\n                \"RW\": true,\n                \"Propagation\": \"\"\n            }\n        ],\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-06ymhg8","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-06ymhg8","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"11.5 删除数据卷"}]},{"ID":"20230724013240-p22e47w","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-p22e47w","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"docker volume rm my-vol\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-iojuz81","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-iojuz81","updated":"20230724013240"}},{"ID":"20230724013240-38nurma","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-38nurma","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"12.Docker Compose"}]},{"ID":"20230724013240-x70l1xt","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-x70l1xt","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"12.1 简介"}]},{"ID":"20230724013240-o6qbxj6","Type":"NodeParagraph","Properties":{"id":"20230724013240-o6qbxj6","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Compose"},{"Type":"NodeText","Data":"​ 项目是 Docker 官方的开源项目，负责实现对 Docker 容器集群的快速编排。从功能上看，跟 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"OpenStack"},{"Type":"NodeText","Data":"​ 中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Heat"},{"Type":"NodeText","Data":"​ 十分类似。"}]},{"ID":"20230724013240-qoepggu","Type":"NodeParagraph","Properties":{"id":"20230724013240-qoepggu","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"其代码目前在 "},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://github.com/docker/compose","TextMarkTextContent":"https://github.com/docker/compose"},{"Type":"NodeText","Data":" 上开源。"}]},{"ID":"20230724013240-4d4xc6k","Type":"NodeParagraph","Properties":{"id":"20230724013240-4d4xc6k","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Compose"},{"Type":"NodeText","Data":"​ 定位是 「定义和运行多个 Docker 容器的应用（Defining and running multi-container Docker applications）」，其前身是开源项目 Fig。"}]},{"ID":"20230724013240-qjnhfs1","Type":"NodeParagraph","Properties":{"id":"20230724013240-qjnhfs1","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"通过第一部分中的介绍，我们知道使用一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Dockerfile"},{"Type":"NodeText","Data":"​ 模板文件，可以让用户很方便的定义一个单独的应用容器。然而，在日常工作中，经常会碰到需要多个容器相互配合来完成某项任务的情况。例如要实现一个 Web 项目，除了 Web 服务容器本身，往往还需要再加上后端的数据库服务容器，甚至还包括负载均衡容器等。"}]},{"ID":"20230724013240-ycc6hv7","Type":"NodeParagraph","Properties":{"id":"20230724013240-ycc6hv7","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Compose"},{"Type":"NodeText","Data":"​ 恰好满足了这样的需求。它允许用户通过一个单独的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose.yml"},{"Type":"NodeText","Data":"​ 模板文件（YAML 格式）来定义一组相关联的应用容器为一个项目（project）。"}]},{"ID":"20230724013240-u0byzbd","Type":"NodeParagraph","Properties":{"id":"20230724013240-u0byzbd","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Compose"},{"Type":"NodeText","Data":"​ 中有两个重要的概念："}]},{"ID":"20230724013240-gytvtf5","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-gytvtf5","updated":"20230724013240"},"Children":[{"ID":"20230724013240-zf6h3uj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-zf6h3uj","updated":"20230724013240"},"Children":[{"ID":"20230724013240-9w71kxi","Type":"NodeParagraph","Properties":{"id":"20230724013240-9w71kxi","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"服务 ("},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"service"},{"Type":"NodeText","Data":"​)：一个应用的容器，实际上可以包括若干运行相同镜像的容器实例。"}]}]},{"ID":"20230724013240-xl2fj37","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-xl2fj37","updated":"20230724013240"},"Children":[{"ID":"20230724013240-bto51x0","Type":"NodeParagraph","Properties":{"id":"20230724013240-bto51x0","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"项目 ("},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"project"},{"Type":"NodeText","Data":"​)：由一组关联的应用容器组成的一个完整业务单元，在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose.yml"},{"Type":"NodeText","Data":"​ 文件中定义。"}]}]}]},{"ID":"20230724013240-riu556w","Type":"NodeParagraph","Properties":{"id":"20230724013240-riu556w","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Compose"},{"Type":"NodeText","Data":"​ 的默认管理对象是项目，通过子命令对项目中的一组容器进行便捷地生命周期管理。"}]},{"ID":"20230724013240-wbwinbx","Type":"NodeParagraph","Properties":{"id":"20230724013240-wbwinbx","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Compose"},{"Type":"NodeText","Data":"​ 项目由 Python 编写，实现上调用了 Docker 服务提供的 API 来对容器进行管理。因此，只要所操作的平台支持 Docker API，就可以在其上利用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Compose"},{"Type":"NodeText","Data":"​ 来进行编排管理。"}]},{"ID":"20230724013240-84z6h31","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-84z6h31","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"12.2 安装与卸载"}]},{"ID":"20230724013240-9uvklw1","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20230724013240-9uvklw1","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"1.linux"}]},{"ID":"20230724013240-8cet9cw","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-8cet9cw","updated":"20230724013240"},"Children":[{"ID":"20230724013240-iyoop1w","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-iyoop1w","updated":"20230724013240"},"Children":[{"ID":"20230724013240-px4loxh","Type":"NodeParagraph","Properties":{"id":"20230724013240-px4loxh","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"在 Linux 上的也安装十分简单，从 官方 GitHub Release 处直接下载编译好的二进制文件即可。例如，在 Linux 64 位系统上直接下载对应的二进制包。"}]}]}]},{"ID":"20230724013240-cu0yks6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-cu0yks6","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ sudo curl -L https://github.com/docker/compose/releases/download/1.25.5/docker-compose-`uname -s`-`uname -m` \u003e /usr/local/bin/docker-compose\n$ sudo chmod +x /usr/local/bin/docker-compose\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-eugxmu1","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20230724013240-eugxmu1","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"2.macos、window"}]},{"ID":"20230724013240-3e9f9al","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-3e9f9al","updated":"20230724013240"},"Children":[{"ID":"20230724013240-b8tkhrl","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-b8tkhrl","updated":"20230724013240"},"Children":[{"ID":"20230724013240-lz5izbl","Type":"NodeParagraph","Properties":{"id":"20230724013240-lz5izbl","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Compose 可以通过 Python 的包管理工具 pip 进行安装，也可以直接下载编译好的二进制文件使用，甚至能够直接在 Docker 容器中运行。"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Docker Desktop for Mac/Windows 自带 docker-compose 二进制文件，安装 Docker 之后可以直接使用"},{"Type":"NodeText","Data":"​。"}]}]}]},{"ID":"20230724013240-dulcbjg","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20230724013240-dulcbjg","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"3.bash命令补全"}]},{"ID":"20230724013240-7nkke6p","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-7nkke6p","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ curl -L https://raw.githubusercontent.com/docker/compose/1.25.5/contrib/completion/bash/docker-compose \u003e /etc/bash_completion.d/docker-compose\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-pfhd1jl","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20230724013240-pfhd1jl","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"4.卸载"}]},{"ID":"20230724013240-zeqr366","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-zeqr366","updated":"20230724013240"},"Children":[{"ID":"20230724013240-3jr0ijl","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-3jr0ijl","updated":"20230724013240"},"Children":[{"ID":"20230724013240-vxzrve3","Type":"NodeParagraph","Properties":{"id":"20230724013240-vxzrve3","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"如果是二进制包方式安装的，删除二进制文件即可。"}]}]}]},{"ID":"20230724013240-6yu47gz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-6yu47gz","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ sudo rm /usr/local/bin/docker-compose\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-8pay6h1","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20230724013240-8pay6h1","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"5.测试安装成功"}]},{"ID":"20230724013240-rntum6k","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-rntum6k","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"$ docker-compose --version\n docker-compose version 1.25.5, build 4667896b\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-n9rgla3","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-n9rgla3","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"12.3 docker compose使用"}]},{"ID":"20230724013240-jccoizt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-jccoizt","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 1.相关概念\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-ts24b1d","Type":"NodeParagraph","Properties":{"id":"20230724013240-ts24b1d","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"首先介绍几个术语。"}]},{"ID":"20230724013240-mwuo2hg","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-mwuo2hg","updated":"20230724013240"},"Children":[{"ID":"20230724013240-p36idb2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-p36idb2","updated":"20230724013240"},"Children":[{"ID":"20230724013240-bjsxwqu","Type":"NodeParagraph","Properties":{"id":"20230724013240-bjsxwqu","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"服务 ("},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"service"},{"Type":"NodeText","Data":"​)：一个应用容器，实际上可以运行多个相同镜像的实例。"}]}]},{"ID":"20230724013240-9h73bdg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-9h73bdg","updated":"20230724013240"},"Children":[{"ID":"20230724013240-89vgpp2","Type":"NodeParagraph","Properties":{"id":"20230724013240-89vgpp2","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"项目 ("},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"project"},{"Type":"NodeText","Data":"​)：由一组关联的应用容器组成的一个完整业务单元。∂一个项目可以由多个服务（容器）关联而成，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Compose"},{"Type":"NodeText","Data":"​ 面向项目进行管理。"}]}]}]},{"ID":"20230724013240-8p0uzdc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-8p0uzdc","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 2.场景\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-1diod78","Type":"NodeParagraph","Properties":{"id":"20230724013240-1diod78","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"最常见的项目是 web 网站，该项目应该包含 web 应用和缓存。"}]},{"ID":"20230724013240-1dxy7ux","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-1dxy7ux","updated":"20230724013240"},"Children":[{"ID":"20230724013240-nap9bv1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-nap9bv1","updated":"20230724013240"},"Children":[{"ID":"20230724013240-neh32ca","Type":"NodeParagraph","Properties":{"id":"20230724013240-neh32ca","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"springboot应用"}]}]},{"ID":"20230724013240-sqdptho","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-sqdptho","updated":"20230724013240"},"Children":[{"ID":"20230724013240-ta7xakd","Type":"NodeParagraph","Properties":{"id":"20230724013240-ta7xakd","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"mysql服务"}]}]},{"ID":"20230724013240-27izk81","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-27izk81","updated":"20230724013240"},"Children":[{"ID":"20230724013240-v2m8yy6","Type":"NodeParagraph","Properties":{"id":"20230724013240-v2m8yy6","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"redis服务"}]}]},{"ID":"20230724013240-i5dohpe","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-i5dohpe","updated":"20230724013240"},"Children":[{"ID":"20230724013240-bjwb5iw","Type":"NodeParagraph","Properties":{"id":"20230724013240-bjwb5iw","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"elasticsearch服务"}]}]},{"ID":"20230724013240-ncy6111","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-ncy6111","updated":"20230724013240"},"Children":[{"ID":"20230724013240-snzxom6","Type":"NodeParagraph","Properties":{"id":"20230724013240-snzxom6","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"......."}]}]}]},{"ID":"20230724013240-kt7naw5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-kt7naw5","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 3.docker-compose模板\n- 参考文档:https://docker_practice.gitee.io/zh-cn/compose/compose_file.html\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-zb65re7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-zb65re7","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"version: \"3.0\"\nservices:\n  mysqldb:\n    image: mysql:5.7.19\n    container_name: mysql\n    ports:\n      - \"3306:3306\"\n    volumes:\n      - /root/mysql/conf:/etc/mysql/conf.d\n      - /root/mysql/logs:/logs\n      - /root/mysql/data:/var/lib/mysql\n    environment:\n      MYSQL_ROOT_PASSWORD: root\n    networks:\n      - ems\n    depends_on:\n      - redis\n\n  redis:\n    image: redis:4.0.14\n    container_name: redis\n    ports:\n      - \"6379:6379\"\n    networks:\n      - ems\n    volumes:\n      - /root/redis/data:/data\n    command: redis-server\n    \nnetworks:\n  ems:\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-r4c45d0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-r4c45d0","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 4.通过docker-compose运行一组容器\n- 参考文档:https://docker_practice.gitee.io/zh-cn/compose/commands.html\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-6f68dgz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-6f68dgz","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"[root@centos ~]# docker-compose up                              //前台启动一组服务\n[root@centos ~]# docker-compose up -d                           //后台启动一组服务\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-7hbo5ti","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-7hbo5ti","updated":"20230724013240"}},{"ID":"20230724013240-xjum10r","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-xjum10r","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"12.4 docker-compose 模板文件"}]},{"ID":"20230724013240-lkml92s","Type":"NodeParagraph","Properties":{"id":"20230724013240-lkml92s","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"模板文件是使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Compose"},{"Type":"NodeText","Data":"​ 的核心，涉及到的指令关键字也比较多。但大家不用担心，这里面大部分指令跟 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker run"},{"Type":"NodeText","Data":"​ 相关参数的含义都是类似的。"}]},{"ID":"20230724013240-l7nf1qf","Type":"NodeParagraph","Properties":{"id":"20230724013240-l7nf1qf","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"默认的模板文件名称为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose.yml"},{"Type":"NodeText","Data":"​，格式为 YAML 格式。"}]},{"ID":"20230724013240-zfvgxnl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-zfvgxnl","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"version: \"3\"\n\nservices:\n  webapp:\n    image: examples/web\n    ports:\n      - \"80:80\"\n    volumes:\n      - \"/data\"\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-q2vbyla","Type":"NodeParagraph","Properties":{"id":"20230724013240-q2vbyla","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"注意每个服务都必须通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"image"},{"Type":"NodeText","Data":"​ 指令指定镜像或 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"build"},{"Type":"NodeText","Data":"​ 指令（需要 Dockerfile）等来自动构建生成镜像。"}]},{"ID":"20230724013240-50jisdo","Type":"NodeParagraph","Properties":{"id":"20230724013240-50jisdo","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"如果使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"build"},{"Type":"NodeText","Data":"​ 指令，在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Dockerfile"},{"Type":"NodeText","Data":"​ 中设置的选项(例如："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"CMD"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"EXPOSE"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"VOLUME"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ENV"},{"Type":"NodeText","Data":"​ 等) 将会自动被获取，无需在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose.yml"},{"Type":"NodeText","Data":"​ 中重复设置。"}]},{"ID":"20230724013240-54xhbfl","Type":"NodeParagraph","Properties":{"id":"20230724013240-54xhbfl","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"下面分别介绍各个指令的用法。"}]},{"ID":"20230724013240-lcmb6qr","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-lcmb6qr","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"build"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-aulymmy","Type":"NodeParagraph","Properties":{"id":"20230724013240-aulymmy","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"指定 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Dockerfile"},{"Type":"NodeText","Data":"​ 所在文件夹的路径（可以是绝对路径，或者相对 docker-compose.yml 文件的路径）。 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Compose"},{"Type":"NodeText","Data":"​ 将会利用它自动构建这个镜像，然后使用这个镜像。"}]},{"ID":"20230724013240-azwkbbt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-azwkbbt","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"version: '3'\nservices:\n\n  webapp:\n    build: ./dir\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-533q5vh","Type":"NodeParagraph","Properties":{"id":"20230724013240-533q5vh","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"你也可以使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"context"},{"Type":"NodeText","Data":"​ 指令指定 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Dockerfile"},{"Type":"NodeText","Data":"​ 所在文件夹的路径。"}]},{"ID":"20230724013240-y8u7620","Type":"NodeParagraph","Properties":{"id":"20230724013240-y8u7620","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"dockerfile"},{"Type":"NodeText","Data":"​ 指令指定 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Dockerfile"},{"Type":"NodeText","Data":"​ 文件名。"}]},{"ID":"20230724013240-1lzr3xk","Type":"NodeParagraph","Properties":{"id":"20230724013240-1lzr3xk","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"arg"},{"Type":"NodeText","Data":"​ 指令指定构建镜像时的变量。"}]},{"ID":"20230724013240-yluev20","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-yluev20","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"version: '3'\nservices:\n\n  webapp:\n    build:\n      context: ./dir\n      dockerfile: Dockerfile-alternate\n      args:\n        buildno: 1\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-n7sws2d","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-n7sws2d","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"command"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-wf2uper","Type":"NodeParagraph","Properties":{"id":"20230724013240-wf2uper","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"覆盖容器启动后默认执行的命令。"}]},{"ID":"20230724013240-sxpa7zp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-sxpa7zp","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"command: echo \"hello world\"\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-jzmotz2","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-jzmotz2","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"container_name"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-jlq4qdc","Type":"NodeParagraph","Properties":{"id":"20230724013240-jlq4qdc","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"指定容器名称。默认将会使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"项目名称_服务名称_序号"},{"Type":"NodeText","Data":"​ 这样的格式。"}]},{"ID":"20230724013240-oci6eoq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-oci6eoq","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"container_name: docker-web-container\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-z0zo8vf","Type":"NodeBlockquote","Properties":{"id":"20230724013240-z0zo8vf","updated":"20230724013240"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20230724013240-s4jfvtg","Type":"NodeParagraph","Properties":{"id":"20230724013240-s4jfvtg","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"注意: 指定容器名称后，该服务将无法进行扩展（scale），因为 Docker 不允许多个容器具有相同的名称。"}]}]},{"ID":"20230724013240-cg7o81g","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-cg7o81g","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"depends_on"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-p9p506e","Type":"NodeParagraph","Properties":{"id":"20230724013240-p9p506e","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"解决容器的依赖、启动先后的问题。以下例子中会先启动 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"redis"},{"Type":"NodeText","Data":"​ "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"db"},{"Type":"NodeText","Data":"​ 再启动 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"web"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-teni5bf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-teni5bf","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"version: '3'\n\nservices:\n  web:\n    build: .\n    depends_on:\n      - db\n      - redis\n\n  redis:\n    image: redis\n\n  db:\n    image: postgres\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-b0701pw","Type":"NodeBlockquote","Properties":{"id":"20230724013240-b0701pw","updated":"20230724013240"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20230724013240-8rrtpwp","Type":"NodeParagraph","Properties":{"id":"20230724013240-8rrtpwp","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"注意："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"web"},{"Type":"NodeText","Data":"​ 服务不会等待 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"redis"},{"Type":"NodeText","Data":"​ "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"db"},{"Type":"NodeText","Data":"​ 「完全启动」之后才启动。"}]}]},{"ID":"20230724013240-gyy9nbz","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-gyy9nbz","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"env_file"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-1q0u3dx","Type":"NodeParagraph","Properties":{"id":"20230724013240-1q0u3dx","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"从文件中获取环境变量，可以为单独的文件路径或列表。"}]},{"ID":"20230724013240-ac63lvo","Type":"NodeParagraph","Properties":{"id":"20230724013240-ac63lvo","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"如果通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose -f FILE"},{"Type":"NodeText","Data":"​ 方式来指定 Compose 模板文件，则 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"env_file"},{"Type":"NodeText","Data":"​ 中变量的路径会基于模板文件路径。"}]},{"ID":"20230724013240-utes95k","Type":"NodeParagraph","Properties":{"id":"20230724013240-utes95k","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"如果有变量名称与 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"environment"},{"Type":"NodeText","Data":"​ 指令冲突，则按照惯例，以后者为准。"}]},{"ID":"20230724013240-0l0yo5h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-0l0yo5h","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"env_file: .env\n\nenv_file:\n  - ./common.env\n  - ./apps/web.env\n  - /opt/secrets.env\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-1gidama","Type":"NodeParagraph","Properties":{"id":"20230724013240-1gidama","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"环境变量文件中每一行必须符合格式，支持 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"#"},{"Type":"NodeText","Data":"​ 开头的注释行。"}]},{"ID":"20230724013240-2xvzjyi","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-2xvzjyi","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# common.env: Set development environment\nPROG_ENV=development\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-k8sva4c","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-k8sva4c","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"environment"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-uv7ba4k","Type":"NodeParagraph","Properties":{"id":"20230724013240-uv7ba4k","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"设置环境变量。你可以使用数组或字典两种格式。"}]},{"ID":"20230724013240-vwja4s8","Type":"NodeParagraph","Properties":{"id":"20230724013240-vwja4s8","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"只给定名称的变量会自动获取运行 Compose 主机上对应变量的值，可以用来防止泄露不必要的数据。"}]},{"ID":"20230724013240-ekg5zou","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-ekg5zou","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"environment:\n  RACK_ENV: development\n  SESSION_SECRET:\n\nenvironment:\n  - RACK_ENV=development\n  - SESSION_SECRET\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-x1gndng","Type":"NodeParagraph","Properties":{"id":"20230724013240-x1gndng","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"如果变量名称或者值中用到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"true|false，yes|no"},{"Type":"NodeText","Data":"​ 等表达 "},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://yaml.org/type/bool.html","TextMarkTextContent":"布尔"},{"Type":"NodeText","Data":" 含义的词汇，最好放到引号里，避免 YAML 自动解析某些内容为对应的布尔语义。这些特定词汇，包括"}]},{"ID":"20230724013240-ajrz2o4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-ajrz2o4","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"y|Y|yes|Yes|YES|n|N|no|No|NO|true|True|TRUE|false|False|FALSE|on|On|ON|off|Off|OFF\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-bwdosxo","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-bwdosxo","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"healthcheck"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-29a4y6a","Type":"NodeParagraph","Properties":{"id":"20230724013240-29a4y6a","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"通过命令检查容器是否健康运行。"}]},{"ID":"20230724013240-3ah2yhp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-3ah2yhp","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"healthcheck:\n  test: [\"CMD\", \"curl\", \"-f\", \"http://localhost\"]\n  interval: 1m30s\n  timeout: 10s\n  retries: 3\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-k6doo2z","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-k6doo2z","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"image"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-jn51khr","Type":"NodeParagraph","Properties":{"id":"20230724013240-jn51khr","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定为镜像名称或镜像 ID。如果镜像在本地不存在，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Compose"},{"Type":"NodeText","Data":"​ 将会尝试拉取这个镜像。"}]},{"ID":"20230724013240-7152pzb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-7152pzb","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"image: ubuntu\nimage: orchardup/postgresql\nimage: a4bc65fd\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-n0csadv","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-n0csadv","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"networks"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-tv54hml","Type":"NodeParagraph","Properties":{"id":"20230724013240-tv54hml","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"配置容器连接的网络。"}]},{"ID":"20230724013240-8rnn0cd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-8rnn0cd","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"version: \"3\"\nservices:\n\n  some-service:\n    networks:\n     - some-network\n     - other-network\n\nnetworks:\n  some-network:\n  other-network:\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-zyuevcq","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-zyuevcq","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ports"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-yk5j94h","Type":"NodeParagraph","Properties":{"id":"20230724013240-yk5j94h","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"暴露端口信息。"}]},{"ID":"20230724013240-39tsrcv","Type":"NodeParagraph","Properties":{"id":"20230724013240-39tsrcv","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"使用宿主端口：容器端口 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"(HOST:CONTAINER)"},{"Type":"NodeText","Data":"​ 格式，或者仅仅指定容器的端口（宿主将会随机选择端口）都可以。"}]},{"ID":"20230724013240-oih8n20","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-oih8n20","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"ports:\n - \"3000\"\n - \"8000:8000\"\n - \"49100:22\"\n - \"127.0.0.1:8001:8001\"\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-ohkizgg","Type":"NodeParagraph","Properties":{"id":"20230724013240-ohkizgg","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"em","TextMarkTextContent":"注意：当使用 "},{"Type":"NodeTextMark","TextMarkType":"em code","TextMarkTextContent":"HOST:CONTAINER"},{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"em","TextMarkTextContent":" 格式来映射端口时，如果你使用的容器端口小于 60 并且没放到引号里，可能会得到错误结果，因为 "},{"Type":"NodeTextMark","TextMarkType":"em code","TextMarkTextContent":"YAML"},{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"em","TextMarkTextContent":" 会自动解析 "},{"Type":"NodeTextMark","TextMarkType":"em code","TextMarkTextContent":"xx:yy"},{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"em","TextMarkTextContent":" 这种数字格式为 60 进制。为避免出现这种问题，建议数字串都采用引号包括起来的字符串格式。"}]},{"ID":"20230724013240-gz2wcuv","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-gz2wcuv","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"sysctls"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-n9kef1a","Type":"NodeParagraph","Properties":{"id":"20230724013240-n9kef1a","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"配置容器内核参数。"}]},{"ID":"20230724013240-pncm532","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-pncm532","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"sysctls:\n  net.core.somaxconn: 1024\n  net.ipv4.tcp_syncookies: 0\n\nsysctls:\n  - net.core.somaxconn=1024\n  - net.ipv4.tcp_syncookies=0\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-6pj4x6g","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-6pj4x6g","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ulimits"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-3yx660v","Type":"NodeParagraph","Properties":{"id":"20230724013240-3yx660v","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指定容器的 ulimits 限制值。"}]},{"ID":"20230724013240-vpoq0ff","Type":"NodeParagraph","Properties":{"id":"20230724013240-vpoq0ff","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"例如，指定最大进程数为 65535，指定文件句柄数为 20000（软限制，应用可以随时修改，不能超过硬限制） 和 40000（系统硬限制，只能 root 用户提高）。"}]},{"ID":"20230724013240-370ph7t","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-370ph7t","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"  ulimits:\n    nproc: 65535\n    nofile:\n      soft: 20000\n      hard: 40000\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-26skox1","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-26skox1","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"volumes"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-dcxvbwj","Type":"NodeParagraph","Properties":{"id":"20230724013240-dcxvbwj","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"数据卷所挂载路径设置。可以设置为宿主机路径("},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"HOST:CONTAINER"},{"Type":"NodeText","Data":"​)或者数据卷名称("},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"VOLUME:CONTAINER"},{"Type":"NodeText","Data":"​)，并且可以设置访问模式 （"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"HOST:CONTAINER:ro"},{"Type":"NodeText","Data":"​）。"}]},{"ID":"20230724013240-awhf2x2","Type":"NodeParagraph","Properties":{"id":"20230724013240-awhf2x2","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"该指令中路径支持相对路径。"}]},{"ID":"20230724013240-hi85u10","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-hi85u10","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"volumes:\n - /var/lib/mysql\n - cache/:/tmp/cache\n - ~/configs:/etc/configs/:ro\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-tl5zuul","Type":"NodeParagraph","Properties":{"id":"20230724013240-tl5zuul","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"如果路径为数据卷名称，必须在文件中配置数据卷。"}]},{"ID":"20230724013240-gnvhetc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-gnvhetc","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"version: \"3\"\n\nservices:\n  my_src:\n    image: mysql:8.0\n    volumes:\n      - mysql_data:/var/lib/mysql\n\nvolumes:\n  mysql_data:\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-lqc7dqc","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-lqc7dqc","updated":"20230724013240"}},{"ID":"20230724013240-7jx3ekr","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230724013240-7jx3ekr","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"12.5 docker-compose 常用命令"}]},{"ID":"20230724013240-d7mx843","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-d7mx843","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"1. 命令对象与格式"}]},{"ID":"20230724013240-tg26sx3","Type":"NodeParagraph","Properties":{"id":"20230724013240-tg26sx3","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"对于 Compose 来说，大部分命令的对象既可以是项目本身，也可以指定为项目中的服务或者容器。如果没有特别的说明，命令对象将是项目，这意味着项目中所有的服务都会受到命令影响。"}]},{"ID":"20230724013240-mbb1gnz","Type":"NodeParagraph","Properties":{"id":"20230724013240-mbb1gnz","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"执行 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose [COMMAND] --help"},{"Type":"NodeText","Data":"​ 或者 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose help [COMMAND]"},{"Type":"NodeText","Data":"​ 可以查看具体某个命令的使用格式。"}]},{"ID":"20230724013240-10ivkxi","Type":"NodeParagraph","Properties":{"id":"20230724013240-10ivkxi","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose"},{"Type":"NodeText","Data":"​ 命令的基本的使用格式是"}]},{"ID":"20230724013240-5eoqij8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-5eoqij8","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"docker-compose [-f=\u003carg\u003e...] [options] [COMMAND] [ARGS...]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-0wcfcv3","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-0wcfcv3","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"2. 命令选项"}]},{"ID":"20230724013240-3rnojjb","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-3rnojjb","updated":"20230724013240"},"Children":[{"ID":"20230724013240-xrcags4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-xrcags4","updated":"20230724013240"},"Children":[{"ID":"20230724013240-2otp2iy","Type":"NodeParagraph","Properties":{"id":"20230724013240-2otp2iy","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"-f, --file FILE"},{"Type":"NodeText","Data":"​ 指定使用的 Compose 模板文件，默认为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose.yml"},{"Type":"NodeText","Data":"​，可以多次指定。"}]}]},{"ID":"20230724013240-4o07etm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-4o07etm","updated":"20230724013240"},"Children":[{"ID":"20230724013240-kv96dnh","Type":"NodeParagraph","Properties":{"id":"20230724013240-kv96dnh","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"-p, --project-name NAME"},{"Type":"NodeText","Data":"​ 指定项目名称，默认将使用所在目录名称作为项目名。"}]}]},{"ID":"20230724013240-523kvpm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-523kvpm","updated":"20230724013240"},"Children":[{"ID":"20230724013240-nmsqmpw","Type":"NodeParagraph","Properties":{"id":"20230724013240-nmsqmpw","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--x-networking"},{"Type":"NodeText","Data":"​ 使用 Docker 的可拔插网络后端特性"}]}]},{"ID":"20230724013240-vs9lmzw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-vs9lmzw","updated":"20230724013240"},"Children":[{"ID":"20230724013240-4bid5fy","Type":"NodeParagraph","Properties":{"id":"20230724013240-4bid5fy","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--x-network-driver DRIVER"},{"Type":"NodeText","Data":"​ 指定网络后端的驱动，默认为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bridge"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20230724013240-01u5eie","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-01u5eie","updated":"20230724013240"},"Children":[{"ID":"20230724013240-5qmd044","Type":"NodeParagraph","Properties":{"id":"20230724013240-5qmd044","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--verbose"},{"Type":"NodeText","Data":"​ 输出更多调试信息。"}]}]},{"ID":"20230724013240-n99a35f","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-n99a35f","updated":"20230724013240"},"Children":[{"ID":"20230724013240-8xwvu88","Type":"NodeParagraph","Properties":{"id":"20230724013240-8xwvu88","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"-v, --version"},{"Type":"NodeText","Data":"​ 打印版本并退出。"}]}]}]},{"ID":"20230724013240-xkeqjr1","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-xkeqjr1","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"3.命令使用说明"}]},{"ID":"20230724013240-fz3lxe1","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-fz3lxe1","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"up"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-abg5fcw","Type":"NodeParagraph","Properties":{"id":"20230724013240-abg5fcw","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"格式为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose up [options] [SERVICE...]"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20230724013240-zyvyzr2","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-zyvyzr2","updated":"20230724013240"},"Children":[{"ID":"20230724013240-lwmlv8v","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-lwmlv8v","updated":"20230724013240"},"Children":[{"ID":"20230724013240-aagnqpa","Type":"NodeParagraph","Properties":{"id":"20230724013240-aagnqpa","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"该命令十分强大，它将尝试自动完成包括构建镜像，（重新）创建服务，启动服务，并关联服务相关容器的一系列操作。"}]}]},{"ID":"20230724013240-43s5yvn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-43s5yvn","updated":"20230724013240"},"Children":[{"ID":"20230724013240-8kfeho4","Type":"NodeParagraph","Properties":{"id":"20230724013240-8kfeho4","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"链接的服务都将会被自动启动，除非已经处于运行状态。"}]}]},{"ID":"20230724013240-ziadbrg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-ziadbrg","updated":"20230724013240"},"Children":[{"ID":"20230724013240-bp9nt4o","Type":"NodeParagraph","Properties":{"id":"20230724013240-bp9nt4o","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"可以说，大部分时候都可以直接通过该命令来启动一个项目。"}]}]},{"ID":"20230724013240-ly60e20","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-ly60e20","updated":"20230724013240"},"Children":[{"ID":"20230724013240-b5xzv9n","Type":"NodeParagraph","Properties":{"id":"20230724013240-b5xzv9n","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"默认情况，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose up"},{"Type":"NodeText","Data":"​ 启动的容器都在前台，控制台将会同时打印所有容器的输出信息，可以很方便进行调试。"}]}]},{"ID":"20230724013240-jxudzpl","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-jxudzpl","updated":"20230724013240"},"Children":[{"ID":"20230724013240-4ghl2sn","Type":"NodeParagraph","Properties":{"id":"20230724013240-4ghl2sn","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"当通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Ctrl-C"},{"Type":"NodeText","Data":"​ 停止命令时，所有容器将会停止。"}]}]},{"ID":"20230724013240-u9ftnt0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-u9ftnt0","updated":"20230724013240"},"Children":[{"ID":"20230724013240-pz503er","Type":"NodeParagraph","Properties":{"id":"20230724013240-pz503er","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"如果使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose up -d"},{"Type":"NodeText","Data":"​，将会在后台启动并运行所有的容器。一般推荐生产环境下使用该选项。"}]}]},{"ID":"20230724013240-mhxcvs3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-mhxcvs3","updated":"20230724013240"},"Children":[{"ID":"20230724013240-e521ecb","Type":"NodeParagraph","Properties":{"id":"20230724013240-e521ecb","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"默认情况，如果服务容器已经存在，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose up"},{"Type":"NodeText","Data":"​ 将会尝试停止容器，然后重新创建（保持使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"volumes-from"},{"Type":"NodeText","Data":"​ 挂载的卷），以保证新启动的服务匹配 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose.yml"},{"Type":"NodeText","Data":"​ 文件的最新内容"}]}]}]},{"ID":"20230724013240-4mj1n6x","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-4mj1n6x","updated":"20230724013240"}},{"ID":"20230724013240-zqhbc2u","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-zqhbc2u","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"down"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-1bofa4s","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-1bofa4s","updated":"20230724013240"},"Children":[{"ID":"20230724013240-p0bq8lp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-p0bq8lp","updated":"20230724013240"},"Children":[{"ID":"20230724013240-8fk6whq","Type":"NodeParagraph","Properties":{"id":"20230724013240-8fk6whq","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"此命令将会停止 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"up"},{"Type":"NodeText","Data":"​ 命令所启动的容器，并移除网络"}]}]}]},{"ID":"20230724013240-cfsre4a","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-cfsre4a","updated":"20230724013240"}},{"ID":"20230724013240-v21y6mr","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-v21y6mr","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"exec"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-94atrwl","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-94atrwl","updated":"20230724013240"},"Children":[{"ID":"20230724013240-z9t6qtw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-z9t6qtw","updated":"20230724013240"},"Children":[{"ID":"20230724013240-3btduqz","Type":"NodeParagraph","Properties":{"id":"20230724013240-3btduqz","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"进入指定的容器。"}]}]}]},{"ID":"20230724013240-vefnvi4","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-vefnvi4","updated":"20230724013240"}},{"ID":"20230724013240-jgw0zvq","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-jgw0zvq","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ps"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-dz5uarp","Type":"NodeParagraph","Properties":{"id":"20230724013240-dz5uarp","updated":"20230724013354"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"格式为"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose ps [options] [SERVICE...]"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20230724013240-5fp52kc","Type":"NodeParagraph","Properties":{"id":"20230724013240-5fp52kc","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"列出项目中目前的所有容器。"}]},{"ID":"20230724013240-dxr0wnv","Type":"NodeParagraph","Properties":{"id":"20230724013240-dxr0wnv","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"选项："}]},{"ID":"20230724013240-tnxmaw3","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-tnxmaw3","updated":"20230724013240"},"Children":[{"ID":"20230724013240-dt3jrdn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-dt3jrdn","updated":"20230724013240"},"Children":[{"ID":"20230724013240-xec4z22","Type":"NodeParagraph","Properties":{"id":"20230724013240-xec4z22","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"-q"},{"Type":"NodeText","Data":"​ 只打印容器的 ID 信息。"}]}]}]},{"ID":"20230724013240-2toxe7p","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-2toxe7p","updated":"20230724013240"}},{"ID":"20230724013240-6ahyfdi","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-6ahyfdi","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"restart"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-imhxln4","Type":"NodeParagraph","Properties":{"id":"20230724013240-imhxln4","updated":"20230724013351"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"格式为"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose restart [options] [SERVICE...]"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20230724013240-e9expf9","Type":"NodeParagraph","Properties":{"id":"20230724013240-e9expf9","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"重启项目中的服务。"}]},{"ID":"20230724013240-j5v65i5","Type":"NodeParagraph","Properties":{"id":"20230724013240-j5v65i5","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"选项："}]},{"ID":"20230724013240-if8h8hs","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-if8h8hs","updated":"20230724013240"},"Children":[{"ID":"20230724013240-hsqhgws","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-hsqhgws","updated":"20230724013240"},"Children":[{"ID":"20230724013240-8r058b7","Type":"NodeParagraph","Properties":{"id":"20230724013240-8r058b7","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"-t, --timeout TIMEOUT"},{"Type":"NodeText","Data":"​ 指定重启前停止容器的超时（默认为 10 秒）。"}]}]}]},{"ID":"20230724013240-s939qj1","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-s939qj1","updated":"20230724013240"}},{"ID":"20230724013240-x507sog","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-x507sog","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"rm"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-sl81wfo","Type":"NodeParagraph","Properties":{"id":"20230724013240-sl81wfo","updated":"20230724013346"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"格式为"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose rm [options] [SERVICE...]"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20230724013240-ugc8c7k","Type":"NodeParagraph","Properties":{"id":"20230724013240-ugc8c7k","updated":"20230724013349"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"删除所有（停止状态的）服务容器。推荐先执行"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose stop"},{"Type":"NodeText","Data":"​ 命令来停止容器。"}]},{"ID":"20230724013240-d9m5hc7","Type":"NodeParagraph","Properties":{"id":"20230724013240-d9m5hc7","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"选项："}]},{"ID":"20230724013240-um5k3j7","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-um5k3j7","updated":"20230724013240"},"Children":[{"ID":"20230724013240-4qyuzji","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-4qyuzji","updated":"20230724013240"},"Children":[{"ID":"20230724013240-f5ul2s3","Type":"NodeParagraph","Properties":{"id":"20230724013240-f5ul2s3","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"-f, --force"},{"Type":"NodeText","Data":"​ 强制直接删除，包括非停止状态的容器。一般尽量不要使用该选项。"}]}]},{"ID":"20230724013240-ljy3ibr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-ljy3ibr","updated":"20230724013240"},"Children":[{"ID":"20230724013240-c14vo04","Type":"NodeParagraph","Properties":{"id":"20230724013240-c14vo04","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"-v"},{"Type":"NodeText","Data":"​ 删除容器所挂载的数据卷。"}]}]}]},{"ID":"20230724013240-krbothm","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-krbothm","updated":"20230724013240"}},{"ID":"20230724013240-mt1tjea","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-mt1tjea","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"start"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-h4jhdpz","Type":"NodeParagraph","Properties":{"id":"20230724013240-h4jhdpz","updated":"20230724013344"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"格式为"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose start [SERVICE...]"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20230724013240-qpn8r66","Type":"NodeParagraph","Properties":{"id":"20230724013240-qpn8r66","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"启动已经存在的服务容器。"}]},{"ID":"20230724013240-v38roc3","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-v38roc3","updated":"20230724013240"}},{"ID":"20230724013240-s01bwjn","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-s01bwjn","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"stop"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-coltyij","Type":"NodeParagraph","Properties":{"id":"20230724013240-coltyij","updated":"20230724013339"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"格式为"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose stop [options] [SERVICE...]"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20230724013240-tdkttnl","Type":"NodeParagraph","Properties":{"id":"20230724013240-tdkttnl","updated":"20230724013341"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"停止已经处于运行状态的容器，但不删除它。通过"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose start"},{"Type":"NodeText","Data":"​ 可以再次启动这些容器。"}]},{"ID":"20230724013240-ads9wqi","Type":"NodeParagraph","Properties":{"id":"20230724013240-ads9wqi","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"选项："}]},{"ID":"20230724013240-ffz75z3","Type":"NodeList","ListData":{},"Properties":{"id":"20230724013240-ffz75z3","updated":"20230724013240"},"Children":[{"ID":"20230724013240-tful0gw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230724013240-tful0gw","updated":"20230724013240"},"Children":[{"ID":"20230724013240-i8hfy1g","Type":"NodeParagraph","Properties":{"id":"20230724013240-i8hfy1g","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"-t, --timeout TIMEOUT"},{"Type":"NodeText","Data":"​ 停止容器时候的超时（默认为 10 秒）。"}]}]}]},{"ID":"20230724013240-dlwr1ip","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-dlwr1ip","updated":"20230724013240"}},{"ID":"20230724013240-mtqpg7u","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-mtqpg7u","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"top"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-cjuaut0","Type":"NodeParagraph","Properties":{"id":"20230724013240-cjuaut0","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"查看各个服务容器内运行的进程。"}]},{"ID":"20230724013240-qb18efr","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-qb18efr","updated":"20230724013240"}},{"ID":"20230724013240-sn7cdq9","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230724013240-sn7cdq9","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"unpause"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230724013240-bq6lllm","Type":"NodeParagraph","Properties":{"id":"20230724013240-bq6lllm","updated":"20230724013329"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"格式为"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose unpause [SERVICE...]"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20230724013240-5m4tip9","Type":"NodeParagraph","Properties":{"id":"20230724013240-5m4tip9","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"恢复处于暂停状态中的服务。"}]},{"ID":"20230724013240-bielk95","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-bielk95","updated":"20230724013240"}},{"ID":"20230724013240-o3rmr7j","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230724013240-o3rmr7j","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"13.docker可视化工具"}]},{"ID":"20230724013240-o80evh7","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-o80evh7","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"13.1 安装Portainer"}]},{"ID":"20230724013240-msed3hj","Type":"NodeParagraph","Properties":{"id":"20230724013240-msed3hj","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"官方安装说明："},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"http://www.yunweipai.com/go?_=8fe4813824aHR0cHM6Ly93d3cucG9ydGFpbmVyLmlvL2luc3RhbGxhdGlvbi8=","TextMarkTextContent":"https://www.portainer.io/installation/"}]},{"ID":"20230724013240-xzutwhi","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230724013240-xzutwhi","updated":"20230724013240"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"[root@ubuntu1804 ~]#docker pull  portainer/portainer\n\n[root@ubuntu1804 ~]#docker volume create portainer_data\nportainer_data\n[root@ubuntu1804 ~]#docker run -d -p 8000:8000 -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer\n20db26b67b791648c2ef6aee444a5226a9c897ebcf0160050e722dbf4a4906e3\n[root@ubuntu1804 ~]#docker ps \nCONTAINER ID        IMAGE                 COMMAND             CREATED             STATUS              PORTS                                            NAMES\n20db26b67b79        portainer/portainer   \"/portainer\"        5 seconds ago       Up 4 seconds        0.0.0.0:8000-\u003e8000/tcp, 0.0.0.0:9000-\u003e9000/tcp   portainer\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230724013240-ru2p5wf","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230724013240-ru2p5wf","updated":"20230724013240"},"Children":[{"Type":"NodeText","Data":"13.2 登录和使用Portainer"}]},{"ID":"20230724013240-t8baegm","Type":"NodeBlockquote","Properties":{"id":"20230724013240-t8baegm","updated":"20230724013240"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20230724013240-5lv1ng0","Type":"NodeParagraph","Properties":{"id":"20230724013240-5lv1ng0","updated":"20230724013240"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"用浏览器访问："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:9000"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20230724013240-57zka3r","Type":"NodeThematicBreak","Properties":{"id":"20230724013240-57zka3r","updated":"20230724013240"}}]}